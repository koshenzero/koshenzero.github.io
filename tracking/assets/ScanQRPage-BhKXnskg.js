import{w as I,r as h,j as e}from"./index-CEuIzQF6.js";import{z as N}from"./index-BbSNCNyI.js";import{a as q,b as D,p as S}from"./api-BfBva5oo.js";import{M as c}from"./DefaultLayout-hw1nnULZ.js";import{b,a as C}from"./index.es-CvT3HhZV.js";import{C as E}from"./CCol-Cj_yAkpZ.js";import{C as o}from"./CRow-D-0kM1GJ.js";import{C as i}from"./CCardText-BC4Omq8-.js";import"./cil-user-Ddrdy7PS.js";const F=({setToast:l})=>{let[u,w]=I();const[n,x]=h.useState({}),[t,d]=h.useState({});h.useEffect(()=>{var r=u.get("type"),a=u.get("id");(!(t!=null&&t.EquipmentID)||!(n!=null&&n.AreaID))&&p(r,a)},[]);const v=()=>{var r=localStorage.getItem("user");if(!r)return navigate("/pages/login");var a=JSON.parse(r).data;S(a.UserID,a.UserName,t.EquipmentID,n.AreaID).then(s=>{s.error?l(c(!0,"Error",s.error.response.data.message)):(l(c(!1,"Success","EquipmentBay has been updated")),d({}),x({}))})},A=r=>{p(f(r,"type"),f(r,"id"))},p=(r,a)=>{a&&((r==null?void 0:r.toLowerCase())==="area"?(console.log("area"),q(a).then(s=>{if(s.error){l(c(!0,"Error",s.error.response.data.message));return}x(s.data.data)})):(r==null?void 0:r.toLowerCase())==="equipment"&&(console.log("equipment"),D(a).then(s=>{if(s.error){l(c(!0,"Error",s.error.response.data.message));return}d(s.data.data)})))};function f(r,a){for(var s=r.split("?"),g=s[1].split("&"),m=0;m<g.length;m++){var j=g[m].split("=");if(j[0].toLowerCase()==a)return j[1]}return!1}return e.jsxs(b,{className:"row g-3",style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:[e.jsxs(E,{xs:6,children:[e.jsx("h3",{children:"Equipment"}),e.jsx(o,{children:e.jsxs(i,{children:[e.jsx("strong",{children:"ModelName:"})," ",t.ModelName]})}),e.jsx(o,{children:e.jsxs(i,{children:[e.jsx("strong",{children:"ChassisNo:"})," ",t.ChassisNo]})}),e.jsx(o,{children:e.jsxs(i,{children:[e.jsx("strong",{children:"FALabelName:"})," ",t.FALabelName]})})]}),e.jsxs(E,{xs:6,children:[e.jsx("h3",{children:"Area"}),e.jsx(o,{children:e.jsxs(i,{children:[e.jsx("strong",{children:"AreaCode:"})," ",n.AreaCode]})}),e.jsx(o,{children:e.jsxs(i,{children:[e.jsx("strong",{children:"AreaName:"})," ",n.AreaName]})}),e.jsx(o,{children:e.jsxs(i,{children:[e.jsx("strong",{children:"Description:"})," ",n.Description]})})]}),t.EquipmentID&&n.AreaID?e.jsxs("div",{className:"d-flex flex-row justify-content-center fluid",children:[e.jsx(C,{style:{width:"fit-content",margin:"1rem"},variant:"outline",role:"button",color:"danger",onClick:()=>{d({})},children:"Scan another equipment QR"}),e.jsx(C,{style:{width:"fit-content",margin:"1rem"},variant:"outline",role:"button",color:"success",onClick:()=>v(),children:"Add"})]}):e.jsx("div",{style:{marginTop:"50px"},children:e.jsx(o,{children:e.jsx(N,{onResult:r=>A(r),onError:r=>console.log(r==null?void 0:r.message)})})})]})};export{F as default};
