import{n as S,l as k,o as f,r,j as t}from"./index-Df67LvnZ.js";import{Z as M}from"./index-Dntgz-Jr.js";import{f as m,S as P}from"./api-D0CI0FXg.js";import{r as j,h as l,M as p}from"./DefaultLayout-ChSX5Qog.js";import{B as A,d as N}from"./ButtonOfList-CQegefUu.js";import{u as B,a as b,d as R,M as v}from"./index.esm-DQwAVOjC.js";import{b as w}from"./index.es-GiY7mkae.js";import"./styled-GyNyOFDO.js";import"./TextField-CGQe4LUV.js";import"./Box-ClPNTXLH.js";const $=({setToast:n})=>{const i=S(),o=k(),g=f(e=>e.branchList),d=f(e=>e.permission),[a,h]=r.useState({IsView:0,IsUpdate:0,IsDelete:0,IsInsert:0});r.useEffect(()=>{m("",-100,1,1e4).then(e=>{i({type:"set",branchList:e.data.data})})},[]),r.useEffect(()=>{h(d.find(e=>e.ModuleID===j.id))},[d]);const I=r.useMemo(()=>[{accessorKey:"ParkingCode",header:"Branch Code"},{accessorKey:"ParkingName",header:"Branch Name"},{accessorKey:"Address",header:"Address"}],[]),x=e=>{window.confirm("Are you sure you want to delete this parking slot?")&&y(e.original.ParkingID)},y=e=>{var s=localStorage.getItem("user");if(s==null)return o("/pages/login");JSON.parse(s).data,e&&P(e).then(u=>{u.error?n(p(!0,"Error",u.error.response.data.message)):(m("",0,0,-100).then(D=>{i({type:"set",areaList:D.data.data})}),n(p(!1,"Success","Parking slot have been deleted")))})},c=e=>{o(typeof e=="string"?"edit/0":`edit/${e.original.ParkingID}`)};M({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0});const C=B({columns:I,data:g,renderTopToolbarCustomActions:({table:e})=>t.jsx("div",{className:l(a==null?void 0:a.IsInsert),children:t.jsx(A,{text:"Insert",callback:()=>c("edit")})}),enableGlobalFilter:!1,enableRowActions:!((a==null?void 0:a.IsUpdate)===0&&(a==null?void 0:a.IsDelete)===0),enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,muiTablePaperProps:{elevation:0,sx:{borderRadius:"1"}},muiTableBodyProps:{sx:{"& tr:nth-of-type(odd) > td":{backgroundColor:"#f5f5f5"}}},renderRowActionMenuItems:({closeMenu:e,row:s})=>[t.jsxs(b,{className:l(a==null?void 0:a.IsUpdate),onClick:()=>{c(s),e()},children:[t.jsx(R,{}),"Edit"]},0),t.jsxs(b,{className:l(a==null?void 0:a.IsDelete),onClick:()=>{x(s),e()},children:[t.jsx(N,{}),"Delete"]},1)]});return t.jsx(w,{fluid:!0,children:t.jsx(v,{table:C})})};export{$ as default};
