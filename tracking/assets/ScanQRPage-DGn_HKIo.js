import{w as I,r as l,j as e}from"./index-pz5DZ_Hq.js";import{z as D}from"./index-BsWCUFtH.js";import{a as N,b as q,p as S}from"./api-DvYNXHtY.js";import{M as d}from"./DefaultLayout-D3T0GNCh.js";import{b,a as C}from"./index.es-B6xqZEbT.js";import{C as E}from"./CCol-DHNNho6t.js";import{C as a}from"./CRow-CL5cGoEZ.js";import{C as o}from"./CCardText-DEyiuYcN.js";import"./cil-user-Ddrdy7PS.js";const F=({setToast:c})=>{let[u,w]=I();l.useState(void 0),l.useState(void 0);const[t,x]=l.useState({}),[s,h]=l.useState({});l.useEffect(()=>{var r=u.get("type"),i=u.get("id");(!(s!=null&&s.EquipmentID)||!(t!=null&&t.AreaID))&&j(r,i)},[]),l.useEffect(()=>{},[s,t]);const v=()=>{var r=localStorage.getItem("user");if(!r)return navigate("/pages/login");var i=JSON.parse(r).data;S(i.UserID,i.UserName,s.EquipmentID,t.AreaID).then(n=>{n.error?c(d(!0,"Error",n.error.response.data.message)):(c(d(!0,"Success","EquipmentBay has been updated")),h({}),x({}))})},A=r=>{j(g(r,"type"),g(r,"id"))},j=(r,i)=>{i&&((r==null?void 0:r.toLowerCase())==="area"?(console.log("area"),N(i).then(n=>{if(n.error){c(d(!0,"Error",n.error.response.data.message));return}x(n.data.data)})):(r==null?void 0:r.toLowerCase())==="equipment"&&(console.log("equipment"),q(i).then(n=>{if(n.error){c(d(!0,"Error",n.error.response.data.message));return}h(n.data.data)})))};function g(r,i){for(var n=r.split("?"),p=n[1].split("&"),m=0;m<p.length;m++){var f=p[m].split("=");if(f[0].toLowerCase()==i)return f[1]}return!1}return e.jsxs(b,{className:"row g-3",style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:[e.jsxs(E,{xs:6,children:[e.jsx("h3",{children:"Equipment"}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"EquipmentID:"})," ",s.EquipmentID]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"ChassisNo:"})," ",s.ChassisNo]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"ModelName:"})," ",s.ModelName]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"ETC:"})," ",s.ETC]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"FALabelName:"})," ",s.FALabelName]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"MastNumber:"})," ",s.MastNumber]})})]}),e.jsxs(E,{xs:6,children:[e.jsx("h3",{children:"Area"}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"AreaID:"})," ",t.AreaID]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"AreaCode:"})," ",t.AreaCode]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"AreaName:"})," ",t.AreaName]})}),e.jsx(a,{children:e.jsxs(o,{children:[e.jsx("strong",{children:"Description:"})," ",t.Description]})})]}),s.EquipmentID&&t.AreaID?e.jsxs("div",{className:"d-flex flex-row justify-content-center fluid",children:[e.jsx(C,{style:{width:"fit-content",margin:"1rem"},variant:"outline",role:"button",color:"danger",onClick:()=>{h({})},children:"Scan another equipment QR"}),e.jsx(C,{style:{width:"fit-content",margin:"1rem"},variant:"outline",role:"button",color:"success",onClick:()=>v(),children:"Add"})]}):e.jsx("div",{style:{marginTop:"50px"},children:e.jsx(a,{children:e.jsx(D,{onResult:r=>A(r),onError:r=>console.log(r==null?void 0:r.message)})})})]})};export{F as default};
