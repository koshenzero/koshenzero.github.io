import{w as q,n as x,o as m,r as i,j as t}from"./index-Df67LvnZ.js";import{Z as E,G as j,I as M}from"./index-Dntgz-Jr.js";import{i as L,j as u,k as S}from"./api-D0CI0FXg.js";import{u as k,M as D}from"./index.esm-DQwAVOjC.js";import{b as c,d as I,a as R}from"./index.es-GiY7mkae.js";import{C as T}from"./CRow-DtrdDwyb.js";import{A,T as B}from"./TextField-CGQe4LUV.js";import"./styled-GyNyOFDO.js";import"./Box-ClPNTXLH.js";import"./DefaultLayout-ChSX5Qog.js";const Q=({setToast:p})=>{let[f,K]=q(),r=f.get("equipmentqr");const o=x(),n=m(e=>e.equipmentsBayList),h=m(e=>e.equipmentList),[C,l]=i.useState("");i.useEffect(()=>{L("",1,1,1e4).then(e=>{if(!e.error){if(o({type:"set",equipmentList:e.data.data}),r!=null){let a=e.data.data.find(s=>s.EquipmentCode==r).EquipmentID;l(r),u("",a,0,0,0,-100,1,1e4).then(s=>{if(!s.error){o({type:"set",equipmentsBayList:s.data.data});return}})}return}p(MyAlert(!0,"Error",e.error.response.data.message))})},[]);const b=i.useMemo(()=>[{accessorKey:"EquipmentCode",header:"Equipment QR"},{accessorKey:"ModelName",header:"Equipment Model"},{accessorKey:"ChassisNo",header:"Chassis No"},{accessorKey:"AreaCode",header:"Current Bay"},{accessorKey:"Date_In",header:"Parked date",Cell:({cell:e})=>t.jsx("span",{children:S(e.getValue()).format("DD/MM/YYYY hh:mm")})},{accessorKey:"UserName_In",header:"Parked By"}],[]),d=E({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),y=()=>{const e=j(d)(n);M(d)(e)},g=k({columns:b,data:n,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,renderTopToolbarCustomActions:({table:e})=>t.jsx(R,{onClick:y,children:"Export"})});return t.jsxs(c,{style:{background:"#fff",padding:12,borderRadius:4},fluid:!0,children:[t.jsx(T,{className:"mb-3",children:t.jsx(I,{xs:12,children:t.jsx(A,{id:"size-small-standard",size:"small",inputValue:C,options:h,getOptionLabel:e=>e.EquipmentCode,onInputChange:(e,a)=>{a!=""&&l(a)},onChange:(e,a)=>{u("",a==null?void 0:a.EquipmentID,0,0,0,-100,1,1e4).then(s=>{if(!s.error){o({type:"set",equipmentsBayList:s.data.data});return}})},renderInput:e=>t.jsx(B,{...e,label:"Equiment",placeholder:"Equiment"})})})}),t.jsx(c,{style:{background:"#fff",padding:12,borderRadius:4},className:"row g-3",fluid:!0,children:t.jsx(D,{full:!0,table:g})})]})};export{Q as default};
