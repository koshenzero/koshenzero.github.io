import{n as y,o as S,l as j,r as u,j as a}from"./index-pz5DZ_Hq.js";import{Z as P,u as w,M as I,a as g,d as A,G as v,I as K}from"./index.esm-BspfDtIu.js";import{e as f,J as M}from"./api-DvYNXHtY.js";import{M as p}from"./DefaultLayout-D3T0GNCh.js";import{F as E,f as L,a as N}from"./index-4fg5yqhO.js";import{d as R}from"./DeleteForever-CHR-Lpkz.js";import{C as T}from"./CCol-DHNNho6t.js";import{b as o,a as m}from"./index.es-B6xqZEbT.js";import"./TextField-0e-iSCTa.js";import"./cil-user-Ddrdy7PS.js";const O=({setToast:n})=>{const i=y(),s=S(e=>e.parkingSlotList),r=j();u.useEffect(()=>{f("",-100,1,1e4).then(e=>{i({type:"set",parkingSlotList:e.data.data})})},[]);const h=u.useMemo(()=>[{accessorKey:"ParkingID",header:"ParkingID",size:50},{accessorKey:"ParkingCode",header:"ParkingCode"},{accessorKey:"ParkingName",header:"ParkingName"},{accessorKey:"Address",header:"Address"},{accessorKey:"StatusID",header:"StatusID",Cell:({cell:e})=>a.jsxs(T,{children:[a.jsx(E,{icon:e.getValue()==0?L:N,style:e.getValue()==0?{color:"red"}:{color:"green"},size:"lg"}),a.jsx("span",{children:" "}),"Active"]})},{accessorKey:"Description",header:"Description"},{accessorKey:"DateCreated",header:"DateCreated",Cell:({cell:e})=>new Date(e.getValue()).toLocaleDateString("en-us")},{accessorKey:"DateUpdated",header:"DateUpdated",Cell:({cell:e})=>new Date(e.getValue()).toLocaleDateString("en-us")}],[]),C=e=>{window.confirm("Are you sure you want to delete this parking slot?")&&x(e.original.ParkingID)},x=e=>{var t=localStorage.getItem("user");if(t==null)return r("/pages/login");JSON.parse(t).data,e&&M(e).then(d=>{d.error?n(p(!0,"Error",d.error.response.data.message)):(f("",0,0,-100).then(k=>{i({type:"set",areaList:k.data.data})}),n(p(!1,"Success","Parking slot have been deleted")))})},l=e=>{r(typeof e=="string"?"edit/0":`edit/${e.original.ParkingID}`)},c=P({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),D=()=>{const e=v(c)(s);K(c)(e)},b=w({columns:h,data:s,renderTopToolbarCustomActions:({table:e})=>a.jsxs(o,{className:"d-flex flex-row justify-content-between",fluid:!0,children:[a.jsx(m,{style:{width:"fit-content"},variant:"outline",role:"button",color:"success",onClick:()=>l("edit"),children:"Add "}),a.jsx(m,{style:{width:"fit-content"},variant:"outline",role:"button",color:"primary",onClick:D,children:"Export "})]}),enableRowActions:!0,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,muiTablePaperProps:{elevation:0,sx:{borderRadius:"1"}},renderRowActionMenuItems:({closeMenu:e,row:t})=>[a.jsxs(g,{onClick:()=>{l(t),e()},children:[a.jsx(A,{}),"Edit"]},0),a.jsxs(g,{onClick:()=>{C(t),e()},children:[a.jsx(R,{}),"Delete"]},1)]});return a.jsx(o,{fluid:!0,children:s.length==0?a.jsx(o,{children:" No Data "}):a.jsx(I,{table:b})})};export{O as default};
