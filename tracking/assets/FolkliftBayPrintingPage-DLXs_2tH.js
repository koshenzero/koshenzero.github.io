import{r as a,j as t}from"./index-Df67LvnZ.js";import{f as R,o as q,q as x,r as N}from"./api-D0CI0FXg.js";import{M as T}from"./MyPrinter-CD7V3nOb.js";import{M as b,C as z}from"./DefaultLayout-ChSX5Qog.js";import{b as M,d,a as V}from"./index.es-GiY7mkae.js";import{C as $}from"./CRow-DtrdDwyb.js";import{A as o,T as c}from"./TextField-CGQe4LUV.js";import"./styled-GyNyOFDO.js";const X=({setToast:m})=>{const h=a.useRef(),[j,A]=a.useState([]),[g,C]=a.useState(0),[P,p]=a.useState([]),[I,D]=a.useState([]),[k,y]=a.useState([]),[E,B]=a.useState([]),[s,L]=a.useState(null),[n,f]=a.useState(null),[l,u]=a.useState(null),[S,i]=a.useState(null);a.useEffect(()=>{R("",-100,1,1e4).then(e=>{e.error?m(b(!0,"Error",e.error.response.data.message)):p(e.data.data)})},[]);const O=()=>{N(S).then(e=>{if(e.error){m(b(!0,"Error",e.error.response.data.message));return}A(e.data.data)}),C(g+1)};return a.useEffect(()=>{s&&q("",0,s.ParkingID,-100,1,1e4).then(e=>{D(e.data.data.filter(r=>!r.IsParent&&r.ParkingID===s.ParkingID))})},[s]),a.useEffect(()=>{n&&x(n.AreaID).then(e=>{y(e.data)})},[n]),a.useEffect(()=>{l&&x(l.AreaID).then(e=>{B(e.data)})},[l]),t.jsxs(M,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},fluid:!0,children:[t.jsxs($,{children:[t.jsx(d,{xs:6,children:t.jsx(o,{size:"small",disablePortal:!0,disableClearable:!0,id:"cbParking",value:s,onChange:(e,r)=>{L(r),f(null),u(null),i(null)},options:P,getOptionLabel:e=>`${e.ParkingName}`,isOptionEqualToValue:(e,r)=>(e==null?void 0:e.ParkingID)===(r==null?void 0:r.ParkingID),renderInput:e=>t.jsx(c,{...e,label:"Branch"})})}),t.jsx(d,{xs:6,children:t.jsx(o,{size:"small",disablePortal:!0,disableClearable:!0,id:"cbArea",value:n,onChange:(e,r)=>{f(r),u(null),i(null)},options:I,getOptionLabel:e=>`${e.AreaCode}`,isOptionEqualToValue:(e,r)=>(e==null?void 0:e.AreaID)===(r==null?void 0:r.AreaID),renderInput:e=>t.jsx(c,{...e,label:"Area"})})}),t.jsx("div",{className:"mt-3",children:" "}),t.jsx(d,{xs:6,children:t.jsx(o,{size:"small",disablePortal:!0,disableClearable:!0,id:"cbDepartment",value:l,onChange:(e,r)=>{u(r),i(null)},options:k,getOptionLabel:e=>`${e.AreaCode}`,isOptionEqualToValue:(e,r)=>(e==null?void 0:e.AreaID)===(r==null?void 0:r.AreaID),renderInput:e=>t.jsx(c,{...e,label:"Department"})})}),t.jsx(d,{xs:6,children:t.jsx(o,{className:"mb-3",size:"small",disablePortal:!0,id:"cbArea",onChange:(e,r)=>{i(r==null?void 0:r.AreaID)},options:E,groupBy:e=>e==null?void 0:e.IsParentName,getOptionLabel:e=>`${e.AreaName}`,isOptionEqualToValue:(e,r)=>(e==null?void 0:e.AreaID)===(r==null?void 0:r.AreaID),renderInput:e=>t.jsx(c,{...e,label:"Bay"}),renderGroup:e=>t.jsxs("div",{children:[t.jsx(z,{children:t.jsx("strong",{children:e.group})}),e.children]},e.key)})})]}),t.jsx("div",{class:"d-flex justify-content-center",children:t.jsx(V,{color:"primary",onClick:O,children:"Print"})}),t.jsx(T,{ref:h,qrList:j,printCount:g})]})};export{X as default};
