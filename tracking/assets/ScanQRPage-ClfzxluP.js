import{w as q,r as i,j as e}from"./index-Df67LvnZ.js";import{z as D}from"./index-D1U7uJ5r.js";import{c as w,d as M,p as k}from"./api-D0CI0FXg.js";import{M as d}from"./DefaultLayout-ChSX5Qog.js";import{b as y,d as f,a as I}from"./index.es-GiY7mkae.js";import{C as o}from"./CRow-DtrdDwyb.js";import{C as l}from"./CCardText-x8S5tsm_.js";import{C as B}from"./CFormCheck-Bqq75Q6c.js";import"./CFormLabel-U7mi1tVG.js";const G=({setToast:c})=>{let[x,R]=q();const[n,p]=i.useState({}),[t,m]=i.useState({}),[S,g]=i.useState(!1),[u,A]=i.useState(!1);i.useEffect(()=>{var r=x.get("type"),a=x.get("id");(!(t!=null&&t.EquipmentID)||!(n!=null&&n.AreaID))&&j(r,a)},[]);const N=()=>{var r=localStorage.getItem("user");if(!r)return navigate("/pages/login");var a=JSON.parse(r).data;k(a.UserID,a.UserName,t.EquipmentID,n.AreaID,u).then(s=>{s.error?c(d(!0,"Error",s.error.response.data.message)):(c(d(!1,"Success","EquipmentBay has been updated")),g(!1),m({}),p({}))})},b=r=>{j(C(r,"type"),C(r,"id"))},j=(r,a)=>{a&&((r==null?void 0:r.toLowerCase())==="area"?(console.log("area"),w(a).then(s=>{if(s.error){c(d(!0,"Error",s.error.response.data.message));return}p(s.data.data)})):(r==null?void 0:r.toLowerCase())==="equipment"&&(console.log("equipment"),M(a).then(s=>{if(s.error){c(d(!0,"Error",s.error.response.data.message));return}m(s.data.data),g(s.data.data.IsBay)})))};function C(r,a){for(var s=r.split("?"),v=s[1].split("&"),h=0;h<v.length;h++){var E=v[h].split("=");if(E[0].toLowerCase()==a)return E[1]}return!1}return e.jsxs(y,{className:"row g-3",style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:[e.jsxs(f,{xs:6,children:[e.jsx("h3",{children:"Equipment"}),e.jsx(o,{children:e.jsxs(l,{children:[e.jsx("strong",{children:"ModelName:"})," ",t.ModelName]})}),e.jsx(o,{children:e.jsxs(l,{children:[e.jsx("strong",{children:"ChassisNo:"})," ",t.ChassisNo]})}),e.jsx(o,{children:e.jsxs(l,{children:[e.jsx("strong",{children:"FALabelName:"})," ",t.FALabelName]})})]}),e.jsxs(f,{xs:6,children:[e.jsx("h3",{children:"Area"}),e.jsx(o,{children:e.jsxs(l,{children:[e.jsx("strong",{children:"AreaCode:"})," ",n.AreaCode]})}),e.jsx(o,{children:e.jsxs(l,{children:[e.jsx("strong",{children:"AreaName:"})," ",n.AreaName]})})]}),S?e.jsx(f,{className:"d-flex align-items-center input-group-lg",children:e.jsx(B,{id:"flexCheckDefault",label:"Move to another bay",defaultChecked:u,onClick:()=>{A(!u)}})}):e.jsx("span",{}),t.EquipmentID&&n.AreaID?e.jsxs("div",{className:"d-flex flex-row justify-content-center fluid",children:[e.jsx(I,{style:{width:"fit-content",margin:"1rem"},variant:"outline",role:"button",color:"danger",onClick:()=>{m({})},children:"Scan another equipment QR"}),e.jsx(I,{style:{width:"fit-content",margin:"1rem"},variant:"outline",role:"button",color:"success",onClick:()=>N(),children:"Add"})]}):e.jsx("div",{style:{marginTop:"50px"},children:e.jsx(o,{children:e.jsx(D,{onResult:r=>b(r),onError:r=>console.log(r==null?void 0:r.message)})})})]})};export{G as default};
