import{n as F,o as H,l as L,r as t,j as s}from"./index-CpNJ6ZVU.js";import{Z as z,u as x,M as C,a as u,d as y,G as B,I as O}from"./index.esm-D0LwprAU.js";import{y as j,z as _,A as G,B as J}from"./api-BVwJHRoD.js";import{d as $}from"./DeleteForever-B465Rd-p.js";import{D as P,M as D}from"./DefaultLayout-t0UtGZNy.js";import{F as M,f as I,a as S}from"./index-CPMxQ1nI.js";import{C as i}from"./CCol-Kho4-ZsH.js";import{b as m,a as n}from"./index.es-CiFilu0v.js";import{C as X,a as Z,b as q,c as Q,d as W}from"./CModalTitle-UgXJmyET.js";import"./TextField-Bk2duZ4z.js";import"./cil-user-Ddrdy7PS.js";const ue=({setToast:h})=>{const f=F(),c=H(e=>e.userList),l=L(),[U,o]=t.useState(!1),[Y,A]=t.useState([]),[p,v]=t.useState([]);t.useEffect(()=>{j("",0,-100,-100,1e4).then(e=>{d(e),f({type:"set",userList:e.data.data})}),_().then(e=>{d(e),A(e.data.data)})},[]);const d=e=>{e.error&&l(P,{state:{isErrorMessage:!0,message:e.error.response.data.message}})},E=t.useMemo(()=>[{accessorKey:"UserName",header:"UID"},{accessorKey:"FullName",header:"Full Name"},{accessorKey:"Email",header:"Email"},{accessorKey:"TypeUserID",header:"Is Administrator",Cell:({cell:e})=>s.jsxs(i,{children:[s.jsx(M,{icon:e.getValue()==0?I:S,style:e.getValue()==0?{color:"red"}:{color:"green"},size:"lg"}),s.jsx("span",{children:" "}),"Active"]})},{accessorKey:"StatusID",header:"Status",Cell:({cell:e})=>s.jsxs(i,{children:[s.jsx(M,{icon:e.getValue()==0?I:S,style:e.getValue()==0?{color:"red"}:{color:"green"},size:"lg"}),s.jsx("span",{children:" "}),e.getValue()==1?"Active":"Deactive"]})}],[]),w=t.useMemo(()=>[{accessorKey:"Name",header:"Module Name"},{accessorKey:"Description",header:"Description"},{accessorKey:"IsView",header:"View"},{accessorKey:"IsInsert",header:"Insert"},{accessorKey:"IsUpdate",header:"Update"},{accessorKey:"IsDelete",header:"Delete"}],[]),g=e=>{l(typeof e=="string"?"edit/0":`edit/${e.original.UserID}`)},R=e=>{var a=localStorage.getItem("user");if(a==null)return l("/pages/login");JSON.parse(a).data,e.original.UserID&&G(e.original.UserID).then(r=>{r.error?h(D(!0,"Error",r.error.response.data.message)):(j("",0,-100,-100,1e4).then(k=>{f({type:"set",userList:k.data.data})}),h(D(!1,"Success","User have been deleted")))})},b=z({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),K=()=>{const e=B(b)(c);O(b)(e)},N=e=>{e.original.UserID&&(J(e.original.UserID).then(a=>{d(a),v(a.data.data)}),o(!0))},T=x({columns:E,data:c,renderTopToolbarCustomActions:({table:e})=>s.jsxs(m,{className:"d-flex flex-row justify-content-between",fluid:!0,children:[s.jsx(n,{style:{width:"fit-content"},variant:"outline",role:"button",color:"success",onClick:()=>g("edit"),children:"Add "}),s.jsx(n,{style:{width:"fit-content"},variant:"outline",role:"button",color:"primary",onClick:K,children:"Export "})]}),createDisplayMode:"modal",positionCreatingRow:"bottom",enableRowActions:!0,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,renderRowActionMenuItems:({closeMenu:e,row:a})=>[s.jsxs(u,{onClick:r=>{g(a),e()},children:[s.jsx(y,{}),"Edit"]},0),s.jsxs(u,{onClick:r=>{r.preventDefault(),N(a),e()},children:[s.jsx(y,{}),"Edit Role"]},1),s.jsxs(u,{onClick:()=>{R(a),e()},children:[s.jsx($,{}),"Delete"]},2)]}),V=x({columns:w,data:p,createDisplayMode:"modal",positionCreatingRow:"bottom",enableRowActions:!0,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1});return s.jsxs(i,{children:[c.length==0?s.jsx(m,{children:" No Data "}):s.jsx(C,{table:T}),s.jsxs(X,{size:"xl",alignment:"center",scrollable:!0,visible:U,onClose:()=>o(!1),"aria-labelledby":"VerticallyCenteredScrollableExample2",children:[s.jsx(Z,{children:s.jsx(q,{id:"VerticallyCenteredScrollableExample2",children:"Modal title"})}),s.jsx(Q,{children:s.jsx(i,{children:p.length==0?s.jsx(m,{children:" No Data "}):s.jsx(C,{table:V})})}),s.jsxs(W,{children:[s.jsx(n,{color:"secondary",onClick:()=>o(!1),children:"Close"}),s.jsx(n,{color:"primary",onClick:()=>o(!1),children:"Save changes"})]})]})]})};export{ue as default};
