import{n as A,o as S,l as U,r as m,j as s}from"./index-CEuIzQF6.js";import{Z as E,u as w,M,a as f,d as N,G as R,I as k}from"./index.esm-C6lCNA3u.js";import{y as p,z as F}from"./api-BfBva5oo.js";import{d as K}from"./DeleteForever-C6QLg2mI.js";import{M as i}from"./DefaultLayout-hw1nnULZ.js";import{F as g,f as h,a as x}from"./index-BcaLz4Rz.js";import{C as n}from"./CCol-Cj_yAkpZ.js";import{b,a as y}from"./index.es-CvT3HhZV.js";import"./TextField-CfqoDtEE.js";import"./cil-user-Ddrdy7PS.js";const O=({setToast:a})=>{const c=A(),r=S(e=>e.userList),o=U();m.useEffect(()=>{p("",0,-100,-100,1e4).then(e=>{if(!e.error){c({type:"set",userList:e.data.data});return}a(i(!0,"Error",e.error.response.data.message))})},[]);const C=m.useMemo(()=>[{accessorKey:"UserName",header:"UID"},{accessorKey:"FullName",header:"Full Name"},{accessorKey:"Email",header:"Email"},{accessorKey:"TypeUserID",header:"Is Administrator",Cell:({cell:e})=>s.jsxs(n,{children:[s.jsx(g,{icon:e.getValue()==0?h:x,style:e.getValue()==0?{color:"red"}:{color:"green"},size:"lg"}),s.jsx("span",{children:" "}),"Active"]})},{accessorKey:"StatusID",header:"Status",Cell:({cell:e})=>s.jsxs(n,{children:[s.jsx(g,{icon:e.getValue()==0?h:x,style:e.getValue()==0?{color:"red"}:{color:"green"},size:"lg"}),s.jsx("span",{children:" "}),e.getValue()==1?"Active":"Deactive"]})}],[]),d=e=>{o(typeof e=="string"?"edit/0":`edit/${e.original.UserID}`)},j=e=>{var t=localStorage.getItem("user");if(t==null)return o("/pages/login");JSON.parse(t).data,e.original.UserID&&F(e.original.UserID).then(l=>{l.error?a(i(!0,"Error",l.error.response.data.message)):(p("",0,-100,-100,1e4).then(v=>{c({type:"set",userList:v.data.data})}),a(i(!1,"Success","User have been deleted")))})},u=E({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),D=()=>{const e=R(u)(r);k(u)(e)},I=w({columns:C,data:r,renderTopToolbarCustomActions:({table:e})=>s.jsxs(b,{className:"d-flex flex-row justify-content-between",fluid:!0,children:[s.jsx(y,{style:{width:"fit-content"},variant:"outline",role:"button",color:"success",onClick:()=>d("edit"),children:"Add "}),s.jsx(y,{style:{width:"fit-content"},variant:"outline",role:"button",color:"primary",onClick:D,children:"Export "})]}),createDisplayMode:"modal",positionCreatingRow:"bottom",enableRowActions:!0,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,renderRowActionMenuItems:({closeMenu:e,row:t})=>[s.jsxs(f,{onClick:l=>{d(t),e()},children:[s.jsx(N,{}),"Edit"]},0),s.jsxs(f,{onClick:()=>{j(t),e()},children:[s.jsx(K,{}),"Delete"]},1)]});return s.jsx(n,{children:r.length==0?s.jsx(b,{children:" No Data "}):s.jsx(M,{table:I})})};export{O as default};
