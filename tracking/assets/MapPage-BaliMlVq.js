import{r as s,j as e}from"./index-CpNJ6ZVU.js";import{e as D,o as c}from"./api-BVwJHRoD.js";import{M}from"./DefaultLayout-t0UtGZNy.js";import{u as j,C as E}from"./useMapCanvasModel-D9NtVmWB.js";import{C as o}from"./CCol-Kho4-ZsH.js";import{b as u}from"./index.es-CiFilu0v.js";import{C as P}from"./CFormSelect-BdVJipQp.js";import"./cil-user-Ddrdy7PS.js";import"./CFormControlWrapper-DAS2UAO9.js";import"./CFormLabel-u0h-jzXB.js";const T=()=>{const[g,p]=s.useState([]),[i,d]=s.useState({imageSource:"./test1.png",data:[]}),{background:f,elements:h,loadBackground:l,loadDataSource:k}=j();s.useEffect(()=>{D("",-100,1,1e4).then(a=>{a.error?setToast(M(!0,"Error",a.error.response.data.message)):(p(a.data.data),c(a.data.data[0].ParkingID,null).then(t=>{var r;t.error||(d(t.data.data),l({imageSrc:(r=t.data.data)==null?void 0:r.imageSource}))}))})},[]),s.useEffect(()=>{var a=i.data.map(t=>({...t,JsonRectangle:x(t.JsonRectangle)?"[[100,50],[200,50],[200,150],[100,150]]":t.JsonRectangle}));k(a)},[i]);var C=function(a){return e.jsx("option",{value:a.ParkingID,children:a.ParkingName},a.ParkingID)};const S=a=>{const{name:t,value:r}=a.target;c(Number(r),null).then(n=>{var m;n.error||(d(n.data.data),l({imageSrc:(m=n.data.data)==null?void 0:m.imageSource}))})},x=a=>!a||a.length===0;return e.jsxs(o,{children:[e.jsx(u,{className:"mb-3",style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},fluid:!0,children:e.jsx(o,{children:e.jsx(P,{type:"text",className:"mb-3",onChange:S,children:g.map(C)})})}),e.jsx(u,{style:{background:"#fff",width:"85%",borderRadius:4},fluid:!0,children:e.jsx(o,{children:e.jsx(E,{elements:h,initialState:"SELECT",background:f})})})]})};export{T as default};
