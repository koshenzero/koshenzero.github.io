var Ed=Object.defineProperty;var Rd=(L,f,i)=>f in L?Ed(L,f,{enumerable:!0,configurable:!0,writable:!0,value:i}):L[f]=i;var st=(L,f,i)=>(Rd(L,typeof f!="symbol"?f+"":f,i),i);import{r as gt,y as Le,q as Td,j as Co}from"./index-CEuIzQF6.js";const Mo=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),Rr=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:Mo,viewMax:Mo}),re=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0});class Od{constructor(f,i){st(this,"_canvas",null);st(this,"_view",{scale:1,x:0,y:0});st(this,"_viewChangeListeners",new Set);st(this,"_initialViewSize",{width:1920,height:1080});this._scaleExtents=f,this._documentSize=i}get canvas(){return this._canvas}set canvas(f){this._canvas=f,this.setView()}get scale(){return this._view.scale}setScale(f){this.setView({scale:f})}get initialViewSize(){return this._initialViewSize}set initialViewSize(f){this._initialViewSize=f}get x(){return this._view.x}set x(f){this.setView({x:f})}get y(){return this._view.y}set y(f){this.setView({y:f})}get view(){return{...this._view}}get scaleExtents(){return{...this._scaleExtents}}set scaleExtents(f){this._scaleExtents={...f},this.setView()}get documentSize(){return{...this._documentSize}}set documentSize(f){this._documentSize={...f},this.setView()}get transformMatrix(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}get canvasBounds(){if(this._canvas){const{left:f,top:i,right:p,bottom:w}=this._canvas.getBoundingClientRect();return{viewMin:this.clientPointToViewPoint({clientX:f,clientY:i}),viewMax:this.clientPointToViewPoint({clientX:p,clientY:w}),left:f,top:i,right:p,bottom:w,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}else return}get canvasRect(){if(this._canvas)return this._canvas.getBoundingClientRect()}clampView(f){const{min:i,max:p}=this._scaleExtents,{width:w,height:E}=this._documentSize,{left:x,top:b,right:N,bottom:H}=this.canvasRect||Rr,A=N-x,T=H-b,G=A/2,j=-(w*this._view.scale-A/2),q=T/2,K=-(E*this._view.scale-T/2);return{scale:Math.min(Math.max(f.scale,i),p),x:Math.min(Math.max(f.x,j),G),y:Math.min(Math.max(f.y,K),q)}}resetView(){this.setView({scale:1,x:0,y:0})}setView(f){const i=this.clampView({...this._view,...f||{}}),{scale:p,x:w,y:E}=this._view;return(i.scale!==p||i.x!==w||i.y!==E)&&(this._view=i,this._viewChangeListeners.forEach(x=>x&&x({view:i,transform:this.transformMatrix}))),{...this._view}}scaleAtClientPoint(f,i){const p=this.clientPointToViewPoint(i),w=this.clampView({...this._view,scale:this._view.scale+f}),E=this.viewPointToClientPoint(p,w);w.x=this._view.x-(E.clientX-i.clientX),w.y=this._view.y-(E.clientY-i.clientY);const{width:x,height:b}=this._documentSize,{left:N,top:H,right:A,bottom:T}=this.canvasRect||Rr,G=A-N,j=T-H,q=G/2,K=-(x*w.scale-G/2),D=j/2,ot=-(b*w.scale-j/2);return w.x=Math.min(Math.max(w.x,K),q),w.y=Math.min(Math.max(w.y,ot),D),w.scale===this._scaleExtents.min&&(w.x=0,w.y=0),this.setView(w)}clientPointToViewPoint(f,i=this._view){const{left:p,top:w}=this.canvasRect||Rr,E=f.clientX-p,x=f.clientY-w;return{x:(E-i.x)/i.scale,y:(x-i.y)/i.scale,relativeClientX:E,relativeClientY:x}}viewPointToClientPoint(f,i=this._view){const{left:p,top:w}=this.canvasRect||Rr,E=f.x*i.scale+i.x,x=f.y*i.scale+i.y,b=E+p,N=x+w;return{clientX:b,clientY:N,relativeX:E,relativeY:x,x:b,y:N}}attachViewChangeListener(f){this._viewChangeListeners.add(f)}}const Ad=(L,f,i)=>{L.width=f,L.height=i,L.style.width=`${f}px`,L.style.height=`${i}px`},Ld=(L,f)=>{for(const i in L)Object.prototype.hasOwnProperty.call(L,i)&&Ad(L[i],f.width,f.height)};function Id({ctx:L,image:f,x:i=0,y:p=0,w=L.canvas.width,h:E=L.canvas.height,offsetX:x=.5,offsetY:b=.5}){x<0&&(x=0),b<0&&(b=0),x>1&&(x=1),b>1&&(b=1);const N=f.width,H=f.height,A=Math.min(w/N,E/H);let T=N*A,G=H*A,j,q,K,D,ot=1;T<w&&(ot=w/T),Math.abs(ot-1)<1e-14&&G<E&&(ot=E/G),T*=ot,G*=ot,K=N/(T/w),D=H/(G/E),j=(N-K)*x,q=(H-D)*b,j<0&&(j=0),q<0&&(q=0),K>N&&(K=N),D>H&&(D=H),L.drawImage(f,j,q,K,D,i,p,w,E)}function Cd({canvas:L,ctx:f,image:i}){if(i&&i.complete&&L&&f){const p=i.width,w=i.height,E=L.getBoundingClientRect(),x=E.width,b=E.height,N=p/w;let H=x,A=H/N;A>b&&(A=b,H=A*N),f.drawImage(i,0,0,p,w,0,0,H,A)}}function Md({canvas:L,ctx:f,image:i}){if(i&&i.complete&&L&&f){const p=i.width,w=i.height,E=L.getBoundingClientRect(),x=E.width,b=E.height;f.drawImage(i,0,0,p,w,0,0,x,b)}}function bd(L){const f=gt.useRef(null),[i,p]=gt.useState({width:window.innerWidth,height:window.innerHeight});return gt.useEffect(()=>{const w=new ResizeObserver(E=>{for(const x of E){if(x.contentRect){const{width:b,height:N}=x.contentRect;p({width:b,height:N})}typeof L=="function"&&L(x)}});return f.current&&w.observe(f.current),()=>{w.disconnect()}},[L]),{containerRef:f,screenSize:i}}class Ce{constructor(f,i){this._stateMachine=f,this._name=i}get stateMachine(){return this._stateMachine}get name(){return this._name}}class Nd extends Ce{constructor(f,i){super(f,i)}onEnter(){}onExit(){}handleMouseWheel(f,i){}handleMouseDown(f,i){}handleMouseMove(f,i){}handleMouseUp(f,i){}}var Tr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Tr.exports;(function(L,f){(function(){var i,p="4.17.21",w=200,E="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",b="Invalid `variable` option passed into `_.template`",N="__lodash_hash_undefined__",H=500,A="__lodash_placeholder__",T=1,G=2,j=4,q=1,K=2,D=1,ot=2,se=4,Bt=8,_n=16,Mt=32,vn=64,Vt=128,Ln=256,Bn=512,Ar=30,Lr="...",Me=800,S=16,V=1,J=2,dt=3,Et=1/0,wt=9007199254740991,Wn=17976931348623157e292,mt=NaN,nn=4294967295,Do=nn-1,Po=nn>>>1,Fo=[["ary",Vt],["bind",D],["bindKey",ot],["curry",Bt],["curryRight",_n],["flip",Bn],["partial",Mt],["partialRight",vn],["rearg",Ln]],zn="[object Arguments]",be="[object Array]",Ho="[object AsyncFunction]",ue="[object Boolean]",oe="[object Date]",Uo="[object DOMException]",Ne="[object Error]",De="[object Function]",ki="[object GeneratorFunction]",Zt="[object Map]",fe="[object Number]",Bo="[object Null]",un="[object Object]",ji="[object Promise]",Wo="[object Proxy]",ae="[object RegExp]",Qt="[object Set]",le="[object String]",Pe="[object Symbol]",zo="[object Undefined]",ce="[object WeakMap]",Ko="[object WeakSet]",he="[object ArrayBuffer]",Kn="[object DataView]",Ir="[object Float32Array]",Cr="[object Float64Array]",Mr="[object Int8Array]",br="[object Int16Array]",Nr="[object Int32Array]",Dr="[object Uint8Array]",Pr="[object Uint8ClampedArray]",Fr="[object Uint16Array]",Hr="[object Uint32Array]",Xo=/\b__p \+= '';/g,Go=/\b(__p \+=) '' \+/g,Yo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ts=/&(?:amp|lt|gt|quot|#39);/g,ns=/[&<>"']/g,qo=RegExp(ts.source),Jo=RegExp(ns.source),Vo=/<%-([\s\S]+?)%>/g,Zo=/<%([\s\S]+?)%>/g,es=/<%=([\s\S]+?)%>/g,Qo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$o=/^\w*$/,ko=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/[\\^$.*+?()[\]{}|]/g,jo=RegExp(Ur.source),Br=/^\s+/,tf=/\s/,nf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ef=/\{\n\/\* \[wrapped with (.+)\] \*/,rf=/,? & /,sf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uf=/[()=,{}\[\]\/\s]/,of=/\\(\\)?/g,ff=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rs=/\w*$/,af=/^[-+]0x[0-9a-f]+$/i,lf=/^0b[01]+$/i,cf=/^\[object .+?Constructor\]$/,hf=/^0o[0-7]+$/i,gf=/^(?:0|[1-9]\d*)$/,pf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fe=/($^)/,df=/['\n\r\u2028\u2029\\]/g,He="\\ud800-\\udfff",_f="\\u0300-\\u036f",vf="\\ufe20-\\ufe2f",wf="\\u20d0-\\u20ff",is=_f+vf+wf,ss="\\u2700-\\u27bf",us="a-z\\xdf-\\xf6\\xf8-\\xff",mf="\\xac\\xb1\\xd7\\xf7",xf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yf="\\u2000-\\u206f",Sf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",os="A-Z\\xc0-\\xd6\\xd8-\\xde",fs="\\ufe0e\\ufe0f",as=mf+xf+yf+Sf,Wr="['’]",Ef="["+He+"]",ls="["+as+"]",Ue="["+is+"]",cs="\\d+",Rf="["+ss+"]",hs="["+us+"]",gs="[^"+He+as+cs+ss+us+os+"]",zr="\\ud83c[\\udffb-\\udfff]",Tf="(?:"+Ue+"|"+zr+")",ps="[^"+He+"]",Kr="(?:\\ud83c[\\udde6-\\uddff]){2}",Xr="[\\ud800-\\udbff][\\udc00-\\udfff]",Xn="["+os+"]",ds="\\u200d",_s="(?:"+hs+"|"+gs+")",Of="(?:"+Xn+"|"+gs+")",vs="(?:"+Wr+"(?:d|ll|m|re|s|t|ve))?",ws="(?:"+Wr+"(?:D|LL|M|RE|S|T|VE))?",ms=Tf+"?",xs="["+fs+"]?",Af="(?:"+ds+"(?:"+[ps,Kr,Xr].join("|")+")"+xs+ms+")*",Lf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",If="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ys=xs+ms+Af,Cf="(?:"+[Rf,Kr,Xr].join("|")+")"+ys,Mf="(?:"+[ps+Ue+"?",Ue,Kr,Xr,Ef].join("|")+")",bf=RegExp(Wr,"g"),Nf=RegExp(Ue,"g"),Gr=RegExp(zr+"(?="+zr+")|"+Mf+ys,"g"),Df=RegExp([Xn+"?"+hs+"+"+vs+"(?="+[ls,Xn,"$"].join("|")+")",Of+"+"+ws+"(?="+[ls,Xn+_s,"$"].join("|")+")",Xn+"?"+_s+"+"+vs,Xn+"+"+ws,If,Lf,cs,Cf].join("|"),"g"),Pf=RegExp("["+ds+He+is+fs+"]"),Ff=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uf=-1,et={};et[Ir]=et[Cr]=et[Mr]=et[br]=et[Nr]=et[Dr]=et[Pr]=et[Fr]=et[Hr]=!0,et[zn]=et[be]=et[he]=et[ue]=et[Kn]=et[oe]=et[Ne]=et[De]=et[Zt]=et[fe]=et[un]=et[ae]=et[Qt]=et[le]=et[ce]=!1;var nt={};nt[zn]=nt[be]=nt[he]=nt[Kn]=nt[ue]=nt[oe]=nt[Ir]=nt[Cr]=nt[Mr]=nt[br]=nt[Nr]=nt[Zt]=nt[fe]=nt[un]=nt[ae]=nt[Qt]=nt[le]=nt[Pe]=nt[Dr]=nt[Pr]=nt[Fr]=nt[Hr]=!0,nt[Ne]=nt[De]=nt[ce]=!1;var Bf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xf=parseFloat,Gf=parseInt,Ss=typeof Le=="object"&&Le&&Le.Object===Object&&Le,Yf=typeof self=="object"&&self&&self.Object===Object&&self,_t=Ss||Yf||Function("return this")(),Yr=f&&!f.nodeType&&f,In=Yr&&!0&&L&&!L.nodeType&&L,Es=In&&In.exports===Yr,qr=Es&&Ss.process,Wt=function(){try{var c=In&&In.require&&In.require("util").types;return c||qr&&qr.binding&&qr.binding("util")}catch{}}(),Rs=Wt&&Wt.isArrayBuffer,Ts=Wt&&Wt.isDate,Os=Wt&&Wt.isMap,As=Wt&&Wt.isRegExp,Ls=Wt&&Wt.isSet,Is=Wt&&Wt.isTypedArray;function bt(c,d,g){switch(g.length){case 0:return c.call(d);case 1:return c.call(d,g[0]);case 2:return c.call(d,g[0],g[1]);case 3:return c.call(d,g[0],g[1],g[2])}return c.apply(d,g)}function qf(c,d,g,R){for(var P=-1,Z=c==null?0:c.length;++P<Z;){var ct=c[P];d(R,ct,g(ct),c)}return R}function zt(c,d){for(var g=-1,R=c==null?0:c.length;++g<R&&d(c[g],g,c)!==!1;);return c}function Jf(c,d){for(var g=c==null?0:c.length;g--&&d(c[g],g,c)!==!1;);return c}function Cs(c,d){for(var g=-1,R=c==null?0:c.length;++g<R;)if(!d(c[g],g,c))return!1;return!0}function wn(c,d){for(var g=-1,R=c==null?0:c.length,P=0,Z=[];++g<R;){var ct=c[g];d(ct,g,c)&&(Z[P++]=ct)}return Z}function Be(c,d){var g=c==null?0:c.length;return!!g&&Gn(c,d,0)>-1}function Jr(c,d,g){for(var R=-1,P=c==null?0:c.length;++R<P;)if(g(d,c[R]))return!0;return!1}function rt(c,d){for(var g=-1,R=c==null?0:c.length,P=Array(R);++g<R;)P[g]=d(c[g],g,c);return P}function mn(c,d){for(var g=-1,R=d.length,P=c.length;++g<R;)c[P+g]=d[g];return c}function Vr(c,d,g,R){var P=-1,Z=c==null?0:c.length;for(R&&Z&&(g=c[++P]);++P<Z;)g=d(g,c[P],P,c);return g}function Vf(c,d,g,R){var P=c==null?0:c.length;for(R&&P&&(g=c[--P]);P--;)g=d(g,c[P],P,c);return g}function Zr(c,d){for(var g=-1,R=c==null?0:c.length;++g<R;)if(d(c[g],g,c))return!0;return!1}var Zf=Qr("length");function Qf(c){return c.split("")}function $f(c){return c.match(sf)||[]}function Ms(c,d,g){var R;return g(c,function(P,Z,ct){if(d(P,Z,ct))return R=Z,!1}),R}function We(c,d,g,R){for(var P=c.length,Z=g+(R?1:-1);R?Z--:++Z<P;)if(d(c[Z],Z,c))return Z;return-1}function Gn(c,d,g){return d===d?aa(c,d,g):We(c,bs,g)}function kf(c,d,g,R){for(var P=g-1,Z=c.length;++P<Z;)if(R(c[P],d))return P;return-1}function bs(c){return c!==c}function Ns(c,d){var g=c==null?0:c.length;return g?kr(c,d)/g:mt}function Qr(c){return function(d){return d==null?i:d[c]}}function $r(c){return function(d){return c==null?i:c[d]}}function Ds(c,d,g,R,P){return P(c,function(Z,ct,tt){g=R?(R=!1,Z):d(g,Z,ct,tt)}),g}function jf(c,d){var g=c.length;for(c.sort(d);g--;)c[g]=c[g].value;return c}function kr(c,d){for(var g,R=-1,P=c.length;++R<P;){var Z=d(c[R]);Z!==i&&(g=g===i?Z:g+Z)}return g}function jr(c,d){for(var g=-1,R=Array(c);++g<c;)R[g]=d(g);return R}function ta(c,d){return rt(d,function(g){return[g,c[g]]})}function Ps(c){return c&&c.slice(0,Bs(c)+1).replace(Br,"")}function Nt(c){return function(d){return c(d)}}function ti(c,d){return rt(d,function(g){return c[g]})}function ge(c,d){return c.has(d)}function Fs(c,d){for(var g=-1,R=c.length;++g<R&&Gn(d,c[g],0)>-1;);return g}function Hs(c,d){for(var g=c.length;g--&&Gn(d,c[g],0)>-1;);return g}function na(c,d){for(var g=c.length,R=0;g--;)c[g]===d&&++R;return R}var ea=$r(Bf),ra=$r(Wf);function ia(c){return"\\"+Kf[c]}function sa(c,d){return c==null?i:c[d]}function Yn(c){return Pf.test(c)}function ua(c){return Ff.test(c)}function oa(c){for(var d,g=[];!(d=c.next()).done;)g.push(d.value);return g}function ni(c){var d=-1,g=Array(c.size);return c.forEach(function(R,P){g[++d]=[P,R]}),g}function Us(c,d){return function(g){return c(d(g))}}function xn(c,d){for(var g=-1,R=c.length,P=0,Z=[];++g<R;){var ct=c[g];(ct===d||ct===A)&&(c[g]=A,Z[P++]=g)}return Z}function ze(c){var d=-1,g=Array(c.size);return c.forEach(function(R){g[++d]=R}),g}function fa(c){var d=-1,g=Array(c.size);return c.forEach(function(R){g[++d]=[R,R]}),g}function aa(c,d,g){for(var R=g-1,P=c.length;++R<P;)if(c[R]===d)return R;return-1}function la(c,d,g){for(var R=g+1;R--;)if(c[R]===d)return R;return R}function qn(c){return Yn(c)?ha(c):Zf(c)}function $t(c){return Yn(c)?ga(c):Qf(c)}function Bs(c){for(var d=c.length;d--&&tf.test(c.charAt(d)););return d}var ca=$r(zf);function ha(c){for(var d=Gr.lastIndex=0;Gr.test(c);)++d;return d}function ga(c){return c.match(Gr)||[]}function pa(c){return c.match(Df)||[]}var da=function c(d){d=d==null?_t:Jn.defaults(_t.Object(),d,Jn.pick(_t,Hf));var g=d.Array,R=d.Date,P=d.Error,Z=d.Function,ct=d.Math,tt=d.Object,ei=d.RegExp,_a=d.String,Kt=d.TypeError,Ke=g.prototype,va=Z.prototype,Vn=tt.prototype,Xe=d["__core-js_shared__"],Ge=va.toString,$=Vn.hasOwnProperty,wa=0,Ws=function(){var t=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ye=Vn.toString,ma=Ge.call(tt),xa=_t._,ya=ei("^"+Ge.call($).replace(Ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=Es?d.Buffer:i,yn=d.Symbol,Je=d.Uint8Array,zs=qe?qe.allocUnsafe:i,Ve=Us(tt.getPrototypeOf,tt),Ks=tt.create,Xs=Vn.propertyIsEnumerable,Ze=Ke.splice,Gs=yn?yn.isConcatSpreadable:i,pe=yn?yn.iterator:i,Cn=yn?yn.toStringTag:i,Qe=function(){try{var t=Pn(tt,"defineProperty");return t({},"",{}),t}catch{}}(),Sa=d.clearTimeout!==_t.clearTimeout&&d.clearTimeout,Ea=R&&R.now!==_t.Date.now&&R.now,Ra=d.setTimeout!==_t.setTimeout&&d.setTimeout,$e=ct.ceil,ke=ct.floor,ri=tt.getOwnPropertySymbols,Ta=qe?qe.isBuffer:i,Ys=d.isFinite,Oa=Ke.join,Aa=Us(tt.keys,tt),ht=ct.max,xt=ct.min,La=R.now,Ia=d.parseInt,qs=ct.random,Ca=Ke.reverse,ii=Pn(d,"DataView"),de=Pn(d,"Map"),si=Pn(d,"Promise"),Zn=Pn(d,"Set"),_e=Pn(d,"WeakMap"),ve=Pn(tt,"create"),je=_e&&new _e,Qn={},Ma=Fn(ii),ba=Fn(de),Na=Fn(si),Da=Fn(Zn),Pa=Fn(_e),tr=yn?yn.prototype:i,we=tr?tr.valueOf:i,Js=tr?tr.toString:i;function u(t){if(ft(t)&&!F(t)&&!(t instanceof X)){if(t instanceof Xt)return t;if($.call(t,"__wrapped__"))return Vu(t)}return new Xt(t)}var $n=function(){function t(){}return function(n){if(!it(n))return{};if(Ks)return Ks(n);t.prototype=n;var e=new t;return t.prototype=i,e}}();function nr(){}function Xt(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}u.templateSettings={escape:Vo,evaluate:Zo,interpolate:es,variable:"",imports:{_:u}},u.prototype=nr.prototype,u.prototype.constructor=u,Xt.prototype=$n(nr.prototype),Xt.prototype.constructor=Xt;function X(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nn,this.__views__=[]}function Fa(){var t=new X(this.__wrapped__);return t.__actions__=At(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=At(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=At(this.__views__),t}function Ha(){if(this.__filtered__){var t=new X(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ua(){var t=this.__wrapped__.value(),n=this.__dir__,e=F(t),r=n<0,s=e?t.length:0,o=Ql(0,s,this.__views__),a=o.start,l=o.end,h=l-a,_=r?l:a-1,v=this.__iteratees__,m=v.length,y=0,O=xt(h,this.__takeCount__);if(!e||!r&&s==h&&O==h)return vu(t,this.__actions__);var C=[];t:for(;h--&&y<O;){_+=n;for(var B=-1,M=t[_];++B<m;){var z=v[B],Y=z.iteratee,Ft=z.type,Ot=Y(M);if(Ft==J)M=Ot;else if(!Ot){if(Ft==V)continue t;break t}}C[y++]=M}return C}X.prototype=$n(nr.prototype),X.prototype.constructor=X;function Mn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ba(){this.__data__=ve?ve(null):{},this.size=0}function Wa(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function za(t){var n=this.__data__;if(ve){var e=n[t];return e===N?i:e}return $.call(n,t)?n[t]:i}function Ka(t){var n=this.__data__;return ve?n[t]!==i:$.call(n,t)}function Xa(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ve&&n===i?N:n,this}Mn.prototype.clear=Ba,Mn.prototype.delete=Wa,Mn.prototype.get=za,Mn.prototype.has=Ka,Mn.prototype.set=Xa;function on(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ga(){this.__data__=[],this.size=0}function Ya(t){var n=this.__data__,e=er(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():Ze.call(n,e,1),--this.size,!0}function qa(t){var n=this.__data__,e=er(n,t);return e<0?i:n[e][1]}function Ja(t){return er(this.__data__,t)>-1}function Va(t,n){var e=this.__data__,r=er(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}on.prototype.clear=Ga,on.prototype.delete=Ya,on.prototype.get=qa,on.prototype.has=Ja,on.prototype.set=Va;function fn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Za(){this.size=0,this.__data__={hash:new Mn,map:new(de||on),string:new Mn}}function Qa(t){var n=pr(this,t).delete(t);return this.size-=n?1:0,n}function $a(t){return pr(this,t).get(t)}function ka(t){return pr(this,t).has(t)}function ja(t,n){var e=pr(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}fn.prototype.clear=Za,fn.prototype.delete=Qa,fn.prototype.get=$a,fn.prototype.has=ka,fn.prototype.set=ja;function bn(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new fn;++n<e;)this.add(t[n])}function tl(t){return this.__data__.set(t,N),this}function nl(t){return this.__data__.has(t)}bn.prototype.add=bn.prototype.push=tl,bn.prototype.has=nl;function kt(t){var n=this.__data__=new on(t);this.size=n.size}function el(){this.__data__=new on,this.size=0}function rl(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function il(t){return this.__data__.get(t)}function sl(t){return this.__data__.has(t)}function ul(t,n){var e=this.__data__;if(e instanceof on){var r=e.__data__;if(!de||r.length<w-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new fn(r)}return e.set(t,n),this.size=e.size,this}kt.prototype.clear=el,kt.prototype.delete=rl,kt.prototype.get=il,kt.prototype.has=sl,kt.prototype.set=ul;function Vs(t,n){var e=F(t),r=!e&&Hn(t),s=!e&&!r&&On(t),o=!e&&!r&&!s&&ne(t),a=e||r||s||o,l=a?jr(t.length,_a):[],h=l.length;for(var _ in t)(n||$.call(t,_))&&!(a&&(_=="length"||s&&(_=="offset"||_=="parent")||o&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||hn(_,h)))&&l.push(_);return l}function Zs(t){var n=t.length;return n?t[_i(0,n-1)]:i}function ol(t,n){return dr(At(t),Nn(n,0,t.length))}function fl(t){return dr(At(t))}function ui(t,n,e){(e!==i&&!jt(t[n],e)||e===i&&!(n in t))&&an(t,n,e)}function me(t,n,e){var r=t[n];(!($.call(t,n)&&jt(r,e))||e===i&&!(n in t))&&an(t,n,e)}function er(t,n){for(var e=t.length;e--;)if(jt(t[e][0],n))return e;return-1}function al(t,n,e,r){return Sn(t,function(s,o,a){n(r,s,e(s),a)}),r}function Qs(t,n){return t&&rn(n,pt(n),t)}function ll(t,n){return t&&rn(n,It(n),t)}function an(t,n,e){n=="__proto__"&&Qe?Qe(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function oi(t,n){for(var e=-1,r=n.length,s=g(r),o=t==null;++e<r;)s[e]=o?i:zi(t,n[e]);return s}function Nn(t,n,e){return t===t&&(e!==i&&(t=t<=e?t:e),n!==i&&(t=t>=n?t:n)),t}function Gt(t,n,e,r,s,o){var a,l=n&T,h=n&G,_=n&j;if(e&&(a=s?e(t,r,s,o):e(t)),a!==i)return a;if(!it(t))return t;var v=F(t);if(v){if(a=kl(t),!l)return At(t,a)}else{var m=yt(t),y=m==De||m==ki;if(On(t))return xu(t,l);if(m==un||m==zn||y&&!s){if(a=h||y?{}:Bu(t),!l)return h?zl(t,ll(a,t)):Wl(t,Qs(a,t))}else{if(!nt[m])return s?t:{};a=jl(t,m,l)}}o||(o=new kt);var O=o.get(t);if(O)return O;o.set(t,a),po(t)?t.forEach(function(M){a.add(Gt(M,n,e,M,t,o))}):ho(t)&&t.forEach(function(M,z){a.set(z,Gt(M,n,e,z,t,o))});var C=_?h?Ai:Oi:h?It:pt,B=v?i:C(t);return zt(B||t,function(M,z){B&&(z=M,M=t[z]),me(a,z,Gt(M,n,e,z,t,o))}),a}function cl(t){var n=pt(t);return function(e){return $s(e,t,n)}}function $s(t,n,e){var r=e.length;if(t==null)return!r;for(t=tt(t);r--;){var s=e[r],o=n[s],a=t[s];if(a===i&&!(s in t)||!o(a))return!1}return!0}function ks(t,n,e){if(typeof t!="function")throw new Kt(x);return Oe(function(){t.apply(i,e)},n)}function xe(t,n,e,r){var s=-1,o=Be,a=!0,l=t.length,h=[],_=n.length;if(!l)return h;e&&(n=rt(n,Nt(e))),r?(o=Jr,a=!1):n.length>=w&&(o=ge,a=!1,n=new bn(n));t:for(;++s<l;){var v=t[s],m=e==null?v:e(v);if(v=r||v!==0?v:0,a&&m===m){for(var y=_;y--;)if(n[y]===m)continue t;h.push(v)}else o(n,m,r)||h.push(v)}return h}var Sn=Tu(en),js=Tu(ai,!0);function hl(t,n){var e=!0;return Sn(t,function(r,s,o){return e=!!n(r,s,o),e}),e}function rr(t,n,e){for(var r=-1,s=t.length;++r<s;){var o=t[r],a=n(o);if(a!=null&&(l===i?a===a&&!Pt(a):e(a,l)))var l=a,h=o}return h}function gl(t,n,e,r){var s=t.length;for(e=U(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:U(r),r<0&&(r+=s),r=e>r?0:vo(r);e<r;)t[e++]=n;return t}function tu(t,n){var e=[];return Sn(t,function(r,s,o){n(r,s,o)&&e.push(r)}),e}function vt(t,n,e,r,s){var o=-1,a=t.length;for(e||(e=nc),s||(s=[]);++o<a;){var l=t[o];n>0&&e(l)?n>1?vt(l,n-1,e,r,s):mn(s,l):r||(s[s.length]=l)}return s}var fi=Ou(),nu=Ou(!0);function en(t,n){return t&&fi(t,n,pt)}function ai(t,n){return t&&nu(t,n,pt)}function ir(t,n){return wn(n,function(e){return gn(t[e])})}function Dn(t,n){n=Rn(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[sn(n[e++])];return e&&e==r?t:i}function eu(t,n,e){var r=n(t);return F(t)?r:mn(r,e(t))}function Rt(t){return t==null?t===i?zo:Bo:Cn&&Cn in tt(t)?Zl(t):fc(t)}function li(t,n){return t>n}function pl(t,n){return t!=null&&$.call(t,n)}function dl(t,n){return t!=null&&n in tt(t)}function _l(t,n,e){return t>=xt(n,e)&&t<ht(n,e)}function ci(t,n,e){for(var r=e?Jr:Be,s=t[0].length,o=t.length,a=o,l=g(o),h=1/0,_=[];a--;){var v=t[a];a&&n&&(v=rt(v,Nt(n))),h=xt(v.length,h),l[a]=!e&&(n||s>=120&&v.length>=120)?new bn(a&&v):i}v=t[0];var m=-1,y=l[0];t:for(;++m<s&&_.length<h;){var O=v[m],C=n?n(O):O;if(O=e||O!==0?O:0,!(y?ge(y,C):r(_,C,e))){for(a=o;--a;){var B=l[a];if(!(B?ge(B,C):r(t[a],C,e)))continue t}y&&y.push(C),_.push(O)}}return _}function vl(t,n,e,r){return en(t,function(s,o,a){n(r,e(s),o,a)}),r}function ye(t,n,e){n=Rn(n,t),t=Xu(t,n);var r=t==null?t:t[sn(qt(n))];return r==null?i:bt(r,t,e)}function ru(t){return ft(t)&&Rt(t)==zn}function wl(t){return ft(t)&&Rt(t)==he}function ml(t){return ft(t)&&Rt(t)==oe}function Se(t,n,e,r,s){return t===n?!0:t==null||n==null||!ft(t)&&!ft(n)?t!==t&&n!==n:xl(t,n,e,r,Se,s)}function xl(t,n,e,r,s,o){var a=F(t),l=F(n),h=a?be:yt(t),_=l?be:yt(n);h=h==zn?un:h,_=_==zn?un:_;var v=h==un,m=_==un,y=h==_;if(y&&On(t)){if(!On(n))return!1;a=!0,v=!1}if(y&&!v)return o||(o=new kt),a||ne(t)?Fu(t,n,e,r,s,o):Jl(t,n,h,e,r,s,o);if(!(e&q)){var O=v&&$.call(t,"__wrapped__"),C=m&&$.call(n,"__wrapped__");if(O||C){var B=O?t.value():t,M=C?n.value():n;return o||(o=new kt),s(B,M,e,r,o)}}return y?(o||(o=new kt),Vl(t,n,e,r,s,o)):!1}function yl(t){return ft(t)&&yt(t)==Zt}function hi(t,n,e,r){var s=e.length,o=s,a=!r;if(t==null)return!o;for(t=tt(t);s--;){var l=e[s];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<o;){l=e[s];var h=l[0],_=t[h],v=l[1];if(a&&l[2]){if(_===i&&!(h in t))return!1}else{var m=new kt;if(r)var y=r(_,v,h,t,n,m);if(!(y===i?Se(v,_,q|K,r,m):y))return!1}}return!0}function iu(t){if(!it(t)||rc(t))return!1;var n=gn(t)?ya:cf;return n.test(Fn(t))}function Sl(t){return ft(t)&&Rt(t)==ae}function El(t){return ft(t)&&yt(t)==Qt}function Rl(t){return ft(t)&&yr(t.length)&&!!et[Rt(t)]}function su(t){return typeof t=="function"?t:t==null?Ct:typeof t=="object"?F(t)?fu(t[0],t[1]):ou(t):Lo(t)}function gi(t){if(!Te(t))return Aa(t);var n=[];for(var e in tt(t))$.call(t,e)&&e!="constructor"&&n.push(e);return n}function Tl(t){if(!it(t))return oc(t);var n=Te(t),e=[];for(var r in t)r=="constructor"&&(n||!$.call(t,r))||e.push(r);return e}function pi(t,n){return t<n}function uu(t,n){var e=-1,r=Lt(t)?g(t.length):[];return Sn(t,function(s,o,a){r[++e]=n(s,o,a)}),r}function ou(t){var n=Ii(t);return n.length==1&&n[0][2]?zu(n[0][0],n[0][1]):function(e){return e===t||hi(e,t,n)}}function fu(t,n){return Mi(t)&&Wu(n)?zu(sn(t),n):function(e){var r=zi(e,t);return r===i&&r===n?Ki(e,t):Se(n,r,q|K)}}function sr(t,n,e,r,s){t!==n&&fi(n,function(o,a){if(s||(s=new kt),it(o))Ol(t,n,a,e,sr,r,s);else{var l=r?r(Ni(t,a),o,a+"",t,n,s):i;l===i&&(l=o),ui(t,a,l)}},It)}function Ol(t,n,e,r,s,o,a){var l=Ni(t,e),h=Ni(n,e),_=a.get(h);if(_){ui(t,e,_);return}var v=o?o(l,h,e+"",t,n,a):i,m=v===i;if(m){var y=F(h),O=!y&&On(h),C=!y&&!O&&ne(h);v=h,y||O||C?F(l)?v=l:at(l)?v=At(l):O?(m=!1,v=xu(h,!0)):C?(m=!1,v=yu(h,!0)):v=[]:Ae(h)||Hn(h)?(v=l,Hn(l)?v=wo(l):(!it(l)||gn(l))&&(v=Bu(h))):m=!1}m&&(a.set(h,v),s(v,h,r,o,a),a.delete(h)),ui(t,e,v)}function au(t,n){var e=t.length;if(e)return n+=n<0?e:0,hn(n,e)?t[n]:i}function lu(t,n,e){n.length?n=rt(n,function(o){return F(o)?function(a){return Dn(a,o.length===1?o[0]:o)}:o}):n=[Ct];var r=-1;n=rt(n,Nt(I()));var s=uu(t,function(o,a,l){var h=rt(n,function(_){return _(o)});return{criteria:h,index:++r,value:o}});return jf(s,function(o,a){return Bl(o,a,e)})}function Al(t,n){return cu(t,n,function(e,r){return Ki(t,r)})}function cu(t,n,e){for(var r=-1,s=n.length,o={};++r<s;){var a=n[r],l=Dn(t,a);e(l,a)&&Ee(o,Rn(a,t),l)}return o}function Ll(t){return function(n){return Dn(n,t)}}function di(t,n,e,r){var s=r?kf:Gn,o=-1,a=n.length,l=t;for(t===n&&(n=At(n)),e&&(l=rt(t,Nt(e)));++o<a;)for(var h=0,_=n[o],v=e?e(_):_;(h=s(l,v,h,r))>-1;)l!==t&&Ze.call(l,h,1),Ze.call(t,h,1);return t}function hu(t,n){for(var e=t?n.length:0,r=e-1;e--;){var s=n[e];if(e==r||s!==o){var o=s;hn(s)?Ze.call(t,s,1):mi(t,s)}}return t}function _i(t,n){return t+ke(qs()*(n-t+1))}function Il(t,n,e,r){for(var s=-1,o=ht($e((n-t)/(e||1)),0),a=g(o);o--;)a[r?o:++s]=t,t+=e;return a}function vi(t,n){var e="";if(!t||n<1||n>wt)return e;do n%2&&(e+=t),n=ke(n/2),n&&(t+=t);while(n);return e}function W(t,n){return Di(Ku(t,n,Ct),t+"")}function Cl(t){return Zs(ee(t))}function Ml(t,n){var e=ee(t);return dr(e,Nn(n,0,e.length))}function Ee(t,n,e,r){if(!it(t))return t;n=Rn(n,t);for(var s=-1,o=n.length,a=o-1,l=t;l!=null&&++s<o;){var h=sn(n[s]),_=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(s!=a){var v=l[h];_=r?r(v,h,l):i,_===i&&(_=it(v)?v:hn(n[s+1])?[]:{})}me(l,h,_),l=l[h]}return t}var gu=je?function(t,n){return je.set(t,n),t}:Ct,bl=Qe?function(t,n){return Qe(t,"toString",{configurable:!0,enumerable:!1,value:Gi(n),writable:!0})}:Ct;function Nl(t){return dr(ee(t))}function Yt(t,n,e){var r=-1,s=t.length;n<0&&(n=-n>s?0:s+n),e=e>s?s:e,e<0&&(e+=s),s=n>e?0:e-n>>>0,n>>>=0;for(var o=g(s);++r<s;)o[r]=t[r+n];return o}function Dl(t,n){var e;return Sn(t,function(r,s,o){return e=n(r,s,o),!e}),!!e}function ur(t,n,e){var r=0,s=t==null?r:t.length;if(typeof n=="number"&&n===n&&s<=Po){for(;r<s;){var o=r+s>>>1,a=t[o];a!==null&&!Pt(a)&&(e?a<=n:a<n)?r=o+1:s=o}return s}return wi(t,n,Ct,e)}function wi(t,n,e,r){var s=0,o=t==null?0:t.length;if(o===0)return 0;n=e(n);for(var a=n!==n,l=n===null,h=Pt(n),_=n===i;s<o;){var v=ke((s+o)/2),m=e(t[v]),y=m!==i,O=m===null,C=m===m,B=Pt(m);if(a)var M=r||C;else _?M=C&&(r||y):l?M=C&&y&&(r||!O):h?M=C&&y&&!O&&(r||!B):O||B?M=!1:M=r?m<=n:m<n;M?s=v+1:o=v}return xt(o,Do)}function pu(t,n){for(var e=-1,r=t.length,s=0,o=[];++e<r;){var a=t[e],l=n?n(a):a;if(!e||!jt(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function du(t){return typeof t=="number"?t:Pt(t)?mt:+t}function Dt(t){if(typeof t=="string")return t;if(F(t))return rt(t,Dt)+"";if(Pt(t))return Js?Js.call(t):"";var n=t+"";return n=="0"&&1/t==-Et?"-0":n}function En(t,n,e){var r=-1,s=Be,o=t.length,a=!0,l=[],h=l;if(e)a=!1,s=Jr;else if(o>=w){var _=n?null:Yl(t);if(_)return ze(_);a=!1,s=ge,h=new bn}else h=n?[]:l;t:for(;++r<o;){var v=t[r],m=n?n(v):v;if(v=e||v!==0?v:0,a&&m===m){for(var y=h.length;y--;)if(h[y]===m)continue t;n&&h.push(m),l.push(v)}else s(h,m,e)||(h!==l&&h.push(m),l.push(v))}return l}function mi(t,n){return n=Rn(n,t),t=Xu(t,n),t==null||delete t[sn(qt(n))]}function _u(t,n,e,r){return Ee(t,n,e(Dn(t,n)),r)}function or(t,n,e,r){for(var s=t.length,o=r?s:-1;(r?o--:++o<s)&&n(t[o],o,t););return e?Yt(t,r?0:o,r?o+1:s):Yt(t,r?o+1:0,r?s:o)}function vu(t,n){var e=t;return e instanceof X&&(e=e.value()),Vr(n,function(r,s){return s.func.apply(s.thisArg,mn([r],s.args))},e)}function xi(t,n,e){var r=t.length;if(r<2)return r?En(t[0]):[];for(var s=-1,o=g(r);++s<r;)for(var a=t[s],l=-1;++l<r;)l!=s&&(o[s]=xe(o[s]||a,t[l],n,e));return En(vt(o,1),n,e)}function wu(t,n,e){for(var r=-1,s=t.length,o=n.length,a={};++r<s;){var l=r<o?n[r]:i;e(a,t[r],l)}return a}function yi(t){return at(t)?t:[]}function Si(t){return typeof t=="function"?t:Ct}function Rn(t,n){return F(t)?t:Mi(t,n)?[t]:Ju(Q(t))}var Pl=W;function Tn(t,n,e){var r=t.length;return e=e===i?r:e,!n&&e>=r?t:Yt(t,n,e)}var mu=Sa||function(t){return _t.clearTimeout(t)};function xu(t,n){if(n)return t.slice();var e=t.length,r=zs?zs(e):new t.constructor(e);return t.copy(r),r}function Ei(t){var n=new t.constructor(t.byteLength);return new Je(n).set(new Je(t)),n}function Fl(t,n){var e=n?Ei(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function Hl(t){var n=new t.constructor(t.source,rs.exec(t));return n.lastIndex=t.lastIndex,n}function Ul(t){return we?tt(we.call(t)):{}}function yu(t,n){var e=n?Ei(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function Su(t,n){if(t!==n){var e=t!==i,r=t===null,s=t===t,o=Pt(t),a=n!==i,l=n===null,h=n===n,_=Pt(n);if(!l&&!_&&!o&&t>n||o&&a&&h&&!l&&!_||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!_&&t<n||_&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function Bl(t,n,e){for(var r=-1,s=t.criteria,o=n.criteria,a=s.length,l=e.length;++r<a;){var h=Su(s[r],o[r]);if(h){if(r>=l)return h;var _=e[r];return h*(_=="desc"?-1:1)}}return t.index-n.index}function Eu(t,n,e,r){for(var s=-1,o=t.length,a=e.length,l=-1,h=n.length,_=ht(o-a,0),v=g(h+_),m=!r;++l<h;)v[l]=n[l];for(;++s<a;)(m||s<o)&&(v[e[s]]=t[s]);for(;_--;)v[l++]=t[s++];return v}function Ru(t,n,e,r){for(var s=-1,o=t.length,a=-1,l=e.length,h=-1,_=n.length,v=ht(o-l,0),m=g(v+_),y=!r;++s<v;)m[s]=t[s];for(var O=s;++h<_;)m[O+h]=n[h];for(;++a<l;)(y||s<o)&&(m[O+e[a]]=t[s++]);return m}function At(t,n){var e=-1,r=t.length;for(n||(n=g(r));++e<r;)n[e]=t[e];return n}function rn(t,n,e,r){var s=!e;e||(e={});for(var o=-1,a=n.length;++o<a;){var l=n[o],h=r?r(e[l],t[l],l,e,t):i;h===i&&(h=t[l]),s?an(e,l,h):me(e,l,h)}return e}function Wl(t,n){return rn(t,Ci(t),n)}function zl(t,n){return rn(t,Hu(t),n)}function fr(t,n){return function(e,r){var s=F(e)?qf:al,o=n?n():{};return s(e,t,I(r,2),o)}}function kn(t){return W(function(n,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=t.length>3&&typeof o=="function"?(s--,o):i,a&&Tt(e[0],e[1],a)&&(o=s<3?i:o,s=1),n=tt(n);++r<s;){var l=e[r];l&&t(n,l,r,o)}return n})}function Tu(t,n){return function(e,r){if(e==null)return e;if(!Lt(e))return t(e,r);for(var s=e.length,o=n?s:-1,a=tt(e);(n?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function Ou(t){return function(n,e,r){for(var s=-1,o=tt(n),a=r(n),l=a.length;l--;){var h=a[t?l:++s];if(e(o[h],h,o)===!1)break}return n}}function Kl(t,n,e){var r=n&D,s=Re(t);function o(){var a=this&&this!==_t&&this instanceof o?s:t;return a.apply(r?e:this,arguments)}return o}function Au(t){return function(n){n=Q(n);var e=Yn(n)?$t(n):i,r=e?e[0]:n.charAt(0),s=e?Tn(e,1).join(""):n.slice(1);return r[t]()+s}}function jn(t){return function(n){return Vr(Oo(To(n).replace(bf,"")),t,"")}}function Re(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=$n(t.prototype),r=t.apply(e,n);return it(r)?r:e}}function Xl(t,n,e){var r=Re(t);function s(){for(var o=arguments.length,a=g(o),l=o,h=te(s);l--;)a[l]=arguments[l];var _=o<3&&a[0]!==h&&a[o-1]!==h?[]:xn(a,h);if(o-=_.length,o<e)return bu(t,n,ar,s.placeholder,i,a,_,i,i,e-o);var v=this&&this!==_t&&this instanceof s?r:t;return bt(v,this,a)}return s}function Lu(t){return function(n,e,r){var s=tt(n);if(!Lt(n)){var o=I(e,3);n=pt(n),e=function(l){return o(s[l],l,s)}}var a=t(n,e,r);return a>-1?s[o?n[a]:a]:i}}function Iu(t){return cn(function(n){var e=n.length,r=e,s=Xt.prototype.thru;for(t&&n.reverse();r--;){var o=n[r];if(typeof o!="function")throw new Kt(x);if(s&&!a&&gr(o)=="wrapper")var a=new Xt([],!0)}for(r=a?r:e;++r<e;){o=n[r];var l=gr(o),h=l=="wrapper"?Li(o):i;h&&bi(h[0])&&h[1]==(Vt|Bt|Mt|Ln)&&!h[4].length&&h[9]==1?a=a[gr(h[0])].apply(a,h[3]):a=o.length==1&&bi(o)?a[l]():a.thru(o)}return function(){var _=arguments,v=_[0];if(a&&_.length==1&&F(v))return a.plant(v).value();for(var m=0,y=e?n[m].apply(this,_):v;++m<e;)y=n[m].call(this,y);return y}})}function ar(t,n,e,r,s,o,a,l,h,_){var v=n&Vt,m=n&D,y=n&ot,O=n&(Bt|_n),C=n&Bn,B=y?i:Re(t);function M(){for(var z=arguments.length,Y=g(z),Ft=z;Ft--;)Y[Ft]=arguments[Ft];if(O)var Ot=te(M),Ht=na(Y,Ot);if(r&&(Y=Eu(Y,r,s,O)),o&&(Y=Ru(Y,o,a,O)),z-=Ht,O&&z<_){var lt=xn(Y,Ot);return bu(t,n,ar,M.placeholder,e,Y,lt,l,h,_-z)}var tn=m?e:this,dn=y?tn[t]:t;return z=Y.length,l?Y=ac(Y,l):C&&z>1&&Y.reverse(),v&&h<z&&(Y.length=h),this&&this!==_t&&this instanceof M&&(dn=B||Re(dn)),dn.apply(tn,Y)}return M}function Cu(t,n){return function(e,r){return vl(e,t,n(r),{})}}function lr(t,n){return function(e,r){var s;if(e===i&&r===i)return n;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=Dt(e),r=Dt(r)):(e=du(e),r=du(r)),s=t(e,r)}return s}}function Ri(t){return cn(function(n){return n=rt(n,Nt(I())),W(function(e){var r=this;return t(n,function(s){return bt(s,r,e)})})})}function cr(t,n){n=n===i?" ":Dt(n);var e=n.length;if(e<2)return e?vi(n,t):n;var r=vi(n,$e(t/qn(n)));return Yn(n)?Tn($t(r),0,t).join(""):r.slice(0,t)}function Gl(t,n,e,r){var s=n&D,o=Re(t);function a(){for(var l=-1,h=arguments.length,_=-1,v=r.length,m=g(v+h),y=this&&this!==_t&&this instanceof a?o:t;++_<v;)m[_]=r[_];for(;h--;)m[_++]=arguments[++l];return bt(y,s?e:this,m)}return a}function Mu(t){return function(n,e,r){return r&&typeof r!="number"&&Tt(n,e,r)&&(e=r=i),n=pn(n),e===i?(e=n,n=0):e=pn(e),r=r===i?n<e?1:-1:pn(r),Il(n,e,r,t)}}function hr(t){return function(n,e){return typeof n=="string"&&typeof e=="string"||(n=Jt(n),e=Jt(e)),t(n,e)}}function bu(t,n,e,r,s,o,a,l,h,_){var v=n&Bt,m=v?a:i,y=v?i:a,O=v?o:i,C=v?i:o;n|=v?Mt:vn,n&=~(v?vn:Mt),n&se||(n&=~(D|ot));var B=[t,n,s,O,m,C,y,l,h,_],M=e.apply(i,B);return bi(t)&&Gu(M,B),M.placeholder=r,Yu(M,t,n)}function Ti(t){var n=ct[t];return function(e,r){if(e=Jt(e),r=r==null?0:xt(U(r),292),r&&Ys(e)){var s=(Q(e)+"e").split("e"),o=n(s[0]+"e"+(+s[1]+r));return s=(Q(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return n(e)}}var Yl=Zn&&1/ze(new Zn([,-0]))[1]==Et?function(t){return new Zn(t)}:Ji;function Nu(t){return function(n){var e=yt(n);return e==Zt?ni(n):e==Qt?fa(n):ta(n,t(n))}}function ln(t,n,e,r,s,o,a,l){var h=n&ot;if(!h&&typeof t!="function")throw new Kt(x);var _=r?r.length:0;if(_||(n&=~(Mt|vn),r=s=i),a=a===i?a:ht(U(a),0),l=l===i?l:U(l),_-=s?s.length:0,n&vn){var v=r,m=s;r=s=i}var y=h?i:Li(t),O=[t,n,e,r,s,v,m,o,a,l];if(y&&uc(O,y),t=O[0],n=O[1],e=O[2],r=O[3],s=O[4],l=O[9]=O[9]===i?h?0:t.length:ht(O[9]-_,0),!l&&n&(Bt|_n)&&(n&=~(Bt|_n)),!n||n==D)var C=Kl(t,n,e);else n==Bt||n==_n?C=Xl(t,n,l):(n==Mt||n==(D|Mt))&&!s.length?C=Gl(t,n,e,r):C=ar.apply(i,O);var B=y?gu:Gu;return Yu(B(C,O),t,n)}function Du(t,n,e,r){return t===i||jt(t,Vn[e])&&!$.call(r,e)?n:t}function Pu(t,n,e,r,s,o){return it(t)&&it(n)&&(o.set(n,t),sr(t,n,i,Pu,o),o.delete(n)),t}function ql(t){return Ae(t)?i:t}function Fu(t,n,e,r,s,o){var a=e&q,l=t.length,h=n.length;if(l!=h&&!(a&&h>l))return!1;var _=o.get(t),v=o.get(n);if(_&&v)return _==n&&v==t;var m=-1,y=!0,O=e&K?new bn:i;for(o.set(t,n),o.set(n,t);++m<l;){var C=t[m],B=n[m];if(r)var M=a?r(B,C,m,n,t,o):r(C,B,m,t,n,o);if(M!==i){if(M)continue;y=!1;break}if(O){if(!Zr(n,function(z,Y){if(!ge(O,Y)&&(C===z||s(C,z,e,r,o)))return O.push(Y)})){y=!1;break}}else if(!(C===B||s(C,B,e,r,o))){y=!1;break}}return o.delete(t),o.delete(n),y}function Jl(t,n,e,r,s,o,a){switch(e){case Kn:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case he:return!(t.byteLength!=n.byteLength||!o(new Je(t),new Je(n)));case ue:case oe:case fe:return jt(+t,+n);case Ne:return t.name==n.name&&t.message==n.message;case ae:case le:return t==n+"";case Zt:var l=ni;case Qt:var h=r&q;if(l||(l=ze),t.size!=n.size&&!h)return!1;var _=a.get(t);if(_)return _==n;r|=K,a.set(t,n);var v=Fu(l(t),l(n),r,s,o,a);return a.delete(t),v;case Pe:if(we)return we.call(t)==we.call(n)}return!1}function Vl(t,n,e,r,s,o){var a=e&q,l=Oi(t),h=l.length,_=Oi(n),v=_.length;if(h!=v&&!a)return!1;for(var m=h;m--;){var y=l[m];if(!(a?y in n:$.call(n,y)))return!1}var O=o.get(t),C=o.get(n);if(O&&C)return O==n&&C==t;var B=!0;o.set(t,n),o.set(n,t);for(var M=a;++m<h;){y=l[m];var z=t[y],Y=n[y];if(r)var Ft=a?r(Y,z,y,n,t,o):r(z,Y,y,t,n,o);if(!(Ft===i?z===Y||s(z,Y,e,r,o):Ft)){B=!1;break}M||(M=y=="constructor")}if(B&&!M){var Ot=t.constructor,Ht=n.constructor;Ot!=Ht&&"constructor"in t&&"constructor"in n&&!(typeof Ot=="function"&&Ot instanceof Ot&&typeof Ht=="function"&&Ht instanceof Ht)&&(B=!1)}return o.delete(t),o.delete(n),B}function cn(t){return Di(Ku(t,i,$u),t+"")}function Oi(t){return eu(t,pt,Ci)}function Ai(t){return eu(t,It,Hu)}var Li=je?function(t){return je.get(t)}:Ji;function gr(t){for(var n=t.name+"",e=Qn[n],r=$.call(Qn,n)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==t)return s.name}return n}function te(t){var n=$.call(u,"placeholder")?u:t;return n.placeholder}function I(){var t=u.iteratee||Yi;return t=t===Yi?su:t,arguments.length?t(arguments[0],arguments[1]):t}function pr(t,n){var e=t.__data__;return ec(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Ii(t){for(var n=pt(t),e=n.length;e--;){var r=n[e],s=t[r];n[e]=[r,s,Wu(s)]}return n}function Pn(t,n){var e=sa(t,n);return iu(e)?e:i}function Zl(t){var n=$.call(t,Cn),e=t[Cn];try{t[Cn]=i;var r=!0}catch{}var s=Ye.call(t);return r&&(n?t[Cn]=e:delete t[Cn]),s}var Ci=ri?function(t){return t==null?[]:(t=tt(t),wn(ri(t),function(n){return Xs.call(t,n)}))}:Vi,Hu=ri?function(t){for(var n=[];t;)mn(n,Ci(t)),t=Ve(t);return n}:Vi,yt=Rt;(ii&&yt(new ii(new ArrayBuffer(1)))!=Kn||de&&yt(new de)!=Zt||si&&yt(si.resolve())!=ji||Zn&&yt(new Zn)!=Qt||_e&&yt(new _e)!=ce)&&(yt=function(t){var n=Rt(t),e=n==un?t.constructor:i,r=e?Fn(e):"";if(r)switch(r){case Ma:return Kn;case ba:return Zt;case Na:return ji;case Da:return Qt;case Pa:return ce}return n});function Ql(t,n,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":n-=a;break;case"take":n=xt(n,t+a);break;case"takeRight":t=ht(t,n-a);break}}return{start:t,end:n}}function $l(t){var n=t.match(ef);return n?n[1].split(rf):[]}function Uu(t,n,e){n=Rn(n,t);for(var r=-1,s=n.length,o=!1;++r<s;){var a=sn(n[r]);if(!(o=t!=null&&e(t,a)))break;t=t[a]}return o||++r!=s?o:(s=t==null?0:t.length,!!s&&yr(s)&&hn(a,s)&&(F(t)||Hn(t)))}function kl(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&$.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Bu(t){return typeof t.constructor=="function"&&!Te(t)?$n(Ve(t)):{}}function jl(t,n,e){var r=t.constructor;switch(n){case he:return Ei(t);case ue:case oe:return new r(+t);case Kn:return Fl(t,e);case Ir:case Cr:case Mr:case br:case Nr:case Dr:case Pr:case Fr:case Hr:return yu(t,e);case Zt:return new r;case fe:case le:return new r(t);case ae:return Hl(t);case Qt:return new r;case Pe:return Ul(t)}}function tc(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(nf,`{
/* [wrapped with `+n+`] */
`)}function nc(t){return F(t)||Hn(t)||!!(Gs&&t&&t[Gs])}function hn(t,n){var e=typeof t;return n=n??wt,!!n&&(e=="number"||e!="symbol"&&gf.test(t))&&t>-1&&t%1==0&&t<n}function Tt(t,n,e){if(!it(e))return!1;var r=typeof n;return(r=="number"?Lt(e)&&hn(n,e.length):r=="string"&&n in e)?jt(e[n],t):!1}function Mi(t,n){if(F(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Pt(t)?!0:$o.test(t)||!Qo.test(t)||n!=null&&t in tt(n)}function ec(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function bi(t){var n=gr(t),e=u[n];if(typeof e!="function"||!(n in X.prototype))return!1;if(t===e)return!0;var r=Li(e);return!!r&&t===r[0]}function rc(t){return!!Ws&&Ws in t}var ic=Xe?gn:Zi;function Te(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Vn;return t===e}function Wu(t){return t===t&&!it(t)}function zu(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==i||t in tt(e))}}function sc(t){var n=mr(t,function(r){return e.size===H&&e.clear(),r}),e=n.cache;return n}function uc(t,n){var e=t[1],r=n[1],s=e|r,o=s<(D|ot|Vt),a=r==Vt&&e==Bt||r==Vt&&e==Ln&&t[7].length<=n[8]||r==(Vt|Ln)&&n[7].length<=n[8]&&e==Bt;if(!(o||a))return t;r&D&&(t[2]=n[2],s|=e&D?0:se);var l=n[3];if(l){var h=t[3];t[3]=h?Eu(h,l,n[4]):l,t[4]=h?xn(t[3],A):n[4]}return l=n[5],l&&(h=t[5],t[5]=h?Ru(h,l,n[6]):l,t[6]=h?xn(t[5],A):n[6]),l=n[7],l&&(t[7]=l),r&Vt&&(t[8]=t[8]==null?n[8]:xt(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=s,t}function oc(t){var n=[];if(t!=null)for(var e in tt(t))n.push(e);return n}function fc(t){return Ye.call(t)}function Ku(t,n,e){return n=ht(n===i?t.length-1:n,0),function(){for(var r=arguments,s=-1,o=ht(r.length-n,0),a=g(o);++s<o;)a[s]=r[n+s];s=-1;for(var l=g(n+1);++s<n;)l[s]=r[s];return l[n]=e(a),bt(t,this,l)}}function Xu(t,n){return n.length<2?t:Dn(t,Yt(n,0,-1))}function ac(t,n){for(var e=t.length,r=xt(n.length,e),s=At(t);r--;){var o=n[r];t[r]=hn(o,e)?s[o]:i}return t}function Ni(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Gu=qu(gu),Oe=Ra||function(t,n){return _t.setTimeout(t,n)},Di=qu(bl);function Yu(t,n,e){var r=n+"";return Di(t,tc(r,lc($l(r),e)))}function qu(t){var n=0,e=0;return function(){var r=La(),s=S-(r-e);if(e=r,s>0){if(++n>=Me)return arguments[0]}else n=0;return t.apply(i,arguments)}}function dr(t,n){var e=-1,r=t.length,s=r-1;for(n=n===i?r:n;++e<n;){var o=_i(e,s),a=t[o];t[o]=t[e],t[e]=a}return t.length=n,t}var Ju=sc(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(ko,function(e,r,s,o){n.push(s?o.replace(of,"$1"):r||e)}),n});function sn(t){if(typeof t=="string"||Pt(t))return t;var n=t+"";return n=="0"&&1/t==-Et?"-0":n}function Fn(t){if(t!=null){try{return Ge.call(t)}catch{}try{return t+""}catch{}}return""}function lc(t,n){return zt(Fo,function(e){var r="_."+e[0];n&e[1]&&!Be(t,r)&&t.push(r)}),t.sort()}function Vu(t){if(t instanceof X)return t.clone();var n=new Xt(t.__wrapped__,t.__chain__);return n.__actions__=At(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function cc(t,n,e){(e?Tt(t,n,e):n===i)?n=1:n=ht(U(n),0);var r=t==null?0:t.length;if(!r||n<1)return[];for(var s=0,o=0,a=g($e(r/n));s<r;)a[o++]=Yt(t,s,s+=n);return a}function hc(t){for(var n=-1,e=t==null?0:t.length,r=0,s=[];++n<e;){var o=t[n];o&&(s[r++]=o)}return s}function gc(){var t=arguments.length;if(!t)return[];for(var n=g(t-1),e=arguments[0],r=t;r--;)n[r-1]=arguments[r];return mn(F(e)?At(e):[e],vt(n,1))}var pc=W(function(t,n){return at(t)?xe(t,vt(n,1,at,!0)):[]}),dc=W(function(t,n){var e=qt(n);return at(e)&&(e=i),at(t)?xe(t,vt(n,1,at,!0),I(e,2)):[]}),_c=W(function(t,n){var e=qt(n);return at(e)&&(e=i),at(t)?xe(t,vt(n,1,at,!0),i,e):[]});function vc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:U(n),Yt(t,n<0?0:n,r)):[]}function wc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:U(n),n=r-n,Yt(t,0,n<0?0:n)):[]}function mc(t,n){return t&&t.length?or(t,I(n,3),!0,!0):[]}function xc(t,n){return t&&t.length?or(t,I(n,3),!0):[]}function yc(t,n,e,r){var s=t==null?0:t.length;return s?(e&&typeof e!="number"&&Tt(t,n,e)&&(e=0,r=s),gl(t,n,e,r)):[]}function Zu(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=e==null?0:U(e);return s<0&&(s=ht(r+s,0)),We(t,I(n,3),s)}function Qu(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=r-1;return e!==i&&(s=U(e),s=e<0?ht(r+s,0):xt(s,r-1)),We(t,I(n,3),s,!0)}function $u(t){var n=t==null?0:t.length;return n?vt(t,1):[]}function Sc(t){var n=t==null?0:t.length;return n?vt(t,Et):[]}function Ec(t,n){var e=t==null?0:t.length;return e?(n=n===i?1:U(n),vt(t,n)):[]}function Rc(t){for(var n=-1,e=t==null?0:t.length,r={};++n<e;){var s=t[n];r[s[0]]=s[1]}return r}function ku(t){return t&&t.length?t[0]:i}function Tc(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=e==null?0:U(e);return s<0&&(s=ht(r+s,0)),Gn(t,n,s)}function Oc(t){var n=t==null?0:t.length;return n?Yt(t,0,-1):[]}var Ac=W(function(t){var n=rt(t,yi);return n.length&&n[0]===t[0]?ci(n):[]}),Lc=W(function(t){var n=qt(t),e=rt(t,yi);return n===qt(e)?n=i:e.pop(),e.length&&e[0]===t[0]?ci(e,I(n,2)):[]}),Ic=W(function(t){var n=qt(t),e=rt(t,yi);return n=typeof n=="function"?n:i,n&&e.pop(),e.length&&e[0]===t[0]?ci(e,i,n):[]});function Cc(t,n){return t==null?"":Oa.call(t,n)}function qt(t){var n=t==null?0:t.length;return n?t[n-1]:i}function Mc(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=r;return e!==i&&(s=U(e),s=s<0?ht(r+s,0):xt(s,r-1)),n===n?la(t,n,s):We(t,bs,s,!0)}function bc(t,n){return t&&t.length?au(t,U(n)):i}var Nc=W(ju);function ju(t,n){return t&&t.length&&n&&n.length?di(t,n):t}function Dc(t,n,e){return t&&t.length&&n&&n.length?di(t,n,I(e,2)):t}function Pc(t,n,e){return t&&t.length&&n&&n.length?di(t,n,i,e):t}var Fc=cn(function(t,n){var e=t==null?0:t.length,r=oi(t,n);return hu(t,rt(n,function(s){return hn(s,e)?+s:s}).sort(Su)),r});function Hc(t,n){var e=[];if(!(t&&t.length))return e;var r=-1,s=[],o=t.length;for(n=I(n,3);++r<o;){var a=t[r];n(a,r,t)&&(e.push(a),s.push(r))}return hu(t,s),e}function Pi(t){return t==null?t:Ca.call(t)}function Uc(t,n,e){var r=t==null?0:t.length;return r?(e&&typeof e!="number"&&Tt(t,n,e)?(n=0,e=r):(n=n==null?0:U(n),e=e===i?r:U(e)),Yt(t,n,e)):[]}function Bc(t,n){return ur(t,n)}function Wc(t,n,e){return wi(t,n,I(e,2))}function zc(t,n){var e=t==null?0:t.length;if(e){var r=ur(t,n);if(r<e&&jt(t[r],n))return r}return-1}function Kc(t,n){return ur(t,n,!0)}function Xc(t,n,e){return wi(t,n,I(e,2),!0)}function Gc(t,n){var e=t==null?0:t.length;if(e){var r=ur(t,n,!0)-1;if(jt(t[r],n))return r}return-1}function Yc(t){return t&&t.length?pu(t):[]}function qc(t,n){return t&&t.length?pu(t,I(n,2)):[]}function Jc(t){var n=t==null?0:t.length;return n?Yt(t,1,n):[]}function Vc(t,n,e){return t&&t.length?(n=e||n===i?1:U(n),Yt(t,0,n<0?0:n)):[]}function Zc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:U(n),n=r-n,Yt(t,n<0?0:n,r)):[]}function Qc(t,n){return t&&t.length?or(t,I(n,3),!1,!0):[]}function $c(t,n){return t&&t.length?or(t,I(n,3)):[]}var kc=W(function(t){return En(vt(t,1,at,!0))}),jc=W(function(t){var n=qt(t);return at(n)&&(n=i),En(vt(t,1,at,!0),I(n,2))}),th=W(function(t){var n=qt(t);return n=typeof n=="function"?n:i,En(vt(t,1,at,!0),i,n)});function nh(t){return t&&t.length?En(t):[]}function eh(t,n){return t&&t.length?En(t,I(n,2)):[]}function rh(t,n){return n=typeof n=="function"?n:i,t&&t.length?En(t,i,n):[]}function Fi(t){if(!(t&&t.length))return[];var n=0;return t=wn(t,function(e){if(at(e))return n=ht(e.length,n),!0}),jr(n,function(e){return rt(t,Qr(e))})}function to(t,n){if(!(t&&t.length))return[];var e=Fi(t);return n==null?e:rt(e,function(r){return bt(n,i,r)})}var ih=W(function(t,n){return at(t)?xe(t,n):[]}),sh=W(function(t){return xi(wn(t,at))}),uh=W(function(t){var n=qt(t);return at(n)&&(n=i),xi(wn(t,at),I(n,2))}),oh=W(function(t){var n=qt(t);return n=typeof n=="function"?n:i,xi(wn(t,at),i,n)}),fh=W(Fi);function ah(t,n){return wu(t||[],n||[],me)}function lh(t,n){return wu(t||[],n||[],Ee)}var ch=W(function(t){var n=t.length,e=n>1?t[n-1]:i;return e=typeof e=="function"?(t.pop(),e):i,to(t,e)});function no(t){var n=u(t);return n.__chain__=!0,n}function hh(t,n){return n(t),t}function _r(t,n){return n(t)}var gh=cn(function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,s=function(o){return oi(o,t)};return n>1||this.__actions__.length||!(r instanceof X)||!hn(e)?this.thru(s):(r=r.slice(e,+e+(n?1:0)),r.__actions__.push({func:_r,args:[s],thisArg:i}),new Xt(r,this.__chain__).thru(function(o){return n&&!o.length&&o.push(i),o}))});function ph(){return no(this)}function dh(){return new Xt(this.value(),this.__chain__)}function _h(){this.__values__===i&&(this.__values__=_o(this.value()));var t=this.__index__>=this.__values__.length,n=t?i:this.__values__[this.__index__++];return{done:t,value:n}}function vh(){return this}function wh(t){for(var n,e=this;e instanceof nr;){var r=Vu(e);r.__index__=0,r.__values__=i,n?s.__wrapped__=r:n=r;var s=r;e=e.__wrapped__}return s.__wrapped__=t,n}function mh(){var t=this.__wrapped__;if(t instanceof X){var n=t;return this.__actions__.length&&(n=new X(this)),n=n.reverse(),n.__actions__.push({func:_r,args:[Pi],thisArg:i}),new Xt(n,this.__chain__)}return this.thru(Pi)}function xh(){return vu(this.__wrapped__,this.__actions__)}var yh=fr(function(t,n,e){$.call(t,e)?++t[e]:an(t,e,1)});function Sh(t,n,e){var r=F(t)?Cs:hl;return e&&Tt(t,n,e)&&(n=i),r(t,I(n,3))}function Eh(t,n){var e=F(t)?wn:tu;return e(t,I(n,3))}var Rh=Lu(Zu),Th=Lu(Qu);function Oh(t,n){return vt(vr(t,n),1)}function Ah(t,n){return vt(vr(t,n),Et)}function Lh(t,n,e){return e=e===i?1:U(e),vt(vr(t,n),e)}function eo(t,n){var e=F(t)?zt:Sn;return e(t,I(n,3))}function ro(t,n){var e=F(t)?Jf:js;return e(t,I(n,3))}var Ih=fr(function(t,n,e){$.call(t,e)?t[e].push(n):an(t,e,[n])});function Ch(t,n,e,r){t=Lt(t)?t:ee(t),e=e&&!r?U(e):0;var s=t.length;return e<0&&(e=ht(s+e,0)),Sr(t)?e<=s&&t.indexOf(n,e)>-1:!!s&&Gn(t,n,e)>-1}var Mh=W(function(t,n,e){var r=-1,s=typeof n=="function",o=Lt(t)?g(t.length):[];return Sn(t,function(a){o[++r]=s?bt(n,a,e):ye(a,n,e)}),o}),bh=fr(function(t,n,e){an(t,e,n)});function vr(t,n){var e=F(t)?rt:uu;return e(t,I(n,3))}function Nh(t,n,e,r){return t==null?[]:(F(n)||(n=n==null?[]:[n]),e=r?i:e,F(e)||(e=e==null?[]:[e]),lu(t,n,e))}var Dh=fr(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]});function Ph(t,n,e){var r=F(t)?Vr:Ds,s=arguments.length<3;return r(t,I(n,4),e,s,Sn)}function Fh(t,n,e){var r=F(t)?Vf:Ds,s=arguments.length<3;return r(t,I(n,4),e,s,js)}function Hh(t,n){var e=F(t)?wn:tu;return e(t,xr(I(n,3)))}function Uh(t){var n=F(t)?Zs:Cl;return n(t)}function Bh(t,n,e){(e?Tt(t,n,e):n===i)?n=1:n=U(n);var r=F(t)?ol:Ml;return r(t,n)}function Wh(t){var n=F(t)?fl:Nl;return n(t)}function zh(t){if(t==null)return 0;if(Lt(t))return Sr(t)?qn(t):t.length;var n=yt(t);return n==Zt||n==Qt?t.size:gi(t).length}function Kh(t,n,e){var r=F(t)?Zr:Dl;return e&&Tt(t,n,e)&&(n=i),r(t,I(n,3))}var Xh=W(function(t,n){if(t==null)return[];var e=n.length;return e>1&&Tt(t,n[0],n[1])?n=[]:e>2&&Tt(n[0],n[1],n[2])&&(n=[n[0]]),lu(t,vt(n,1),[])}),wr=Ea||function(){return _t.Date.now()};function Gh(t,n){if(typeof n!="function")throw new Kt(x);return t=U(t),function(){if(--t<1)return n.apply(this,arguments)}}function io(t,n,e){return n=e?i:n,n=t&&n==null?t.length:n,ln(t,Vt,i,i,i,i,n)}function so(t,n){var e;if(typeof n!="function")throw new Kt(x);return t=U(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var Hi=W(function(t,n,e){var r=D;if(e.length){var s=xn(e,te(Hi));r|=Mt}return ln(t,r,n,e,s)}),uo=W(function(t,n,e){var r=D|ot;if(e.length){var s=xn(e,te(uo));r|=Mt}return ln(n,r,t,e,s)});function oo(t,n,e){n=e?i:n;var r=ln(t,Bt,i,i,i,i,i,n);return r.placeholder=oo.placeholder,r}function fo(t,n,e){n=e?i:n;var r=ln(t,_n,i,i,i,i,i,n);return r.placeholder=fo.placeholder,r}function ao(t,n,e){var r,s,o,a,l,h,_=0,v=!1,m=!1,y=!0;if(typeof t!="function")throw new Kt(x);n=Jt(n)||0,it(e)&&(v=!!e.leading,m="maxWait"in e,o=m?ht(Jt(e.maxWait)||0,n):o,y="trailing"in e?!!e.trailing:y);function O(lt){var tn=r,dn=s;return r=s=i,_=lt,a=t.apply(dn,tn),a}function C(lt){return _=lt,l=Oe(z,n),v?O(lt):a}function B(lt){var tn=lt-h,dn=lt-_,Io=n-tn;return m?xt(Io,o-dn):Io}function M(lt){var tn=lt-h,dn=lt-_;return h===i||tn>=n||tn<0||m&&dn>=o}function z(){var lt=wr();if(M(lt))return Y(lt);l=Oe(z,B(lt))}function Y(lt){return l=i,y&&r?O(lt):(r=s=i,a)}function Ft(){l!==i&&mu(l),_=0,r=h=s=l=i}function Ot(){return l===i?a:Y(wr())}function Ht(){var lt=wr(),tn=M(lt);if(r=arguments,s=this,h=lt,tn){if(l===i)return C(h);if(m)return mu(l),l=Oe(z,n),O(h)}return l===i&&(l=Oe(z,n)),a}return Ht.cancel=Ft,Ht.flush=Ot,Ht}var Yh=W(function(t,n){return ks(t,1,n)}),qh=W(function(t,n,e){return ks(t,Jt(n)||0,e)});function Jh(t){return ln(t,Bn)}function mr(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Kt(x);var e=function(){var r=arguments,s=n?n.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=t.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new(mr.Cache||fn),e}mr.Cache=fn;function xr(t){if(typeof t!="function")throw new Kt(x);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Vh(t){return so(2,t)}var Zh=Pl(function(t,n){n=n.length==1&&F(n[0])?rt(n[0],Nt(I())):rt(vt(n,1),Nt(I()));var e=n.length;return W(function(r){for(var s=-1,o=xt(r.length,e);++s<o;)r[s]=n[s].call(this,r[s]);return bt(t,this,r)})}),Ui=W(function(t,n){var e=xn(n,te(Ui));return ln(t,Mt,i,n,e)}),lo=W(function(t,n){var e=xn(n,te(lo));return ln(t,vn,i,n,e)}),Qh=cn(function(t,n){return ln(t,Ln,i,i,i,n)});function $h(t,n){if(typeof t!="function")throw new Kt(x);return n=n===i?n:U(n),W(t,n)}function kh(t,n){if(typeof t!="function")throw new Kt(x);return n=n==null?0:ht(U(n),0),W(function(e){var r=e[n],s=Tn(e,0,n);return r&&mn(s,r),bt(t,this,s)})}function jh(t,n,e){var r=!0,s=!0;if(typeof t!="function")throw new Kt(x);return it(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),ao(t,n,{leading:r,maxWait:n,trailing:s})}function tg(t){return io(t,1)}function ng(t,n){return Ui(Si(n),t)}function eg(){if(!arguments.length)return[];var t=arguments[0];return F(t)?t:[t]}function rg(t){return Gt(t,j)}function ig(t,n){return n=typeof n=="function"?n:i,Gt(t,j,n)}function sg(t){return Gt(t,T|j)}function ug(t,n){return n=typeof n=="function"?n:i,Gt(t,T|j,n)}function og(t,n){return n==null||$s(t,n,pt(n))}function jt(t,n){return t===n||t!==t&&n!==n}var fg=hr(li),ag=hr(function(t,n){return t>=n}),Hn=ru(function(){return arguments}())?ru:function(t){return ft(t)&&$.call(t,"callee")&&!Xs.call(t,"callee")},F=g.isArray,lg=Rs?Nt(Rs):wl;function Lt(t){return t!=null&&yr(t.length)&&!gn(t)}function at(t){return ft(t)&&Lt(t)}function cg(t){return t===!0||t===!1||ft(t)&&Rt(t)==ue}var On=Ta||Zi,hg=Ts?Nt(Ts):ml;function gg(t){return ft(t)&&t.nodeType===1&&!Ae(t)}function pg(t){if(t==null)return!0;if(Lt(t)&&(F(t)||typeof t=="string"||typeof t.splice=="function"||On(t)||ne(t)||Hn(t)))return!t.length;var n=yt(t);if(n==Zt||n==Qt)return!t.size;if(Te(t))return!gi(t).length;for(var e in t)if($.call(t,e))return!1;return!0}function dg(t,n){return Se(t,n)}function _g(t,n,e){e=typeof e=="function"?e:i;var r=e?e(t,n):i;return r===i?Se(t,n,i,e):!!r}function Bi(t){if(!ft(t))return!1;var n=Rt(t);return n==Ne||n==Uo||typeof t.message=="string"&&typeof t.name=="string"&&!Ae(t)}function vg(t){return typeof t=="number"&&Ys(t)}function gn(t){if(!it(t))return!1;var n=Rt(t);return n==De||n==ki||n==Ho||n==Wo}function co(t){return typeof t=="number"&&t==U(t)}function yr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=wt}function it(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function ft(t){return t!=null&&typeof t=="object"}var ho=Os?Nt(Os):yl;function wg(t,n){return t===n||hi(t,n,Ii(n))}function mg(t,n,e){return e=typeof e=="function"?e:i,hi(t,n,Ii(n),e)}function xg(t){return go(t)&&t!=+t}function yg(t){if(ic(t))throw new P(E);return iu(t)}function Sg(t){return t===null}function Eg(t){return t==null}function go(t){return typeof t=="number"||ft(t)&&Rt(t)==fe}function Ae(t){if(!ft(t)||Rt(t)!=un)return!1;var n=Ve(t);if(n===null)return!0;var e=$.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Ge.call(e)==ma}var Wi=As?Nt(As):Sl;function Rg(t){return co(t)&&t>=-wt&&t<=wt}var po=Ls?Nt(Ls):El;function Sr(t){return typeof t=="string"||!F(t)&&ft(t)&&Rt(t)==le}function Pt(t){return typeof t=="symbol"||ft(t)&&Rt(t)==Pe}var ne=Is?Nt(Is):Rl;function Tg(t){return t===i}function Og(t){return ft(t)&&yt(t)==ce}function Ag(t){return ft(t)&&Rt(t)==Ko}var Lg=hr(pi),Ig=hr(function(t,n){return t<=n});function _o(t){if(!t)return[];if(Lt(t))return Sr(t)?$t(t):At(t);if(pe&&t[pe])return oa(t[pe]());var n=yt(t),e=n==Zt?ni:n==Qt?ze:ee;return e(t)}function pn(t){if(!t)return t===0?t:0;if(t=Jt(t),t===Et||t===-Et){var n=t<0?-1:1;return n*Wn}return t===t?t:0}function U(t){var n=pn(t),e=n%1;return n===n?e?n-e:n:0}function vo(t){return t?Nn(U(t),0,nn):0}function Jt(t){if(typeof t=="number")return t;if(Pt(t))return mt;if(it(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=it(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Ps(t);var e=lf.test(t);return e||hf.test(t)?Gf(t.slice(2),e?2:8):af.test(t)?mt:+t}function wo(t){return rn(t,It(t))}function Cg(t){return t?Nn(U(t),-wt,wt):t===0?t:0}function Q(t){return t==null?"":Dt(t)}var Mg=kn(function(t,n){if(Te(n)||Lt(n)){rn(n,pt(n),t);return}for(var e in n)$.call(n,e)&&me(t,e,n[e])}),mo=kn(function(t,n){rn(n,It(n),t)}),Er=kn(function(t,n,e,r){rn(n,It(n),t,r)}),bg=kn(function(t,n,e,r){rn(n,pt(n),t,r)}),Ng=cn(oi);function Dg(t,n){var e=$n(t);return n==null?e:Qs(e,n)}var Pg=W(function(t,n){t=tt(t);var e=-1,r=n.length,s=r>2?n[2]:i;for(s&&Tt(n[0],n[1],s)&&(r=1);++e<r;)for(var o=n[e],a=It(o),l=-1,h=a.length;++l<h;){var _=a[l],v=t[_];(v===i||jt(v,Vn[_])&&!$.call(t,_))&&(t[_]=o[_])}return t}),Fg=W(function(t){return t.push(i,Pu),bt(xo,i,t)});function Hg(t,n){return Ms(t,I(n,3),en)}function Ug(t,n){return Ms(t,I(n,3),ai)}function Bg(t,n){return t==null?t:fi(t,I(n,3),It)}function Wg(t,n){return t==null?t:nu(t,I(n,3),It)}function zg(t,n){return t&&en(t,I(n,3))}function Kg(t,n){return t&&ai(t,I(n,3))}function Xg(t){return t==null?[]:ir(t,pt(t))}function Gg(t){return t==null?[]:ir(t,It(t))}function zi(t,n,e){var r=t==null?i:Dn(t,n);return r===i?e:r}function Yg(t,n){return t!=null&&Uu(t,n,pl)}function Ki(t,n){return t!=null&&Uu(t,n,dl)}var qg=Cu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=Ye.call(n)),t[n]=e},Gi(Ct)),Jg=Cu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=Ye.call(n)),$.call(t,n)?t[n].push(e):t[n]=[e]},I),Vg=W(ye);function pt(t){return Lt(t)?Vs(t):gi(t)}function It(t){return Lt(t)?Vs(t,!0):Tl(t)}function Zg(t,n){var e={};return n=I(n,3),en(t,function(r,s,o){an(e,n(r,s,o),r)}),e}function Qg(t,n){var e={};return n=I(n,3),en(t,function(r,s,o){an(e,s,n(r,s,o))}),e}var $g=kn(function(t,n,e){sr(t,n,e)}),xo=kn(function(t,n,e,r){sr(t,n,e,r)}),kg=cn(function(t,n){var e={};if(t==null)return e;var r=!1;n=rt(n,function(o){return o=Rn(o,t),r||(r=o.length>1),o}),rn(t,Ai(t),e),r&&(e=Gt(e,T|G|j,ql));for(var s=n.length;s--;)mi(e,n[s]);return e});function jg(t,n){return yo(t,xr(I(n)))}var tp=cn(function(t,n){return t==null?{}:Al(t,n)});function yo(t,n){if(t==null)return{};var e=rt(Ai(t),function(r){return[r]});return n=I(n),cu(t,e,function(r,s){return n(r,s[0])})}function np(t,n,e){n=Rn(n,t);var r=-1,s=n.length;for(s||(s=1,t=i);++r<s;){var o=t==null?i:t[sn(n[r])];o===i&&(r=s,o=e),t=gn(o)?o.call(t):o}return t}function ep(t,n,e){return t==null?t:Ee(t,n,e)}function rp(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:Ee(t,n,e,r)}var So=Nu(pt),Eo=Nu(It);function ip(t,n,e){var r=F(t),s=r||On(t)||ne(t);if(n=I(n,4),e==null){var o=t&&t.constructor;s?e=r?new o:[]:it(t)?e=gn(o)?$n(Ve(t)):{}:e={}}return(s?zt:en)(t,function(a,l,h){return n(e,a,l,h)}),e}function sp(t,n){return t==null?!0:mi(t,n)}function up(t,n,e){return t==null?t:_u(t,n,Si(e))}function op(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:_u(t,n,Si(e),r)}function ee(t){return t==null?[]:ti(t,pt(t))}function fp(t){return t==null?[]:ti(t,It(t))}function ap(t,n,e){return e===i&&(e=n,n=i),e!==i&&(e=Jt(e),e=e===e?e:0),n!==i&&(n=Jt(n),n=n===n?n:0),Nn(Jt(t),n,e)}function lp(t,n,e){return n=pn(n),e===i?(e=n,n=0):e=pn(e),t=Jt(t),_l(t,n,e)}function cp(t,n,e){if(e&&typeof e!="boolean"&&Tt(t,n,e)&&(n=e=i),e===i&&(typeof n=="boolean"?(e=n,n=i):typeof t=="boolean"&&(e=t,t=i)),t===i&&n===i?(t=0,n=1):(t=pn(t),n===i?(n=t,t=0):n=pn(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var s=qs();return xt(t+s*(n-t+Xf("1e-"+((s+"").length-1))),n)}return _i(t,n)}var hp=jn(function(t,n,e){return n=n.toLowerCase(),t+(e?Ro(n):n)});function Ro(t){return Xi(Q(t).toLowerCase())}function To(t){return t=Q(t),t&&t.replace(pf,ea).replace(Nf,"")}function gp(t,n,e){t=Q(t),n=Dt(n);var r=t.length;e=e===i?r:Nn(U(e),0,r);var s=e;return e-=n.length,e>=0&&t.slice(e,s)==n}function pp(t){return t=Q(t),t&&Jo.test(t)?t.replace(ns,ra):t}function dp(t){return t=Q(t),t&&jo.test(t)?t.replace(Ur,"\\$&"):t}var _p=jn(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),vp=jn(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),wp=Au("toLowerCase");function mp(t,n,e){t=Q(t),n=U(n);var r=n?qn(t):0;if(!n||r>=n)return t;var s=(n-r)/2;return cr(ke(s),e)+t+cr($e(s),e)}function xp(t,n,e){t=Q(t),n=U(n);var r=n?qn(t):0;return n&&r<n?t+cr(n-r,e):t}function yp(t,n,e){t=Q(t),n=U(n);var r=n?qn(t):0;return n&&r<n?cr(n-r,e)+t:t}function Sp(t,n,e){return e||n==null?n=0:n&&(n=+n),Ia(Q(t).replace(Br,""),n||0)}function Ep(t,n,e){return(e?Tt(t,n,e):n===i)?n=1:n=U(n),vi(Q(t),n)}function Rp(){var t=arguments,n=Q(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var Tp=jn(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()});function Op(t,n,e){return e&&typeof e!="number"&&Tt(t,n,e)&&(n=e=i),e=e===i?nn:e>>>0,e?(t=Q(t),t&&(typeof n=="string"||n!=null&&!Wi(n))&&(n=Dt(n),!n&&Yn(t))?Tn($t(t),0,e):t.split(n,e)):[]}var Ap=jn(function(t,n,e){return t+(e?" ":"")+Xi(n)});function Lp(t,n,e){return t=Q(t),e=e==null?0:Nn(U(e),0,t.length),n=Dt(n),t.slice(e,e+n.length)==n}function Ip(t,n,e){var r=u.templateSettings;e&&Tt(t,n,e)&&(n=i),t=Q(t),n=Er({},n,r,Du);var s=Er({},n.imports,r.imports,Du),o=pt(s),a=ti(s,o),l,h,_=0,v=n.interpolate||Fe,m="__p += '",y=ei((n.escape||Fe).source+"|"+v.source+"|"+(v===es?ff:Fe).source+"|"+(n.evaluate||Fe).source+"|$","g"),O="//# sourceURL="+($.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uf+"]")+`
`;t.replace(y,function(M,z,Y,Ft,Ot,Ht){return Y||(Y=Ft),m+=t.slice(_,Ht).replace(df,ia),z&&(l=!0,m+=`' +
__e(`+z+`) +
'`),Ot&&(h=!0,m+=`';
`+Ot+`;
__p += '`),Y&&(m+=`' +
((__t = (`+Y+`)) == null ? '' : __t) +
'`),_=Ht+M.length,M}),m+=`';
`;var C=$.call(n,"variable")&&n.variable;if(!C)m=`with (obj) {
`+m+`
}
`;else if(uf.test(C))throw new P(b);m=(h?m.replace(Xo,""):m).replace(Go,"$1").replace(Yo,"$1;"),m="function("+(C||"obj")+`) {
`+(C?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+m+`return __p
}`;var B=Ao(function(){return Z(o,O+"return "+m).apply(i,a)});if(B.source=m,Bi(B))throw B;return B}function Cp(t){return Q(t).toLowerCase()}function Mp(t){return Q(t).toUpperCase()}function bp(t,n,e){if(t=Q(t),t&&(e||n===i))return Ps(t);if(!t||!(n=Dt(n)))return t;var r=$t(t),s=$t(n),o=Fs(r,s),a=Hs(r,s)+1;return Tn(r,o,a).join("")}function Np(t,n,e){if(t=Q(t),t&&(e||n===i))return t.slice(0,Bs(t)+1);if(!t||!(n=Dt(n)))return t;var r=$t(t),s=Hs(r,$t(n))+1;return Tn(r,0,s).join("")}function Dp(t,n,e){if(t=Q(t),t&&(e||n===i))return t.replace(Br,"");if(!t||!(n=Dt(n)))return t;var r=$t(t),s=Fs(r,$t(n));return Tn(r,s).join("")}function Pp(t,n){var e=Ar,r=Lr;if(it(n)){var s="separator"in n?n.separator:s;e="length"in n?U(n.length):e,r="omission"in n?Dt(n.omission):r}t=Q(t);var o=t.length;if(Yn(t)){var a=$t(t);o=a.length}if(e>=o)return t;var l=e-qn(r);if(l<1)return r;var h=a?Tn(a,0,l).join(""):t.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),Wi(s)){if(t.slice(l).search(s)){var _,v=h;for(s.global||(s=ei(s.source,Q(rs.exec(s))+"g")),s.lastIndex=0;_=s.exec(v);)var m=_.index;h=h.slice(0,m===i?l:m)}}else if(t.indexOf(Dt(s),l)!=l){var y=h.lastIndexOf(s);y>-1&&(h=h.slice(0,y))}return h+r}function Fp(t){return t=Q(t),t&&qo.test(t)?t.replace(ts,ca):t}var Hp=jn(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),Xi=Au("toUpperCase");function Oo(t,n,e){return t=Q(t),n=e?i:n,n===i?ua(t)?pa(t):$f(t):t.match(n)||[]}var Ao=W(function(t,n){try{return bt(t,i,n)}catch(e){return Bi(e)?e:new P(e)}}),Up=cn(function(t,n){return zt(n,function(e){e=sn(e),an(t,e,Hi(t[e],t))}),t});function Bp(t){var n=t==null?0:t.length,e=I();return t=n?rt(t,function(r){if(typeof r[1]!="function")throw new Kt(x);return[e(r[0]),r[1]]}):[],W(function(r){for(var s=-1;++s<n;){var o=t[s];if(bt(o[0],this,r))return bt(o[1],this,r)}})}function Wp(t){return cl(Gt(t,T))}function Gi(t){return function(){return t}}function zp(t,n){return t==null||t!==t?n:t}var Kp=Iu(),Xp=Iu(!0);function Ct(t){return t}function Yi(t){return su(typeof t=="function"?t:Gt(t,T))}function Gp(t){return ou(Gt(t,T))}function Yp(t,n){return fu(t,Gt(n,T))}var qp=W(function(t,n){return function(e){return ye(e,t,n)}}),Jp=W(function(t,n){return function(e){return ye(t,e,n)}});function qi(t,n,e){var r=pt(n),s=ir(n,r);e==null&&!(it(n)&&(s.length||!r.length))&&(e=n,n=t,t=this,s=ir(n,pt(n)));var o=!(it(e)&&"chain"in e)||!!e.chain,a=gn(t);return zt(s,function(l){var h=n[l];t[l]=h,a&&(t.prototype[l]=function(){var _=this.__chain__;if(o||_){var v=t(this.__wrapped__),m=v.__actions__=At(this.__actions__);return m.push({func:h,args:arguments,thisArg:t}),v.__chain__=_,v}return h.apply(t,mn([this.value()],arguments))})}),t}function Vp(){return _t._===this&&(_t._=xa),this}function Ji(){}function Zp(t){return t=U(t),W(function(n){return au(n,t)})}var Qp=Ri(rt),$p=Ri(Cs),kp=Ri(Zr);function Lo(t){return Mi(t)?Qr(sn(t)):Ll(t)}function jp(t){return function(n){return t==null?i:Dn(t,n)}}var td=Mu(),nd=Mu(!0);function Vi(){return[]}function Zi(){return!1}function ed(){return{}}function rd(){return""}function id(){return!0}function sd(t,n){if(t=U(t),t<1||t>wt)return[];var e=nn,r=xt(t,nn);n=I(n),t-=nn;for(var s=jr(r,n);++e<t;)n(e);return s}function ud(t){return F(t)?rt(t,sn):Pt(t)?[t]:At(Ju(Q(t)))}function od(t){var n=++wa;return Q(t)+n}var fd=lr(function(t,n){return t+n},0),ad=Ti("ceil"),ld=lr(function(t,n){return t/n},1),cd=Ti("floor");function hd(t){return t&&t.length?rr(t,Ct,li):i}function gd(t,n){return t&&t.length?rr(t,I(n,2),li):i}function pd(t){return Ns(t,Ct)}function dd(t,n){return Ns(t,I(n,2))}function _d(t){return t&&t.length?rr(t,Ct,pi):i}function vd(t,n){return t&&t.length?rr(t,I(n,2),pi):i}var wd=lr(function(t,n){return t*n},1),md=Ti("round"),xd=lr(function(t,n){return t-n},0);function yd(t){return t&&t.length?kr(t,Ct):0}function Sd(t,n){return t&&t.length?kr(t,I(n,2)):0}return u.after=Gh,u.ary=io,u.assign=Mg,u.assignIn=mo,u.assignInWith=Er,u.assignWith=bg,u.at=Ng,u.before=so,u.bind=Hi,u.bindAll=Up,u.bindKey=uo,u.castArray=eg,u.chain=no,u.chunk=cc,u.compact=hc,u.concat=gc,u.cond=Bp,u.conforms=Wp,u.constant=Gi,u.countBy=yh,u.create=Dg,u.curry=oo,u.curryRight=fo,u.debounce=ao,u.defaults=Pg,u.defaultsDeep=Fg,u.defer=Yh,u.delay=qh,u.difference=pc,u.differenceBy=dc,u.differenceWith=_c,u.drop=vc,u.dropRight=wc,u.dropRightWhile=mc,u.dropWhile=xc,u.fill=yc,u.filter=Eh,u.flatMap=Oh,u.flatMapDeep=Ah,u.flatMapDepth=Lh,u.flatten=$u,u.flattenDeep=Sc,u.flattenDepth=Ec,u.flip=Jh,u.flow=Kp,u.flowRight=Xp,u.fromPairs=Rc,u.functions=Xg,u.functionsIn=Gg,u.groupBy=Ih,u.initial=Oc,u.intersection=Ac,u.intersectionBy=Lc,u.intersectionWith=Ic,u.invert=qg,u.invertBy=Jg,u.invokeMap=Mh,u.iteratee=Yi,u.keyBy=bh,u.keys=pt,u.keysIn=It,u.map=vr,u.mapKeys=Zg,u.mapValues=Qg,u.matches=Gp,u.matchesProperty=Yp,u.memoize=mr,u.merge=$g,u.mergeWith=xo,u.method=qp,u.methodOf=Jp,u.mixin=qi,u.negate=xr,u.nthArg=Zp,u.omit=kg,u.omitBy=jg,u.once=Vh,u.orderBy=Nh,u.over=Qp,u.overArgs=Zh,u.overEvery=$p,u.overSome=kp,u.partial=Ui,u.partialRight=lo,u.partition=Dh,u.pick=tp,u.pickBy=yo,u.property=Lo,u.propertyOf=jp,u.pull=Nc,u.pullAll=ju,u.pullAllBy=Dc,u.pullAllWith=Pc,u.pullAt=Fc,u.range=td,u.rangeRight=nd,u.rearg=Qh,u.reject=Hh,u.remove=Hc,u.rest=$h,u.reverse=Pi,u.sampleSize=Bh,u.set=ep,u.setWith=rp,u.shuffle=Wh,u.slice=Uc,u.sortBy=Xh,u.sortedUniq=Yc,u.sortedUniqBy=qc,u.split=Op,u.spread=kh,u.tail=Jc,u.take=Vc,u.takeRight=Zc,u.takeRightWhile=Qc,u.takeWhile=$c,u.tap=hh,u.throttle=jh,u.thru=_r,u.toArray=_o,u.toPairs=So,u.toPairsIn=Eo,u.toPath=ud,u.toPlainObject=wo,u.transform=ip,u.unary=tg,u.union=kc,u.unionBy=jc,u.unionWith=th,u.uniq=nh,u.uniqBy=eh,u.uniqWith=rh,u.unset=sp,u.unzip=Fi,u.unzipWith=to,u.update=up,u.updateWith=op,u.values=ee,u.valuesIn=fp,u.without=ih,u.words=Oo,u.wrap=ng,u.xor=sh,u.xorBy=uh,u.xorWith=oh,u.zip=fh,u.zipObject=ah,u.zipObjectDeep=lh,u.zipWith=ch,u.entries=So,u.entriesIn=Eo,u.extend=mo,u.extendWith=Er,qi(u,u),u.add=fd,u.attempt=Ao,u.camelCase=hp,u.capitalize=Ro,u.ceil=ad,u.clamp=ap,u.clone=rg,u.cloneDeep=sg,u.cloneDeepWith=ug,u.cloneWith=ig,u.conformsTo=og,u.deburr=To,u.defaultTo=zp,u.divide=ld,u.endsWith=gp,u.eq=jt,u.escape=pp,u.escapeRegExp=dp,u.every=Sh,u.find=Rh,u.findIndex=Zu,u.findKey=Hg,u.findLast=Th,u.findLastIndex=Qu,u.findLastKey=Ug,u.floor=cd,u.forEach=eo,u.forEachRight=ro,u.forIn=Bg,u.forInRight=Wg,u.forOwn=zg,u.forOwnRight=Kg,u.get=zi,u.gt=fg,u.gte=ag,u.has=Yg,u.hasIn=Ki,u.head=ku,u.identity=Ct,u.includes=Ch,u.indexOf=Tc,u.inRange=lp,u.invoke=Vg,u.isArguments=Hn,u.isArray=F,u.isArrayBuffer=lg,u.isArrayLike=Lt,u.isArrayLikeObject=at,u.isBoolean=cg,u.isBuffer=On,u.isDate=hg,u.isElement=gg,u.isEmpty=pg,u.isEqual=dg,u.isEqualWith=_g,u.isError=Bi,u.isFinite=vg,u.isFunction=gn,u.isInteger=co,u.isLength=yr,u.isMap=ho,u.isMatch=wg,u.isMatchWith=mg,u.isNaN=xg,u.isNative=yg,u.isNil=Eg,u.isNull=Sg,u.isNumber=go,u.isObject=it,u.isObjectLike=ft,u.isPlainObject=Ae,u.isRegExp=Wi,u.isSafeInteger=Rg,u.isSet=po,u.isString=Sr,u.isSymbol=Pt,u.isTypedArray=ne,u.isUndefined=Tg,u.isWeakMap=Og,u.isWeakSet=Ag,u.join=Cc,u.kebabCase=_p,u.last=qt,u.lastIndexOf=Mc,u.lowerCase=vp,u.lowerFirst=wp,u.lt=Lg,u.lte=Ig,u.max=hd,u.maxBy=gd,u.mean=pd,u.meanBy=dd,u.min=_d,u.minBy=vd,u.stubArray=Vi,u.stubFalse=Zi,u.stubObject=ed,u.stubString=rd,u.stubTrue=id,u.multiply=wd,u.nth=bc,u.noConflict=Vp,u.noop=Ji,u.now=wr,u.pad=mp,u.padEnd=xp,u.padStart=yp,u.parseInt=Sp,u.random=cp,u.reduce=Ph,u.reduceRight=Fh,u.repeat=Ep,u.replace=Rp,u.result=np,u.round=md,u.runInContext=c,u.sample=Uh,u.size=zh,u.snakeCase=Tp,u.some=Kh,u.sortedIndex=Bc,u.sortedIndexBy=Wc,u.sortedIndexOf=zc,u.sortedLastIndex=Kc,u.sortedLastIndexBy=Xc,u.sortedLastIndexOf=Gc,u.startCase=Ap,u.startsWith=Lp,u.subtract=xd,u.sum=yd,u.sumBy=Sd,u.template=Ip,u.times=sd,u.toFinite=pn,u.toInteger=U,u.toLength=vo,u.toLower=Cp,u.toNumber=Jt,u.toSafeInteger=Cg,u.toString=Q,u.toUpper=Mp,u.trim=bp,u.trimEnd=Np,u.trimStart=Dp,u.truncate=Pp,u.unescape=Fp,u.uniqueId=od,u.upperCase=Hp,u.upperFirst=Xi,u.each=eo,u.eachRight=ro,u.first=ku,qi(u,function(){var t={};return en(u,function(n,e){$.call(u.prototype,e)||(t[e]=n)}),t}(),{chain:!1}),u.VERSION=p,zt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){u[t].placeholder=u}),zt(["drop","take"],function(t,n){X.prototype[t]=function(e){e=e===i?1:ht(U(e),0);var r=this.__filtered__&&!n?new X(this):this.clone();return r.__filtered__?r.__takeCount__=xt(e,r.__takeCount__):r.__views__.push({size:xt(e,nn),type:t+(r.__dir__<0?"Right":"")}),r},X.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),zt(["filter","map","takeWhile"],function(t,n){var e=n+1,r=e==V||e==dt;X.prototype[t]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:I(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),zt(["head","last"],function(t,n){var e="take"+(n?"Right":"");X.prototype[t]=function(){return this[e](1).value()[0]}}),zt(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");X.prototype[t]=function(){return this.__filtered__?new X(this):this[e](1)}}),X.prototype.compact=function(){return this.filter(Ct)},X.prototype.find=function(t){return this.filter(t).head()},X.prototype.findLast=function(t){return this.reverse().find(t)},X.prototype.invokeMap=W(function(t,n){return typeof t=="function"?new X(this):this.map(function(e){return ye(e,t,n)})}),X.prototype.reject=function(t){return this.filter(xr(I(t)))},X.prototype.slice=function(t,n){t=U(t);var e=this;return e.__filtered__&&(t>0||n<0)?new X(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==i&&(n=U(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},X.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},X.prototype.toArray=function(){return this.take(nn)},en(X.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),s=u[r?"take"+(n=="last"?"Right":""):n],o=r||/^find/.test(n);s&&(u.prototype[n]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof X,_=l[0],v=h||F(a),m=function(z){var Y=s.apply(u,mn([z],l));return r&&y?Y[0]:Y};v&&e&&typeof _=="function"&&_.length!=1&&(h=v=!1);var y=this.__chain__,O=!!this.__actions__.length,C=o&&!y,B=h&&!O;if(!o&&v){a=B?a:new X(this);var M=t.apply(a,l);return M.__actions__.push({func:_r,args:[m],thisArg:i}),new Xt(M,y)}return C&&B?t.apply(this,l):(M=this.thru(m),C?r?M.value()[0]:M.value():M)})}),zt(["pop","push","shift","sort","splice","unshift"],function(t){var n=Ke[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);u.prototype[t]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(F(o)?o:[],s)}return this[e](function(a){return n.apply(F(a)?a:[],s)})}}),en(X.prototype,function(t,n){var e=u[n];if(e){var r=e.name+"";$.call(Qn,r)||(Qn[r]=[]),Qn[r].push({name:n,func:e})}}),Qn[ar(i,ot).name]=[{name:"wrapper",func:i}],X.prototype.clone=Fa,X.prototype.reverse=Ha,X.prototype.value=Ua,u.prototype.at=gh,u.prototype.chain=ph,u.prototype.commit=dh,u.prototype.next=_h,u.prototype.plant=wh,u.prototype.reverse=mh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=xh,u.prototype.first=u.prototype.head,pe&&(u.prototype[pe]=vh),u},Jn=da();In?((In.exports=Jn)._=Jn,Yr._=Jn):_t._=Jn}).call(Le)})(Tr,Tr.exports);var Dd=Tr.exports;const Ut=Td(Dd);class k{constructor(f,i){this.id=`point-id-${new Date().getTime().toString()}`,this.x=f,this.y=i,this.widthRatio=1,this.heightRatio=1,this.initialX=this.widthRatio*f,this.initialY=this.heightRatio*i}translate(f,i){this.x+=f,this.y+=i,this.initialX=this.x/this.widthRatio,this.initialY=this.y/this.heightRatio}set ratio(f){this.widthRatio=f.width,this.heightRatio=f.height,this.x=this.initialX*this.widthRatio,this.y=this.initialY*this.heightRatio}setRatio(f,i){this.widthRatio=f,this.heightRatio=i,this.initialX=this.x/this.widthRatio,this.initialY=this.y/this.heightRatio}clone(){return new k(this.x,this.y)}serialize(){return`${this.x/this.widthRatio},${this.y/this.heightRatio}`}json(){return JSON.stringify(this)}deserialize(f){const[i,p]=f.split(",").map(w=>parseInt(w));return new k(i,p)}static middlePoint(f,i){return new k((f.x+i.x)/2,(f.y+i.y)/2)}static distance(f,i){return Math.sqrt((f.x-i.x)**2+(f.y-i.y)**2)}static isSame(f,i){return f.x===i.x&&f.y===i.y}static isNear(f,i,p=10){return k.distance(f,i)<p}}class Pd extends Ce{constructor(i,p){super(i,p);st(this,"_point",null);st(this,"_mouseDown",!1);st(this,"_moveAll",!1);st(this,"cursorDefault","default");st(this,"cursorMove","move");st(this,"cursorGrab","grab");st(this,"cursorGrabbing","grabbing")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._point=null,this._moveAll=!1}handleMouseWheel(i,p){}handleMouseDown(i,p){this._mouseDown=!0;const w=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!w||!p)return;const x=this.stateMachine.element,b=this.stateMachine.elements;if(!x)return;const N=i.clientX,H=i.clientY,A=w.clientPointToViewPoint({clientX:N,clientY:H});if(!this._point)if(x.contains(A.x,A.y))this._moveAll=!0;else{const T=b.find(G=>G.contains(A.x,A.y));T&&T!==x?this.stateMachine.element=T:(this.stateMachine.element=null,this.stateMachine.setState(Ie.STATE_SELECT)),this.redraw()}}handleMouseMove(i,p){const w=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!w||!p)return;const x=this.stateMachine.element;if(!x)return;const b=i.clientX,N=i.clientY,H=w.clientPointToViewPoint({clientX:b,clientY:N}),A=x.rectangle.points;if(this._mouseDown){const T={x:i.movementX/w.scale,y:i.movementY/w.scale};this._point?(this._point.translate(T.x,T.y),this.stateMachine.element=x):this._moveAll&&(x.translate(T.x,T.y),this.stateMachine.element=x),this.redraw()}else{const T=A.find(G=>k.isNear(G,new k(H.x,H.y)))||null;this._point=T,p.style.cursor=this._point?"move":"default"}}handleMouseUp(i,p){this._mouseDown=!1,this._point=null,this._moveAll=!1,this.stateMachine.element&&this.stateMachine.element.rectangle.processDisplacement()}redraw(){const i=this.stateMachine.ctx,p=this.stateMachine.canvas;if(!i||!p)return;const w=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,p.width,p.height),Ut.each(E,x=>{x.draw(i)}),Ut.each(E,x=>{x.draw(i)}),w&&(w.drawBoundingBox(i),w.drawLines(i),w.drawPoints(i))}}class Fd extends Ce{constructor(i,p){super(i,p);st(this,"_handle",null);st(this,"_mouseDown",!1);st(this,"cursorDefault","default");st(this,"cursorResize","nwse-resize")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._handle=null}handleMouseWheel(i,p){}handleMouseDown(i,p){this._mouseDown=!0}handleMouseMove(i,p){const w=this.stateMachine.coordinateSystem,E=this.stateMachine.ctx,x=this.stateMachine.element;if(!E||!w||!x)return;const b=i.clientX,N=i.clientY,H=w.clientPointToViewPoint({clientX:b,clientY:N}),A={x:i.movementX/w.scale,y:i.movementY/w.scale};if(this._mouseDown){if(this._handle){const T=x.rectangle.boundingBox,G=T.clone();switch(this._handle){case"topLeft":G.updateDimensions(T.topLeft.x+A.x,T.topLeft.y+A.y,T.width-A.x,T.height-A.y);break;case"topRight":G.updateDimensions(T.topLeft.x,T.topLeft.y+A.y,T.width+A.x,T.height-A.y);break;case"bottomLeft":G.updateDimensions(T.topLeft.x+A.x,T.topLeft.y,T.width-A.x,T.height+A.y);break;case"bottomRight":G.updateDimensions(T.topLeft.x,T.topLeft.y,T.width+A.x,T.height+A.y);break}x.resizeBoundingBox(G),this.redraw()}}else{const T=x.getBoundingBoxHandle(H.x,H.y);if(!T){p.style.cursor=this.cursorDefault;return}const G=x.handleToString(T);this._handle=G,p.style.cursor=this.cursorResize}}handleMouseUp(i,p){this._mouseDown=!1,this._handle=null,this.redraw()}redraw(){const i=this.stateMachine.ctx,p=this.stateMachine.canvas;if(!i||!p)return;const w=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,p.width,p.height),Ut.each(E,x=>{x.draw(i)}),w&&(w.drawBoundingBox(i),w.drawLines(i),w.drawBoundingBoxHandles(i))}}class Hd extends Ce{constructor(i,p){super(i,p);st(this,"isMouseDown",!1)}onEnter(){this.redraw()}onExit(){this.isMouseDown=!1}handleMouseDown(i,p){this.isMouseDown=!0}handleMouseWheel(i,p){this.isMouseDown||i.shiftKey&&this.stateMachine.coordinateSystem.scaleAtClientPoint(-.001*i.deltaY,{clientX:i.clientX,clientY:i.clientY})}handleMouseMove(i,p){}handleMouseUp(i,p){this.isMouseDown=!1;const w=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!w||!p)return;const x=this.stateMachine.elements,b=i.clientX,N=i.clientY,H=w.clientPointToViewPoint({clientX:b,clientY:N}),A=x.find(T=>T.contains(H.x,H.y));A?(this.stateMachine.element=A,this.stateMachine.setState(Ie.STATE_MOVE)):this.stateMachine.element=null,this.redraw()}redraw(){const i=this.stateMachine.ctx,p=this.stateMachine.canvas;if(!i||!p)return;const w=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,p.width,p.height),Ut.each(E,x=>{x.draw(i)}),w&&(w.drawLines(i),w.drawPoints(i))}}class Ud extends Ce{constructor(f,i){super(f,i)}onEnter(){}onExit(){}handleMouseWheel(f,i){}handleMouseDown(f,i){}handleMouseMove(f,i){}handleMouseUp(f,i){}}const ie={Idle:"IDLE",Select:"SELECT",Move:"MOVE",Resize:"RESIZE",Zoom:"ZOOM"},St=class St{constructor(f){this._inputs=new Set,this._states={IDLE:new Nd(this,St.STATE_IDLE),SELECT:new Hd(this,St.STATE_SELECT),MOVE:new Pd(this,St.STATE_MOVE),RESIZE:new Fd(this,St.STATE_RESIZE),ZOOM:new Ud(this,St.STATE_ZOOM)},this._initialState=f.initialState,this._state=this._states[this._initialState],this._mouseDown=!1,this._elements=f.canvasElements,this._element=null,this._coordinateSystem=f.coordinateSystem,this._canvas=f.canvas,this._ctx=f.ctx}get mouseDown(){return this._mouseDown}get state(){return this._state}set state(f){this._state=f}addState(f){this._states[f.name]=f}setState(f){if(f!==this._state.name){if(!this._states[f])throw new Error(`State ${f} not found`);this._state&&this._state.onExit(),this._state=this._states[f],this._state.onEnter()}}resetState(){this._element=null,this.setState(this._initialState)}handleMouseWheel(f,i){this._state.handleMouseWheel(f,i)}handleMouseDown(f,i){this._state.handleMouseDown(f,i)}handleMouseMove(f,i){this._state.handleMouseMove(f,i)}handleMouseUp(f,i){this._state.handleMouseUp(f,i)}handleKeyDown(f,i){if(f.ctrlKey&&this.state.name===St.STATE_MOVE){this.setState(St.STATE_RESIZE);return}}handleKeyUp(f,i){if(!f.ctrlKey&&this.state.name===St.STATE_RESIZE){this.setState(St.STATE_MOVE);return}}get inputs(){return this._inputs}set inputs(f){this._inputs=f}get element(){return this._element}set element(f){this._element=f}get elements(){return this._elements}set elements(f){this._elements=f}get coordinateSystem(){return this._coordinateSystem}set coordinateSystem(f){this._coordinateSystem=f}get canvas(){return this._canvas}set canvas(f){this._canvas=f}get ctx(){return this._ctx}set ctx(f){this._ctx=f}setCanvas(f){this.canvas=f}setCtx(f){this.ctx=f}setCoordinateSystem(f){this.coordinateSystem=f}};st(St,"STATE_IDLE",ie.Idle),st(St,"STATE_SELECT",ie.Select),st(St,"STATE_RESIZE",ie.Resize),st(St,"STATE_MOVE",ie.Move),st(St,"STATE_ZOOM",ie.Zoom);let Ie=St,Un=function(L){return L.AUTO="auto",L.COVER="cover",L.CONTAIN="contain",L}({});var ut=function(L){return L.BACKGROUND="background",L.INTERFACE="interface",L}(ut||{});const No=Un.CONTAIN,bo=[ut.BACKGROUND,ut.INTERFACE],Bd={display:"block",width:"100%",height:"100%",position:"relative",backgroundColor:"#000"},Wd={display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent"},zd={size:No,imageSrc:"./test.png",width:800,height:800},Kd={min:1,max:5};function Jd({initialState:L=ie.Idle,containerElementStyle:f=Bd,canvasElementStyle:i=Wd,background:p=zd,zoomExtents:w=Kd,elements:E=[],onViewChange:x}){const{containerRef:b,screenSize:N}=bd(),H=gt.useRef(null),A=gt.useRef({}),T=gt.useRef({}),G=gt.useRef(Bt()),j=gt.useRef(E),q=gt.useRef({x:window.innerWidth/1920,y:window.innerHeight/1080}),K=gt.useCallback(()=>new Ie({initialState:L,canvasElements:j.current,coordinateSystem:G.current,canvas:A.current[ut.INTERFACE],ctx:T.current[ut.INTERFACE]}),[L]),D=gt.useRef(K());let ot;function se(S){if(!p)return S;switch(p.size||(p.size=No),p.size){case Un.COVER:if(H.current&&H.current.complete){const{width:V,height:J}=H.current;if(!p.useImageOriginSize){const dt=S.width,Et=V/J,wt=dt/Et;return{width:dt,height:wt}}return{width:V,height:J}}break;case Un.CONTAIN:return{width:p.width||0,height:p.height||0}}return S}function Bt(){const S=new Od(w,{width:1920,height:1080});return S.attachViewChangeListener(_n),S}function _n(S){D.current&&(j.current=D.current.elements,D.current.resetState());const V=G.current;V&&(bo.map(J=>T.current[J]).forEach(J=>{Mt(J);const dt=V.transformMatrix;J.setTransform(dt.a,dt.b,dt.c,dt.d,dt.e,dt.f)}),Me())}function Mt(S){vn([S],()=>S.clearRect(0,0,S.canvas.width,S.canvas.height))}function vn(S,V){S.forEach(J=>{J.save(),J.setTransform(re.a,re.b,re.c,re.d,re.e,re.f)});try{V()}finally{S.forEach(J=>J.restore())}}function Vt(S){G.current.documentSize={...S}}function Ln({canvas:S,ctx:V,image:J}){if(J&&J.complete&&S&&V&&p)switch(p.size){case Un.AUTO:Md({canvas:S,ctx:V,image:J});break;case Un.COVER:Id({ctx:V,image:J});break;case Un.CONTAIN:default:Cd({canvas:S,ctx:V,image:J});break}}function Bn(S,V=!1){ot&&clearTimeout(ot),ot=setTimeout(()=>{let J=!1;const{canvas:dt}=G.current;if((dt.width!==S.width||dt.height!==S.height)&&(Ld(A.current,S),Vt(S),J=!0),V||J){const Et=S.width/G.current.initialViewSize.width,wt=S.height/G.current.initialViewSize.height;Et!==1/0&&wt!==1/0&&Ut.each(j.current,Wn=>{Wn.ratio={width:Et,height:wt}}),Me()}},100)}function Ar(){const S=A.current[ut.BACKGROUND],V=T.current[ut.BACKGROUND],J=H.current;!S||!V||(V.clearRect(0,0,S.width,S.height),J&&Ln({canvas:S,ctx:V,image:J}))}function Lr(){Mt(T.current[ut.INTERFACE]),j.current.forEach(S=>{S.draw(T.current[ut.INTERFACE])})}function Me(){Ar(),Lr()}return gt.useEffect(()=>{const S=se(N),V=G.current;V&&V.resetView(),Bn(S)},[N]),gt.useEffect(()=>{D.current.setCanvas(A.current[ut.INTERFACE]),D.current.setCtx(T.current[ut.INTERFACE])},[A.current]),gt.useEffect(()=>{if(!(!p||!p.imageSrc||p.imageSrc==="")){if(!H.current||H.current.getAttribute("src")!==p.imageSrc){const S=new Image;S.src=p.imageSrc,S.onload=()=>{const V=se(N);Bn(V,!0)},S.onabort=()=>{H.current=null},H.current=S}return()=>{H.current=null,T.current[ut.BACKGROUND].clearRect(0,0,A.current[ut.BACKGROUND].width,A.current[ut.BACKGROUND].height)}}},[p]),gt.useEffect(()=>(j.current=E,D.current.resetState(),D.current.elements=E,T.current[ut.INTERFACE].clearRect(0,0,A.current[ut.INTERFACE].width,A.current[ut.INTERFACE].height),Ut.each(j.current,S=>{S.ratio={width:q.current.x,height:q.current.y},S.draw(T.current[ut.INTERFACE])}),()=>{j.current=[],D.current.resetState(),D.current.elements=[],T.current[ut.INTERFACE].clearRect(0,0,A.current[ut.INTERFACE].width,A.current[ut.INTERFACE].height)}),[E]),gt.useEffect(()=>{const S=A.current[ut.INTERFACE];if(!S)return;const V=mt=>{D.current.handleMouseMove(mt,S)},J=mt=>{D.current.handleMouseUp(mt,S)},dt=mt=>{D.current.handleMouseDown(mt,S)},Et=mt=>{D.current.handleKeyDown(mt,S)},wt=mt=>{D.current.handleKeyUp(mt,S)},Wn=mt=>{D.current.handleMouseWheel(mt,S)};return S.addEventListener("mousedown",dt),S.addEventListener("mousemove",V),S.addEventListener("mouseup",J),S.addEventListener("wheel",Wn),S.addEventListener("keydown",Et),S.addEventListener("keyup",wt),()=>{S.removeEventListener("mousedown",dt),S.removeEventListener("mousemove",V),S.removeEventListener("mouseup",J),S.removeEventListener("wheel",Wn),S.removeEventListener("keydown",Et),S.removeEventListener("keyup",wt)}},[]),Co.jsx("div",{style:{...f},ref:b,children:bo.map(S=>{const V=S===ut.INTERFACE;return Co.jsx("canvas",{tabIndex:V?1:0,ref:J=>{J&&(A.current[S]=J,T.current[S]=J.getContext("2d"),V&&(G.current.canvas=J))},style:{...i}},S)})})}class $i{constructor(f){this._points=f}get points(){return this._points}set points(f){this._points=f}get boundingBox(){let f=this._points[0].x,i=this._points[0].y,p=this._points[0].x,w=this._points[0].y;return Ut.each(this._points,E=>{f=Math.min(f,E.x),i=Math.min(i,E.y),p=Math.max(p,E.x),w=Math.max(w,E.y)}),new An(f,i,p-f,w-i)}translate(f,i){Ut.each(this._points,p=>p.translate(f,i))}clone(){return new $i(this._points.map(f=>f.clone()))}serialize(){return Ut.map(this.points,f=>f.serialize().split(","))}resize(f,i){const p=this.boundingBox,w=[],E=[];Ut.each(this._points,x=>{w.push({x:(x.x-p.topLeft.x)/p.width,y:(x.y-p.topLeft.y)/p.height}),E.push({x:(x.x-f.topLeft.x)/f.width,y:(x.y-f.topLeft.y)/f.height})}),this._points=Ut.map(w,x=>new k(f.topLeft.x+f.width*x.x,f.topLeft.y+f.height*x.y)),Ut.each(this._points,x=>{x.setRatio(i.x,i.y)})}deserialize(f){this.points=Ut.map(f,i=>new k(i[0],i[1]))}isNear(f,i=10){return this._points.some(p=>k.isNear(p,f,i))}isPartOfPolygon(f){return this._points.some(i=>i.id===f.id)}contains(f,i){let p=!1;for(let w=0,E=this._points.length-1;w<this._points.length;E=w++){const x=this._points[w].x,b=this._points[w].y,N=this._points[E].x,H=this._points[E].y;b>i!=H>i&&f<(N-x)*(i-b)/(H-b)+x&&(p=!p)}return p}}class An extends $i{constructor(f=0,i=0,p=0,w=0){if(f instanceof k&&i instanceof k&&p instanceof k&&w instanceof k)super([f,i,p,w]);else if(typeof f=="number"&&typeof i=="number"&&typeof p=="number"&&typeof w=="number")super(An.pointsFromBounds(f,i,p,w));else throw new Error("Invalid arguments")}static pointsFromBounds(f,i,p,w){return[new k(f,i),new k(f+p,i),new k(f+p,i+w),new k(f,i+w)]}get width(){return this._points[1].x-this._points[0].x}get height(){return this._points[2].y-this._points[1].y}get topLeft(){return this._points[0]}get topRight(){return this._points[1]}get bottomRight(){return this._points[2]}get bottomLeft(){return this._points[3]}get topMid(){return k.middlePoint(this.topLeft,this.topRight)}get rightMid(){return k.middlePoint(this.topRight,this.bottomRight)}get bottomMid(){return k.middlePoint(this.bottomLeft,this.bottomRight)}get leftMid(){return k.middlePoint(this.topLeft,this.bottomLeft)}updateDimensions(f,i,p,w){this.points=An.pointsFromBounds(f,i,p,w)}processDisplacement(){this.width<0&&([this._points[0],this._points[1]]=[this._points[1],this._points[0]],[this._points[2],this._points[3]]=[this._points[3],this._points[2]]),this.height<0&&([this._points[0],this._points[3]]=[this._points[3],this._points[0]],[this._points[1],this._points[2]]=[this._points[2],this._points[1]])}clone(){return new An(this._points[0].x,this._points[0].y,this.width,this.height)}json(){return JSON.stringify(this)}}const Xd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAAAXNSR0IB2cksfwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAtGSURBVHhe7d3JblzXFUbhCiN2Yt+USBY7SWFkwwNPBHjgiaZ+AQ2SOH0iJ47j3pn60Z1zjCMg4l1X9yjYNeDmWgDFutSH39gDAyRAkbOJNtbW1r65vr7eaM9j6Tgdp+NCXYojSjpOx6VwG5ubm11jOkzH6bg4V/+y9O3UmI7TcTou1NW/3Nra6hrTDdNxOi7UXVxcbO7s7EyO6Tgdp+NCXUPfdY7pbqXjdFyoq2hvb69rTDdMx+m4aDfLcISO03GZ3M9fILdnrKKDg4PvdW+m43Tcslx75O7KEbo303H3yp2dnT08OjqaHNNxOk7Hhbrnz59X9MPUmI7TcTou1KU4oqTjdFwKV9F8Pv9Pz5humI7TcaHuNXrx4kXXmO7NdJyOC3UVnZycdI3phuk4HRfqPvzww62KPvnkk/X2IUzH6TgdF+1mBf3QOaa7lY7TcctwswxH6IbpuGyuPXJ35Qjdm+m4e+UqWiwWXWO6YTpOx4W6FEeUdJyOS+E++OCD7Z4xHafjdFyoS3FEScfpuBQuxRElHafjUrjX6OXLl2vtQ5iO03E6LtSlOKKk43RcFjfLcISO03GZ3CzDEbphOi6ba4/ce++9t9MzpuN0nI4LdR9//HHXmI7TcTou1DX0feeY7lY6TseFuhRHlHScjkvhXqNXr16ttg9hOk7H6bhQ99FHH+32jOk4HafjQl2KI0o6TselcCmOKOk4HZfF1e/E+v758+ddY7o303E6bhmu/ujKO3+EbpiOy+baI3dzc7N7eno6OabjdJyOC3VPnz7d6xnTcTpOx4W6FEeUdJyOS+FeoxcvXjxoH8J0nI7TcaEuxRElHafjUriK5vN515humI7TcaEuxRElHafjUriKjo6OusZ0w3Scjot2s4K+6xzT3UrH6bhluFmGI3TDdFw21x65ig4ODr7tGdMN03E6LtSlOKKk43RcCldR6ZueMd0wHafjQt1r9PLly1+2D2E6TsfpuFBX0c7OTteYbpiO03GhrnxeXdHXU2M6TsfpuFBX0dbW1tfl5eSYbpiO03GhrqLNzc2vysvJMd0wHafjot0swxE6TsdlcvX9JFpbW+sa0w3TcTru/3DjNfRledkzpruVjtNxoa6iBw8edI3phuk4HRfqUhxR0nE6LoVLcURJx+m4FK6ilZWVrjHdMB2n46JdFyrpOB2n40JdiiNKOk7HpXApjijpOB2Xw6U4QjeWjkvj6h89qHdMN0zH6bh3dW/trhyhezMdd69ciiNKOk7HpXBpvkbQYTouhUtxREnH6bgULsURJR2n41K4FEeUdJyOS+G6vqG6pON0nI4LdSmOKOk4HZfDpThCN5aOS+PqH5Oo58d8lHScjtNx7+re2n7nmI7TcTou1O1vbm52jekwHafj4tze3l5Fkz/aUsfpOB0X6ira2trqGtMN03E6LtSlOKKk43RcClfQwc7OTs+YDtJxOi7UNTT529J0nI7TcaGuovI2+XtKdZyO03HRrsI7f4SO03GZ3GwKXV1dHRweHr791/uXdJyO03Hv6tojd3FxUcz0mI7TcTou1FV0fHzcNaYbpuN0XKhr6NvOMd2tdJyOC3UVPXr0qGtMN0zH6bhQt1gsjnrGdJyO03GhrqLT09OuMd0wHafjQl2KI0o6TselcO+///7P6Mcff1xpH8J0nI7TcdFuluEIHafjMrnZFHr27Nlxz5iO03E67l1de+QqOj8//6ZnTDdMx+m4UJfiiJKO03EpXIojSjpOx6VwKY4o6Tgdl8Ld3NzMe8Z0nI7TcaGuoa87x3S30nE6LtSlOKKk43RcCpfiiJKO03FZ3KwHPX369JFumI7Tcctwk9+JdReO0A3Tcdlce+Qa+qpzTHcrHafjQl2KI0o6TselcCmOKOk4HZfCPXny5KRnTMfpOB0X6l6jn3766RftQ5iO03E6LtSlOKKk43RcCpfiiJKO03Ep3PX19WlBX06N6Tgdp+OiXf1OrDt/hI7TcZncrAednZ11jemG6Tgd966uPXJ35Qjdm+m4e+Wurq6KmR7TcTpOx4W6FEeUdJyOS+FSHFHScTouhavo5OTk3z1jumE6TseFuhRHlHScjkvhLi8vFz1jOk7H6bhQV9F8Pu8a0w3TcTou2s0K+qJzTHcrHafjluHq+0l0eHj4RXmp+590nI5bohuvoqOjo3+Vl5NjumE6TseFugIW+/v7k2M6TsfpuFDX0OftcTQdp+N0XKiraHd3t2tMN0zH6bhQ19A/2+NoOk7H6bhQV9H29nbXmG6YjtNxoa6hf7TH0XScjtNxoa6izc3NrjHdMB2n46LdrKDP2svR2pjuVjpOxy3DtZfjlaHF+vr65JiO03E6LtSlOKKk43RcClfR6urqq/Y4mo7TcTou1KU4oqTjdFwKV9HKykrXmG6YjtNxoS7FESUdp+NSuBRHlHScjsviulBJx+k4HRfqUhxR0nE6LoubdY2VN90wHafjluEmuwtH6IbpuHvlUhxR0nE6LoVLcURJx+m4FC7LF/g6TselcCmOKOk4HZfCpTiipON0XArX9Q3VJR2n43RcqEtxREnH6bgULsURJR2n43K49fX1rjEdpuN0XLhr799ammN1mI5L4VIcUdJxOu7uu/rvEB8+fDg5puN0nI4LdRWVt66fjqcbpuN0XKgr4Hx7e7tnTAfpOB0X6lIcUdJxOi6Fq2h3d3fyd7HoOB2n40Ld4eHh+cHBweSYjtNxOi7UFXTROaaDdJyOi3b1N5x1jemG6TgdtwzXXo7XxiZ/k7iO03E6LtSlOKKk43RcClc+/76cz+eTYzpOx+m4ULdYLLrGdJyO03GhrqLT09PP2+NoOk7H6bhQd3Z2dtUzpuN0nI4LdRWV/8u7xnTDdJyOC3UpjijpOB2XwjU0+QW0jtNxOi7a1S+OJ1H5/PtaN0zH6bhluPZyvIouLy+7xnTDdJyOC3WPHz+uaPJ7MnWcjtNxoS7FESUdp+NSuOvr68c9YzpOx+m4UNfQ5I/50HE6TseFuhRHlHScjkvhUhxR0nE6LoW7urp6Ut4mf6i0jtNxOi7UhY6VdJyO03G9rsI7f4SO03GZXHs5XkFPO8d0kI7TcaGuob+3x9F0nI7TcaEudKyk43ScjutyoWMlHafjdFyXu7y8/FVBf2uPo+k4HafjQl2KI0o6TselcCmOKOk4HZfCXVxc3PSM6Tgdp+NCXUN/bY+j6Tgdp+OiXYVdY7phOk7HLcO1l+Mt4z+qG6bjdFyXOz8//3XPmI7TcTou1DX0l/Y4mo7TcTou1KU4oqTjdFwKt1gsnpW3yTEdp+N0XKgLHSvpOB2n47pcQ39uj6PpOB2n40JdRScnJ11jumE6TseFuhRHlHScjsviZvP5/E/t5WjHx8fPdMN0nI5bhmsvx7sLR+iG6bh75Rr6Y3scTcfpOB0X6io6PDzsGtMN03E6LtQ19If2OJqO03E6LtRVtL+///v2OJqO03E6LtSlOKKk43RcCrezs/OsvH3aHkfTcTpOx4W6ira2trrGdMN0nI4LdQ39rj2OpuN0nI6LdrONjY2uMd0wHafjluHay/Ha2G/b42g6TsfpuFBX0erqateYbpiO03Ghbm1traLftMfRdJyO03GhrqKVlZWuMd0wHafjQl2KI0o6TselcCmOKOk4HZfCpTiipON0XAqX4oiSjtNxWVwXKuk4Hafjot2sa6y86YbpOB23DDfZXThCN0zH3SuX4oiSjtNxKVyKI0o6TselcFm+wNdxOi6FS3FEScfpuBQuxRElHafjUrgUR5R0nI5L4br+KVNJx+k4HRfqUhxR0nE6LodLcYRuLB2XxrX3b+1mY2Nj8kdglnScjtNx7+A2Pv0v5rAz6DVYBGkAAAAASUVORK5CYII=",Qi=new Image;Qi.src=Xd;class Or{constructor(f,i,p,w,E,x,b){st(this,"_ratio",{width:1,height:1});this._id=f,this._color=i,this._isCurrent=p,this._numberOfEquipments=w,this._rectangle=E,this._isEdit=typeof x=="boolean"?x:!0,this._isTemplate=b||!1}get id(){return this._id}set id(f){this._id=f}get color(){return this._color}get isCurrent(){return this._isCurrent}get numberOfEquipments(){return this._numberOfEquipments}get rectangle(){return this._rectangle}get isEdit(){return this._isEdit}get isTemplate(){return this._isTemplate}set ratio(f){this._ratio=f,this._rectangle.points.map(i=>{i.ratio=f})}translate(f,i){this._rectangle.translate(f,i)}updateDimensions(f,i){this._rectangle.updateDimensions(this._rectangle.topLeft.x,this._rectangle.topLeft.y,f,i)}resizeBoundingBox(f){this._rectangle.resize(f,{x:this._ratio.width,y:this._ratio.height})}draw(f){this.drawPolygon(f),this.drawNumberOfEquipments(f),this.drawIsCurrent(f),this.drawIsTemplate(f)}contains(f,i){return this.isEdit&&this.rectangle.contains(f,i)}drawDebug(f){f.fillStyle="black",f.fillText("TL",this.rectangle.topLeft.x,this.rectangle.topLeft.y,this.rectangle.width),f.fillText("TR",this.rectangle.topRight.x,this.rectangle.topRight.y,this.rectangle.width),f.fillText("BR",this.rectangle.bottomRight.x,this.rectangle.bottomRight.y,this.rectangle.width),f.fillText("BL",this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y,this.rectangle.width)}drawPolygon(f){const i=this.rectangle.points;f.fillStyle=this.color,f.beginPath(),f.moveTo(i[0].x,i[0].y);for(let p=1;p<i.length;p++)f.lineTo(i[p].x,i[p].y);f.closePath(),f.fill()}drawLines(f){const i=this.rectangle.points;f.fillStyle="black",f.lineWidth=1,f.setLineDash([]),f.beginPath(),f.moveTo(i[0].x,i[0].y);for(let p=1;p<i.length;p++)f.lineTo(i[p].x,i[p].y);f.closePath(),f.stroke()}drawIsCurrent(f){this.isCurrent&&(f.fillStyle="red",f.font="40px Arial",f.fillText("*",this.rectangle.topLeft.x,this.rectangle.topLeft.y+35,this.rectangle.width))}drawNumberOfEquipments(f){this.numberOfEquipments>0&&(f.fillStyle="black",f.font="14px Arial",f.fillText(`(${this.numberOfEquipments.toString()})`,this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y+14,this.rectangle.width))}drawIsTemplate(f){if(this.isTemplate&&Qi){const i=f.createPattern(Qi,"repeat");i&&(f.fillStyle=i,f.beginPath(),f.moveTo(this.rectangle.topLeft.x,this.rectangle.topLeft.y),f.lineTo(this.rectangle.topRight.x,this.rectangle.topRight.y),f.lineTo(this.rectangle.bottomRight.x,this.rectangle.bottomRight.y),f.lineTo(this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y),f.lineTo(this.rectangle.topLeft.x,this.rectangle.topLeft.y),f.closePath(),f.fill())}}drawBoundingBox(f){const i=this.rectangle.boundingBox;f.lineWidth=1,f.lineDashOffset=0,f.setLineDash([2,3]),f.beginPath(),f.moveTo(i.topLeft.x,i.topLeft.y),f.lineTo(i.topRight.x,i.topRight.y),f.lineTo(i.bottomRight.x,i.bottomRight.y),f.lineTo(i.bottomLeft.x,i.bottomLeft.y),f.lineTo(i.topLeft.x,i.topLeft.y),f.closePath(),f.stroke()}drawPoints(f){const i=this.rectangle.points;f.fillStyle="purple",i.forEach(p=>{f.beginPath(),f.arc(p.x,p.y,3,0,2*Math.PI),f.fill()}),f.closePath()}drawBoundingBoxHandles(f){const{topLeft:w,topRight:E,bottomRight:x,bottomLeft:b}=this.rectangle.boundingBox;f.strokeStyle="black",f.fillStyle="white",f.setLineDash([]),f.fillRect(w.x-3,w.y-3,6,6),f.fillRect(E.x-3,E.y-3,6,6),f.fillRect(x.x-3,x.y-3,6,6),f.fillRect(b.x-3,b.y-3,6,6),f.strokeRect(w.x-3,w.y-3,6,6),f.strokeRect(E.x-3,E.y-3,6,6),f.strokeRect(x.x-3,x.y-3,6,6),f.strokeRect(b.x-3,b.y-3,6,6),f.stroke()}getBoundingBoxHandle(f,i){const p=this.rectangle.boundingBox,w=[p.topLeft,p.topRight,p.bottomRight,p.bottomLeft],E=w.map(N=>k.distance(N,new k(f,i))),x=Math.min(...E),b=E.findIndex(N=>N===x&&N<10);return w[b]}handleToString(f){const{topLeft:i,topRight:p,bottomRight:w,bottomLeft:E}=this.rectangle.boundingBox;return k.isSame(f,i)?"topLeft":k.isSame(f,p)?"topRight":k.isSame(f,w)?"bottomRight":k.isSame(f,E)?"bottomLeft":null}clone(){const f=this.rectangle.points.map(i=>i.clone());return new Or(this.id,this.color,this.isCurrent,this.numberOfEquipments,new An(f[0],f[1],f[2],f[3]),this.isEdit,this.isTemplate)}}const Gd="#ffff66";function Vd(){const L={size:Un.COVER},[f,i]=gt.useState([]),[p,w]=gt.useState(L),[E,x]=gt.useState(!1),b=q=>{w(K=>({...K,...q}))},N=q=>{const K=q.map(D=>{const ot=new An(0,0,0,0);return ot.deserialize(JSON.parse(D.JsonRectangle)),new Or(D.id.toString(),D.Color,D.IsCurrent,D.NumberEquipment,ot,D.IsEdit,D.IsTemplate)});i([...K])},H=q=>{b({imageSrc:q.imageSource}),N(q.data),x(q.viewMode)},A=()=>{const q=new An(0,0,100,100),K=new Or(`${f.length+1}`,Gd,!1,4,q,!0);i([...f,K])},T=q=>{typeof q=="function"&&q(j())},G=()=>f.map(K=>({id:K.id,IsTemplate:!1,NumberEquipment:K.numberOfEquipments,Color:K.color,IsCurrent:K.isCurrent,JsonRectangle:K.rectangle.serialize(),IsEdit:K.isEdit})),j=()=>{const q=f.map(K=>({id:parseInt(K.id),IsTemplate:!1,NumberEquipment:K.numberOfEquipments,Color:K.color,IsCurrent:K.isCurrent,JsonRectangle:JSON.stringify(K.rectangle.serialize()),IsEdit:K.isEdit}));return JSON.stringify({viewMode:E,imageSource:p.imageSrc,data:q})};return{viewMode:E,background:p,elements:f,loadBackground:b,loadDataSource:N,loadAll:H,addRectangle:A,exportRectangles:G,toString:j,saveData:T}}export{Jd as C,Vd as u};
