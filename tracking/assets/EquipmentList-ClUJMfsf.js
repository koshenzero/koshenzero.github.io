import{n as C,o as f,l as D,r,j as a}from"./index-Df67LvnZ.js";import{Z as x}from"./index-Dntgz-Jr.js";import{i as b,I as y}from"./api-D0CI0FXg.js";import{u as j,a as h,d as q,M as S}from"./index.esm-DQwAVOjC.js";import{B as L,d as A}from"./ButtonOfList-CQegefUu.js";import{M as n,E as R,h as d}from"./DefaultLayout-ChSX5Qog.js";import{d as T,b as v}from"./index.es-GiY7mkae.js";import"./styled-GyNyOFDO.js";import"./TextField-CGQe4LUV.js";import"./Box-ClPNTXLH.js";const J=({setToast:o})=>{const c=C(),u=f(e=>e.equipmentList),i=D(),m=f(e=>e.permission),[t,I]=r.useState({IsView:0,IsUpdate:0,IsDelete:0,IsInsert:0});r.useEffect(()=>{b("",-100,1,1e4).then(e=>{if(!e.error){c({type:"set",equipmentList:e.data.data});return}o(n(!0,"Error",e.error.response.data.message))})},[]),r.useEffect(()=>{I(m.find(e=>e.ModuleID===R.id))},[m]);const g=r.useMemo(()=>[{accessorKey:"ChassisNo",header:"ChassisNo",size:80},{accessorKey:"ModelName",header:"ModelName",size:100},{accessorKey:"ETC",header:"ETC",size:50},{accessorKey:"FALabelName",header:"FALabelName",size:50},{accessorKey:"MastNumber",header:"MastNumber"}],[]),p=e=>{i(typeof e=="string"?"edit/0":`edit/${e.original.EquipmentID}`)},E=e=>{var s=localStorage.getItem("user");if(s==null)return i("/pages/login");JSON.parse(s).data,e.original.EquipmentID&&y(e.original.EquipmentID).then(l=>{l.error?o(n(!0,"Error",l.error.response.data.message)):(b("",-100,1,1e4).then(N=>{c({type:"set",equipmentList:N.data.data})}),o(n(!1,"Success","Equipment have been deleted")))})};x({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0});const M=j({columns:g,data:u,renderTopToolbarCustomActions:({table:e})=>a.jsx("div",{className:d(t==null?void 0:t.IsInsert),children:a.jsx(L,{text:"Insert",callback:()=>p("edit")})}),createDisplayMode:"modal",positionCreatingRow:"bottom",enableRowActions:!((t==null?void 0:t.IsUpdate)===0&&(t==null?void 0:t.IsDelete)===0),enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,enableGlobalFilter:!1,renderRowActionMenuItems:({closeMenu:e,row:s})=>[a.jsxs(h,{className:d(t==null?void 0:t.IsUpdate),onClick:l=>{p(s),e()},children:[a.jsx(q,{}),"Edit"]},0),a.jsxs(h,{className:d(t==null?void 0:t.IsDelete),onClick:()=>{E(s),e()},children:[a.jsx(A,{}),"Delete"]},1)]});return a.jsx(T,{children:u.length==0?a.jsx(v,{children:" No Data "}):a.jsx(S,{table:M})})};export{J as default};
