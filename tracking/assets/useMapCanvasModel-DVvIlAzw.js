var Ep=Object.defineProperty;var Rp=(I,f,r)=>f in I?Ep(I,f,{enumerable:!0,configurable:!0,writable:!0,value:r}):I[f]=r;var ut=(I,f,r)=>(Rp(I,typeof f!="symbol"?f+"":f,r),r);import{r as gt,y as Le,q as Tp,j as Mo}from"./index-DVdUffN9.js";const Co=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),Ie=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:Co,viewMax:Co}),ie=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0});class Op{constructor(f,r){ut(this,"_canvas",null);ut(this,"_view",{scale:1,x:0,y:0});ut(this,"_viewChangeListeners",new Set);ut(this,"_initialViewSize",{width:1920,height:1080});this._scaleExtents=f,this._documentSize=r}get canvas(){return this._canvas}set canvas(f){this._canvas=f,this.setView()}get scale(){return this._view.scale}setScale(f){this.setView({scale:f})}get initialViewSize(){return this._initialViewSize}set initialViewSize(f){this._initialViewSize=f}get x(){return this._view.x}set x(f){this.setView({x:f})}get y(){return this._view.y}set y(f){this.setView({y:f})}get view(){return{...this._view}}get scaleExtents(){return{...this._scaleExtents}}set scaleExtents(f){this._scaleExtents={...f},this.setView()}get documentSize(){return{...this._documentSize}}set documentSize(f){this._documentSize={...f},this.setView()}get transformMatrix(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}get canvasBounds(){if(this._canvas){const{left:f,top:r,right:d,bottom:p}=this._canvas.getBoundingClientRect();return{viewMin:this.clientPointToViewPoint({clientX:f,clientY:r}),viewMax:this.clientPointToViewPoint({clientX:d,clientY:p}),left:f,top:r,right:d,bottom:p,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}else return}get canvasRect(){if(this._canvas)return this._canvas.getBoundingClientRect()}clampView(f){const{min:r,max:d}=this._scaleExtents,{width:p,height:y}=this._documentSize,{left:x,top:L,right:M,bottom:N}=this.canvasRect||Ie,A=M-x,T=N-L,z=A/2,nt=-(p*this._view.scale-A/2),G=T/2,C=-(y*this._view.scale-T/2);return{scale:Math.min(Math.max(f.scale,r),d),x:Math.min(Math.max(f.x,nt),z),y:Math.min(Math.max(f.y,C),G)}}resetView(){this.setView({scale:1,x:0,y:0})}setView(f){const r=this.clampView({...this._view,...f||{}}),{scale:d,x:p,y}=this._view;return(r.scale!==d||r.x!==p||r.y!==y)&&(this._view=r,this._viewChangeListeners.forEach(x=>x&&x({view:r,transform:this.transformMatrix}))),{...this._view}}scaleAtClientPoint(f,r){const d=this.clientPointToViewPoint(r),p=this.clampView({...this._view,scale:this._view.scale+f}),y=this.viewPointToClientPoint(d,p);p.x=this._view.x-(y.clientX-r.clientX),p.y=this._view.y-(y.clientY-r.clientY);const{width:x,height:L}=this._documentSize,{left:M,top:N,right:A,bottom:T}=this.canvasRect||Ie,z=A-M,nt=T-N,G=z/2,C=-(x*p.scale-z/2),V=nt/2,rt=-(L*p.scale-nt/2);p.x=Math.min(Math.max(p.x,C),G),p.y=Math.min(Math.max(p.y,rt),V);const mn=x*p.scale,pt=L*p.scale,Ot=Math.abs(p.x),At=Math.abs(p.y),Qt=mn-z,Lt=pt-nt;return p.x<0&&Qt<Ot&&(p.x=-Qt),p.y<0&&Lt<At&&(p.y=-Lt),p.x>0&&(p.x=0),p.y>0&&(p.y=0),p.scale===this._scaleExtents.min&&(p.x=0,p.y=0),this.setView(p)}panByClientPoint(f){const r=this.clampView({...this._view,x:this._view.x+f.clientX,y:this._view.y+f.clientY}),{width:d,height:p}=this._documentSize,{left:y,top:x,right:L,bottom:M}=this.canvasRect||Ie,N=L-y,A=M-x,T=N/2,z=-(d*r.scale-N/2),nt=A/2,G=-(p*r.scale-A/2);r.x=Math.min(Math.max(r.x,z),T),r.y=Math.min(Math.max(r.y,G),nt);const C=d*r.scale,V=p*r.scale,rt=Math.abs(r.x),mn=Math.abs(r.y),pt=C-N;r.x<0&&pt<rt&&(r.x=-pt);const Ot=V-A;return r.y<0&&Ot<mn&&(r.y=-Ot),r.x>0&&(r.x=0),r.y>0&&(r.y=0),this.setView(r)}clientPointToViewPoint(f,r=this._view){const{left:d,top:p}=this.canvasRect||Ie,y=f.clientX-d,x=f.clientY-p;return{x:(y-r.x)/r.scale,y:(x-r.y)/r.scale,relativeClientX:y,relativeClientY:x}}viewPointToClientPoint(f,r=this._view){const{left:d,top:p}=this.canvasRect||Ie,y=f.x*r.scale+r.x,x=f.y*r.scale+r.y,L=y+d,M=x+p;return{clientX:L,clientY:M,relativeX:y,relativeY:x,x:L,y:M}}attachViewChangeListener(f){this._viewChangeListeners.add(f)}}const Ap=(I,f,r)=>{I.width=f,I.height=r,I.style.width=`${f}px`,I.style.height=`${r}px`},Lp=(I,f)=>{for(const r in I)Object.prototype.hasOwnProperty.call(I,r)&&Ap(I[r],f.width,f.height)};function Ip({ctx:I,image:f,x:r=0,y:d=0,w:p=I.canvas.width,h:y=I.canvas.height,offsetX:x=.5,offsetY:L=.5}){x<0&&(x=0),L<0&&(L=0),x>1&&(x=1),L>1&&(L=1);const M=f.width,N=f.height,A=Math.min(p/M,y/N);let T=M*A,z=N*A,nt,G,C,V,rt=1;T<p&&(rt=p/T),Math.abs(rt-1)<1e-14&&z<y&&(rt=y/z),T*=rt,z*=rt,C=M/(T/p),V=N/(z/y),nt=(M-C)*x,G=(N-V)*L,nt<0&&(nt=0),G<0&&(G=0),C>M&&(C=M),V>N&&(V=N),I.drawImage(f,nt,G,C,V,r,d,p,y)}function Mp({canvas:I,ctx:f,image:r}){if(r&&r.complete&&I&&f){const d=r.width,p=r.height,y=I.getBoundingClientRect(),x=y.width,L=y.height,M=d/p;let N=x,A=N/M;A>L&&(A=L,N=A*M),f.drawImage(r,0,0,d,p,0,0,N,A)}}function Cp({canvas:I,ctx:f,image:r}){if(r&&r.complete&&I&&f){const d=r.width,p=r.height,y=I.getBoundingClientRect(),x=y.width,L=y.height;f.drawImage(r,0,0,d,p,0,0,x,L)}}function bp(I){const f=gt.useRef(null),[r,d]=gt.useState({width:window.innerWidth,height:window.innerHeight});return gt.useEffect(()=>{const p=new ResizeObserver(y=>{for(const x of y){if(x.contentRect){const{width:L,height:M}=x.contentRect;d({width:L,height:M})}typeof I=="function"&&I(x)}});return f.current&&p.observe(f.current),()=>{p.disconnect()}},[I]),{containerRef:f,screenSize:r}}class Ce{constructor(f,r){this._stateMachine=f,this._name=r}get stateMachine(){return this._stateMachine}get name(){return this._name}}class Np extends Ce{constructor(f,r){super(f,r)}onEnter(){}onExit(){}handleMouseWheel(f,r){}handleMouseDown(f,r){}handleMouseMove(f,r){}handleMouseUp(f,r){}}var Oi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Oi.exports;(function(I,f){(function(){var r,d="4.17.21",p=200,y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",L="Invalid `variable` option passed into `_.template`",M="__lodash_hash_undefined__",N=500,A="__lodash_placeholder__",T=1,z=2,nt=4,G=1,C=2,V=1,rt=2,mn=4,pt=8,Ot=16,At=32,Qt=64,Lt=128,xn=256,se=512,Li=30,be="...",E=800,J=16,Y=1,_t=2,fn=3,St=1/0,Nt=9007199254740991,Dt=17976931348623157e292,Ne=NaN,rn=4294967295,Do=rn-1,Po=rn>>>1,Ho=[["ary",Lt],["bind",V],["bindKey",rt],["curry",pt],["curryRight",Ot],["flip",se],["partial",At],["partialRight",Qt],["rearg",xn]],zn="[object Arguments]",De="[object Array]",Fo="[object AsyncFunction]",ue="[object Boolean]",oe="[object Date]",Uo="[object DOMException]",Pe="[object Error]",He="[object Function]",kr="[object GeneratorFunction]",$t="[object Map]",fe="[object Number]",Bo="[object Null]",an="[object Object]",jr="[object Promise]",Wo="[object Proxy]",ae="[object RegExp]",kt="[object Set]",le="[object String]",Fe="[object Symbol]",zo="[object Undefined]",ce="[object WeakMap]",Xo="[object WeakSet]",he="[object ArrayBuffer]",Xn="[object DataView]",Ii="[object Float32Array]",Mi="[object Float64Array]",Ci="[object Int8Array]",bi="[object Int16Array]",Ni="[object Int32Array]",Di="[object Uint8Array]",Pi="[object Uint8ClampedArray]",Hi="[object Uint16Array]",Fi="[object Uint32Array]",Ko=/\b__p \+= '';/g,Go=/\b(__p \+=) '' \+/g,Yo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ts=/&(?:amp|lt|gt|quot|#39);/g,ns=/[&<>"']/g,qo=RegExp(ts.source),Vo=RegExp(ns.source),Jo=/<%-([\s\S]+?)%>/g,Zo=/<%([\s\S]+?)%>/g,es=/<%=([\s\S]+?)%>/g,Qo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$o=/^\w*$/,ko=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ui=/[\\^$.*+?()[\]{}|]/g,jo=RegExp(Ui.source),Bi=/^\s+/,tf=/\s/,nf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ef=/\{\n\/\* \[wrapped with (.+)\] \*/,rf=/,? & /,sf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uf=/[()=,{}\[\]\/\s]/,of=/\\(\\)?/g,ff=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,is=/\w*$/,af=/^[-+]0x[0-9a-f]+$/i,lf=/^0b[01]+$/i,cf=/^\[object .+?Constructor\]$/,hf=/^0o[0-7]+$/i,gf=/^(?:0|[1-9]\d*)$/,df=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ue=/($^)/,pf=/['\n\r\u2028\u2029\\]/g,Be="\\ud800-\\udfff",_f="\\u0300-\\u036f",vf="\\ufe20-\\ufe2f",wf="\\u20d0-\\u20ff",rs=_f+vf+wf,ss="\\u2700-\\u27bf",us="a-z\\xdf-\\xf6\\xf8-\\xff",mf="\\xac\\xb1\\xd7\\xf7",xf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yf="\\u2000-\\u206f",Sf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",os="A-Z\\xc0-\\xd6\\xd8-\\xde",fs="\\ufe0e\\ufe0f",as=mf+xf+yf+Sf,Wi="['’]",Ef="["+Be+"]",ls="["+as+"]",We="["+rs+"]",cs="\\d+",Rf="["+ss+"]",hs="["+us+"]",gs="[^"+Be+as+cs+ss+us+os+"]",zi="\\ud83c[\\udffb-\\udfff]",Tf="(?:"+We+"|"+zi+")",ds="[^"+Be+"]",Xi="(?:\\ud83c[\\udde6-\\uddff]){2}",Ki="[\\ud800-\\udbff][\\udc00-\\udfff]",Kn="["+os+"]",ps="\\u200d",_s="(?:"+hs+"|"+gs+")",Of="(?:"+Kn+"|"+gs+")",vs="(?:"+Wi+"(?:d|ll|m|re|s|t|ve))?",ws="(?:"+Wi+"(?:D|LL|M|RE|S|T|VE))?",ms=Tf+"?",xs="["+fs+"]?",Af="(?:"+ps+"(?:"+[ds,Xi,Ki].join("|")+")"+xs+ms+")*",Lf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",If="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ys=xs+ms+Af,Mf="(?:"+[Rf,Xi,Ki].join("|")+")"+ys,Cf="(?:"+[ds+We+"?",We,Xi,Ki,Ef].join("|")+")",bf=RegExp(Wi,"g"),Nf=RegExp(We,"g"),Gi=RegExp(zi+"(?="+zi+")|"+Cf+ys,"g"),Df=RegExp([Kn+"?"+hs+"+"+vs+"(?="+[ls,Kn,"$"].join("|")+")",Of+"+"+ws+"(?="+[ls,Kn+_s,"$"].join("|")+")",Kn+"?"+_s+"+"+vs,Kn+"+"+ws,If,Lf,cs,Mf].join("|"),"g"),Pf=RegExp("["+ps+Be+rs+fs+"]"),Hf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ff=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uf=-1,et={};et[Ii]=et[Mi]=et[Ci]=et[bi]=et[Ni]=et[Di]=et[Pi]=et[Hi]=et[Fi]=!0,et[zn]=et[De]=et[he]=et[ue]=et[Xn]=et[oe]=et[Pe]=et[He]=et[$t]=et[fe]=et[an]=et[ae]=et[kt]=et[le]=et[ce]=!1;var tt={};tt[zn]=tt[De]=tt[he]=tt[Xn]=tt[ue]=tt[oe]=tt[Ii]=tt[Mi]=tt[Ci]=tt[bi]=tt[Ni]=tt[$t]=tt[fe]=tt[an]=tt[ae]=tt[kt]=tt[le]=tt[Fe]=tt[Di]=tt[Pi]=tt[Hi]=tt[Fi]=!0,tt[Pe]=tt[He]=tt[ce]=!1;var Bf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kf=parseFloat,Gf=parseInt,Ss=typeof Le=="object"&&Le&&Le.Object===Object&&Le,Yf=typeof self=="object"&&self&&self.Object===Object&&self,vt=Ss||Yf||Function("return this")(),Yi=f&&!f.nodeType&&f,Cn=Yi&&!0&&I&&!I.nodeType&&I,Es=Cn&&Cn.exports===Yi,qi=Es&&Ss.process,Xt=function(){try{var c=Cn&&Cn.require&&Cn.require("util").types;return c||qi&&qi.binding&&qi.binding("util")}catch{}}(),Rs=Xt&&Xt.isArrayBuffer,Ts=Xt&&Xt.isDate,Os=Xt&&Xt.isMap,As=Xt&&Xt.isRegExp,Ls=Xt&&Xt.isSet,Is=Xt&&Xt.isTypedArray;function Pt(c,_,g){switch(g.length){case 0:return c.call(_);case 1:return c.call(_,g[0]);case 2:return c.call(_,g[0],g[1]);case 3:return c.call(_,g[0],g[1],g[2])}return c.apply(_,g)}function qf(c,_,g,R){for(var H=-1,Z=c==null?0:c.length;++H<Z;){var ct=c[H];_(R,ct,g(ct),c)}return R}function Kt(c,_){for(var g=-1,R=c==null?0:c.length;++g<R&&_(c[g],g,c)!==!1;);return c}function Vf(c,_){for(var g=c==null?0:c.length;g--&&_(c[g],g,c)!==!1;);return c}function Ms(c,_){for(var g=-1,R=c==null?0:c.length;++g<R;)if(!_(c[g],g,c))return!1;return!0}function yn(c,_){for(var g=-1,R=c==null?0:c.length,H=0,Z=[];++g<R;){var ct=c[g];_(ct,g,c)&&(Z[H++]=ct)}return Z}function ze(c,_){var g=c==null?0:c.length;return!!g&&Gn(c,_,0)>-1}function Vi(c,_,g){for(var R=-1,H=c==null?0:c.length;++R<H;)if(g(_,c[R]))return!0;return!1}function it(c,_){for(var g=-1,R=c==null?0:c.length,H=Array(R);++g<R;)H[g]=_(c[g],g,c);return H}function Sn(c,_){for(var g=-1,R=_.length,H=c.length;++g<R;)c[H+g]=_[g];return c}function Ji(c,_,g,R){var H=-1,Z=c==null?0:c.length;for(R&&Z&&(g=c[++H]);++H<Z;)g=_(g,c[H],H,c);return g}function Jf(c,_,g,R){var H=c==null?0:c.length;for(R&&H&&(g=c[--H]);H--;)g=_(g,c[H],H,c);return g}function Zi(c,_){for(var g=-1,R=c==null?0:c.length;++g<R;)if(_(c[g],g,c))return!0;return!1}var Zf=Qi("length");function Qf(c){return c.split("")}function $f(c){return c.match(sf)||[]}function Cs(c,_,g){var R;return g(c,function(H,Z,ct){if(_(H,Z,ct))return R=Z,!1}),R}function Xe(c,_,g,R){for(var H=c.length,Z=g+(R?1:-1);R?Z--:++Z<H;)if(_(c[Z],Z,c))return Z;return-1}function Gn(c,_,g){return _===_?aa(c,_,g):Xe(c,bs,g)}function kf(c,_,g,R){for(var H=g-1,Z=c.length;++H<Z;)if(R(c[H],_))return H;return-1}function bs(c){return c!==c}function Ns(c,_){var g=c==null?0:c.length;return g?ki(c,_)/g:Ne}function Qi(c){return function(_){return _==null?r:_[c]}}function $i(c){return function(_){return c==null?r:c[_]}}function Ds(c,_,g,R,H){return H(c,function(Z,ct,j){g=R?(R=!1,Z):_(g,Z,ct,j)}),g}function jf(c,_){var g=c.length;for(c.sort(_);g--;)c[g]=c[g].value;return c}function ki(c,_){for(var g,R=-1,H=c.length;++R<H;){var Z=_(c[R]);Z!==r&&(g=g===r?Z:g+Z)}return g}function ji(c,_){for(var g=-1,R=Array(c);++g<c;)R[g]=_(g);return R}function ta(c,_){return it(_,function(g){return[g,c[g]]})}function Ps(c){return c&&c.slice(0,Bs(c)+1).replace(Bi,"")}function Ht(c){return function(_){return c(_)}}function tr(c,_){return it(_,function(g){return c[g]})}function ge(c,_){return c.has(_)}function Hs(c,_){for(var g=-1,R=c.length;++g<R&&Gn(_,c[g],0)>-1;);return g}function Fs(c,_){for(var g=c.length;g--&&Gn(_,c[g],0)>-1;);return g}function na(c,_){for(var g=c.length,R=0;g--;)c[g]===_&&++R;return R}var ea=$i(Bf),ia=$i(Wf);function ra(c){return"\\"+Xf[c]}function sa(c,_){return c==null?r:c[_]}function Yn(c){return Pf.test(c)}function ua(c){return Hf.test(c)}function oa(c){for(var _,g=[];!(_=c.next()).done;)g.push(_.value);return g}function nr(c){var _=-1,g=Array(c.size);return c.forEach(function(R,H){g[++_]=[H,R]}),g}function Us(c,_){return function(g){return c(_(g))}}function En(c,_){for(var g=-1,R=c.length,H=0,Z=[];++g<R;){var ct=c[g];(ct===_||ct===A)&&(c[g]=A,Z[H++]=g)}return Z}function Ke(c){var _=-1,g=Array(c.size);return c.forEach(function(R){g[++_]=R}),g}function fa(c){var _=-1,g=Array(c.size);return c.forEach(function(R){g[++_]=[R,R]}),g}function aa(c,_,g){for(var R=g-1,H=c.length;++R<H;)if(c[R]===_)return R;return-1}function la(c,_,g){for(var R=g+1;R--;)if(c[R]===_)return R;return R}function qn(c){return Yn(c)?ha(c):Zf(c)}function jt(c){return Yn(c)?ga(c):Qf(c)}function Bs(c){for(var _=c.length;_--&&tf.test(c.charAt(_)););return _}var ca=$i(zf);function ha(c){for(var _=Gi.lastIndex=0;Gi.test(c);)++_;return _}function ga(c){return c.match(Gi)||[]}function da(c){return c.match(Df)||[]}var pa=function c(_){_=_==null?vt:Vn.defaults(vt.Object(),_,Vn.pick(vt,Ff));var g=_.Array,R=_.Date,H=_.Error,Z=_.Function,ct=_.Math,j=_.Object,er=_.RegExp,_a=_.String,Gt=_.TypeError,Ge=g.prototype,va=Z.prototype,Jn=j.prototype,Ye=_["__core-js_shared__"],qe=va.toString,$=Jn.hasOwnProperty,wa=0,Ws=function(){var t=/[^.]+$/.exec(Ye&&Ye.keys&&Ye.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ve=Jn.toString,ma=qe.call(j),xa=vt._,ya=er("^"+qe.call($).replace(Ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=Es?_.Buffer:r,Rn=_.Symbol,Ze=_.Uint8Array,zs=Je?Je.allocUnsafe:r,Qe=Us(j.getPrototypeOf,j),Xs=j.create,Ks=Jn.propertyIsEnumerable,$e=Ge.splice,Gs=Rn?Rn.isConcatSpreadable:r,de=Rn?Rn.iterator:r,bn=Rn?Rn.toStringTag:r,ke=function(){try{var t=Fn(j,"defineProperty");return t({},"",{}),t}catch{}}(),Sa=_.clearTimeout!==vt.clearTimeout&&_.clearTimeout,Ea=R&&R.now!==vt.Date.now&&R.now,Ra=_.setTimeout!==vt.setTimeout&&_.setTimeout,je=ct.ceil,ti=ct.floor,ir=j.getOwnPropertySymbols,Ta=Je?Je.isBuffer:r,Ys=_.isFinite,Oa=Ge.join,Aa=Us(j.keys,j),ht=ct.max,mt=ct.min,La=R.now,Ia=_.parseInt,qs=ct.random,Ma=Ge.reverse,rr=Fn(_,"DataView"),pe=Fn(_,"Map"),sr=Fn(_,"Promise"),Zn=Fn(_,"Set"),_e=Fn(_,"WeakMap"),ve=Fn(j,"create"),ni=_e&&new _e,Qn={},Ca=Un(rr),ba=Un(pe),Na=Un(sr),Da=Un(Zn),Pa=Un(_e),ei=Rn?Rn.prototype:r,we=ei?ei.valueOf:r,Vs=ei?ei.toString:r;function u(t){if(ft(t)&&!F(t)&&!(t instanceof K)){if(t instanceof Yt)return t;if($.call(t,"__wrapped__"))return Ju(t)}return new Yt(t)}var $n=function(){function t(){}return function(n){if(!st(n))return{};if(Xs)return Xs(n);t.prototype=n;var e=new t;return t.prototype=r,e}}();function ii(){}function Yt(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}u.templateSettings={escape:Jo,evaluate:Zo,interpolate:es,variable:"",imports:{_:u}},u.prototype=ii.prototype,u.prototype.constructor=u,Yt.prototype=$n(ii.prototype),Yt.prototype.constructor=Yt;function K(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rn,this.__views__=[]}function Ha(){var t=new K(this.__wrapped__);return t.__actions__=It(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=It(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=It(this.__views__),t}function Fa(){if(this.__filtered__){var t=new K(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ua(){var t=this.__wrapped__.value(),n=this.__dir__,e=F(t),i=n<0,s=e?t.length:0,o=Ql(0,s,this.__views__),a=o.start,l=o.end,h=l-a,v=i?l:a-1,w=this.__iteratees__,m=w.length,S=0,O=mt(h,this.__takeCount__);if(!e||!i&&s==h&&O==h)return vu(t,this.__actions__);var D=[];t:for(;h--&&S<O;){v+=n;for(var B=-1,P=t[v];++B<m;){var X=w[B],q=X.iteratee,Bt=X.type,Tt=q(P);if(Bt==_t)P=Tt;else if(!Tt){if(Bt==Y)continue t;break t}}D[S++]=P}return D}K.prototype=$n(ii.prototype),K.prototype.constructor=K;function Nn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function Ba(){this.__data__=ve?ve(null):{},this.size=0}function Wa(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function za(t){var n=this.__data__;if(ve){var e=n[t];return e===M?r:e}return $.call(n,t)?n[t]:r}function Xa(t){var n=this.__data__;return ve?n[t]!==r:$.call(n,t)}function Ka(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ve&&n===r?M:n,this}Nn.prototype.clear=Ba,Nn.prototype.delete=Wa,Nn.prototype.get=za,Nn.prototype.has=Xa,Nn.prototype.set=Ka;function ln(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function Ga(){this.__data__=[],this.size=0}function Ya(t){var n=this.__data__,e=ri(n,t);if(e<0)return!1;var i=n.length-1;return e==i?n.pop():$e.call(n,e,1),--this.size,!0}function qa(t){var n=this.__data__,e=ri(n,t);return e<0?r:n[e][1]}function Va(t){return ri(this.__data__,t)>-1}function Ja(t,n){var e=this.__data__,i=ri(e,t);return i<0?(++this.size,e.push([t,n])):e[i][1]=n,this}ln.prototype.clear=Ga,ln.prototype.delete=Ya,ln.prototype.get=qa,ln.prototype.has=Va,ln.prototype.set=Ja;function cn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}function Za(){this.size=0,this.__data__={hash:new Nn,map:new(pe||ln),string:new Nn}}function Qa(t){var n=_i(this,t).delete(t);return this.size-=n?1:0,n}function $a(t){return _i(this,t).get(t)}function ka(t){return _i(this,t).has(t)}function ja(t,n){var e=_i(this,t),i=e.size;return e.set(t,n),this.size+=e.size==i?0:1,this}cn.prototype.clear=Za,cn.prototype.delete=Qa,cn.prototype.get=$a,cn.prototype.has=ka,cn.prototype.set=ja;function Dn(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new cn;++n<e;)this.add(t[n])}function tl(t){return this.__data__.set(t,M),this}function nl(t){return this.__data__.has(t)}Dn.prototype.add=Dn.prototype.push=tl,Dn.prototype.has=nl;function tn(t){var n=this.__data__=new ln(t);this.size=n.size}function el(){this.__data__=new ln,this.size=0}function il(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function rl(t){return this.__data__.get(t)}function sl(t){return this.__data__.has(t)}function ul(t,n){var e=this.__data__;if(e instanceof ln){var i=e.__data__;if(!pe||i.length<p-1)return i.push([t,n]),this.size=++e.size,this;e=this.__data__=new cn(i)}return e.set(t,n),this.size=e.size,this}tn.prototype.clear=el,tn.prototype.delete=il,tn.prototype.get=rl,tn.prototype.has=sl,tn.prototype.set=ul;function Js(t,n){var e=F(t),i=!e&&Bn(t),s=!e&&!i&&In(t),o=!e&&!i&&!s&&ne(t),a=e||i||s||o,l=a?ji(t.length,_a):[],h=l.length;for(var v in t)(n||$.call(t,v))&&!(a&&(v=="length"||s&&(v=="offset"||v=="parent")||o&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||pn(v,h)))&&l.push(v);return l}function Zs(t){var n=t.length;return n?t[_r(0,n-1)]:r}function ol(t,n){return vi(It(t),Pn(n,0,t.length))}function fl(t){return vi(It(t))}function ur(t,n,e){(e!==r&&!nn(t[n],e)||e===r&&!(n in t))&&hn(t,n,e)}function me(t,n,e){var i=t[n];(!($.call(t,n)&&nn(i,e))||e===r&&!(n in t))&&hn(t,n,e)}function ri(t,n){for(var e=t.length;e--;)if(nn(t[e][0],n))return e;return-1}function al(t,n,e,i){return Tn(t,function(s,o,a){n(i,s,e(s),a)}),i}function Qs(t,n){return t&&un(n,dt(n),t)}function ll(t,n){return t&&un(n,Ct(n),t)}function hn(t,n,e){n=="__proto__"&&ke?ke(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function or(t,n){for(var e=-1,i=n.length,s=g(i),o=t==null;++e<i;)s[e]=o?r:zr(t,n[e]);return s}function Pn(t,n,e){return t===t&&(e!==r&&(t=t<=e?t:e),n!==r&&(t=t>=n?t:n)),t}function qt(t,n,e,i,s,o){var a,l=n&T,h=n&z,v=n&nt;if(e&&(a=s?e(t,i,s,o):e(t)),a!==r)return a;if(!st(t))return t;var w=F(t);if(w){if(a=kl(t),!l)return It(t,a)}else{var m=xt(t),S=m==He||m==kr;if(In(t))return xu(t,l);if(m==an||m==zn||S&&!s){if(a=h||S?{}:Bu(t),!l)return h?zl(t,ll(a,t)):Wl(t,Qs(a,t))}else{if(!tt[m])return s?t:{};a=jl(t,m,l)}}o||(o=new tn);var O=o.get(t);if(O)return O;o.set(t,a),po(t)?t.forEach(function(P){a.add(qt(P,n,e,P,t,o))}):ho(t)&&t.forEach(function(P,X){a.set(X,qt(P,n,e,X,t,o))});var D=v?h?Ar:Or:h?Ct:dt,B=w?r:D(t);return Kt(B||t,function(P,X){B&&(X=P,P=t[X]),me(a,X,qt(P,n,e,X,t,o))}),a}function cl(t){var n=dt(t);return function(e){return $s(e,t,n)}}function $s(t,n,e){var i=e.length;if(t==null)return!i;for(t=j(t);i--;){var s=e[i],o=n[s],a=t[s];if(a===r&&!(s in t)||!o(a))return!1}return!0}function ks(t,n,e){if(typeof t!="function")throw new Gt(x);return Oe(function(){t.apply(r,e)},n)}function xe(t,n,e,i){var s=-1,o=ze,a=!0,l=t.length,h=[],v=n.length;if(!l)return h;e&&(n=it(n,Ht(e))),i?(o=Vi,a=!1):n.length>=p&&(o=ge,a=!1,n=new Dn(n));t:for(;++s<l;){var w=t[s],m=e==null?w:e(w);if(w=i||w!==0?w:0,a&&m===m){for(var S=v;S--;)if(n[S]===m)continue t;h.push(w)}else o(n,m,i)||h.push(w)}return h}var Tn=Tu(sn),js=Tu(ar,!0);function hl(t,n){var e=!0;return Tn(t,function(i,s,o){return e=!!n(i,s,o),e}),e}function si(t,n,e){for(var i=-1,s=t.length;++i<s;){var o=t[i],a=n(o);if(a!=null&&(l===r?a===a&&!Ut(a):e(a,l)))var l=a,h=o}return h}function gl(t,n,e,i){var s=t.length;for(e=U(e),e<0&&(e=-e>s?0:s+e),i=i===r||i>s?s:U(i),i<0&&(i+=s),i=e>i?0:vo(i);e<i;)t[e++]=n;return t}function tu(t,n){var e=[];return Tn(t,function(i,s,o){n(i,s,o)&&e.push(i)}),e}function wt(t,n,e,i,s){var o=-1,a=t.length;for(e||(e=nc),s||(s=[]);++o<a;){var l=t[o];n>0&&e(l)?n>1?wt(l,n-1,e,i,s):Sn(s,l):i||(s[s.length]=l)}return s}var fr=Ou(),nu=Ou(!0);function sn(t,n){return t&&fr(t,n,dt)}function ar(t,n){return t&&nu(t,n,dt)}function ui(t,n){return yn(n,function(e){return _n(t[e])})}function Hn(t,n){n=An(n,t);for(var e=0,i=n.length;t!=null&&e<i;)t=t[on(n[e++])];return e&&e==i?t:r}function eu(t,n,e){var i=n(t);return F(t)?i:Sn(i,e(t))}function Et(t){return t==null?t===r?zo:Bo:bn&&bn in j(t)?Zl(t):fc(t)}function lr(t,n){return t>n}function dl(t,n){return t!=null&&$.call(t,n)}function pl(t,n){return t!=null&&n in j(t)}function _l(t,n,e){return t>=mt(n,e)&&t<ht(n,e)}function cr(t,n,e){for(var i=e?Vi:ze,s=t[0].length,o=t.length,a=o,l=g(o),h=1/0,v=[];a--;){var w=t[a];a&&n&&(w=it(w,Ht(n))),h=mt(w.length,h),l[a]=!e&&(n||s>=120&&w.length>=120)?new Dn(a&&w):r}w=t[0];var m=-1,S=l[0];t:for(;++m<s&&v.length<h;){var O=w[m],D=n?n(O):O;if(O=e||O!==0?O:0,!(S?ge(S,D):i(v,D,e))){for(a=o;--a;){var B=l[a];if(!(B?ge(B,D):i(t[a],D,e)))continue t}S&&S.push(D),v.push(O)}}return v}function vl(t,n,e,i){return sn(t,function(s,o,a){n(i,e(s),o,a)}),i}function ye(t,n,e){n=An(n,t),t=Ku(t,n);var i=t==null?t:t[on(Jt(n))];return i==null?r:Pt(i,t,e)}function iu(t){return ft(t)&&Et(t)==zn}function wl(t){return ft(t)&&Et(t)==he}function ml(t){return ft(t)&&Et(t)==oe}function Se(t,n,e,i,s){return t===n?!0:t==null||n==null||!ft(t)&&!ft(n)?t!==t&&n!==n:xl(t,n,e,i,Se,s)}function xl(t,n,e,i,s,o){var a=F(t),l=F(n),h=a?De:xt(t),v=l?De:xt(n);h=h==zn?an:h,v=v==zn?an:v;var w=h==an,m=v==an,S=h==v;if(S&&In(t)){if(!In(n))return!1;a=!0,w=!1}if(S&&!w)return o||(o=new tn),a||ne(t)?Hu(t,n,e,i,s,o):Vl(t,n,h,e,i,s,o);if(!(e&G)){var O=w&&$.call(t,"__wrapped__"),D=m&&$.call(n,"__wrapped__");if(O||D){var B=O?t.value():t,P=D?n.value():n;return o||(o=new tn),s(B,P,e,i,o)}}return S?(o||(o=new tn),Jl(t,n,e,i,s,o)):!1}function yl(t){return ft(t)&&xt(t)==$t}function hr(t,n,e,i){var s=e.length,o=s,a=!i;if(t==null)return!o;for(t=j(t);s--;){var l=e[s];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<o;){l=e[s];var h=l[0],v=t[h],w=l[1];if(a&&l[2]){if(v===r&&!(h in t))return!1}else{var m=new tn;if(i)var S=i(v,w,h,t,n,m);if(!(S===r?Se(w,v,G|C,i,m):S))return!1}}return!0}function ru(t){if(!st(t)||ic(t))return!1;var n=_n(t)?ya:cf;return n.test(Un(t))}function Sl(t){return ft(t)&&Et(t)==ae}function El(t){return ft(t)&&xt(t)==kt}function Rl(t){return ft(t)&&Ei(t.length)&&!!et[Et(t)]}function su(t){return typeof t=="function"?t:t==null?bt:typeof t=="object"?F(t)?fu(t[0],t[1]):ou(t):Lo(t)}function gr(t){if(!Te(t))return Aa(t);var n=[];for(var e in j(t))$.call(t,e)&&e!="constructor"&&n.push(e);return n}function Tl(t){if(!st(t))return oc(t);var n=Te(t),e=[];for(var i in t)i=="constructor"&&(n||!$.call(t,i))||e.push(i);return e}function dr(t,n){return t<n}function uu(t,n){var e=-1,i=Mt(t)?g(t.length):[];return Tn(t,function(s,o,a){i[++e]=n(s,o,a)}),i}function ou(t){var n=Ir(t);return n.length==1&&n[0][2]?zu(n[0][0],n[0][1]):function(e){return e===t||hr(e,t,n)}}function fu(t,n){return Cr(t)&&Wu(n)?zu(on(t),n):function(e){var i=zr(e,t);return i===r&&i===n?Xr(e,t):Se(n,i,G|C)}}function oi(t,n,e,i,s){t!==n&&fr(n,function(o,a){if(s||(s=new tn),st(o))Ol(t,n,a,e,oi,i,s);else{var l=i?i(Nr(t,a),o,a+"",t,n,s):r;l===r&&(l=o),ur(t,a,l)}},Ct)}function Ol(t,n,e,i,s,o,a){var l=Nr(t,e),h=Nr(n,e),v=a.get(h);if(v){ur(t,e,v);return}var w=o?o(l,h,e+"",t,n,a):r,m=w===r;if(m){var S=F(h),O=!S&&In(h),D=!S&&!O&&ne(h);w=h,S||O||D?F(l)?w=l:at(l)?w=It(l):O?(m=!1,w=xu(h,!0)):D?(m=!1,w=yu(h,!0)):w=[]:Ae(h)||Bn(h)?(w=l,Bn(l)?w=wo(l):(!st(l)||_n(l))&&(w=Bu(h))):m=!1}m&&(a.set(h,w),s(w,h,i,o,a),a.delete(h)),ur(t,e,w)}function au(t,n){var e=t.length;if(e)return n+=n<0?e:0,pn(n,e)?t[n]:r}function lu(t,n,e){n.length?n=it(n,function(o){return F(o)?function(a){return Hn(a,o.length===1?o[0]:o)}:o}):n=[bt];var i=-1;n=it(n,Ht(b()));var s=uu(t,function(o,a,l){var h=it(n,function(v){return v(o)});return{criteria:h,index:++i,value:o}});return jf(s,function(o,a){return Bl(o,a,e)})}function Al(t,n){return cu(t,n,function(e,i){return Xr(t,i)})}function cu(t,n,e){for(var i=-1,s=n.length,o={};++i<s;){var a=n[i],l=Hn(t,a);e(l,a)&&Ee(o,An(a,t),l)}return o}function Ll(t){return function(n){return Hn(n,t)}}function pr(t,n,e,i){var s=i?kf:Gn,o=-1,a=n.length,l=t;for(t===n&&(n=It(n)),e&&(l=it(t,Ht(e)));++o<a;)for(var h=0,v=n[o],w=e?e(v):v;(h=s(l,w,h,i))>-1;)l!==t&&$e.call(l,h,1),$e.call(t,h,1);return t}function hu(t,n){for(var e=t?n.length:0,i=e-1;e--;){var s=n[e];if(e==i||s!==o){var o=s;pn(s)?$e.call(t,s,1):mr(t,s)}}return t}function _r(t,n){return t+ti(qs()*(n-t+1))}function Il(t,n,e,i){for(var s=-1,o=ht(je((n-t)/(e||1)),0),a=g(o);o--;)a[i?o:++s]=t,t+=e;return a}function vr(t,n){var e="";if(!t||n<1||n>Nt)return e;do n%2&&(e+=t),n=ti(n/2),n&&(t+=t);while(n);return e}function W(t,n){return Dr(Xu(t,n,bt),t+"")}function Ml(t){return Zs(ee(t))}function Cl(t,n){var e=ee(t);return vi(e,Pn(n,0,e.length))}function Ee(t,n,e,i){if(!st(t))return t;n=An(n,t);for(var s=-1,o=n.length,a=o-1,l=t;l!=null&&++s<o;){var h=on(n[s]),v=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(s!=a){var w=l[h];v=i?i(w,h,l):r,v===r&&(v=st(w)?w:pn(n[s+1])?[]:{})}me(l,h,v),l=l[h]}return t}var gu=ni?function(t,n){return ni.set(t,n),t}:bt,bl=ke?function(t,n){return ke(t,"toString",{configurable:!0,enumerable:!1,value:Gr(n),writable:!0})}:bt;function Nl(t){return vi(ee(t))}function Vt(t,n,e){var i=-1,s=t.length;n<0&&(n=-n>s?0:s+n),e=e>s?s:e,e<0&&(e+=s),s=n>e?0:e-n>>>0,n>>>=0;for(var o=g(s);++i<s;)o[i]=t[i+n];return o}function Dl(t,n){var e;return Tn(t,function(i,s,o){return e=n(i,s,o),!e}),!!e}function fi(t,n,e){var i=0,s=t==null?i:t.length;if(typeof n=="number"&&n===n&&s<=Po){for(;i<s;){var o=i+s>>>1,a=t[o];a!==null&&!Ut(a)&&(e?a<=n:a<n)?i=o+1:s=o}return s}return wr(t,n,bt,e)}function wr(t,n,e,i){var s=0,o=t==null?0:t.length;if(o===0)return 0;n=e(n);for(var a=n!==n,l=n===null,h=Ut(n),v=n===r;s<o;){var w=ti((s+o)/2),m=e(t[w]),S=m!==r,O=m===null,D=m===m,B=Ut(m);if(a)var P=i||D;else v?P=D&&(i||S):l?P=D&&S&&(i||!O):h?P=D&&S&&!O&&(i||!B):O||B?P=!1:P=i?m<=n:m<n;P?s=w+1:o=w}return mt(o,Do)}function du(t,n){for(var e=-1,i=t.length,s=0,o=[];++e<i;){var a=t[e],l=n?n(a):a;if(!e||!nn(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function pu(t){return typeof t=="number"?t:Ut(t)?Ne:+t}function Ft(t){if(typeof t=="string")return t;if(F(t))return it(t,Ft)+"";if(Ut(t))return Vs?Vs.call(t):"";var n=t+"";return n=="0"&&1/t==-St?"-0":n}function On(t,n,e){var i=-1,s=ze,o=t.length,a=!0,l=[],h=l;if(e)a=!1,s=Vi;else if(o>=p){var v=n?null:Yl(t);if(v)return Ke(v);a=!1,s=ge,h=new Dn}else h=n?[]:l;t:for(;++i<o;){var w=t[i],m=n?n(w):w;if(w=e||w!==0?w:0,a&&m===m){for(var S=h.length;S--;)if(h[S]===m)continue t;n&&h.push(m),l.push(w)}else s(h,m,e)||(h!==l&&h.push(m),l.push(w))}return l}function mr(t,n){return n=An(n,t),t=Ku(t,n),t==null||delete t[on(Jt(n))]}function _u(t,n,e,i){return Ee(t,n,e(Hn(t,n)),i)}function ai(t,n,e,i){for(var s=t.length,o=i?s:-1;(i?o--:++o<s)&&n(t[o],o,t););return e?Vt(t,i?0:o,i?o+1:s):Vt(t,i?o+1:0,i?s:o)}function vu(t,n){var e=t;return e instanceof K&&(e=e.value()),Ji(n,function(i,s){return s.func.apply(s.thisArg,Sn([i],s.args))},e)}function xr(t,n,e){var i=t.length;if(i<2)return i?On(t[0]):[];for(var s=-1,o=g(i);++s<i;)for(var a=t[s],l=-1;++l<i;)l!=s&&(o[s]=xe(o[s]||a,t[l],n,e));return On(wt(o,1),n,e)}function wu(t,n,e){for(var i=-1,s=t.length,o=n.length,a={};++i<s;){var l=i<o?n[i]:r;e(a,t[i],l)}return a}function yr(t){return at(t)?t:[]}function Sr(t){return typeof t=="function"?t:bt}function An(t,n){return F(t)?t:Cr(t,n)?[t]:Vu(Q(t))}var Pl=W;function Ln(t,n,e){var i=t.length;return e=e===r?i:e,!n&&e>=i?t:Vt(t,n,e)}var mu=Sa||function(t){return vt.clearTimeout(t)};function xu(t,n){if(n)return t.slice();var e=t.length,i=zs?zs(e):new t.constructor(e);return t.copy(i),i}function Er(t){var n=new t.constructor(t.byteLength);return new Ze(n).set(new Ze(t)),n}function Hl(t,n){var e=n?Er(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function Fl(t){var n=new t.constructor(t.source,is.exec(t));return n.lastIndex=t.lastIndex,n}function Ul(t){return we?j(we.call(t)):{}}function yu(t,n){var e=n?Er(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function Su(t,n){if(t!==n){var e=t!==r,i=t===null,s=t===t,o=Ut(t),a=n!==r,l=n===null,h=n===n,v=Ut(n);if(!l&&!v&&!o&&t>n||o&&a&&h&&!l&&!v||i&&a&&h||!e&&h||!s)return 1;if(!i&&!o&&!v&&t<n||v&&e&&s&&!i&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function Bl(t,n,e){for(var i=-1,s=t.criteria,o=n.criteria,a=s.length,l=e.length;++i<a;){var h=Su(s[i],o[i]);if(h){if(i>=l)return h;var v=e[i];return h*(v=="desc"?-1:1)}}return t.index-n.index}function Eu(t,n,e,i){for(var s=-1,o=t.length,a=e.length,l=-1,h=n.length,v=ht(o-a,0),w=g(h+v),m=!i;++l<h;)w[l]=n[l];for(;++s<a;)(m||s<o)&&(w[e[s]]=t[s]);for(;v--;)w[l++]=t[s++];return w}function Ru(t,n,e,i){for(var s=-1,o=t.length,a=-1,l=e.length,h=-1,v=n.length,w=ht(o-l,0),m=g(w+v),S=!i;++s<w;)m[s]=t[s];for(var O=s;++h<v;)m[O+h]=n[h];for(;++a<l;)(S||s<o)&&(m[O+e[a]]=t[s++]);return m}function It(t,n){var e=-1,i=t.length;for(n||(n=g(i));++e<i;)n[e]=t[e];return n}function un(t,n,e,i){var s=!e;e||(e={});for(var o=-1,a=n.length;++o<a;){var l=n[o],h=i?i(e[l],t[l],l,e,t):r;h===r&&(h=t[l]),s?hn(e,l,h):me(e,l,h)}return e}function Wl(t,n){return un(t,Mr(t),n)}function zl(t,n){return un(t,Fu(t),n)}function li(t,n){return function(e,i){var s=F(e)?qf:al,o=n?n():{};return s(e,t,b(i,2),o)}}function kn(t){return W(function(n,e){var i=-1,s=e.length,o=s>1?e[s-1]:r,a=s>2?e[2]:r;for(o=t.length>3&&typeof o=="function"?(s--,o):r,a&&Rt(e[0],e[1],a)&&(o=s<3?r:o,s=1),n=j(n);++i<s;){var l=e[i];l&&t(n,l,i,o)}return n})}function Tu(t,n){return function(e,i){if(e==null)return e;if(!Mt(e))return t(e,i);for(var s=e.length,o=n?s:-1,a=j(e);(n?o--:++o<s)&&i(a[o],o,a)!==!1;);return e}}function Ou(t){return function(n,e,i){for(var s=-1,o=j(n),a=i(n),l=a.length;l--;){var h=a[t?l:++s];if(e(o[h],h,o)===!1)break}return n}}function Xl(t,n,e){var i=n&V,s=Re(t);function o(){var a=this&&this!==vt&&this instanceof o?s:t;return a.apply(i?e:this,arguments)}return o}function Au(t){return function(n){n=Q(n);var e=Yn(n)?jt(n):r,i=e?e[0]:n.charAt(0),s=e?Ln(e,1).join(""):n.slice(1);return i[t]()+s}}function jn(t){return function(n){return Ji(Oo(To(n).replace(bf,"")),t,"")}}function Re(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=$n(t.prototype),i=t.apply(e,n);return st(i)?i:e}}function Kl(t,n,e){var i=Re(t);function s(){for(var o=arguments.length,a=g(o),l=o,h=te(s);l--;)a[l]=arguments[l];var v=o<3&&a[0]!==h&&a[o-1]!==h?[]:En(a,h);if(o-=v.length,o<e)return bu(t,n,ci,s.placeholder,r,a,v,r,r,e-o);var w=this&&this!==vt&&this instanceof s?i:t;return Pt(w,this,a)}return s}function Lu(t){return function(n,e,i){var s=j(n);if(!Mt(n)){var o=b(e,3);n=dt(n),e=function(l){return o(s[l],l,s)}}var a=t(n,e,i);return a>-1?s[o?n[a]:a]:r}}function Iu(t){return dn(function(n){var e=n.length,i=e,s=Yt.prototype.thru;for(t&&n.reverse();i--;){var o=n[i];if(typeof o!="function")throw new Gt(x);if(s&&!a&&pi(o)=="wrapper")var a=new Yt([],!0)}for(i=a?i:e;++i<e;){o=n[i];var l=pi(o),h=l=="wrapper"?Lr(o):r;h&&br(h[0])&&h[1]==(Lt|pt|At|xn)&&!h[4].length&&h[9]==1?a=a[pi(h[0])].apply(a,h[3]):a=o.length==1&&br(o)?a[l]():a.thru(o)}return function(){var v=arguments,w=v[0];if(a&&v.length==1&&F(w))return a.plant(w).value();for(var m=0,S=e?n[m].apply(this,v):w;++m<e;)S=n[m].call(this,S);return S}})}function ci(t,n,e,i,s,o,a,l,h,v){var w=n&Lt,m=n&V,S=n&rt,O=n&(pt|Ot),D=n&se,B=S?r:Re(t);function P(){for(var X=arguments.length,q=g(X),Bt=X;Bt--;)q[Bt]=arguments[Bt];if(O)var Tt=te(P),Wt=na(q,Tt);if(i&&(q=Eu(q,i,s,O)),o&&(q=Ru(q,o,a,O)),X-=Wt,O&&X<v){var lt=En(q,Tt);return bu(t,n,ci,P.placeholder,e,q,lt,l,h,v-X)}var en=m?e:this,wn=S?en[t]:t;return X=q.length,l?q=ac(q,l):D&&X>1&&q.reverse(),w&&h<X&&(q.length=h),this&&this!==vt&&this instanceof P&&(wn=B||Re(wn)),wn.apply(en,q)}return P}function Mu(t,n){return function(e,i){return vl(e,t,n(i),{})}}function hi(t,n){return function(e,i){var s;if(e===r&&i===r)return n;if(e!==r&&(s=e),i!==r){if(s===r)return i;typeof e=="string"||typeof i=="string"?(e=Ft(e),i=Ft(i)):(e=pu(e),i=pu(i)),s=t(e,i)}return s}}function Rr(t){return dn(function(n){return n=it(n,Ht(b())),W(function(e){var i=this;return t(n,function(s){return Pt(s,i,e)})})})}function gi(t,n){n=n===r?" ":Ft(n);var e=n.length;if(e<2)return e?vr(n,t):n;var i=vr(n,je(t/qn(n)));return Yn(n)?Ln(jt(i),0,t).join(""):i.slice(0,t)}function Gl(t,n,e,i){var s=n&V,o=Re(t);function a(){for(var l=-1,h=arguments.length,v=-1,w=i.length,m=g(w+h),S=this&&this!==vt&&this instanceof a?o:t;++v<w;)m[v]=i[v];for(;h--;)m[v++]=arguments[++l];return Pt(S,s?e:this,m)}return a}function Cu(t){return function(n,e,i){return i&&typeof i!="number"&&Rt(n,e,i)&&(e=i=r),n=vn(n),e===r?(e=n,n=0):e=vn(e),i=i===r?n<e?1:-1:vn(i),Il(n,e,i,t)}}function di(t){return function(n,e){return typeof n=="string"&&typeof e=="string"||(n=Zt(n),e=Zt(e)),t(n,e)}}function bu(t,n,e,i,s,o,a,l,h,v){var w=n&pt,m=w?a:r,S=w?r:a,O=w?o:r,D=w?r:o;n|=w?At:Qt,n&=~(w?Qt:At),n&mn||(n&=~(V|rt));var B=[t,n,s,O,m,D,S,l,h,v],P=e.apply(r,B);return br(t)&&Gu(P,B),P.placeholder=i,Yu(P,t,n)}function Tr(t){var n=ct[t];return function(e,i){if(e=Zt(e),i=i==null?0:mt(U(i),292),i&&Ys(e)){var s=(Q(e)+"e").split("e"),o=n(s[0]+"e"+(+s[1]+i));return s=(Q(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-i))}return n(e)}}var Yl=Zn&&1/Ke(new Zn([,-0]))[1]==St?function(t){return new Zn(t)}:Vr;function Nu(t){return function(n){var e=xt(n);return e==$t?nr(n):e==kt?fa(n):ta(n,t(n))}}function gn(t,n,e,i,s,o,a,l){var h=n&rt;if(!h&&typeof t!="function")throw new Gt(x);var v=i?i.length:0;if(v||(n&=~(At|Qt),i=s=r),a=a===r?a:ht(U(a),0),l=l===r?l:U(l),v-=s?s.length:0,n&Qt){var w=i,m=s;i=s=r}var S=h?r:Lr(t),O=[t,n,e,i,s,w,m,o,a,l];if(S&&uc(O,S),t=O[0],n=O[1],e=O[2],i=O[3],s=O[4],l=O[9]=O[9]===r?h?0:t.length:ht(O[9]-v,0),!l&&n&(pt|Ot)&&(n&=~(pt|Ot)),!n||n==V)var D=Xl(t,n,e);else n==pt||n==Ot?D=Kl(t,n,l):(n==At||n==(V|At))&&!s.length?D=Gl(t,n,e,i):D=ci.apply(r,O);var B=S?gu:Gu;return Yu(B(D,O),t,n)}function Du(t,n,e,i){return t===r||nn(t,Jn[e])&&!$.call(i,e)?n:t}function Pu(t,n,e,i,s,o){return st(t)&&st(n)&&(o.set(n,t),oi(t,n,r,Pu,o),o.delete(n)),t}function ql(t){return Ae(t)?r:t}function Hu(t,n,e,i,s,o){var a=e&G,l=t.length,h=n.length;if(l!=h&&!(a&&h>l))return!1;var v=o.get(t),w=o.get(n);if(v&&w)return v==n&&w==t;var m=-1,S=!0,O=e&C?new Dn:r;for(o.set(t,n),o.set(n,t);++m<l;){var D=t[m],B=n[m];if(i)var P=a?i(B,D,m,n,t,o):i(D,B,m,t,n,o);if(P!==r){if(P)continue;S=!1;break}if(O){if(!Zi(n,function(X,q){if(!ge(O,q)&&(D===X||s(D,X,e,i,o)))return O.push(q)})){S=!1;break}}else if(!(D===B||s(D,B,e,i,o))){S=!1;break}}return o.delete(t),o.delete(n),S}function Vl(t,n,e,i,s,o,a){switch(e){case Xn:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case he:return!(t.byteLength!=n.byteLength||!o(new Ze(t),new Ze(n)));case ue:case oe:case fe:return nn(+t,+n);case Pe:return t.name==n.name&&t.message==n.message;case ae:case le:return t==n+"";case $t:var l=nr;case kt:var h=i&G;if(l||(l=Ke),t.size!=n.size&&!h)return!1;var v=a.get(t);if(v)return v==n;i|=C,a.set(t,n);var w=Hu(l(t),l(n),i,s,o,a);return a.delete(t),w;case Fe:if(we)return we.call(t)==we.call(n)}return!1}function Jl(t,n,e,i,s,o){var a=e&G,l=Or(t),h=l.length,v=Or(n),w=v.length;if(h!=w&&!a)return!1;for(var m=h;m--;){var S=l[m];if(!(a?S in n:$.call(n,S)))return!1}var O=o.get(t),D=o.get(n);if(O&&D)return O==n&&D==t;var B=!0;o.set(t,n),o.set(n,t);for(var P=a;++m<h;){S=l[m];var X=t[S],q=n[S];if(i)var Bt=a?i(q,X,S,n,t,o):i(X,q,S,t,n,o);if(!(Bt===r?X===q||s(X,q,e,i,o):Bt)){B=!1;break}P||(P=S=="constructor")}if(B&&!P){var Tt=t.constructor,Wt=n.constructor;Tt!=Wt&&"constructor"in t&&"constructor"in n&&!(typeof Tt=="function"&&Tt instanceof Tt&&typeof Wt=="function"&&Wt instanceof Wt)&&(B=!1)}return o.delete(t),o.delete(n),B}function dn(t){return Dr(Xu(t,r,$u),t+"")}function Or(t){return eu(t,dt,Mr)}function Ar(t){return eu(t,Ct,Fu)}var Lr=ni?function(t){return ni.get(t)}:Vr;function pi(t){for(var n=t.name+"",e=Qn[n],i=$.call(Qn,n)?e.length:0;i--;){var s=e[i],o=s.func;if(o==null||o==t)return s.name}return n}function te(t){var n=$.call(u,"placeholder")?u:t;return n.placeholder}function b(){var t=u.iteratee||Yr;return t=t===Yr?su:t,arguments.length?t(arguments[0],arguments[1]):t}function _i(t,n){var e=t.__data__;return ec(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Ir(t){for(var n=dt(t),e=n.length;e--;){var i=n[e],s=t[i];n[e]=[i,s,Wu(s)]}return n}function Fn(t,n){var e=sa(t,n);return ru(e)?e:r}function Zl(t){var n=$.call(t,bn),e=t[bn];try{t[bn]=r;var i=!0}catch{}var s=Ve.call(t);return i&&(n?t[bn]=e:delete t[bn]),s}var Mr=ir?function(t){return t==null?[]:(t=j(t),yn(ir(t),function(n){return Ks.call(t,n)}))}:Jr,Fu=ir?function(t){for(var n=[];t;)Sn(n,Mr(t)),t=Qe(t);return n}:Jr,xt=Et;(rr&&xt(new rr(new ArrayBuffer(1)))!=Xn||pe&&xt(new pe)!=$t||sr&&xt(sr.resolve())!=jr||Zn&&xt(new Zn)!=kt||_e&&xt(new _e)!=ce)&&(xt=function(t){var n=Et(t),e=n==an?t.constructor:r,i=e?Un(e):"";if(i)switch(i){case Ca:return Xn;case ba:return $t;case Na:return jr;case Da:return kt;case Pa:return ce}return n});function Ql(t,n,e){for(var i=-1,s=e.length;++i<s;){var o=e[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":n-=a;break;case"take":n=mt(n,t+a);break;case"takeRight":t=ht(t,n-a);break}}return{start:t,end:n}}function $l(t){var n=t.match(ef);return n?n[1].split(rf):[]}function Uu(t,n,e){n=An(n,t);for(var i=-1,s=n.length,o=!1;++i<s;){var a=on(n[i]);if(!(o=t!=null&&e(t,a)))break;t=t[a]}return o||++i!=s?o:(s=t==null?0:t.length,!!s&&Ei(s)&&pn(a,s)&&(F(t)||Bn(t)))}function kl(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&$.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Bu(t){return typeof t.constructor=="function"&&!Te(t)?$n(Qe(t)):{}}function jl(t,n,e){var i=t.constructor;switch(n){case he:return Er(t);case ue:case oe:return new i(+t);case Xn:return Hl(t,e);case Ii:case Mi:case Ci:case bi:case Ni:case Di:case Pi:case Hi:case Fi:return yu(t,e);case $t:return new i;case fe:case le:return new i(t);case ae:return Fl(t);case kt:return new i;case Fe:return Ul(t)}}function tc(t,n){var e=n.length;if(!e)return t;var i=e-1;return n[i]=(e>1?"& ":"")+n[i],n=n.join(e>2?", ":" "),t.replace(nf,`{
/* [wrapped with `+n+`] */
`)}function nc(t){return F(t)||Bn(t)||!!(Gs&&t&&t[Gs])}function pn(t,n){var e=typeof t;return n=n??Nt,!!n&&(e=="number"||e!="symbol"&&gf.test(t))&&t>-1&&t%1==0&&t<n}function Rt(t,n,e){if(!st(e))return!1;var i=typeof n;return(i=="number"?Mt(e)&&pn(n,e.length):i=="string"&&n in e)?nn(e[n],t):!1}function Cr(t,n){if(F(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Ut(t)?!0:$o.test(t)||!Qo.test(t)||n!=null&&t in j(n)}function ec(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function br(t){var n=pi(t),e=u[n];if(typeof e!="function"||!(n in K.prototype))return!1;if(t===e)return!0;var i=Lr(e);return!!i&&t===i[0]}function ic(t){return!!Ws&&Ws in t}var rc=Ye?_n:Zr;function Te(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Jn;return t===e}function Wu(t){return t===t&&!st(t)}function zu(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==r||t in j(e))}}function sc(t){var n=yi(t,function(i){return e.size===N&&e.clear(),i}),e=n.cache;return n}function uc(t,n){var e=t[1],i=n[1],s=e|i,o=s<(V|rt|Lt),a=i==Lt&&e==pt||i==Lt&&e==xn&&t[7].length<=n[8]||i==(Lt|xn)&&n[7].length<=n[8]&&e==pt;if(!(o||a))return t;i&V&&(t[2]=n[2],s|=e&V?0:mn);var l=n[3];if(l){var h=t[3];t[3]=h?Eu(h,l,n[4]):l,t[4]=h?En(t[3],A):n[4]}return l=n[5],l&&(h=t[5],t[5]=h?Ru(h,l,n[6]):l,t[6]=h?En(t[5],A):n[6]),l=n[7],l&&(t[7]=l),i&Lt&&(t[8]=t[8]==null?n[8]:mt(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=s,t}function oc(t){var n=[];if(t!=null)for(var e in j(t))n.push(e);return n}function fc(t){return Ve.call(t)}function Xu(t,n,e){return n=ht(n===r?t.length-1:n,0),function(){for(var i=arguments,s=-1,o=ht(i.length-n,0),a=g(o);++s<o;)a[s]=i[n+s];s=-1;for(var l=g(n+1);++s<n;)l[s]=i[s];return l[n]=e(a),Pt(t,this,l)}}function Ku(t,n){return n.length<2?t:Hn(t,Vt(n,0,-1))}function ac(t,n){for(var e=t.length,i=mt(n.length,e),s=It(t);i--;){var o=n[i];t[i]=pn(o,e)?s[o]:r}return t}function Nr(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Gu=qu(gu),Oe=Ra||function(t,n){return vt.setTimeout(t,n)},Dr=qu(bl);function Yu(t,n,e){var i=n+"";return Dr(t,tc(i,lc($l(i),e)))}function qu(t){var n=0,e=0;return function(){var i=La(),s=J-(i-e);if(e=i,s>0){if(++n>=E)return arguments[0]}else n=0;return t.apply(r,arguments)}}function vi(t,n){var e=-1,i=t.length,s=i-1;for(n=n===r?i:n;++e<n;){var o=_r(e,s),a=t[o];t[o]=t[e],t[e]=a}return t.length=n,t}var Vu=sc(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(ko,function(e,i,s,o){n.push(s?o.replace(of,"$1"):i||e)}),n});function on(t){if(typeof t=="string"||Ut(t))return t;var n=t+"";return n=="0"&&1/t==-St?"-0":n}function Un(t){if(t!=null){try{return qe.call(t)}catch{}try{return t+""}catch{}}return""}function lc(t,n){return Kt(Ho,function(e){var i="_."+e[0];n&e[1]&&!ze(t,i)&&t.push(i)}),t.sort()}function Ju(t){if(t instanceof K)return t.clone();var n=new Yt(t.__wrapped__,t.__chain__);return n.__actions__=It(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function cc(t,n,e){(e?Rt(t,n,e):n===r)?n=1:n=ht(U(n),0);var i=t==null?0:t.length;if(!i||n<1)return[];for(var s=0,o=0,a=g(je(i/n));s<i;)a[o++]=Vt(t,s,s+=n);return a}function hc(t){for(var n=-1,e=t==null?0:t.length,i=0,s=[];++n<e;){var o=t[n];o&&(s[i++]=o)}return s}function gc(){var t=arguments.length;if(!t)return[];for(var n=g(t-1),e=arguments[0],i=t;i--;)n[i-1]=arguments[i];return Sn(F(e)?It(e):[e],wt(n,1))}var dc=W(function(t,n){return at(t)?xe(t,wt(n,1,at,!0)):[]}),pc=W(function(t,n){var e=Jt(n);return at(e)&&(e=r),at(t)?xe(t,wt(n,1,at,!0),b(e,2)):[]}),_c=W(function(t,n){var e=Jt(n);return at(e)&&(e=r),at(t)?xe(t,wt(n,1,at,!0),r,e):[]});function vc(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:U(n),Vt(t,n<0?0:n,i)):[]}function wc(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:U(n),n=i-n,Vt(t,0,n<0?0:n)):[]}function mc(t,n){return t&&t.length?ai(t,b(n,3),!0,!0):[]}function xc(t,n){return t&&t.length?ai(t,b(n,3),!0):[]}function yc(t,n,e,i){var s=t==null?0:t.length;return s?(e&&typeof e!="number"&&Rt(t,n,e)&&(e=0,i=s),gl(t,n,e,i)):[]}function Zu(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=e==null?0:U(e);return s<0&&(s=ht(i+s,0)),Xe(t,b(n,3),s)}function Qu(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=i-1;return e!==r&&(s=U(e),s=e<0?ht(i+s,0):mt(s,i-1)),Xe(t,b(n,3),s,!0)}function $u(t){var n=t==null?0:t.length;return n?wt(t,1):[]}function Sc(t){var n=t==null?0:t.length;return n?wt(t,St):[]}function Ec(t,n){var e=t==null?0:t.length;return e?(n=n===r?1:U(n),wt(t,n)):[]}function Rc(t){for(var n=-1,e=t==null?0:t.length,i={};++n<e;){var s=t[n];i[s[0]]=s[1]}return i}function ku(t){return t&&t.length?t[0]:r}function Tc(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=e==null?0:U(e);return s<0&&(s=ht(i+s,0)),Gn(t,n,s)}function Oc(t){var n=t==null?0:t.length;return n?Vt(t,0,-1):[]}var Ac=W(function(t){var n=it(t,yr);return n.length&&n[0]===t[0]?cr(n):[]}),Lc=W(function(t){var n=Jt(t),e=it(t,yr);return n===Jt(e)?n=r:e.pop(),e.length&&e[0]===t[0]?cr(e,b(n,2)):[]}),Ic=W(function(t){var n=Jt(t),e=it(t,yr);return n=typeof n=="function"?n:r,n&&e.pop(),e.length&&e[0]===t[0]?cr(e,r,n):[]});function Mc(t,n){return t==null?"":Oa.call(t,n)}function Jt(t){var n=t==null?0:t.length;return n?t[n-1]:r}function Cc(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=i;return e!==r&&(s=U(e),s=s<0?ht(i+s,0):mt(s,i-1)),n===n?la(t,n,s):Xe(t,bs,s,!0)}function bc(t,n){return t&&t.length?au(t,U(n)):r}var Nc=W(ju);function ju(t,n){return t&&t.length&&n&&n.length?pr(t,n):t}function Dc(t,n,e){return t&&t.length&&n&&n.length?pr(t,n,b(e,2)):t}function Pc(t,n,e){return t&&t.length&&n&&n.length?pr(t,n,r,e):t}var Hc=dn(function(t,n){var e=t==null?0:t.length,i=or(t,n);return hu(t,it(n,function(s){return pn(s,e)?+s:s}).sort(Su)),i});function Fc(t,n){var e=[];if(!(t&&t.length))return e;var i=-1,s=[],o=t.length;for(n=b(n,3);++i<o;){var a=t[i];n(a,i,t)&&(e.push(a),s.push(i))}return hu(t,s),e}function Pr(t){return t==null?t:Ma.call(t)}function Uc(t,n,e){var i=t==null?0:t.length;return i?(e&&typeof e!="number"&&Rt(t,n,e)?(n=0,e=i):(n=n==null?0:U(n),e=e===r?i:U(e)),Vt(t,n,e)):[]}function Bc(t,n){return fi(t,n)}function Wc(t,n,e){return wr(t,n,b(e,2))}function zc(t,n){var e=t==null?0:t.length;if(e){var i=fi(t,n);if(i<e&&nn(t[i],n))return i}return-1}function Xc(t,n){return fi(t,n,!0)}function Kc(t,n,e){return wr(t,n,b(e,2),!0)}function Gc(t,n){var e=t==null?0:t.length;if(e){var i=fi(t,n,!0)-1;if(nn(t[i],n))return i}return-1}function Yc(t){return t&&t.length?du(t):[]}function qc(t,n){return t&&t.length?du(t,b(n,2)):[]}function Vc(t){var n=t==null?0:t.length;return n?Vt(t,1,n):[]}function Jc(t,n,e){return t&&t.length?(n=e||n===r?1:U(n),Vt(t,0,n<0?0:n)):[]}function Zc(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:U(n),n=i-n,Vt(t,n<0?0:n,i)):[]}function Qc(t,n){return t&&t.length?ai(t,b(n,3),!1,!0):[]}function $c(t,n){return t&&t.length?ai(t,b(n,3)):[]}var kc=W(function(t){return On(wt(t,1,at,!0))}),jc=W(function(t){var n=Jt(t);return at(n)&&(n=r),On(wt(t,1,at,!0),b(n,2))}),th=W(function(t){var n=Jt(t);return n=typeof n=="function"?n:r,On(wt(t,1,at,!0),r,n)});function nh(t){return t&&t.length?On(t):[]}function eh(t,n){return t&&t.length?On(t,b(n,2)):[]}function ih(t,n){return n=typeof n=="function"?n:r,t&&t.length?On(t,r,n):[]}function Hr(t){if(!(t&&t.length))return[];var n=0;return t=yn(t,function(e){if(at(e))return n=ht(e.length,n),!0}),ji(n,function(e){return it(t,Qi(e))})}function to(t,n){if(!(t&&t.length))return[];var e=Hr(t);return n==null?e:it(e,function(i){return Pt(n,r,i)})}var rh=W(function(t,n){return at(t)?xe(t,n):[]}),sh=W(function(t){return xr(yn(t,at))}),uh=W(function(t){var n=Jt(t);return at(n)&&(n=r),xr(yn(t,at),b(n,2))}),oh=W(function(t){var n=Jt(t);return n=typeof n=="function"?n:r,xr(yn(t,at),r,n)}),fh=W(Hr);function ah(t,n){return wu(t||[],n||[],me)}function lh(t,n){return wu(t||[],n||[],Ee)}var ch=W(function(t){var n=t.length,e=n>1?t[n-1]:r;return e=typeof e=="function"?(t.pop(),e):r,to(t,e)});function no(t){var n=u(t);return n.__chain__=!0,n}function hh(t,n){return n(t),t}function wi(t,n){return n(t)}var gh=dn(function(t){var n=t.length,e=n?t[0]:0,i=this.__wrapped__,s=function(o){return or(o,t)};return n>1||this.__actions__.length||!(i instanceof K)||!pn(e)?this.thru(s):(i=i.slice(e,+e+(n?1:0)),i.__actions__.push({func:wi,args:[s],thisArg:r}),new Yt(i,this.__chain__).thru(function(o){return n&&!o.length&&o.push(r),o}))});function dh(){return no(this)}function ph(){return new Yt(this.value(),this.__chain__)}function _h(){this.__values__===r&&(this.__values__=_o(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function vh(){return this}function wh(t){for(var n,e=this;e instanceof ii;){var i=Ju(e);i.__index__=0,i.__values__=r,n?s.__wrapped__=i:n=i;var s=i;e=e.__wrapped__}return s.__wrapped__=t,n}function mh(){var t=this.__wrapped__;if(t instanceof K){var n=t;return this.__actions__.length&&(n=new K(this)),n=n.reverse(),n.__actions__.push({func:wi,args:[Pr],thisArg:r}),new Yt(n,this.__chain__)}return this.thru(Pr)}function xh(){return vu(this.__wrapped__,this.__actions__)}var yh=li(function(t,n,e){$.call(t,e)?++t[e]:hn(t,e,1)});function Sh(t,n,e){var i=F(t)?Ms:hl;return e&&Rt(t,n,e)&&(n=r),i(t,b(n,3))}function Eh(t,n){var e=F(t)?yn:tu;return e(t,b(n,3))}var Rh=Lu(Zu),Th=Lu(Qu);function Oh(t,n){return wt(mi(t,n),1)}function Ah(t,n){return wt(mi(t,n),St)}function Lh(t,n,e){return e=e===r?1:U(e),wt(mi(t,n),e)}function eo(t,n){var e=F(t)?Kt:Tn;return e(t,b(n,3))}function io(t,n){var e=F(t)?Vf:js;return e(t,b(n,3))}var Ih=li(function(t,n,e){$.call(t,e)?t[e].push(n):hn(t,e,[n])});function Mh(t,n,e,i){t=Mt(t)?t:ee(t),e=e&&!i?U(e):0;var s=t.length;return e<0&&(e=ht(s+e,0)),Ri(t)?e<=s&&t.indexOf(n,e)>-1:!!s&&Gn(t,n,e)>-1}var Ch=W(function(t,n,e){var i=-1,s=typeof n=="function",o=Mt(t)?g(t.length):[];return Tn(t,function(a){o[++i]=s?Pt(n,a,e):ye(a,n,e)}),o}),bh=li(function(t,n,e){hn(t,e,n)});function mi(t,n){var e=F(t)?it:uu;return e(t,b(n,3))}function Nh(t,n,e,i){return t==null?[]:(F(n)||(n=n==null?[]:[n]),e=i?r:e,F(e)||(e=e==null?[]:[e]),lu(t,n,e))}var Dh=li(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]});function Ph(t,n,e){var i=F(t)?Ji:Ds,s=arguments.length<3;return i(t,b(n,4),e,s,Tn)}function Hh(t,n,e){var i=F(t)?Jf:Ds,s=arguments.length<3;return i(t,b(n,4),e,s,js)}function Fh(t,n){var e=F(t)?yn:tu;return e(t,Si(b(n,3)))}function Uh(t){var n=F(t)?Zs:Ml;return n(t)}function Bh(t,n,e){(e?Rt(t,n,e):n===r)?n=1:n=U(n);var i=F(t)?ol:Cl;return i(t,n)}function Wh(t){var n=F(t)?fl:Nl;return n(t)}function zh(t){if(t==null)return 0;if(Mt(t))return Ri(t)?qn(t):t.length;var n=xt(t);return n==$t||n==kt?t.size:gr(t).length}function Xh(t,n,e){var i=F(t)?Zi:Dl;return e&&Rt(t,n,e)&&(n=r),i(t,b(n,3))}var Kh=W(function(t,n){if(t==null)return[];var e=n.length;return e>1&&Rt(t,n[0],n[1])?n=[]:e>2&&Rt(n[0],n[1],n[2])&&(n=[n[0]]),lu(t,wt(n,1),[])}),xi=Ea||function(){return vt.Date.now()};function Gh(t,n){if(typeof n!="function")throw new Gt(x);return t=U(t),function(){if(--t<1)return n.apply(this,arguments)}}function ro(t,n,e){return n=e?r:n,n=t&&n==null?t.length:n,gn(t,Lt,r,r,r,r,n)}function so(t,n){var e;if(typeof n!="function")throw new Gt(x);return t=U(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=r),e}}var Fr=W(function(t,n,e){var i=V;if(e.length){var s=En(e,te(Fr));i|=At}return gn(t,i,n,e,s)}),uo=W(function(t,n,e){var i=V|rt;if(e.length){var s=En(e,te(uo));i|=At}return gn(n,i,t,e,s)});function oo(t,n,e){n=e?r:n;var i=gn(t,pt,r,r,r,r,r,n);return i.placeholder=oo.placeholder,i}function fo(t,n,e){n=e?r:n;var i=gn(t,Ot,r,r,r,r,r,n);return i.placeholder=fo.placeholder,i}function ao(t,n,e){var i,s,o,a,l,h,v=0,w=!1,m=!1,S=!0;if(typeof t!="function")throw new Gt(x);n=Zt(n)||0,st(e)&&(w=!!e.leading,m="maxWait"in e,o=m?ht(Zt(e.maxWait)||0,n):o,S="trailing"in e?!!e.trailing:S);function O(lt){var en=i,wn=s;return i=s=r,v=lt,a=t.apply(wn,en),a}function D(lt){return v=lt,l=Oe(X,n),w?O(lt):a}function B(lt){var en=lt-h,wn=lt-v,Io=n-en;return m?mt(Io,o-wn):Io}function P(lt){var en=lt-h,wn=lt-v;return h===r||en>=n||en<0||m&&wn>=o}function X(){var lt=xi();if(P(lt))return q(lt);l=Oe(X,B(lt))}function q(lt){return l=r,S&&i?O(lt):(i=s=r,a)}function Bt(){l!==r&&mu(l),v=0,i=h=s=l=r}function Tt(){return l===r?a:q(xi())}function Wt(){var lt=xi(),en=P(lt);if(i=arguments,s=this,h=lt,en){if(l===r)return D(h);if(m)return mu(l),l=Oe(X,n),O(h)}return l===r&&(l=Oe(X,n)),a}return Wt.cancel=Bt,Wt.flush=Tt,Wt}var Yh=W(function(t,n){return ks(t,1,n)}),qh=W(function(t,n,e){return ks(t,Zt(n)||0,e)});function Vh(t){return gn(t,se)}function yi(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Gt(x);var e=function(){var i=arguments,s=n?n.apply(this,i):i[0],o=e.cache;if(o.has(s))return o.get(s);var a=t.apply(this,i);return e.cache=o.set(s,a)||o,a};return e.cache=new(yi.Cache||cn),e}yi.Cache=cn;function Si(t){if(typeof t!="function")throw new Gt(x);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Jh(t){return so(2,t)}var Zh=Pl(function(t,n){n=n.length==1&&F(n[0])?it(n[0],Ht(b())):it(wt(n,1),Ht(b()));var e=n.length;return W(function(i){for(var s=-1,o=mt(i.length,e);++s<o;)i[s]=n[s].call(this,i[s]);return Pt(t,this,i)})}),Ur=W(function(t,n){var e=En(n,te(Ur));return gn(t,At,r,n,e)}),lo=W(function(t,n){var e=En(n,te(lo));return gn(t,Qt,r,n,e)}),Qh=dn(function(t,n){return gn(t,xn,r,r,r,n)});function $h(t,n){if(typeof t!="function")throw new Gt(x);return n=n===r?n:U(n),W(t,n)}function kh(t,n){if(typeof t!="function")throw new Gt(x);return n=n==null?0:ht(U(n),0),W(function(e){var i=e[n],s=Ln(e,0,n);return i&&Sn(s,i),Pt(t,this,s)})}function jh(t,n,e){var i=!0,s=!0;if(typeof t!="function")throw new Gt(x);return st(e)&&(i="leading"in e?!!e.leading:i,s="trailing"in e?!!e.trailing:s),ao(t,n,{leading:i,maxWait:n,trailing:s})}function tg(t){return ro(t,1)}function ng(t,n){return Ur(Sr(n),t)}function eg(){if(!arguments.length)return[];var t=arguments[0];return F(t)?t:[t]}function ig(t){return qt(t,nt)}function rg(t,n){return n=typeof n=="function"?n:r,qt(t,nt,n)}function sg(t){return qt(t,T|nt)}function ug(t,n){return n=typeof n=="function"?n:r,qt(t,T|nt,n)}function og(t,n){return n==null||$s(t,n,dt(n))}function nn(t,n){return t===n||t!==t&&n!==n}var fg=di(lr),ag=di(function(t,n){return t>=n}),Bn=iu(function(){return arguments}())?iu:function(t){return ft(t)&&$.call(t,"callee")&&!Ks.call(t,"callee")},F=g.isArray,lg=Rs?Ht(Rs):wl;function Mt(t){return t!=null&&Ei(t.length)&&!_n(t)}function at(t){return ft(t)&&Mt(t)}function cg(t){return t===!0||t===!1||ft(t)&&Et(t)==ue}var In=Ta||Zr,hg=Ts?Ht(Ts):ml;function gg(t){return ft(t)&&t.nodeType===1&&!Ae(t)}function dg(t){if(t==null)return!0;if(Mt(t)&&(F(t)||typeof t=="string"||typeof t.splice=="function"||In(t)||ne(t)||Bn(t)))return!t.length;var n=xt(t);if(n==$t||n==kt)return!t.size;if(Te(t))return!gr(t).length;for(var e in t)if($.call(t,e))return!1;return!0}function pg(t,n){return Se(t,n)}function _g(t,n,e){e=typeof e=="function"?e:r;var i=e?e(t,n):r;return i===r?Se(t,n,r,e):!!i}function Br(t){if(!ft(t))return!1;var n=Et(t);return n==Pe||n==Uo||typeof t.message=="string"&&typeof t.name=="string"&&!Ae(t)}function vg(t){return typeof t=="number"&&Ys(t)}function _n(t){if(!st(t))return!1;var n=Et(t);return n==He||n==kr||n==Fo||n==Wo}function co(t){return typeof t=="number"&&t==U(t)}function Ei(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Nt}function st(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function ft(t){return t!=null&&typeof t=="object"}var ho=Os?Ht(Os):yl;function wg(t,n){return t===n||hr(t,n,Ir(n))}function mg(t,n,e){return e=typeof e=="function"?e:r,hr(t,n,Ir(n),e)}function xg(t){return go(t)&&t!=+t}function yg(t){if(rc(t))throw new H(y);return ru(t)}function Sg(t){return t===null}function Eg(t){return t==null}function go(t){return typeof t=="number"||ft(t)&&Et(t)==fe}function Ae(t){if(!ft(t)||Et(t)!=an)return!1;var n=Qe(t);if(n===null)return!0;var e=$.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&qe.call(e)==ma}var Wr=As?Ht(As):Sl;function Rg(t){return co(t)&&t>=-Nt&&t<=Nt}var po=Ls?Ht(Ls):El;function Ri(t){return typeof t=="string"||!F(t)&&ft(t)&&Et(t)==le}function Ut(t){return typeof t=="symbol"||ft(t)&&Et(t)==Fe}var ne=Is?Ht(Is):Rl;function Tg(t){return t===r}function Og(t){return ft(t)&&xt(t)==ce}function Ag(t){return ft(t)&&Et(t)==Xo}var Lg=di(dr),Ig=di(function(t,n){return t<=n});function _o(t){if(!t)return[];if(Mt(t))return Ri(t)?jt(t):It(t);if(de&&t[de])return oa(t[de]());var n=xt(t),e=n==$t?nr:n==kt?Ke:ee;return e(t)}function vn(t){if(!t)return t===0?t:0;if(t=Zt(t),t===St||t===-St){var n=t<0?-1:1;return n*Dt}return t===t?t:0}function U(t){var n=vn(t),e=n%1;return n===n?e?n-e:n:0}function vo(t){return t?Pn(U(t),0,rn):0}function Zt(t){if(typeof t=="number")return t;if(Ut(t))return Ne;if(st(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=st(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Ps(t);var e=lf.test(t);return e||hf.test(t)?Gf(t.slice(2),e?2:8):af.test(t)?Ne:+t}function wo(t){return un(t,Ct(t))}function Mg(t){return t?Pn(U(t),-Nt,Nt):t===0?t:0}function Q(t){return t==null?"":Ft(t)}var Cg=kn(function(t,n){if(Te(n)||Mt(n)){un(n,dt(n),t);return}for(var e in n)$.call(n,e)&&me(t,e,n[e])}),mo=kn(function(t,n){un(n,Ct(n),t)}),Ti=kn(function(t,n,e,i){un(n,Ct(n),t,i)}),bg=kn(function(t,n,e,i){un(n,dt(n),t,i)}),Ng=dn(or);function Dg(t,n){var e=$n(t);return n==null?e:Qs(e,n)}var Pg=W(function(t,n){t=j(t);var e=-1,i=n.length,s=i>2?n[2]:r;for(s&&Rt(n[0],n[1],s)&&(i=1);++e<i;)for(var o=n[e],a=Ct(o),l=-1,h=a.length;++l<h;){var v=a[l],w=t[v];(w===r||nn(w,Jn[v])&&!$.call(t,v))&&(t[v]=o[v])}return t}),Hg=W(function(t){return t.push(r,Pu),Pt(xo,r,t)});function Fg(t,n){return Cs(t,b(n,3),sn)}function Ug(t,n){return Cs(t,b(n,3),ar)}function Bg(t,n){return t==null?t:fr(t,b(n,3),Ct)}function Wg(t,n){return t==null?t:nu(t,b(n,3),Ct)}function zg(t,n){return t&&sn(t,b(n,3))}function Xg(t,n){return t&&ar(t,b(n,3))}function Kg(t){return t==null?[]:ui(t,dt(t))}function Gg(t){return t==null?[]:ui(t,Ct(t))}function zr(t,n,e){var i=t==null?r:Hn(t,n);return i===r?e:i}function Yg(t,n){return t!=null&&Uu(t,n,dl)}function Xr(t,n){return t!=null&&Uu(t,n,pl)}var qg=Mu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=Ve.call(n)),t[n]=e},Gr(bt)),Vg=Mu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=Ve.call(n)),$.call(t,n)?t[n].push(e):t[n]=[e]},b),Jg=W(ye);function dt(t){return Mt(t)?Js(t):gr(t)}function Ct(t){return Mt(t)?Js(t,!0):Tl(t)}function Zg(t,n){var e={};return n=b(n,3),sn(t,function(i,s,o){hn(e,n(i,s,o),i)}),e}function Qg(t,n){var e={};return n=b(n,3),sn(t,function(i,s,o){hn(e,s,n(i,s,o))}),e}var $g=kn(function(t,n,e){oi(t,n,e)}),xo=kn(function(t,n,e,i){oi(t,n,e,i)}),kg=dn(function(t,n){var e={};if(t==null)return e;var i=!1;n=it(n,function(o){return o=An(o,t),i||(i=o.length>1),o}),un(t,Ar(t),e),i&&(e=qt(e,T|z|nt,ql));for(var s=n.length;s--;)mr(e,n[s]);return e});function jg(t,n){return yo(t,Si(b(n)))}var td=dn(function(t,n){return t==null?{}:Al(t,n)});function yo(t,n){if(t==null)return{};var e=it(Ar(t),function(i){return[i]});return n=b(n),cu(t,e,function(i,s){return n(i,s[0])})}function nd(t,n,e){n=An(n,t);var i=-1,s=n.length;for(s||(s=1,t=r);++i<s;){var o=t==null?r:t[on(n[i])];o===r&&(i=s,o=e),t=_n(o)?o.call(t):o}return t}function ed(t,n,e){return t==null?t:Ee(t,n,e)}function id(t,n,e,i){return i=typeof i=="function"?i:r,t==null?t:Ee(t,n,e,i)}var So=Nu(dt),Eo=Nu(Ct);function rd(t,n,e){var i=F(t),s=i||In(t)||ne(t);if(n=b(n,4),e==null){var o=t&&t.constructor;s?e=i?new o:[]:st(t)?e=_n(o)?$n(Qe(t)):{}:e={}}return(s?Kt:sn)(t,function(a,l,h){return n(e,a,l,h)}),e}function sd(t,n){return t==null?!0:mr(t,n)}function ud(t,n,e){return t==null?t:_u(t,n,Sr(e))}function od(t,n,e,i){return i=typeof i=="function"?i:r,t==null?t:_u(t,n,Sr(e),i)}function ee(t){return t==null?[]:tr(t,dt(t))}function fd(t){return t==null?[]:tr(t,Ct(t))}function ad(t,n,e){return e===r&&(e=n,n=r),e!==r&&(e=Zt(e),e=e===e?e:0),n!==r&&(n=Zt(n),n=n===n?n:0),Pn(Zt(t),n,e)}function ld(t,n,e){return n=vn(n),e===r?(e=n,n=0):e=vn(e),t=Zt(t),_l(t,n,e)}function cd(t,n,e){if(e&&typeof e!="boolean"&&Rt(t,n,e)&&(n=e=r),e===r&&(typeof n=="boolean"?(e=n,n=r):typeof t=="boolean"&&(e=t,t=r)),t===r&&n===r?(t=0,n=1):(t=vn(t),n===r?(n=t,t=0):n=vn(n)),t>n){var i=t;t=n,n=i}if(e||t%1||n%1){var s=qs();return mt(t+s*(n-t+Kf("1e-"+((s+"").length-1))),n)}return _r(t,n)}var hd=jn(function(t,n,e){return n=n.toLowerCase(),t+(e?Ro(n):n)});function Ro(t){return Kr(Q(t).toLowerCase())}function To(t){return t=Q(t),t&&t.replace(df,ea).replace(Nf,"")}function gd(t,n,e){t=Q(t),n=Ft(n);var i=t.length;e=e===r?i:Pn(U(e),0,i);var s=e;return e-=n.length,e>=0&&t.slice(e,s)==n}function dd(t){return t=Q(t),t&&Vo.test(t)?t.replace(ns,ia):t}function pd(t){return t=Q(t),t&&jo.test(t)?t.replace(Ui,"\\$&"):t}var _d=jn(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),vd=jn(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),wd=Au("toLowerCase");function md(t,n,e){t=Q(t),n=U(n);var i=n?qn(t):0;if(!n||i>=n)return t;var s=(n-i)/2;return gi(ti(s),e)+t+gi(je(s),e)}function xd(t,n,e){t=Q(t),n=U(n);var i=n?qn(t):0;return n&&i<n?t+gi(n-i,e):t}function yd(t,n,e){t=Q(t),n=U(n);var i=n?qn(t):0;return n&&i<n?gi(n-i,e)+t:t}function Sd(t,n,e){return e||n==null?n=0:n&&(n=+n),Ia(Q(t).replace(Bi,""),n||0)}function Ed(t,n,e){return(e?Rt(t,n,e):n===r)?n=1:n=U(n),vr(Q(t),n)}function Rd(){var t=arguments,n=Q(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var Td=jn(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()});function Od(t,n,e){return e&&typeof e!="number"&&Rt(t,n,e)&&(n=e=r),e=e===r?rn:e>>>0,e?(t=Q(t),t&&(typeof n=="string"||n!=null&&!Wr(n))&&(n=Ft(n),!n&&Yn(t))?Ln(jt(t),0,e):t.split(n,e)):[]}var Ad=jn(function(t,n,e){return t+(e?" ":"")+Kr(n)});function Ld(t,n,e){return t=Q(t),e=e==null?0:Pn(U(e),0,t.length),n=Ft(n),t.slice(e,e+n.length)==n}function Id(t,n,e){var i=u.templateSettings;e&&Rt(t,n,e)&&(n=r),t=Q(t),n=Ti({},n,i,Du);var s=Ti({},n.imports,i.imports,Du),o=dt(s),a=tr(s,o),l,h,v=0,w=n.interpolate||Ue,m="__p += '",S=er((n.escape||Ue).source+"|"+w.source+"|"+(w===es?ff:Ue).source+"|"+(n.evaluate||Ue).source+"|$","g"),O="//# sourceURL="+($.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uf+"]")+`
`;t.replace(S,function(P,X,q,Bt,Tt,Wt){return q||(q=Bt),m+=t.slice(v,Wt).replace(pf,ra),X&&(l=!0,m+=`' +
__e(`+X+`) +
'`),Tt&&(h=!0,m+=`';
`+Tt+`;
__p += '`),q&&(m+=`' +
((__t = (`+q+`)) == null ? '' : __t) +
'`),v=Wt+P.length,P}),m+=`';
`;var D=$.call(n,"variable")&&n.variable;if(!D)m=`with (obj) {
`+m+`
}
`;else if(uf.test(D))throw new H(L);m=(h?m.replace(Ko,""):m).replace(Go,"$1").replace(Yo,"$1;"),m="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+m+`return __p
}`;var B=Ao(function(){return Z(o,O+"return "+m).apply(r,a)});if(B.source=m,Br(B))throw B;return B}function Md(t){return Q(t).toLowerCase()}function Cd(t){return Q(t).toUpperCase()}function bd(t,n,e){if(t=Q(t),t&&(e||n===r))return Ps(t);if(!t||!(n=Ft(n)))return t;var i=jt(t),s=jt(n),o=Hs(i,s),a=Fs(i,s)+1;return Ln(i,o,a).join("")}function Nd(t,n,e){if(t=Q(t),t&&(e||n===r))return t.slice(0,Bs(t)+1);if(!t||!(n=Ft(n)))return t;var i=jt(t),s=Fs(i,jt(n))+1;return Ln(i,0,s).join("")}function Dd(t,n,e){if(t=Q(t),t&&(e||n===r))return t.replace(Bi,"");if(!t||!(n=Ft(n)))return t;var i=jt(t),s=Hs(i,jt(n));return Ln(i,s).join("")}function Pd(t,n){var e=Li,i=be;if(st(n)){var s="separator"in n?n.separator:s;e="length"in n?U(n.length):e,i="omission"in n?Ft(n.omission):i}t=Q(t);var o=t.length;if(Yn(t)){var a=jt(t);o=a.length}if(e>=o)return t;var l=e-qn(i);if(l<1)return i;var h=a?Ln(a,0,l).join(""):t.slice(0,l);if(s===r)return h+i;if(a&&(l+=h.length-l),Wr(s)){if(t.slice(l).search(s)){var v,w=h;for(s.global||(s=er(s.source,Q(is.exec(s))+"g")),s.lastIndex=0;v=s.exec(w);)var m=v.index;h=h.slice(0,m===r?l:m)}}else if(t.indexOf(Ft(s),l)!=l){var S=h.lastIndexOf(s);S>-1&&(h=h.slice(0,S))}return h+i}function Hd(t){return t=Q(t),t&&qo.test(t)?t.replace(ts,ca):t}var Fd=jn(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),Kr=Au("toUpperCase");function Oo(t,n,e){return t=Q(t),n=e?r:n,n===r?ua(t)?da(t):$f(t):t.match(n)||[]}var Ao=W(function(t,n){try{return Pt(t,r,n)}catch(e){return Br(e)?e:new H(e)}}),Ud=dn(function(t,n){return Kt(n,function(e){e=on(e),hn(t,e,Fr(t[e],t))}),t});function Bd(t){var n=t==null?0:t.length,e=b();return t=n?it(t,function(i){if(typeof i[1]!="function")throw new Gt(x);return[e(i[0]),i[1]]}):[],W(function(i){for(var s=-1;++s<n;){var o=t[s];if(Pt(o[0],this,i))return Pt(o[1],this,i)}})}function Wd(t){return cl(qt(t,T))}function Gr(t){return function(){return t}}function zd(t,n){return t==null||t!==t?n:t}var Xd=Iu(),Kd=Iu(!0);function bt(t){return t}function Yr(t){return su(typeof t=="function"?t:qt(t,T))}function Gd(t){return ou(qt(t,T))}function Yd(t,n){return fu(t,qt(n,T))}var qd=W(function(t,n){return function(e){return ye(e,t,n)}}),Vd=W(function(t,n){return function(e){return ye(t,e,n)}});function qr(t,n,e){var i=dt(n),s=ui(n,i);e==null&&!(st(n)&&(s.length||!i.length))&&(e=n,n=t,t=this,s=ui(n,dt(n)));var o=!(st(e)&&"chain"in e)||!!e.chain,a=_n(t);return Kt(s,function(l){var h=n[l];t[l]=h,a&&(t.prototype[l]=function(){var v=this.__chain__;if(o||v){var w=t(this.__wrapped__),m=w.__actions__=It(this.__actions__);return m.push({func:h,args:arguments,thisArg:t}),w.__chain__=v,w}return h.apply(t,Sn([this.value()],arguments))})}),t}function Jd(){return vt._===this&&(vt._=xa),this}function Vr(){}function Zd(t){return t=U(t),W(function(n){return au(n,t)})}var Qd=Rr(it),$d=Rr(Ms),kd=Rr(Zi);function Lo(t){return Cr(t)?Qi(on(t)):Ll(t)}function jd(t){return function(n){return t==null?r:Hn(t,n)}}var tp=Cu(),np=Cu(!0);function Jr(){return[]}function Zr(){return!1}function ep(){return{}}function ip(){return""}function rp(){return!0}function sp(t,n){if(t=U(t),t<1||t>Nt)return[];var e=rn,i=mt(t,rn);n=b(n),t-=rn;for(var s=ji(i,n);++e<t;)n(e);return s}function up(t){return F(t)?it(t,on):Ut(t)?[t]:It(Vu(Q(t)))}function op(t){var n=++wa;return Q(t)+n}var fp=hi(function(t,n){return t+n},0),ap=Tr("ceil"),lp=hi(function(t,n){return t/n},1),cp=Tr("floor");function hp(t){return t&&t.length?si(t,bt,lr):r}function gp(t,n){return t&&t.length?si(t,b(n,2),lr):r}function dp(t){return Ns(t,bt)}function pp(t,n){return Ns(t,b(n,2))}function _p(t){return t&&t.length?si(t,bt,dr):r}function vp(t,n){return t&&t.length?si(t,b(n,2),dr):r}var wp=hi(function(t,n){return t*n},1),mp=Tr("round"),xp=hi(function(t,n){return t-n},0);function yp(t){return t&&t.length?ki(t,bt):0}function Sp(t,n){return t&&t.length?ki(t,b(n,2)):0}return u.after=Gh,u.ary=ro,u.assign=Cg,u.assignIn=mo,u.assignInWith=Ti,u.assignWith=bg,u.at=Ng,u.before=so,u.bind=Fr,u.bindAll=Ud,u.bindKey=uo,u.castArray=eg,u.chain=no,u.chunk=cc,u.compact=hc,u.concat=gc,u.cond=Bd,u.conforms=Wd,u.constant=Gr,u.countBy=yh,u.create=Dg,u.curry=oo,u.curryRight=fo,u.debounce=ao,u.defaults=Pg,u.defaultsDeep=Hg,u.defer=Yh,u.delay=qh,u.difference=dc,u.differenceBy=pc,u.differenceWith=_c,u.drop=vc,u.dropRight=wc,u.dropRightWhile=mc,u.dropWhile=xc,u.fill=yc,u.filter=Eh,u.flatMap=Oh,u.flatMapDeep=Ah,u.flatMapDepth=Lh,u.flatten=$u,u.flattenDeep=Sc,u.flattenDepth=Ec,u.flip=Vh,u.flow=Xd,u.flowRight=Kd,u.fromPairs=Rc,u.functions=Kg,u.functionsIn=Gg,u.groupBy=Ih,u.initial=Oc,u.intersection=Ac,u.intersectionBy=Lc,u.intersectionWith=Ic,u.invert=qg,u.invertBy=Vg,u.invokeMap=Ch,u.iteratee=Yr,u.keyBy=bh,u.keys=dt,u.keysIn=Ct,u.map=mi,u.mapKeys=Zg,u.mapValues=Qg,u.matches=Gd,u.matchesProperty=Yd,u.memoize=yi,u.merge=$g,u.mergeWith=xo,u.method=qd,u.methodOf=Vd,u.mixin=qr,u.negate=Si,u.nthArg=Zd,u.omit=kg,u.omitBy=jg,u.once=Jh,u.orderBy=Nh,u.over=Qd,u.overArgs=Zh,u.overEvery=$d,u.overSome=kd,u.partial=Ur,u.partialRight=lo,u.partition=Dh,u.pick=td,u.pickBy=yo,u.property=Lo,u.propertyOf=jd,u.pull=Nc,u.pullAll=ju,u.pullAllBy=Dc,u.pullAllWith=Pc,u.pullAt=Hc,u.range=tp,u.rangeRight=np,u.rearg=Qh,u.reject=Fh,u.remove=Fc,u.rest=$h,u.reverse=Pr,u.sampleSize=Bh,u.set=ed,u.setWith=id,u.shuffle=Wh,u.slice=Uc,u.sortBy=Kh,u.sortedUniq=Yc,u.sortedUniqBy=qc,u.split=Od,u.spread=kh,u.tail=Vc,u.take=Jc,u.takeRight=Zc,u.takeRightWhile=Qc,u.takeWhile=$c,u.tap=hh,u.throttle=jh,u.thru=wi,u.toArray=_o,u.toPairs=So,u.toPairsIn=Eo,u.toPath=up,u.toPlainObject=wo,u.transform=rd,u.unary=tg,u.union=kc,u.unionBy=jc,u.unionWith=th,u.uniq=nh,u.uniqBy=eh,u.uniqWith=ih,u.unset=sd,u.unzip=Hr,u.unzipWith=to,u.update=ud,u.updateWith=od,u.values=ee,u.valuesIn=fd,u.without=rh,u.words=Oo,u.wrap=ng,u.xor=sh,u.xorBy=uh,u.xorWith=oh,u.zip=fh,u.zipObject=ah,u.zipObjectDeep=lh,u.zipWith=ch,u.entries=So,u.entriesIn=Eo,u.extend=mo,u.extendWith=Ti,qr(u,u),u.add=fp,u.attempt=Ao,u.camelCase=hd,u.capitalize=Ro,u.ceil=ap,u.clamp=ad,u.clone=ig,u.cloneDeep=sg,u.cloneDeepWith=ug,u.cloneWith=rg,u.conformsTo=og,u.deburr=To,u.defaultTo=zd,u.divide=lp,u.endsWith=gd,u.eq=nn,u.escape=dd,u.escapeRegExp=pd,u.every=Sh,u.find=Rh,u.findIndex=Zu,u.findKey=Fg,u.findLast=Th,u.findLastIndex=Qu,u.findLastKey=Ug,u.floor=cp,u.forEach=eo,u.forEachRight=io,u.forIn=Bg,u.forInRight=Wg,u.forOwn=zg,u.forOwnRight=Xg,u.get=zr,u.gt=fg,u.gte=ag,u.has=Yg,u.hasIn=Xr,u.head=ku,u.identity=bt,u.includes=Mh,u.indexOf=Tc,u.inRange=ld,u.invoke=Jg,u.isArguments=Bn,u.isArray=F,u.isArrayBuffer=lg,u.isArrayLike=Mt,u.isArrayLikeObject=at,u.isBoolean=cg,u.isBuffer=In,u.isDate=hg,u.isElement=gg,u.isEmpty=dg,u.isEqual=pg,u.isEqualWith=_g,u.isError=Br,u.isFinite=vg,u.isFunction=_n,u.isInteger=co,u.isLength=Ei,u.isMap=ho,u.isMatch=wg,u.isMatchWith=mg,u.isNaN=xg,u.isNative=yg,u.isNil=Eg,u.isNull=Sg,u.isNumber=go,u.isObject=st,u.isObjectLike=ft,u.isPlainObject=Ae,u.isRegExp=Wr,u.isSafeInteger=Rg,u.isSet=po,u.isString=Ri,u.isSymbol=Ut,u.isTypedArray=ne,u.isUndefined=Tg,u.isWeakMap=Og,u.isWeakSet=Ag,u.join=Mc,u.kebabCase=_d,u.last=Jt,u.lastIndexOf=Cc,u.lowerCase=vd,u.lowerFirst=wd,u.lt=Lg,u.lte=Ig,u.max=hp,u.maxBy=gp,u.mean=dp,u.meanBy=pp,u.min=_p,u.minBy=vp,u.stubArray=Jr,u.stubFalse=Zr,u.stubObject=ep,u.stubString=ip,u.stubTrue=rp,u.multiply=wp,u.nth=bc,u.noConflict=Jd,u.noop=Vr,u.now=xi,u.pad=md,u.padEnd=xd,u.padStart=yd,u.parseInt=Sd,u.random=cd,u.reduce=Ph,u.reduceRight=Hh,u.repeat=Ed,u.replace=Rd,u.result=nd,u.round=mp,u.runInContext=c,u.sample=Uh,u.size=zh,u.snakeCase=Td,u.some=Xh,u.sortedIndex=Bc,u.sortedIndexBy=Wc,u.sortedIndexOf=zc,u.sortedLastIndex=Xc,u.sortedLastIndexBy=Kc,u.sortedLastIndexOf=Gc,u.startCase=Ad,u.startsWith=Ld,u.subtract=xp,u.sum=yp,u.sumBy=Sp,u.template=Id,u.times=sp,u.toFinite=vn,u.toInteger=U,u.toLength=vo,u.toLower=Md,u.toNumber=Zt,u.toSafeInteger=Mg,u.toString=Q,u.toUpper=Cd,u.trim=bd,u.trimEnd=Nd,u.trimStart=Dd,u.truncate=Pd,u.unescape=Hd,u.uniqueId=op,u.upperCase=Fd,u.upperFirst=Kr,u.each=eo,u.eachRight=io,u.first=ku,qr(u,function(){var t={};return sn(u,function(n,e){$.call(u.prototype,e)||(t[e]=n)}),t}(),{chain:!1}),u.VERSION=d,Kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){u[t].placeholder=u}),Kt(["drop","take"],function(t,n){K.prototype[t]=function(e){e=e===r?1:ht(U(e),0);var i=this.__filtered__&&!n?new K(this):this.clone();return i.__filtered__?i.__takeCount__=mt(e,i.__takeCount__):i.__views__.push({size:mt(e,rn),type:t+(i.__dir__<0?"Right":"")}),i},K.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Kt(["filter","map","takeWhile"],function(t,n){var e=n+1,i=e==Y||e==fn;K.prototype[t]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:b(s,3),type:e}),o.__filtered__=o.__filtered__||i,o}}),Kt(["head","last"],function(t,n){var e="take"+(n?"Right":"");K.prototype[t]=function(){return this[e](1).value()[0]}}),Kt(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");K.prototype[t]=function(){return this.__filtered__?new K(this):this[e](1)}}),K.prototype.compact=function(){return this.filter(bt)},K.prototype.find=function(t){return this.filter(t).head()},K.prototype.findLast=function(t){return this.reverse().find(t)},K.prototype.invokeMap=W(function(t,n){return typeof t=="function"?new K(this):this.map(function(e){return ye(e,t,n)})}),K.prototype.reject=function(t){return this.filter(Si(b(t)))},K.prototype.slice=function(t,n){t=U(t);var e=this;return e.__filtered__&&(t>0||n<0)?new K(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==r&&(n=U(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},K.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},K.prototype.toArray=function(){return this.take(rn)},sn(K.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),s=u[i?"take"+(n=="last"?"Right":""):n],o=i||/^find/.test(n);s&&(u.prototype[n]=function(){var a=this.__wrapped__,l=i?[1]:arguments,h=a instanceof K,v=l[0],w=h||F(a),m=function(X){var q=s.apply(u,Sn([X],l));return i&&S?q[0]:q};w&&e&&typeof v=="function"&&v.length!=1&&(h=w=!1);var S=this.__chain__,O=!!this.__actions__.length,D=o&&!S,B=h&&!O;if(!o&&w){a=B?a:new K(this);var P=t.apply(a,l);return P.__actions__.push({func:wi,args:[m],thisArg:r}),new Yt(P,S)}return D&&B?t.apply(this,l):(P=this.thru(m),D?i?P.value()[0]:P.value():P)})}),Kt(["pop","push","shift","sort","splice","unshift"],function(t){var n=Ge[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);u.prototype[t]=function(){var s=arguments;if(i&&!this.__chain__){var o=this.value();return n.apply(F(o)?o:[],s)}return this[e](function(a){return n.apply(F(a)?a:[],s)})}}),sn(K.prototype,function(t,n){var e=u[n];if(e){var i=e.name+"";$.call(Qn,i)||(Qn[i]=[]),Qn[i].push({name:n,func:e})}}),Qn[ci(r,rt).name]=[{name:"wrapper",func:r}],K.prototype.clone=Ha,K.prototype.reverse=Fa,K.prototype.value=Ua,u.prototype.at=gh,u.prototype.chain=dh,u.prototype.commit=ph,u.prototype.next=_h,u.prototype.plant=wh,u.prototype.reverse=mh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=xh,u.prototype.first=u.prototype.head,de&&(u.prototype[de]=vh),u},Vn=pa();Cn?((Cn.exports=Vn)._=Vn,Yi._=Vn):vt._=Vn}).call(Le)})(Oi,Oi.exports);var Dp=Oi.exports;const zt=Tp(Dp);class k{constructor(f,r){this.id=`point-id-${new Date().getTime().toString()}`,this.x=f,this.y=r,this.widthRatio=1,this.heightRatio=1,this.initialX=this.widthRatio*f,this.initialY=this.heightRatio*r}translate(f,r){this.x+=f,this.y+=r,this.initialX=this.x/this.widthRatio,this.initialY=this.y/this.heightRatio}set ratio(f){this.widthRatio=f.width,this.heightRatio=f.height,this.x=this.initialX*this.widthRatio,this.y=this.initialY*this.heightRatio}setRatio(f,r){this.widthRatio=f,this.heightRatio=r,this.initialX=this.x/this.widthRatio,this.initialY=this.y/this.heightRatio}clone(){return new k(this.x,this.y)}serialize(){return`${this.x/this.widthRatio},${this.y/this.heightRatio}`}json(){return JSON.stringify(this)}deserialize(f){const[r,d]=f.split(",").map(p=>parseInt(p));return new k(r,d)}static middlePoint(f,r){return new k((f.x+r.x)/2,(f.y+r.y)/2)}static distance(f,r){return Math.sqrt((f.x-r.x)**2+(f.y-r.y)**2)}static isSame(f,r){return f.x===r.x&&f.y===r.y}static isNear(f,r,d=10){return k.distance(f,r)<d}}class Pp extends Ce{constructor(r,d){super(r,d);ut(this,"_point",null);ut(this,"_mouseDown",!1);ut(this,"_moveAll",!1);ut(this,"cursorDefault","default");ut(this,"cursorMove","move");ut(this,"cursorGrab","grab");ut(this,"cursorGrabbing","grabbing")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._point=null,this._moveAll=!1}handleMouseWheel(r,d){}handleMouseDown(r,d){this._mouseDown=!0;const p=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!p||!d)return;const x=this.stateMachine.element,L=this.stateMachine.elements;if(!x)return;const M=r.clientX,N=r.clientY,A=p.clientPointToViewPoint({clientX:M,clientY:N});if(!this._point)if(x.contains(A.x,A.y))this._moveAll=!0;else{const T=L.find(z=>z.contains(A.x,A.y));T&&T!==x?this.stateMachine.element=T:(this.stateMachine.element=null,this.stateMachine.setState(Me.STATE_SELECT)),this.redraw()}}handleMouseMove(r,d){const p=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!p||!d)return;const x=this.stateMachine.element;if(!x)return;const L=r.clientX,M=r.clientY,N=p.clientPointToViewPoint({clientX:L,clientY:M}),A=x.rectangle.points;if(this._mouseDown){const T={x:r.movementX/p.scale,y:r.movementY/p.scale};this._point?(this._point.translate(T.x,T.y),this.stateMachine.element=x):this._moveAll&&(x.translate(T.x,T.y),this.stateMachine.element=x),this.redraw()}else{const T=A.find(z=>k.isNear(z,new k(N.x,N.y)))||null;this._point=T,d.style.cursor=this._point?"move":"default"}}handleMouseUp(r,d){this._mouseDown=!1,this._point=null,this._moveAll=!1,this.stateMachine.element&&this.stateMachine.element.rectangle.processDisplacement()}redraw(){const r=this.stateMachine.ctx,d=this.stateMachine.canvas;if(!r||!d)return;const p=this.stateMachine.element,y=this.stateMachine.elements;r.clearRect(0,0,d.width,d.height),zt.each(y,x=>{x.draw(r)}),zt.each(y,x=>{x.draw(r)}),p&&(p.drawBoundingBox(r),p.drawLines(r),p.drawPoints(r))}}class Hp extends Ce{constructor(r,d){super(r,d);ut(this,"_handle",null);ut(this,"_mouseDown",!1);ut(this,"cursorDefault","default");ut(this,"cursorResize","nwse-resize")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._handle=null}handleMouseWheel(r,d){}handleMouseDown(r,d){this._mouseDown=!0}handleMouseMove(r,d){const p=this.stateMachine.coordinateSystem,y=this.stateMachine.ctx,x=this.stateMachine.element;if(!y||!p||!x)return;const L=r.clientX,M=r.clientY,N=p.clientPointToViewPoint({clientX:L,clientY:M}),A={x:r.movementX/p.scale,y:r.movementY/p.scale};if(this._mouseDown){if(this._handle){const T=x.rectangle.boundingBox,z=T.clone();switch(this._handle){case"topLeft":z.updateDimensions(T.topLeft.x+A.x,T.topLeft.y+A.y,T.width-A.x,T.height-A.y);break;case"topRight":z.updateDimensions(T.topLeft.x,T.topLeft.y+A.y,T.width+A.x,T.height-A.y);break;case"bottomLeft":z.updateDimensions(T.topLeft.x+A.x,T.topLeft.y,T.width-A.x,T.height+A.y);break;case"bottomRight":z.updateDimensions(T.topLeft.x,T.topLeft.y,T.width+A.x,T.height+A.y);break}x.resizeBoundingBox(z),this.redraw()}}else{const T=x.getBoundingBoxHandle(N.x,N.y);if(!T){d.style.cursor=this.cursorDefault;return}const z=x.handleToString(T);this._handle=z,d.style.cursor=this.cursorResize}}handleMouseUp(r,d){this._mouseDown=!1,this._handle=null,this.redraw()}redraw(){const r=this.stateMachine.ctx,d=this.stateMachine.canvas;if(!r||!d)return;const p=this.stateMachine.element,y=this.stateMachine.elements;r.clearRect(0,0,d.width,d.height),zt.each(y,x=>{x.draw(r)}),p&&(p.drawBoundingBox(r),p.drawLines(r),p.drawBoundingBoxHandles(r))}}class Fp extends Ce{constructor(r,d){super(r,d);ut(this,"isMouseDown",!1)}onEnter(){this.redraw()}onExit(){this.isMouseDown=!1}handleMouseDown(r,d){this.isMouseDown=!0}handleMouseWheel(r,d){this.isMouseDown||r.shiftKey&&this.stateMachine.coordinateSystem.scaleAtClientPoint(-.001*r.deltaY,{clientX:r.clientX,clientY:r.clientY})}handleMouseMove(r,d){r.preventDefault();const p=r.buttons===1;if(r.shiftKey&&p){const y=this.stateMachine.coordinateSystem,x=r.movementX,L=r.movementY;y.panByClientPoint({clientX:x,clientY:L})}}handleMouseUp(r,d){this.isMouseDown=!1;const p=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!p||!d)return;const x=this.stateMachine.elements,L=r.clientX,M=r.clientY,N=p.clientPointToViewPoint({clientX:L,clientY:M}),A=x.find(T=>T.contains(N.x,N.y));A?(this.stateMachine.element=A,this.stateMachine.setState(Me.STATE_MOVE)):this.stateMachine.element=null,this.redraw()}redraw(){const r=this.stateMachine.ctx,d=this.stateMachine.canvas;if(!r||!d)return;const p=this.stateMachine.element,y=this.stateMachine.elements;r.clearRect(0,0,d.width,d.height),zt.each(y,x=>{x.draw(r)}),p&&(p.drawLines(r),p.drawPoints(r))}}class Up extends Ce{constructor(f,r){super(f,r)}onEnter(){}onExit(){}handleMouseWheel(f,r){}handleMouseDown(f,r){}handleMouseMove(f,r){}handleMouseUp(f,r){}}const re={Idle:"IDLE",Select:"SELECT",Move:"MOVE",Resize:"RESIZE",Zoom:"ZOOM"},yt=class yt{constructor(f){this._inputs=new Set,this._states={IDLE:new Np(this,yt.STATE_IDLE),SELECT:new Fp(this,yt.STATE_SELECT),MOVE:new Pp(this,yt.STATE_MOVE),RESIZE:new Hp(this,yt.STATE_RESIZE),ZOOM:new Up(this,yt.STATE_ZOOM)},this._initialState=f.initialState,this._state=this._states[this._initialState],this._mouseDown=!1,this._elements=f.canvasElements,this._element=null,this._coordinateSystem=f.coordinateSystem,this._canvas=f.canvas,this._ctx=f.ctx}get mouseDown(){return this._mouseDown}get state(){return this._state}set state(f){this._state=f}addState(f){this._states[f.name]=f}setState(f){if(f!==this._state.name){if(!this._states[f])throw new Error(`State ${f} not found`);this._state&&this._state.onExit(),this._state=this._states[f],this._state.onEnter()}}resetState(){this._element=null,this.setState(this._initialState)}handleMouseWheel(f,r){this._state.handleMouseWheel(f,r)}handleMouseDown(f,r){this._state.handleMouseDown(f,r)}handleMouseMove(f,r){this._state.handleMouseMove(f,r)}handleMouseUp(f,r){this._state.handleMouseUp(f,r)}handleKeyDown(f,r){if(f.ctrlKey&&this.state.name===yt.STATE_MOVE){this.setState(yt.STATE_RESIZE);return}}handleKeyUp(f,r){if(!f.ctrlKey&&this.state.name===yt.STATE_RESIZE){this.setState(yt.STATE_MOVE);return}}get inputs(){return this._inputs}set inputs(f){this._inputs=f}get element(){return this._element}set element(f){this._element=f}get elements(){return this._elements}set elements(f){this._elements=f}get coordinateSystem(){return this._coordinateSystem}set coordinateSystem(f){this._coordinateSystem=f}get canvas(){return this._canvas}set canvas(f){this._canvas=f}get ctx(){return this._ctx}set ctx(f){this._ctx=f}setCanvas(f){this.canvas=f}setCtx(f){this.ctx=f}setCoordinateSystem(f){this.coordinateSystem=f}};ut(yt,"STATE_IDLE",re.Idle),ut(yt,"STATE_SELECT",re.Select),ut(yt,"STATE_RESIZE",re.Resize),ut(yt,"STATE_MOVE",re.Move),ut(yt,"STATE_ZOOM",re.Zoom);let Me=yt,Wn=function(I){return I.AUTO="auto",I.COVER="cover",I.CONTAIN="contain",I}({});var ot=function(I){return I.BACKGROUND="background",I.INTERFACE="interface",I}(ot||{});const No=Wn.CONTAIN,bo=[ot.BACKGROUND,ot.INTERFACE],Bp={display:"block",width:"100%",height:"100%",position:"relative",backgroundColor:"#000"},Wp={display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent"},zp={size:No,imageSrc:"./test.png",width:800,height:800},Xp={min:1,max:5};function Vp({initialState:I=re.Idle,containerElementStyle:f=Bp,canvasElementStyle:r=Wp,background:d=zp,zoomExtents:p=Xp,elements:y=[]}){const{containerRef:x,screenSize:L}=bp(),M=gt.useRef(null),N=gt.useRef({}),A=gt.useRef({}),T=gt.useRef(mn()),z=gt.useRef(y),nt=gt.useRef({x:window.innerWidth/1920,y:window.innerHeight/1080}),G=gt.useCallback(()=>new Me({initialState:I,canvasElements:z.current,coordinateSystem:T.current,canvas:N.current[ot.INTERFACE],ctx:A.current[ot.INTERFACE]}),[I]),C=gt.useRef(G());let V;function rt(E){if(!d)return E;switch(d.size||(d.size=No),d.size){case Wn.COVER:if(M.current&&M.current.complete){const{width:J,height:Y}=M.current;if(!d.useImageOriginSize){const _t=E.width,fn=J/Y,St=_t/fn;return{width:_t,height:St}}return{width:J,height:Y}}break;case Wn.CONTAIN:return{width:d.width||0,height:d.height||0}}return E}function mn(){const E=new Op(p,{width:1920,height:1080});return E.attachViewChangeListener(pt),E}function pt(E){C.current&&(z.current=C.current.elements,C.current.resetState());const J=T.current;J&&(bo.map(Y=>A.current[Y]).forEach(Y=>{Ot(Y);const _t=J.transformMatrix;Y.setTransform(_t.a,_t.b,_t.c,_t.d,_t.e,_t.f)}),be())}function Ot(E){At([E],()=>E.clearRect(0,0,E.canvas.width,E.canvas.height))}function At(E,J){E.forEach(Y=>{Y.save(),Y.setTransform(ie.a,ie.b,ie.c,ie.d,ie.e,ie.f)});try{J()}finally{E.forEach(Y=>Y.restore())}}function Qt(E){T.current.documentSize={...E}}function Lt({canvas:E,ctx:J,image:Y}){if(Y&&Y.complete&&E&&J&&d)switch(d.size){case Wn.AUTO:Cp({canvas:E,ctx:J,image:Y});break;case Wn.COVER:Ip({ctx:J,image:Y});break;case Wn.CONTAIN:default:Mp({canvas:E,ctx:J,image:Y});break}}function xn(E,J=!1){V&&clearTimeout(V),V=setTimeout(()=>{let Y=!1;const{canvas:_t}=T.current;if((_t.width!==E.width||_t.height!==E.height)&&(Lp(N.current,E),Qt(E),Y=!0),J||Y){const fn=E.width/T.current.initialViewSize.width,St=E.height/T.current.initialViewSize.height;fn!==1/0&&St!==1/0&&zt.each(z.current,Nt=>{Nt.ratio={width:fn,height:St}}),be()}},100)}function se(){const E=N.current[ot.BACKGROUND],J=A.current[ot.BACKGROUND],Y=M.current;!E||!J||(J.clearRect(0,0,E.width,E.height),Y&&Lt({canvas:E,ctx:J,image:Y}))}function Li(){Ot(A.current[ot.INTERFACE]),z.current.forEach(E=>{E.draw(A.current[ot.INTERFACE])})}function be(){se(),Li()}return gt.useEffect(()=>{const E=rt(L),J=T.current;J&&J.resetView(),xn(E)},[L]),gt.useEffect(()=>{C.current.setCanvas(N.current[ot.INTERFACE]),C.current.setCtx(A.current[ot.INTERFACE])},[N.current]),gt.useEffect(()=>{if(!(!d||!d.imageSrc||d.imageSrc==="")){if(!M.current||M.current.getAttribute("src")!==d.imageSrc){const E=new Image;E.src=d.imageSrc,E.onload=()=>{const J=rt(L);xn(J,!0)},E.onabort=()=>{M.current=null},M.current=E}return()=>{M.current=null,A.current[ot.BACKGROUND].clearRect(0,0,N.current[ot.BACKGROUND].width,N.current[ot.BACKGROUND].height)}}},[d]),gt.useEffect(()=>(z.current=y,C.current.resetState(),C.current.elements=y,A.current[ot.INTERFACE].clearRect(0,0,N.current[ot.INTERFACE].width,N.current[ot.INTERFACE].height),zt.each(z.current,E=>{E.ratio={width:nt.current.x,height:nt.current.y},E.draw(A.current[ot.INTERFACE])}),()=>{z.current=[],C.current.resetState(),C.current.elements=[],A.current[ot.INTERFACE].clearRect(0,0,N.current[ot.INTERFACE].width,N.current[ot.INTERFACE].height)}),[y]),gt.useEffect(()=>{const E=N.current[ot.INTERFACE];if(!E)return;const J=Dt=>{C.current.handleMouseMove(Dt,E)},Y=Dt=>{C.current.handleMouseUp(Dt,E)},_t=Dt=>{C.current.handleMouseDown(Dt,E)},fn=Dt=>{C.current.handleKeyDown(Dt,E)},St=Dt=>{C.current.handleKeyUp(Dt,E)},Nt=Dt=>{C.current.handleMouseWheel(Dt,E)};return E.addEventListener("mousedown",_t),E.addEventListener("mousemove",J),E.addEventListener("mouseup",Y),E.addEventListener("wheel",Nt),E.addEventListener("keydown",fn),E.addEventListener("keyup",St),()=>{E.removeEventListener("mousedown",_t),E.removeEventListener("mousemove",J),E.removeEventListener("mouseup",Y),E.removeEventListener("wheel",Nt),E.removeEventListener("keydown",fn),E.removeEventListener("keyup",St)}},[]),Mo.jsx("div",{style:{...f},ref:x,children:bo.map(E=>{const J=E===ot.INTERFACE;return Mo.jsx("canvas",{tabIndex:J?1:0,ref:Y=>{Y&&(N.current[E]=Y,A.current[E]=Y.getContext("2d"),J&&(T.current.canvas=Y))},style:{...r}},E)})})}class $r{constructor(f){this._points=f}get points(){return this._points}set points(f){this._points=f}get boundingBox(){let f=this._points[0].x,r=this._points[0].y,d=this._points[0].x,p=this._points[0].y;return zt.each(this._points,y=>{f=Math.min(f,y.x),r=Math.min(r,y.y),d=Math.max(d,y.x),p=Math.max(p,y.y)}),new Mn(f,r,d-f,p-r)}translate(f,r){zt.each(this._points,d=>d.translate(f,r))}clone(){return new $r(this._points.map(f=>f.clone()))}serialize(){return zt.map(this.points,f=>f.serialize().split(","))}resize(f,r){const d=this.boundingBox,p=[],y=[];zt.each(this._points,x=>{p.push({x:(x.x-d.topLeft.x)/d.width,y:(x.y-d.topLeft.y)/d.height}),y.push({x:(x.x-f.topLeft.x)/f.width,y:(x.y-f.topLeft.y)/f.height})}),this._points=zt.map(p,x=>new k(f.topLeft.x+f.width*x.x,f.topLeft.y+f.height*x.y)),zt.each(this._points,x=>{x.setRatio(r.x,r.y)})}deserialize(f){this.points=zt.map(f,r=>new k(r[0],r[1]))}isNear(f,r=10){return this._points.some(d=>k.isNear(d,f,r))}isPartOfPolygon(f){return this._points.some(r=>r.id===f.id)}contains(f,r){let d=!1;for(let p=0,y=this._points.length-1;p<this._points.length;y=p++){const x=this._points[p].x,L=this._points[p].y,M=this._points[y].x,N=this._points[y].y;L>r!=N>r&&f<(M-x)*(r-L)/(N-L)+x&&(d=!d)}return d}}class Mn extends $r{constructor(f=0,r=0,d=0,p=0){if(f instanceof k&&r instanceof k&&d instanceof k&&p instanceof k)super([f,r,d,p]);else if(typeof f=="number"&&typeof r=="number"&&typeof d=="number"&&typeof p=="number")super(Mn.pointsFromBounds(f,r,d,p));else throw new Error("Invalid arguments")}static pointsFromBounds(f,r,d,p){return[new k(f,r),new k(f+d,r),new k(f+d,r+p),new k(f,r+p)]}get width(){return this._points[1].x-this._points[0].x}get height(){return this._points[2].y-this._points[1].y}get topLeft(){return this._points[0]}get topRight(){return this._points[1]}get bottomRight(){return this._points[2]}get bottomLeft(){return this._points[3]}get topMid(){return k.middlePoint(this.topLeft,this.topRight)}get rightMid(){return k.middlePoint(this.topRight,this.bottomRight)}get bottomMid(){return k.middlePoint(this.bottomLeft,this.bottomRight)}get leftMid(){return k.middlePoint(this.topLeft,this.bottomLeft)}updateDimensions(f,r,d,p){this.points=Mn.pointsFromBounds(f,r,d,p)}processDisplacement(){this.width<0&&([this._points[0],this._points[1]]=[this._points[1],this._points[0]],[this._points[2],this._points[3]]=[this._points[3],this._points[2]]),this.height<0&&([this._points[0],this._points[3]]=[this._points[3],this._points[0]],[this._points[1],this._points[2]]=[this._points[2],this._points[1]])}clone(){return new Mn(this._points[0].x,this._points[0].y,this.width,this.height)}json(){return JSON.stringify(this)}}const Kp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAAAXNSR0IB2cksfwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAtGSURBVHhe7d3JblzXFUbhCiN2Yt+USBY7SWFkwwNPBHjgiaZ+AQ2SOH0iJ47j3pn60Z1zjCMg4l1X9yjYNeDmWgDFutSH39gDAyRAkbOJNtbW1r65vr7eaM9j6Tgdp+NCXYojSjpOx6VwG5ubm11jOkzH6bg4V/+y9O3UmI7TcTou1NW/3Nra6hrTDdNxOi7UXVxcbO7s7EyO6Tgdp+NCXUPfdY7pbqXjdFyoq2hvb69rTDdMx+m4aDfLcISO03GZ3M9fILdnrKKDg4PvdW+m43Tcslx75O7KEbo303H3yp2dnT08OjqaHNNxOk7Hhbrnz59X9MPUmI7TcTou1KU4oqTjdFwKV9F8Pv9Pz5humI7TcaHuNXrx4kXXmO7NdJyOC3UVnZycdI3phuk4HRfqPvzww62KPvnkk/X2IUzH6TgdF+1mBf3QOaa7lY7TcctwswxH6IbpuGyuPXJ35Qjdm+m4e+UqWiwWXWO6YTpOx4W6FEeUdJyOS+E++OCD7Z4xHafjdFyoS3FEScfpuBQuxRElHafjUrjX6OXLl2vtQ5iO03E6LtSlOKKk43RcFjfLcISO03GZ3CzDEbphOi6ba4/ce++9t9MzpuN0nI4LdR9//HHXmI7TcTou1DX0feeY7lY6TseFuhRHlHScjkvhXqNXr16ttg9hOk7H6bhQ99FHH+32jOk4HafjQl2KI0o6TselcCmOKOk4HZfF1e/E+v758+ddY7o303E6bhmu/ujKO3+EbpiOy+baI3dzc7N7eno6OabjdJyOC3VPnz7d6xnTcTpOx4W6FEeUdJyOS+FeoxcvXjxoH8J0nI7TcaEuxRElHafjUriK5vN515humI7TcaEuxRElHafjUriKjo6OusZ0w3Scjot2s4K+6xzT3UrH6bhluFmGI3TDdFw21x65ig4ODr7tGdMN03E6LtSlOKKk43RcCldR6ZueMd0wHafjQt1r9PLly1+2D2E6TsfpuFBX0c7OTteYbpiO03GhrnxeXdHXU2M6TsfpuFBX0dbW1tfl5eSYbpiO03GhrqLNzc2vysvJMd0wHafjot0swxE6TsdlcvX9JFpbW+sa0w3TcTru/3DjNfRledkzpruVjtNxoa6iBw8edI3phuk4HRfqUhxR0nE6LoVLcURJx+m4FK6ilZWVrjHdMB2n46JdFyrpOB2n40JdiiNKOk7HpXApjijpOB2Xw6U4QjeWjkvj6h89qHdMN0zH6bh3dW/trhyhezMdd69ciiNKOk7HpXBpvkbQYTouhUtxREnH6bgULsURJR2n41K4FEeUdJyOS+G6vqG6pON0nI4LdSmOKOk4HZfDpThCN5aOS+PqH5Oo58d8lHScjtNx7+re2n7nmI7TcTou1O1vbm52jekwHafj4tze3l5Fkz/aUsfpOB0X6ira2trqGtMN03E6LtSlOKKk43RcClfQwc7OTs+YDtJxOi7UNTT529J0nI7TcaGuovI2+XtKdZyO03HRrsI7f4SO03GZ3GwKXV1dHRweHr791/uXdJyO03Hv6tojd3FxUcz0mI7TcTou1FV0fHzcNaYbpuN0XKhr6NvOMd2tdJyOC3UVPXr0qGtMN0zH6bhQt1gsjnrGdJyO03GhrqLT09OuMd0wHafjQl2KI0o6TselcO+///7P6Mcff1xpH8J0nI7TcdFuluEIHafjMrnZFHr27Nlxz5iO03E67l1de+QqOj8//6ZnTDdMx+m4UJfiiJKO03EpXIojSjpOx6VwKY4o6Tgdl8Ld3NzMe8Z0nI7TcaGuoa87x3S30nE6LtSlOKKk43RcCpfiiJKO03FZ3KwHPX369JFumI7Tcctwk9+JdReO0A3Tcdlce+Qa+qpzTHcrHafjQl2KI0o6TselcCmOKOk4HZfCPXny5KRnTMfpOB0X6l6jn3766RftQ5iO03E6LtSlOKKk43RcCpfiiJKO03Ep3PX19WlBX06N6Tgdp+OiXf1OrDt/hI7TcZncrAednZ11jemG6Tgd966uPXJ35Qjdm+m4e+Wurq6KmR7TcTpOx4W6FEeUdJyOS+FSHFHScTouhavo5OTk3z1jumE6TseFuhRHlHScjkvhLi8vFz1jOk7H6bhQV9F8Pu8a0w3TcTou2s0K+qJzTHcrHafjluHq+0l0eHj4RXmp+590nI5bohuvoqOjo3+Vl5NjumE6TseFugIW+/v7k2M6TsfpuFDX0OftcTQdp+N0XKiraHd3t2tMN0zH6bhQ19A/2+NoOk7H6bhQV9H29nbXmG6YjtNxoa6hf7TH0XScjtNxoa6izc3NrjHdMB2n46LdrKDP2svR2pjuVjpOxy3DtZfjlaHF+vr65JiO03E6LtSlOKKk43RcClfR6urqq/Y4mo7TcTou1KU4oqTjdFwKV9HKykrXmG6YjtNxoS7FESUdp+NSuBRHlHScjsviulBJx+k4HRfqUhxR0nE6LoubdY2VN90wHafjluEmuwtH6IbpuHvlUhxR0nE6LoVLcURJx+m4FC7LF/g6TselcCmOKOk4HZfCpTiipON0XArX9Q3VJR2n43RcqEtxREnH6bgULsURJR2n43K49fX1rjEdpuN0XLhr799ammN1mI5L4VIcUdJxOu7uu/rvEB8+fDg5puN0nI4LdRWVt66fjqcbpuN0XKgr4Hx7e7tnTAfpOB0X6lIcUdJxOi6Fq2h3d3fyd7HoOB2n40Ld4eHh+cHBweSYjtNxOi7UFXTROaaDdJyOi3b1N5x1jemG6TgdtwzXXo7XxiZ/k7iO03E6LtSlOKKk43RcClc+/76cz+eTYzpOx+m4ULdYLLrGdJyO03GhrqLT09PP2+NoOk7H6bhQd3Z2dtUzpuN0nI4LdRWV/8u7xnTDdJyOC3UpjijpOB2XwjU0+QW0jtNxOi7a1S+OJ1H5/PtaN0zH6bhluPZyvIouLy+7xnTDdJyOC3WPHz+uaPJ7MnWcjtNxoS7FESUdp+NSuOvr68c9YzpOx+m4UNfQ5I/50HE6TseFuhRHlHScjkvhUhxR0nE6LoW7urp6Ut4mf6i0jtNxOi7UhY6VdJyO03G9rsI7f4SO03GZXHs5XkFPO8d0kI7TcaGuob+3x9F0nI7TcaEudKyk43ScjutyoWMlHafjdFyXu7y8/FVBf2uPo+k4HafjQl2KI0o6TselcCmOKOk4HZfCXVxc3PSM6Tgdp+NCXUN/bY+j6Tgdp+OiXYVdY7phOk7HLcO1l+Mt4z+qG6bjdFyXOz8//3XPmI7TcTou1DX0l/Y4mo7TcTou1KU4oqTjdFwKt1gsnpW3yTEdp+N0XKgLHSvpOB2n47pcQ39uj6PpOB2n40JdRScnJ11jumE6TseFuhRHlHScjsviZvP5/E/t5WjHx8fPdMN0nI5bhmsvx7sLR+iG6bh75Rr6Y3scTcfpOB0X6io6PDzsGtMN03E6LtQ19If2OJqO03E6LtRVtL+///v2OJqO03E6LtSlOKKk43RcCrezs/OsvH3aHkfTcTpOx4W6ira2trrGdMN0nI4LdQ39rj2OpuN0nI6LdrONjY2uMd0wHafjluHay/Ha2G/b42g6TsfpuFBX0erqateYbpiO03Ghbm1traLftMfRdJyO03GhrqKVlZWuMd0wHafjQl2KI0o6TselcCmOKOk4HZfCpTiipON0XAqX4oiSjtNxWVwXKuk4Hafjot2sa6y86YbpOB23DDfZXThCN0zH3SuX4oiSjtNxKVyKI0o6TselcFm+wNdxOi6FS3FEScfpuBQuxRElHafjUrgUR5R0nI5L4br+KVNJx+k4HRfqUhxR0nE6LodLcYRuLB2XxrX3b+1mY2Nj8kdglnScjtNx7+A2Pv0v5rAz6DVYBGkAAAAASUVORK5CYII=",Qr=new Image;Qr.src=Kp;class Ai{constructor(f,r,d,p,y,x,L){ut(this,"_ratio",{width:1,height:1});this._id=f,this._color=r,this._isCurrent=d,this._numberOfEquipments=p,this._rectangle=y,this._isEdit=typeof x=="boolean"?x:!0,this._isTemplate=L||!1}get id(){return this._id}set id(f){this._id=f}get color(){return this._color}get isCurrent(){return this._isCurrent}get numberOfEquipments(){return this._numberOfEquipments}get rectangle(){return this._rectangle}get isEdit(){return this._isEdit}get isTemplate(){return this._isTemplate}set ratio(f){this._ratio=f,this._rectangle.points.map(r=>{r.ratio=f})}translate(f,r){this._rectangle.translate(f,r)}updateDimensions(f,r){this._rectangle.updateDimensions(this._rectangle.topLeft.x,this._rectangle.topLeft.y,f,r)}resizeBoundingBox(f){this._rectangle.resize(f,{x:this._ratio.width,y:this._ratio.height})}draw(f){this.drawPolygon(f),this.drawNumberOfEquipments(f),this.drawIsCurrent(f),this.drawIsTemplate(f)}contains(f,r){return this.isEdit&&this.rectangle.contains(f,r)}drawDebug(f){f.fillStyle="black",f.fillText("TL",this.rectangle.topLeft.x,this.rectangle.topLeft.y,this.rectangle.width),f.fillText("TR",this.rectangle.topRight.x,this.rectangle.topRight.y,this.rectangle.width),f.fillText("BR",this.rectangle.bottomRight.x,this.rectangle.bottomRight.y,this.rectangle.width),f.fillText("BL",this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y,this.rectangle.width)}drawPolygon(f){const r=this.rectangle.points;f.fillStyle=this.color,f.beginPath(),f.moveTo(r[0].x,r[0].y);for(let d=1;d<r.length;d++)f.lineTo(r[d].x,r[d].y);f.closePath(),f.fill()}drawLines(f){const r=this.rectangle.points;f.fillStyle="black",f.lineWidth=1,f.setLineDash([]),f.beginPath(),f.moveTo(r[0].x,r[0].y);for(let d=1;d<r.length;d++)f.lineTo(r[d].x,r[d].y);f.closePath(),f.stroke()}drawIsCurrent(f){this.isCurrent&&(f.fillStyle="red",f.font="40px Arial",f.fillText("*",this.rectangle.topLeft.x,this.rectangle.topLeft.y+35,this.rectangle.width))}drawNumberOfEquipments(f){this.numberOfEquipments>0&&(f.fillStyle="black",f.font="14px Arial",f.fillText(`(${this.numberOfEquipments.toString()})`,this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y+14,this.rectangle.width))}drawIsTemplate(f){if(this.isTemplate&&Qr){const r=f.createPattern(Qr,"repeat");r&&(f.fillStyle=r,f.beginPath(),f.moveTo(this.rectangle.topLeft.x,this.rectangle.topLeft.y),f.lineTo(this.rectangle.topRight.x,this.rectangle.topRight.y),f.lineTo(this.rectangle.bottomRight.x,this.rectangle.bottomRight.y),f.lineTo(this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y),f.lineTo(this.rectangle.topLeft.x,this.rectangle.topLeft.y),f.closePath(),f.fill())}}drawBoundingBox(f){const r=this.rectangle.boundingBox;f.lineWidth=1,f.lineDashOffset=0,f.setLineDash([2,3]),f.beginPath(),f.moveTo(r.topLeft.x,r.topLeft.y),f.lineTo(r.topRight.x,r.topRight.y),f.lineTo(r.bottomRight.x,r.bottomRight.y),f.lineTo(r.bottomLeft.x,r.bottomLeft.y),f.lineTo(r.topLeft.x,r.topLeft.y),f.closePath(),f.stroke()}drawPoints(f){const r=this.rectangle.points;f.fillStyle="purple",r.forEach(d=>{f.beginPath(),f.arc(d.x,d.y,3,0,2*Math.PI),f.fill()}),f.closePath()}drawBoundingBoxHandles(f){const{topLeft:p,topRight:y,bottomRight:x,bottomLeft:L}=this.rectangle.boundingBox;f.strokeStyle="black",f.fillStyle="white",f.setLineDash([]),f.fillRect(p.x-3,p.y-3,6,6),f.fillRect(y.x-3,y.y-3,6,6),f.fillRect(x.x-3,x.y-3,6,6),f.fillRect(L.x-3,L.y-3,6,6),f.strokeRect(p.x-3,p.y-3,6,6),f.strokeRect(y.x-3,y.y-3,6,6),f.strokeRect(x.x-3,x.y-3,6,6),f.strokeRect(L.x-3,L.y-3,6,6),f.stroke()}getBoundingBoxHandle(f,r){const d=this.rectangle.boundingBox,p=[d.topLeft,d.topRight,d.bottomRight,d.bottomLeft],y=p.map(M=>k.distance(M,new k(f,r))),x=Math.min(...y),L=y.findIndex(M=>M===x&&M<10);return p[L]}handleToString(f){const{topLeft:r,topRight:d,bottomRight:p,bottomLeft:y}=this.rectangle.boundingBox;return k.isSame(f,r)?"topLeft":k.isSame(f,d)?"topRight":k.isSame(f,p)?"bottomRight":k.isSame(f,y)?"bottomLeft":null}clone(){const f=this.rectangle.points.map(r=>r.clone());return new Ai(this.id,this.color,this.isCurrent,this.numberOfEquipments,new Mn(f[0],f[1],f[2],f[3]),this.isEdit,this.isTemplate)}}const Gp="#ffff66";function Jp(){const I={size:Wn.COVER},[f,r]=gt.useState([]),[d,p]=gt.useState(I),[y,x]=gt.useState(!1),L=G=>{p(C=>({...C,...G}))},M=G=>{const C=G.map(V=>{const rt=new Mn(0,0,0,0);return rt.deserialize(JSON.parse(V.JsonRectangle)),new Ai(V.id.toString(),V.Color,V.IsCurrent,V.NumberEquipment,rt,V.IsEdit,V.IsTemplate)});r([...C])},N=G=>{L({imageSrc:G.imageSource}),M(G.data),x(G.viewMode)},A=()=>{const G=new Mn(0,0,100,100),C=new Ai(`${f.length+1}`,Gp,!1,4,G,!0);r([...f,C])},T=G=>{typeof G=="function"&&G(nt())},z=()=>f.map(C=>({id:C.id,IsTemplate:!1,NumberEquipment:C.numberOfEquipments,Color:C.color,IsCurrent:C.isCurrent,JsonRectangle:C.rectangle.serialize(),IsEdit:C.isEdit})),nt=()=>{const G=f.map(C=>({id:parseInt(C.id),IsTemplate:!1,NumberEquipment:C.numberOfEquipments,Color:C.color,IsCurrent:C.isCurrent,JsonRectangle:JSON.stringify(C.rectangle.serialize()),IsEdit:C.isEdit}));return JSON.stringify({viewMode:y,imageSource:d.imageSrc,data:G})};return{viewMode:y,background:d,elements:f,loadBackground:L,loadDataSource:M,loadAll:N,addRectangle:A,exportRectangles:z,toString:nt,saveData:T}}export{Vp as C,Jp as u};
