var Ed=Object.defineProperty;var Rd=(L,f,i)=>f in L?Ed(L,f,{enumerable:!0,configurable:!0,writable:!0,value:i}):L[f]=i;var st=(L,f,i)=>(Rd(L,typeof f!="symbol"?f+"":f,i),i);import{r as gt,y as Le,q as Td,j as Co}from"./index-CpNJ6ZVU.js";const Mo=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),Tr=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:Mo,viewMax:Mo}),re=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0});class Od{constructor(f,i){st(this,"_canvas",null);st(this,"_view",{scale:1,x:0,y:0});st(this,"_viewChangeListeners",new Set);st(this,"_initialViewSize",{width:1920,height:1080});this._scaleExtents=f,this._documentSize=i}get canvas(){return this._canvas}set canvas(f){this._canvas=f,this.setView()}get scale(){return this._view.scale}setScale(f){this.setView({scale:f})}get initialViewSize(){return this._initialViewSize}set initialViewSize(f){this._initialViewSize=f}get x(){return this._view.x}set x(f){this.setView({x:f})}get y(){return this._view.y}set y(f){this.setView({y:f})}get view(){return{...this._view}}get scaleExtents(){return{...this._scaleExtents}}set scaleExtents(f){this._scaleExtents={...f},this.setView()}get documentSize(){return{...this._documentSize}}set documentSize(f){this._documentSize={...f},this.setView()}get transformMatrix(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}get canvasBounds(){if(this._canvas){const{left:f,top:i,right:p,bottom:d}=this._canvas.getBoundingClientRect();return{viewMin:this.clientPointToViewPoint({clientX:f,clientY:i}),viewMax:this.clientPointToViewPoint({clientX:p,clientY:d}),left:f,top:i,right:p,bottom:d,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}else return}get canvasRect(){if(this._canvas)return this._canvas.getBoundingClientRect()}clampView(f){const{min:i,max:p}=this._scaleExtents,{width:d,height:E}=this._documentSize,{left:x,top:C,right:M,bottom:P}=this.canvasRect||Tr,A=M-x,T=P-C,X=A/2,rt=-(d*this._view.scale-A/2),q=T/2,b=-(E*this._view.scale-T/2);return{scale:Math.min(Math.max(f.scale,i),p),x:Math.min(Math.max(f.x,rt),X),y:Math.min(Math.max(f.y,b),q)}}resetView(){this.setView({scale:1,x:0,y:0})}setView(f){const i=this.clampView({...this._view,...f||{}}),{scale:p,x:d,y:E}=this._view;return(i.scale!==p||i.x!==d||i.y!==E)&&(this._view=i,this._viewChangeListeners.forEach(x=>x&&x({view:i,transform:this.transformMatrix}))),{...this._view}}scaleAtClientPoint(f,i){const p=this.clientPointToViewPoint(i),d=this.clampView({...this._view,scale:this._view.scale+f}),E=this.viewPointToClientPoint(p,d);d.x=this._view.x-(E.clientX-i.clientX),d.y=this._view.y-(E.clientY-i.clientY);const{width:x,height:C}=this._documentSize,{left:M,top:P,right:A,bottom:T}=this.canvasRect||Tr,X=A-M,rt=T-P,q=X/2,b=-(x*d.scale-X/2),J=rt/2,ft=-(C*d.scale-rt/2);d.x=Math.min(Math.max(d.x,b),q),d.y=Math.min(Math.max(d.y,ft),J);const Wn=x*d.scale,Tt=C*d.scale,Zt=Math.abs(d.x),Ot=Math.abs(d.y),Qt=Wn-X,At=Tt-rt;return d.x<0&&Qt<Zt&&(d.x=-Qt),d.y<0&&At<Ot&&(d.y=-At),d.x>0&&(d.x=0),d.y>0&&(d.y=0),d.scale===this._scaleExtents.min&&(d.x=0,d.y=0),this.setView(d)}clientPointToViewPoint(f,i=this._view){const{left:p,top:d}=this.canvasRect||Tr,E=f.clientX-p,x=f.clientY-d;return{x:(E-i.x)/i.scale,y:(x-i.y)/i.scale,relativeClientX:E,relativeClientY:x}}viewPointToClientPoint(f,i=this._view){const{left:p,top:d}=this.canvasRect||Tr,E=f.x*i.scale+i.x,x=f.y*i.scale+i.y,C=E+p,M=x+d;return{clientX:C,clientY:M,relativeX:E,relativeY:x,x:C,y:M}}attachViewChangeListener(f){this._viewChangeListeners.add(f)}}const Ad=(L,f,i)=>{L.width=f,L.height=i,L.style.width=`${f}px`,L.style.height=`${i}px`},Ld=(L,f)=>{for(const i in L)Object.prototype.hasOwnProperty.call(L,i)&&Ad(L[i],f.width,f.height)};function Id({ctx:L,image:f,x:i=0,y:p=0,w:d=L.canvas.width,h:E=L.canvas.height,offsetX:x=.5,offsetY:C=.5}){x<0&&(x=0),C<0&&(C=0),x>1&&(x=1),C>1&&(C=1);const M=f.width,P=f.height,A=Math.min(d/M,E/P);let T=M*A,X=P*A,rt,q,b,J,ft=1;T<d&&(ft=d/T),Math.abs(ft-1)<1e-14&&X<E&&(ft=E/X),T*=ft,X*=ft,b=M/(T/d),J=P/(X/E),rt=(M-b)*x,q=(P-J)*C,rt<0&&(rt=0),q<0&&(q=0),b>M&&(b=M),J>P&&(J=P),L.drawImage(f,rt,q,b,J,i,p,d,E)}function Cd({canvas:L,ctx:f,image:i}){if(i&&i.complete&&L&&f){const p=i.width,d=i.height,E=L.getBoundingClientRect(),x=E.width,C=E.height,M=p/d;let P=x,A=P/M;A>C&&(A=C,P=A*M),f.drawImage(i,0,0,p,d,0,0,P,A)}}function Md({canvas:L,ctx:f,image:i}){if(i&&i.complete&&L&&f){const p=i.width,d=i.height,E=L.getBoundingClientRect(),x=E.width,C=E.height;f.drawImage(i,0,0,p,d,0,0,x,C)}}function bd(L){const f=gt.useRef(null),[i,p]=gt.useState({width:window.innerWidth,height:window.innerHeight});return gt.useEffect(()=>{const d=new ResizeObserver(E=>{for(const x of E){if(x.contentRect){const{width:C,height:M}=x.contentRect;p({width:C,height:M})}typeof L=="function"&&L(x)}});return f.current&&d.observe(f.current),()=>{d.disconnect()}},[L]),{containerRef:f,screenSize:i}}class Ce{constructor(f,i){this._stateMachine=f,this._name=i}get stateMachine(){return this._stateMachine}get name(){return this._name}}class Nd extends Ce{constructor(f,i){super(f,i)}onEnter(){}onExit(){}handleMouseWheel(f,i){}handleMouseDown(f,i){}handleMouseMove(f,i){}handleMouseUp(f,i){}}var Or={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Or.exports;(function(L,f){(function(){var i,p="4.17.21",d=200,E="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",C="Invalid `variable` option passed into `_.template`",M="__lodash_hash_undefined__",P=500,A="__lodash_placeholder__",T=1,X=2,rt=4,q=1,b=2,J=1,ft=2,Wn=4,Tt=8,Zt=16,Ot=32,Qt=64,At=128,mn=256,se=512,Lr=30,Me="...",S=800,V=16,G=1,dt=2,fn=3,yt=1/0,bt=9007199254740991,Nt=17976931348623157e292,be=NaN,rn=4294967295,Do=rn-1,Po=rn>>>1,Ho=[["ary",At],["bind",J],["bindKey",ft],["curry",Tt],["curryRight",Zt],["flip",se],["partial",Ot],["partialRight",Qt],["rearg",mn]],zn="[object Arguments]",Ne="[object Array]",Fo="[object AsyncFunction]",ue="[object Boolean]",oe="[object Date]",Uo="[object DOMException]",De="[object Error]",Pe="[object Function]",ki="[object GeneratorFunction]",$t="[object Map]",fe="[object Number]",Bo="[object Null]",an="[object Object]",ji="[object Promise]",Wo="[object Proxy]",ae="[object RegExp]",kt="[object Set]",le="[object String]",He="[object Symbol]",zo="[object Undefined]",ce="[object WeakMap]",Ko="[object WeakSet]",he="[object ArrayBuffer]",Kn="[object DataView]",Ir="[object Float32Array]",Cr="[object Float64Array]",Mr="[object Int8Array]",br="[object Int16Array]",Nr="[object Int32Array]",Dr="[object Uint8Array]",Pr="[object Uint8ClampedArray]",Hr="[object Uint16Array]",Fr="[object Uint32Array]",Xo=/\b__p \+= '';/g,Go=/\b(__p \+=) '' \+/g,Yo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ts=/&(?:amp|lt|gt|quot|#39);/g,ns=/[&<>"']/g,qo=RegExp(ts.source),Jo=RegExp(ns.source),Vo=/<%-([\s\S]+?)%>/g,Zo=/<%([\s\S]+?)%>/g,es=/<%=([\s\S]+?)%>/g,Qo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$o=/^\w*$/,ko=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/[\\^$.*+?()[\]{}|]/g,jo=RegExp(Ur.source),Br=/^\s+/,tf=/\s/,nf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ef=/\{\n\/\* \[wrapped with (.+)\] \*/,rf=/,? & /,sf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uf=/[()=,{}\[\]\/\s]/,of=/\\(\\)?/g,ff=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rs=/\w*$/,af=/^[-+]0x[0-9a-f]+$/i,lf=/^0b[01]+$/i,cf=/^\[object .+?Constructor\]$/,hf=/^0o[0-7]+$/i,gf=/^(?:0|[1-9]\d*)$/,pf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fe=/($^)/,df=/['\n\r\u2028\u2029\\]/g,Ue="\\ud800-\\udfff",_f="\\u0300-\\u036f",vf="\\ufe20-\\ufe2f",wf="\\u20d0-\\u20ff",is=_f+vf+wf,ss="\\u2700-\\u27bf",us="a-z\\xdf-\\xf6\\xf8-\\xff",mf="\\xac\\xb1\\xd7\\xf7",xf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yf="\\u2000-\\u206f",Sf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",os="A-Z\\xc0-\\xd6\\xd8-\\xde",fs="\\ufe0e\\ufe0f",as=mf+xf+yf+Sf,Wr="['’]",Ef="["+Ue+"]",ls="["+as+"]",Be="["+is+"]",cs="\\d+",Rf="["+ss+"]",hs="["+us+"]",gs="[^"+Ue+as+cs+ss+us+os+"]",zr="\\ud83c[\\udffb-\\udfff]",Tf="(?:"+Be+"|"+zr+")",ps="[^"+Ue+"]",Kr="(?:\\ud83c[\\udde6-\\uddff]){2}",Xr="[\\ud800-\\udbff][\\udc00-\\udfff]",Xn="["+os+"]",ds="\\u200d",_s="(?:"+hs+"|"+gs+")",Of="(?:"+Xn+"|"+gs+")",vs="(?:"+Wr+"(?:d|ll|m|re|s|t|ve))?",ws="(?:"+Wr+"(?:D|LL|M|RE|S|T|VE))?",ms=Tf+"?",xs="["+fs+"]?",Af="(?:"+ds+"(?:"+[ps,Kr,Xr].join("|")+")"+xs+ms+")*",Lf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",If="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ys=xs+ms+Af,Cf="(?:"+[Rf,Kr,Xr].join("|")+")"+ys,Mf="(?:"+[ps+Be+"?",Be,Kr,Xr,Ef].join("|")+")",bf=RegExp(Wr,"g"),Nf=RegExp(Be,"g"),Gr=RegExp(zr+"(?="+zr+")|"+Mf+ys,"g"),Df=RegExp([Xn+"?"+hs+"+"+vs+"(?="+[ls,Xn,"$"].join("|")+")",Of+"+"+ws+"(?="+[ls,Xn+_s,"$"].join("|")+")",Xn+"?"+_s+"+"+vs,Xn+"+"+ws,If,Lf,cs,Cf].join("|"),"g"),Pf=RegExp("["+ds+Ue+is+fs+"]"),Hf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ff=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uf=-1,nt={};nt[Ir]=nt[Cr]=nt[Mr]=nt[br]=nt[Nr]=nt[Dr]=nt[Pr]=nt[Hr]=nt[Fr]=!0,nt[zn]=nt[Ne]=nt[he]=nt[ue]=nt[Kn]=nt[oe]=nt[De]=nt[Pe]=nt[$t]=nt[fe]=nt[an]=nt[ae]=nt[kt]=nt[le]=nt[ce]=!1;var tt={};tt[zn]=tt[Ne]=tt[he]=tt[Kn]=tt[ue]=tt[oe]=tt[Ir]=tt[Cr]=tt[Mr]=tt[br]=tt[Nr]=tt[$t]=tt[fe]=tt[an]=tt[ae]=tt[kt]=tt[le]=tt[He]=tt[Dr]=tt[Pr]=tt[Hr]=tt[Fr]=!0,tt[De]=tt[Pe]=tt[ce]=!1;var Bf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xf=parseFloat,Gf=parseInt,Ss=typeof Le=="object"&&Le&&Le.Object===Object&&Le,Yf=typeof self=="object"&&self&&self.Object===Object&&self,_t=Ss||Yf||Function("return this")(),Yr=f&&!f.nodeType&&f,Cn=Yr&&!0&&L&&!L.nodeType&&L,Es=Cn&&Cn.exports===Yr,qr=Es&&Ss.process,zt=function(){try{var c=Cn&&Cn.require&&Cn.require("util").types;return c||qr&&qr.binding&&qr.binding("util")}catch{}}(),Rs=zt&&zt.isArrayBuffer,Ts=zt&&zt.isDate,Os=zt&&zt.isMap,As=zt&&zt.isRegExp,Ls=zt&&zt.isSet,Is=zt&&zt.isTypedArray;function Dt(c,_,g){switch(g.length){case 0:return c.call(_);case 1:return c.call(_,g[0]);case 2:return c.call(_,g[0],g[1]);case 3:return c.call(_,g[0],g[1],g[2])}return c.apply(_,g)}function qf(c,_,g,R){for(var H=-1,Z=c==null?0:c.length;++H<Z;){var ct=c[H];_(R,ct,g(ct),c)}return R}function Kt(c,_){for(var g=-1,R=c==null?0:c.length;++g<R&&_(c[g],g,c)!==!1;);return c}function Jf(c,_){for(var g=c==null?0:c.length;g--&&_(c[g],g,c)!==!1;);return c}function Cs(c,_){for(var g=-1,R=c==null?0:c.length;++g<R;)if(!_(c[g],g,c))return!1;return!0}function xn(c,_){for(var g=-1,R=c==null?0:c.length,H=0,Z=[];++g<R;){var ct=c[g];_(ct,g,c)&&(Z[H++]=ct)}return Z}function We(c,_){var g=c==null?0:c.length;return!!g&&Gn(c,_,0)>-1}function Jr(c,_,g){for(var R=-1,H=c==null?0:c.length;++R<H;)if(g(_,c[R]))return!0;return!1}function et(c,_){for(var g=-1,R=c==null?0:c.length,H=Array(R);++g<R;)H[g]=_(c[g],g,c);return H}function yn(c,_){for(var g=-1,R=_.length,H=c.length;++g<R;)c[H+g]=_[g];return c}function Vr(c,_,g,R){var H=-1,Z=c==null?0:c.length;for(R&&Z&&(g=c[++H]);++H<Z;)g=_(g,c[H],H,c);return g}function Vf(c,_,g,R){var H=c==null?0:c.length;for(R&&H&&(g=c[--H]);H--;)g=_(g,c[H],H,c);return g}function Zr(c,_){for(var g=-1,R=c==null?0:c.length;++g<R;)if(_(c[g],g,c))return!0;return!1}var Zf=Qr("length");function Qf(c){return c.split("")}function $f(c){return c.match(sf)||[]}function Ms(c,_,g){var R;return g(c,function(H,Z,ct){if(_(H,Z,ct))return R=Z,!1}),R}function ze(c,_,g,R){for(var H=c.length,Z=g+(R?1:-1);R?Z--:++Z<H;)if(_(c[Z],Z,c))return Z;return-1}function Gn(c,_,g){return _===_?aa(c,_,g):ze(c,bs,g)}function kf(c,_,g,R){for(var H=g-1,Z=c.length;++H<Z;)if(R(c[H],_))return H;return-1}function bs(c){return c!==c}function Ns(c,_){var g=c==null?0:c.length;return g?kr(c,_)/g:be}function Qr(c){return function(_){return _==null?i:_[c]}}function $r(c){return function(_){return c==null?i:c[_]}}function Ds(c,_,g,R,H){return H(c,function(Z,ct,j){g=R?(R=!1,Z):_(g,Z,ct,j)}),g}function jf(c,_){var g=c.length;for(c.sort(_);g--;)c[g]=c[g].value;return c}function kr(c,_){for(var g,R=-1,H=c.length;++R<H;){var Z=_(c[R]);Z!==i&&(g=g===i?Z:g+Z)}return g}function jr(c,_){for(var g=-1,R=Array(c);++g<c;)R[g]=_(g);return R}function ta(c,_){return et(_,function(g){return[g,c[g]]})}function Ps(c){return c&&c.slice(0,Bs(c)+1).replace(Br,"")}function Pt(c){return function(_){return c(_)}}function ti(c,_){return et(_,function(g){return c[g]})}function ge(c,_){return c.has(_)}function Hs(c,_){for(var g=-1,R=c.length;++g<R&&Gn(_,c[g],0)>-1;);return g}function Fs(c,_){for(var g=c.length;g--&&Gn(_,c[g],0)>-1;);return g}function na(c,_){for(var g=c.length,R=0;g--;)c[g]===_&&++R;return R}var ea=$r(Bf),ra=$r(Wf);function ia(c){return"\\"+Kf[c]}function sa(c,_){return c==null?i:c[_]}function Yn(c){return Pf.test(c)}function ua(c){return Hf.test(c)}function oa(c){for(var _,g=[];!(_=c.next()).done;)g.push(_.value);return g}function ni(c){var _=-1,g=Array(c.size);return c.forEach(function(R,H){g[++_]=[H,R]}),g}function Us(c,_){return function(g){return c(_(g))}}function Sn(c,_){for(var g=-1,R=c.length,H=0,Z=[];++g<R;){var ct=c[g];(ct===_||ct===A)&&(c[g]=A,Z[H++]=g)}return Z}function Ke(c){var _=-1,g=Array(c.size);return c.forEach(function(R){g[++_]=R}),g}function fa(c){var _=-1,g=Array(c.size);return c.forEach(function(R){g[++_]=[R,R]}),g}function aa(c,_,g){for(var R=g-1,H=c.length;++R<H;)if(c[R]===_)return R;return-1}function la(c,_,g){for(var R=g+1;R--;)if(c[R]===_)return R;return R}function qn(c){return Yn(c)?ha(c):Zf(c)}function jt(c){return Yn(c)?ga(c):Qf(c)}function Bs(c){for(var _=c.length;_--&&tf.test(c.charAt(_)););return _}var ca=$r(zf);function ha(c){for(var _=Gr.lastIndex=0;Gr.test(c);)++_;return _}function ga(c){return c.match(Gr)||[]}function pa(c){return c.match(Df)||[]}var da=function c(_){_=_==null?_t:Jn.defaults(_t.Object(),_,Jn.pick(_t,Ff));var g=_.Array,R=_.Date,H=_.Error,Z=_.Function,ct=_.Math,j=_.Object,ei=_.RegExp,_a=_.String,Xt=_.TypeError,Xe=g.prototype,va=Z.prototype,Vn=j.prototype,Ge=_["__core-js_shared__"],Ye=va.toString,$=Vn.hasOwnProperty,wa=0,Ws=function(){var t=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),qe=Vn.toString,ma=Ye.call(j),xa=_t._,ya=ei("^"+Ye.call($).replace(Ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=Es?_.Buffer:i,En=_.Symbol,Ve=_.Uint8Array,zs=Je?Je.allocUnsafe:i,Ze=Us(j.getPrototypeOf,j),Ks=j.create,Xs=Vn.propertyIsEnumerable,Qe=Xe.splice,Gs=En?En.isConcatSpreadable:i,pe=En?En.iterator:i,Mn=En?En.toStringTag:i,$e=function(){try{var t=Hn(j,"defineProperty");return t({},"",{}),t}catch{}}(),Sa=_.clearTimeout!==_t.clearTimeout&&_.clearTimeout,Ea=R&&R.now!==_t.Date.now&&R.now,Ra=_.setTimeout!==_t.setTimeout&&_.setTimeout,ke=ct.ceil,je=ct.floor,ri=j.getOwnPropertySymbols,Ta=Je?Je.isBuffer:i,Ys=_.isFinite,Oa=Xe.join,Aa=Us(j.keys,j),ht=ct.max,wt=ct.min,La=R.now,Ia=_.parseInt,qs=ct.random,Ca=Xe.reverse,ii=Hn(_,"DataView"),de=Hn(_,"Map"),si=Hn(_,"Promise"),Zn=Hn(_,"Set"),_e=Hn(_,"WeakMap"),ve=Hn(j,"create"),tr=_e&&new _e,Qn={},Ma=Fn(ii),ba=Fn(de),Na=Fn(si),Da=Fn(Zn),Pa=Fn(_e),nr=En?En.prototype:i,we=nr?nr.valueOf:i,Js=nr?nr.toString:i;function u(t){if(ot(t)&&!F(t)&&!(t instanceof K)){if(t instanceof Gt)return t;if($.call(t,"__wrapped__"))return Vu(t)}return new Gt(t)}var $n=function(){function t(){}return function(n){if(!it(n))return{};if(Ks)return Ks(n);t.prototype=n;var e=new t;return t.prototype=i,e}}();function er(){}function Gt(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}u.templateSettings={escape:Vo,evaluate:Zo,interpolate:es,variable:"",imports:{_:u}},u.prototype=er.prototype,u.prototype.constructor=u,Gt.prototype=$n(er.prototype),Gt.prototype.constructor=Gt;function K(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rn,this.__views__=[]}function Ha(){var t=new K(this.__wrapped__);return t.__actions__=Lt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Lt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Lt(this.__views__),t}function Fa(){if(this.__filtered__){var t=new K(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ua(){var t=this.__wrapped__.value(),n=this.__dir__,e=F(t),r=n<0,s=e?t.length:0,o=Ql(0,s,this.__views__),a=o.start,l=o.end,h=l-a,v=r?l:a-1,w=this.__iteratees__,m=w.length,y=0,O=wt(h,this.__takeCount__);if(!e||!r&&s==h&&O==h)return vu(t,this.__actions__);var N=[];t:for(;h--&&y<O;){v+=n;for(var B=-1,D=t[v];++B<m;){var z=w[B],Y=z.iteratee,Ut=z.type,Rt=Y(D);if(Ut==dt)D=Rt;else if(!Rt){if(Ut==G)continue t;break t}}N[y++]=D}return N}K.prototype=$n(er.prototype),K.prototype.constructor=K;function bn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ba(){this.__data__=ve?ve(null):{},this.size=0}function Wa(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function za(t){var n=this.__data__;if(ve){var e=n[t];return e===M?i:e}return $.call(n,t)?n[t]:i}function Ka(t){var n=this.__data__;return ve?n[t]!==i:$.call(n,t)}function Xa(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ve&&n===i?M:n,this}bn.prototype.clear=Ba,bn.prototype.delete=Wa,bn.prototype.get=za,bn.prototype.has=Ka,bn.prototype.set=Xa;function ln(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ga(){this.__data__=[],this.size=0}function Ya(t){var n=this.__data__,e=rr(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():Qe.call(n,e,1),--this.size,!0}function qa(t){var n=this.__data__,e=rr(n,t);return e<0?i:n[e][1]}function Ja(t){return rr(this.__data__,t)>-1}function Va(t,n){var e=this.__data__,r=rr(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}ln.prototype.clear=Ga,ln.prototype.delete=Ya,ln.prototype.get=qa,ln.prototype.has=Ja,ln.prototype.set=Va;function cn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Za(){this.size=0,this.__data__={hash:new bn,map:new(de||ln),string:new bn}}function Qa(t){var n=dr(this,t).delete(t);return this.size-=n?1:0,n}function $a(t){return dr(this,t).get(t)}function ka(t){return dr(this,t).has(t)}function ja(t,n){var e=dr(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}cn.prototype.clear=Za,cn.prototype.delete=Qa,cn.prototype.get=$a,cn.prototype.has=ka,cn.prototype.set=ja;function Nn(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new cn;++n<e;)this.add(t[n])}function tl(t){return this.__data__.set(t,M),this}function nl(t){return this.__data__.has(t)}Nn.prototype.add=Nn.prototype.push=tl,Nn.prototype.has=nl;function tn(t){var n=this.__data__=new ln(t);this.size=n.size}function el(){this.__data__=new ln,this.size=0}function rl(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function il(t){return this.__data__.get(t)}function sl(t){return this.__data__.has(t)}function ul(t,n){var e=this.__data__;if(e instanceof ln){var r=e.__data__;if(!de||r.length<d-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new cn(r)}return e.set(t,n),this.size=e.size,this}tn.prototype.clear=el,tn.prototype.delete=rl,tn.prototype.get=il,tn.prototype.has=sl,tn.prototype.set=ul;function Vs(t,n){var e=F(t),r=!e&&Un(t),s=!e&&!r&&Ln(t),o=!e&&!r&&!s&&ne(t),a=e||r||s||o,l=a?jr(t.length,_a):[],h=l.length;for(var v in t)(n||$.call(t,v))&&!(a&&(v=="length"||s&&(v=="offset"||v=="parent")||o&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||dn(v,h)))&&l.push(v);return l}function Zs(t){var n=t.length;return n?t[_i(0,n-1)]:i}function ol(t,n){return _r(Lt(t),Dn(n,0,t.length))}function fl(t){return _r(Lt(t))}function ui(t,n,e){(e!==i&&!nn(t[n],e)||e===i&&!(n in t))&&hn(t,n,e)}function me(t,n,e){var r=t[n];(!($.call(t,n)&&nn(r,e))||e===i&&!(n in t))&&hn(t,n,e)}function rr(t,n){for(var e=t.length;e--;)if(nn(t[e][0],n))return e;return-1}function al(t,n,e,r){return Rn(t,function(s,o,a){n(r,s,e(s),a)}),r}function Qs(t,n){return t&&un(n,pt(n),t)}function ll(t,n){return t&&un(n,Ct(n),t)}function hn(t,n,e){n=="__proto__"&&$e?$e(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function oi(t,n){for(var e=-1,r=n.length,s=g(r),o=t==null;++e<r;)s[e]=o?i:zi(t,n[e]);return s}function Dn(t,n,e){return t===t&&(e!==i&&(t=t<=e?t:e),n!==i&&(t=t>=n?t:n)),t}function Yt(t,n,e,r,s,o){var a,l=n&T,h=n&X,v=n&rt;if(e&&(a=s?e(t,r,s,o):e(t)),a!==i)return a;if(!it(t))return t;var w=F(t);if(w){if(a=kl(t),!l)return Lt(t,a)}else{var m=mt(t),y=m==Pe||m==ki;if(Ln(t))return xu(t,l);if(m==an||m==zn||y&&!s){if(a=h||y?{}:Bu(t),!l)return h?zl(t,ll(a,t)):Wl(t,Qs(a,t))}else{if(!tt[m])return s?t:{};a=jl(t,m,l)}}o||(o=new tn);var O=o.get(t);if(O)return O;o.set(t,a),po(t)?t.forEach(function(D){a.add(Yt(D,n,e,D,t,o))}):ho(t)&&t.forEach(function(D,z){a.set(z,Yt(D,n,e,z,t,o))});var N=v?h?Ai:Oi:h?Ct:pt,B=w?i:N(t);return Kt(B||t,function(D,z){B&&(z=D,D=t[z]),me(a,z,Yt(D,n,e,z,t,o))}),a}function cl(t){var n=pt(t);return function(e){return $s(e,t,n)}}function $s(t,n,e){var r=e.length;if(t==null)return!r;for(t=j(t);r--;){var s=e[r],o=n[s],a=t[s];if(a===i&&!(s in t)||!o(a))return!1}return!0}function ks(t,n,e){if(typeof t!="function")throw new Xt(x);return Oe(function(){t.apply(i,e)},n)}function xe(t,n,e,r){var s=-1,o=We,a=!0,l=t.length,h=[],v=n.length;if(!l)return h;e&&(n=et(n,Pt(e))),r?(o=Jr,a=!1):n.length>=d&&(o=ge,a=!1,n=new Nn(n));t:for(;++s<l;){var w=t[s],m=e==null?w:e(w);if(w=r||w!==0?w:0,a&&m===m){for(var y=v;y--;)if(n[y]===m)continue t;h.push(w)}else o(n,m,r)||h.push(w)}return h}var Rn=Tu(sn),js=Tu(ai,!0);function hl(t,n){var e=!0;return Rn(t,function(r,s,o){return e=!!n(r,s,o),e}),e}function ir(t,n,e){for(var r=-1,s=t.length;++r<s;){var o=t[r],a=n(o);if(a!=null&&(l===i?a===a&&!Ft(a):e(a,l)))var l=a,h=o}return h}function gl(t,n,e,r){var s=t.length;for(e=U(e),e<0&&(e=-e>s?0:s+e),r=r===i||r>s?s:U(r),r<0&&(r+=s),r=e>r?0:vo(r);e<r;)t[e++]=n;return t}function tu(t,n){var e=[];return Rn(t,function(r,s,o){n(r,s,o)&&e.push(r)}),e}function vt(t,n,e,r,s){var o=-1,a=t.length;for(e||(e=nc),s||(s=[]);++o<a;){var l=t[o];n>0&&e(l)?n>1?vt(l,n-1,e,r,s):yn(s,l):r||(s[s.length]=l)}return s}var fi=Ou(),nu=Ou(!0);function sn(t,n){return t&&fi(t,n,pt)}function ai(t,n){return t&&nu(t,n,pt)}function sr(t,n){return xn(n,function(e){return _n(t[e])})}function Pn(t,n){n=On(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[on(n[e++])];return e&&e==r?t:i}function eu(t,n,e){var r=n(t);return F(t)?r:yn(r,e(t))}function St(t){return t==null?t===i?zo:Bo:Mn&&Mn in j(t)?Zl(t):fc(t)}function li(t,n){return t>n}function pl(t,n){return t!=null&&$.call(t,n)}function dl(t,n){return t!=null&&n in j(t)}function _l(t,n,e){return t>=wt(n,e)&&t<ht(n,e)}function ci(t,n,e){for(var r=e?Jr:We,s=t[0].length,o=t.length,a=o,l=g(o),h=1/0,v=[];a--;){var w=t[a];a&&n&&(w=et(w,Pt(n))),h=wt(w.length,h),l[a]=!e&&(n||s>=120&&w.length>=120)?new Nn(a&&w):i}w=t[0];var m=-1,y=l[0];t:for(;++m<s&&v.length<h;){var O=w[m],N=n?n(O):O;if(O=e||O!==0?O:0,!(y?ge(y,N):r(v,N,e))){for(a=o;--a;){var B=l[a];if(!(B?ge(B,N):r(t[a],N,e)))continue t}y&&y.push(N),v.push(O)}}return v}function vl(t,n,e,r){return sn(t,function(s,o,a){n(r,e(s),o,a)}),r}function ye(t,n,e){n=On(n,t),t=Xu(t,n);var r=t==null?t:t[on(Jt(n))];return r==null?i:Dt(r,t,e)}function ru(t){return ot(t)&&St(t)==zn}function wl(t){return ot(t)&&St(t)==he}function ml(t){return ot(t)&&St(t)==oe}function Se(t,n,e,r,s){return t===n?!0:t==null||n==null||!ot(t)&&!ot(n)?t!==t&&n!==n:xl(t,n,e,r,Se,s)}function xl(t,n,e,r,s,o){var a=F(t),l=F(n),h=a?Ne:mt(t),v=l?Ne:mt(n);h=h==zn?an:h,v=v==zn?an:v;var w=h==an,m=v==an,y=h==v;if(y&&Ln(t)){if(!Ln(n))return!1;a=!0,w=!1}if(y&&!w)return o||(o=new tn),a||ne(t)?Hu(t,n,e,r,s,o):Jl(t,n,h,e,r,s,o);if(!(e&q)){var O=w&&$.call(t,"__wrapped__"),N=m&&$.call(n,"__wrapped__");if(O||N){var B=O?t.value():t,D=N?n.value():n;return o||(o=new tn),s(B,D,e,r,o)}}return y?(o||(o=new tn),Vl(t,n,e,r,s,o)):!1}function yl(t){return ot(t)&&mt(t)==$t}function hi(t,n,e,r){var s=e.length,o=s,a=!r;if(t==null)return!o;for(t=j(t);s--;){var l=e[s];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<o;){l=e[s];var h=l[0],v=t[h],w=l[1];if(a&&l[2]){if(v===i&&!(h in t))return!1}else{var m=new tn;if(r)var y=r(v,w,h,t,n,m);if(!(y===i?Se(w,v,q|b,r,m):y))return!1}}return!0}function iu(t){if(!it(t)||rc(t))return!1;var n=_n(t)?ya:cf;return n.test(Fn(t))}function Sl(t){return ot(t)&&St(t)==ae}function El(t){return ot(t)&&mt(t)==kt}function Rl(t){return ot(t)&&Sr(t.length)&&!!nt[St(t)]}function su(t){return typeof t=="function"?t:t==null?Mt:typeof t=="object"?F(t)?fu(t[0],t[1]):ou(t):Lo(t)}function gi(t){if(!Te(t))return Aa(t);var n=[];for(var e in j(t))$.call(t,e)&&e!="constructor"&&n.push(e);return n}function Tl(t){if(!it(t))return oc(t);var n=Te(t),e=[];for(var r in t)r=="constructor"&&(n||!$.call(t,r))||e.push(r);return e}function pi(t,n){return t<n}function uu(t,n){var e=-1,r=It(t)?g(t.length):[];return Rn(t,function(s,o,a){r[++e]=n(s,o,a)}),r}function ou(t){var n=Ii(t);return n.length==1&&n[0][2]?zu(n[0][0],n[0][1]):function(e){return e===t||hi(e,t,n)}}function fu(t,n){return Mi(t)&&Wu(n)?zu(on(t),n):function(e){var r=zi(e,t);return r===i&&r===n?Ki(e,t):Se(n,r,q|b)}}function ur(t,n,e,r,s){t!==n&&fi(n,function(o,a){if(s||(s=new tn),it(o))Ol(t,n,a,e,ur,r,s);else{var l=r?r(Ni(t,a),o,a+"",t,n,s):i;l===i&&(l=o),ui(t,a,l)}},Ct)}function Ol(t,n,e,r,s,o,a){var l=Ni(t,e),h=Ni(n,e),v=a.get(h);if(v){ui(t,e,v);return}var w=o?o(l,h,e+"",t,n,a):i,m=w===i;if(m){var y=F(h),O=!y&&Ln(h),N=!y&&!O&&ne(h);w=h,y||O||N?F(l)?w=l:at(l)?w=Lt(l):O?(m=!1,w=xu(h,!0)):N?(m=!1,w=yu(h,!0)):w=[]:Ae(h)||Un(h)?(w=l,Un(l)?w=wo(l):(!it(l)||_n(l))&&(w=Bu(h))):m=!1}m&&(a.set(h,w),s(w,h,r,o,a),a.delete(h)),ui(t,e,w)}function au(t,n){var e=t.length;if(e)return n+=n<0?e:0,dn(n,e)?t[n]:i}function lu(t,n,e){n.length?n=et(n,function(o){return F(o)?function(a){return Pn(a,o.length===1?o[0]:o)}:o}):n=[Mt];var r=-1;n=et(n,Pt(I()));var s=uu(t,function(o,a,l){var h=et(n,function(v){return v(o)});return{criteria:h,index:++r,value:o}});return jf(s,function(o,a){return Bl(o,a,e)})}function Al(t,n){return cu(t,n,function(e,r){return Ki(t,r)})}function cu(t,n,e){for(var r=-1,s=n.length,o={};++r<s;){var a=n[r],l=Pn(t,a);e(l,a)&&Ee(o,On(a,t),l)}return o}function Ll(t){return function(n){return Pn(n,t)}}function di(t,n,e,r){var s=r?kf:Gn,o=-1,a=n.length,l=t;for(t===n&&(n=Lt(n)),e&&(l=et(t,Pt(e)));++o<a;)for(var h=0,v=n[o],w=e?e(v):v;(h=s(l,w,h,r))>-1;)l!==t&&Qe.call(l,h,1),Qe.call(t,h,1);return t}function hu(t,n){for(var e=t?n.length:0,r=e-1;e--;){var s=n[e];if(e==r||s!==o){var o=s;dn(s)?Qe.call(t,s,1):mi(t,s)}}return t}function _i(t,n){return t+je(qs()*(n-t+1))}function Il(t,n,e,r){for(var s=-1,o=ht(ke((n-t)/(e||1)),0),a=g(o);o--;)a[r?o:++s]=t,t+=e;return a}function vi(t,n){var e="";if(!t||n<1||n>bt)return e;do n%2&&(e+=t),n=je(n/2),n&&(t+=t);while(n);return e}function W(t,n){return Di(Ku(t,n,Mt),t+"")}function Cl(t){return Zs(ee(t))}function Ml(t,n){var e=ee(t);return _r(e,Dn(n,0,e.length))}function Ee(t,n,e,r){if(!it(t))return t;n=On(n,t);for(var s=-1,o=n.length,a=o-1,l=t;l!=null&&++s<o;){var h=on(n[s]),v=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(s!=a){var w=l[h];v=r?r(w,h,l):i,v===i&&(v=it(w)?w:dn(n[s+1])?[]:{})}me(l,h,v),l=l[h]}return t}var gu=tr?function(t,n){return tr.set(t,n),t}:Mt,bl=$e?function(t,n){return $e(t,"toString",{configurable:!0,enumerable:!1,value:Gi(n),writable:!0})}:Mt;function Nl(t){return _r(ee(t))}function qt(t,n,e){var r=-1,s=t.length;n<0&&(n=-n>s?0:s+n),e=e>s?s:e,e<0&&(e+=s),s=n>e?0:e-n>>>0,n>>>=0;for(var o=g(s);++r<s;)o[r]=t[r+n];return o}function Dl(t,n){var e;return Rn(t,function(r,s,o){return e=n(r,s,o),!e}),!!e}function or(t,n,e){var r=0,s=t==null?r:t.length;if(typeof n=="number"&&n===n&&s<=Po){for(;r<s;){var o=r+s>>>1,a=t[o];a!==null&&!Ft(a)&&(e?a<=n:a<n)?r=o+1:s=o}return s}return wi(t,n,Mt,e)}function wi(t,n,e,r){var s=0,o=t==null?0:t.length;if(o===0)return 0;n=e(n);for(var a=n!==n,l=n===null,h=Ft(n),v=n===i;s<o;){var w=je((s+o)/2),m=e(t[w]),y=m!==i,O=m===null,N=m===m,B=Ft(m);if(a)var D=r||N;else v?D=N&&(r||y):l?D=N&&y&&(r||!O):h?D=N&&y&&!O&&(r||!B):O||B?D=!1:D=r?m<=n:m<n;D?s=w+1:o=w}return wt(o,Do)}function pu(t,n){for(var e=-1,r=t.length,s=0,o=[];++e<r;){var a=t[e],l=n?n(a):a;if(!e||!nn(l,h)){var h=l;o[s++]=a===0?0:a}}return o}function du(t){return typeof t=="number"?t:Ft(t)?be:+t}function Ht(t){if(typeof t=="string")return t;if(F(t))return et(t,Ht)+"";if(Ft(t))return Js?Js.call(t):"";var n=t+"";return n=="0"&&1/t==-yt?"-0":n}function Tn(t,n,e){var r=-1,s=We,o=t.length,a=!0,l=[],h=l;if(e)a=!1,s=Jr;else if(o>=d){var v=n?null:Yl(t);if(v)return Ke(v);a=!1,s=ge,h=new Nn}else h=n?[]:l;t:for(;++r<o;){var w=t[r],m=n?n(w):w;if(w=e||w!==0?w:0,a&&m===m){for(var y=h.length;y--;)if(h[y]===m)continue t;n&&h.push(m),l.push(w)}else s(h,m,e)||(h!==l&&h.push(m),l.push(w))}return l}function mi(t,n){return n=On(n,t),t=Xu(t,n),t==null||delete t[on(Jt(n))]}function _u(t,n,e,r){return Ee(t,n,e(Pn(t,n)),r)}function fr(t,n,e,r){for(var s=t.length,o=r?s:-1;(r?o--:++o<s)&&n(t[o],o,t););return e?qt(t,r?0:o,r?o+1:s):qt(t,r?o+1:0,r?s:o)}function vu(t,n){var e=t;return e instanceof K&&(e=e.value()),Vr(n,function(r,s){return s.func.apply(s.thisArg,yn([r],s.args))},e)}function xi(t,n,e){var r=t.length;if(r<2)return r?Tn(t[0]):[];for(var s=-1,o=g(r);++s<r;)for(var a=t[s],l=-1;++l<r;)l!=s&&(o[s]=xe(o[s]||a,t[l],n,e));return Tn(vt(o,1),n,e)}function wu(t,n,e){for(var r=-1,s=t.length,o=n.length,a={};++r<s;){var l=r<o?n[r]:i;e(a,t[r],l)}return a}function yi(t){return at(t)?t:[]}function Si(t){return typeof t=="function"?t:Mt}function On(t,n){return F(t)?t:Mi(t,n)?[t]:Ju(Q(t))}var Pl=W;function An(t,n,e){var r=t.length;return e=e===i?r:e,!n&&e>=r?t:qt(t,n,e)}var mu=Sa||function(t){return _t.clearTimeout(t)};function xu(t,n){if(n)return t.slice();var e=t.length,r=zs?zs(e):new t.constructor(e);return t.copy(r),r}function Ei(t){var n=new t.constructor(t.byteLength);return new Ve(n).set(new Ve(t)),n}function Hl(t,n){var e=n?Ei(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function Fl(t){var n=new t.constructor(t.source,rs.exec(t));return n.lastIndex=t.lastIndex,n}function Ul(t){return we?j(we.call(t)):{}}function yu(t,n){var e=n?Ei(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function Su(t,n){if(t!==n){var e=t!==i,r=t===null,s=t===t,o=Ft(t),a=n!==i,l=n===null,h=n===n,v=Ft(n);if(!l&&!v&&!o&&t>n||o&&a&&h&&!l&&!v||r&&a&&h||!e&&h||!s)return 1;if(!r&&!o&&!v&&t<n||v&&e&&s&&!r&&!o||l&&e&&s||!a&&s||!h)return-1}return 0}function Bl(t,n,e){for(var r=-1,s=t.criteria,o=n.criteria,a=s.length,l=e.length;++r<a;){var h=Su(s[r],o[r]);if(h){if(r>=l)return h;var v=e[r];return h*(v=="desc"?-1:1)}}return t.index-n.index}function Eu(t,n,e,r){for(var s=-1,o=t.length,a=e.length,l=-1,h=n.length,v=ht(o-a,0),w=g(h+v),m=!r;++l<h;)w[l]=n[l];for(;++s<a;)(m||s<o)&&(w[e[s]]=t[s]);for(;v--;)w[l++]=t[s++];return w}function Ru(t,n,e,r){for(var s=-1,o=t.length,a=-1,l=e.length,h=-1,v=n.length,w=ht(o-l,0),m=g(w+v),y=!r;++s<w;)m[s]=t[s];for(var O=s;++h<v;)m[O+h]=n[h];for(;++a<l;)(y||s<o)&&(m[O+e[a]]=t[s++]);return m}function Lt(t,n){var e=-1,r=t.length;for(n||(n=g(r));++e<r;)n[e]=t[e];return n}function un(t,n,e,r){var s=!e;e||(e={});for(var o=-1,a=n.length;++o<a;){var l=n[o],h=r?r(e[l],t[l],l,e,t):i;h===i&&(h=t[l]),s?hn(e,l,h):me(e,l,h)}return e}function Wl(t,n){return un(t,Ci(t),n)}function zl(t,n){return un(t,Fu(t),n)}function ar(t,n){return function(e,r){var s=F(e)?qf:al,o=n?n():{};return s(e,t,I(r,2),o)}}function kn(t){return W(function(n,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,a=s>2?e[2]:i;for(o=t.length>3&&typeof o=="function"?(s--,o):i,a&&Et(e[0],e[1],a)&&(o=s<3?i:o,s=1),n=j(n);++r<s;){var l=e[r];l&&t(n,l,r,o)}return n})}function Tu(t,n){return function(e,r){if(e==null)return e;if(!It(e))return t(e,r);for(var s=e.length,o=n?s:-1,a=j(e);(n?o--:++o<s)&&r(a[o],o,a)!==!1;);return e}}function Ou(t){return function(n,e,r){for(var s=-1,o=j(n),a=r(n),l=a.length;l--;){var h=a[t?l:++s];if(e(o[h],h,o)===!1)break}return n}}function Kl(t,n,e){var r=n&J,s=Re(t);function o(){var a=this&&this!==_t&&this instanceof o?s:t;return a.apply(r?e:this,arguments)}return o}function Au(t){return function(n){n=Q(n);var e=Yn(n)?jt(n):i,r=e?e[0]:n.charAt(0),s=e?An(e,1).join(""):n.slice(1);return r[t]()+s}}function jn(t){return function(n){return Vr(Oo(To(n).replace(bf,"")),t,"")}}function Re(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=$n(t.prototype),r=t.apply(e,n);return it(r)?r:e}}function Xl(t,n,e){var r=Re(t);function s(){for(var o=arguments.length,a=g(o),l=o,h=te(s);l--;)a[l]=arguments[l];var v=o<3&&a[0]!==h&&a[o-1]!==h?[]:Sn(a,h);if(o-=v.length,o<e)return bu(t,n,lr,s.placeholder,i,a,v,i,i,e-o);var w=this&&this!==_t&&this instanceof s?r:t;return Dt(w,this,a)}return s}function Lu(t){return function(n,e,r){var s=j(n);if(!It(n)){var o=I(e,3);n=pt(n),e=function(l){return o(s[l],l,s)}}var a=t(n,e,r);return a>-1?s[o?n[a]:a]:i}}function Iu(t){return pn(function(n){var e=n.length,r=e,s=Gt.prototype.thru;for(t&&n.reverse();r--;){var o=n[r];if(typeof o!="function")throw new Xt(x);if(s&&!a&&pr(o)=="wrapper")var a=new Gt([],!0)}for(r=a?r:e;++r<e;){o=n[r];var l=pr(o),h=l=="wrapper"?Li(o):i;h&&bi(h[0])&&h[1]==(At|Tt|Ot|mn)&&!h[4].length&&h[9]==1?a=a[pr(h[0])].apply(a,h[3]):a=o.length==1&&bi(o)?a[l]():a.thru(o)}return function(){var v=arguments,w=v[0];if(a&&v.length==1&&F(w))return a.plant(w).value();for(var m=0,y=e?n[m].apply(this,v):w;++m<e;)y=n[m].call(this,y);return y}})}function lr(t,n,e,r,s,o,a,l,h,v){var w=n&At,m=n&J,y=n&ft,O=n&(Tt|Zt),N=n&se,B=y?i:Re(t);function D(){for(var z=arguments.length,Y=g(z),Ut=z;Ut--;)Y[Ut]=arguments[Ut];if(O)var Rt=te(D),Bt=na(Y,Rt);if(r&&(Y=Eu(Y,r,s,O)),o&&(Y=Ru(Y,o,a,O)),z-=Bt,O&&z<v){var lt=Sn(Y,Rt);return bu(t,n,lr,D.placeholder,e,Y,lt,l,h,v-z)}var en=m?e:this,wn=y?en[t]:t;return z=Y.length,l?Y=ac(Y,l):N&&z>1&&Y.reverse(),w&&h<z&&(Y.length=h),this&&this!==_t&&this instanceof D&&(wn=B||Re(wn)),wn.apply(en,Y)}return D}function Cu(t,n){return function(e,r){return vl(e,t,n(r),{})}}function cr(t,n){return function(e,r){var s;if(e===i&&r===i)return n;if(e!==i&&(s=e),r!==i){if(s===i)return r;typeof e=="string"||typeof r=="string"?(e=Ht(e),r=Ht(r)):(e=du(e),r=du(r)),s=t(e,r)}return s}}function Ri(t){return pn(function(n){return n=et(n,Pt(I())),W(function(e){var r=this;return t(n,function(s){return Dt(s,r,e)})})})}function hr(t,n){n=n===i?" ":Ht(n);var e=n.length;if(e<2)return e?vi(n,t):n;var r=vi(n,ke(t/qn(n)));return Yn(n)?An(jt(r),0,t).join(""):r.slice(0,t)}function Gl(t,n,e,r){var s=n&J,o=Re(t);function a(){for(var l=-1,h=arguments.length,v=-1,w=r.length,m=g(w+h),y=this&&this!==_t&&this instanceof a?o:t;++v<w;)m[v]=r[v];for(;h--;)m[v++]=arguments[++l];return Dt(y,s?e:this,m)}return a}function Mu(t){return function(n,e,r){return r&&typeof r!="number"&&Et(n,e,r)&&(e=r=i),n=vn(n),e===i?(e=n,n=0):e=vn(e),r=r===i?n<e?1:-1:vn(r),Il(n,e,r,t)}}function gr(t){return function(n,e){return typeof n=="string"&&typeof e=="string"||(n=Vt(n),e=Vt(e)),t(n,e)}}function bu(t,n,e,r,s,o,a,l,h,v){var w=n&Tt,m=w?a:i,y=w?i:a,O=w?o:i,N=w?i:o;n|=w?Ot:Qt,n&=~(w?Qt:Ot),n&Wn||(n&=~(J|ft));var B=[t,n,s,O,m,N,y,l,h,v],D=e.apply(i,B);return bi(t)&&Gu(D,B),D.placeholder=r,Yu(D,t,n)}function Ti(t){var n=ct[t];return function(e,r){if(e=Vt(e),r=r==null?0:wt(U(r),292),r&&Ys(e)){var s=(Q(e)+"e").split("e"),o=n(s[0]+"e"+(+s[1]+r));return s=(Q(o)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return n(e)}}var Yl=Zn&&1/Ke(new Zn([,-0]))[1]==yt?function(t){return new Zn(t)}:Ji;function Nu(t){return function(n){var e=mt(n);return e==$t?ni(n):e==kt?fa(n):ta(n,t(n))}}function gn(t,n,e,r,s,o,a,l){var h=n&ft;if(!h&&typeof t!="function")throw new Xt(x);var v=r?r.length:0;if(v||(n&=~(Ot|Qt),r=s=i),a=a===i?a:ht(U(a),0),l=l===i?l:U(l),v-=s?s.length:0,n&Qt){var w=r,m=s;r=s=i}var y=h?i:Li(t),O=[t,n,e,r,s,w,m,o,a,l];if(y&&uc(O,y),t=O[0],n=O[1],e=O[2],r=O[3],s=O[4],l=O[9]=O[9]===i?h?0:t.length:ht(O[9]-v,0),!l&&n&(Tt|Zt)&&(n&=~(Tt|Zt)),!n||n==J)var N=Kl(t,n,e);else n==Tt||n==Zt?N=Xl(t,n,l):(n==Ot||n==(J|Ot))&&!s.length?N=Gl(t,n,e,r):N=lr.apply(i,O);var B=y?gu:Gu;return Yu(B(N,O),t,n)}function Du(t,n,e,r){return t===i||nn(t,Vn[e])&&!$.call(r,e)?n:t}function Pu(t,n,e,r,s,o){return it(t)&&it(n)&&(o.set(n,t),ur(t,n,i,Pu,o),o.delete(n)),t}function ql(t){return Ae(t)?i:t}function Hu(t,n,e,r,s,o){var a=e&q,l=t.length,h=n.length;if(l!=h&&!(a&&h>l))return!1;var v=o.get(t),w=o.get(n);if(v&&w)return v==n&&w==t;var m=-1,y=!0,O=e&b?new Nn:i;for(o.set(t,n),o.set(n,t);++m<l;){var N=t[m],B=n[m];if(r)var D=a?r(B,N,m,n,t,o):r(N,B,m,t,n,o);if(D!==i){if(D)continue;y=!1;break}if(O){if(!Zr(n,function(z,Y){if(!ge(O,Y)&&(N===z||s(N,z,e,r,o)))return O.push(Y)})){y=!1;break}}else if(!(N===B||s(N,B,e,r,o))){y=!1;break}}return o.delete(t),o.delete(n),y}function Jl(t,n,e,r,s,o,a){switch(e){case Kn:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case he:return!(t.byteLength!=n.byteLength||!o(new Ve(t),new Ve(n)));case ue:case oe:case fe:return nn(+t,+n);case De:return t.name==n.name&&t.message==n.message;case ae:case le:return t==n+"";case $t:var l=ni;case kt:var h=r&q;if(l||(l=Ke),t.size!=n.size&&!h)return!1;var v=a.get(t);if(v)return v==n;r|=b,a.set(t,n);var w=Hu(l(t),l(n),r,s,o,a);return a.delete(t),w;case He:if(we)return we.call(t)==we.call(n)}return!1}function Vl(t,n,e,r,s,o){var a=e&q,l=Oi(t),h=l.length,v=Oi(n),w=v.length;if(h!=w&&!a)return!1;for(var m=h;m--;){var y=l[m];if(!(a?y in n:$.call(n,y)))return!1}var O=o.get(t),N=o.get(n);if(O&&N)return O==n&&N==t;var B=!0;o.set(t,n),o.set(n,t);for(var D=a;++m<h;){y=l[m];var z=t[y],Y=n[y];if(r)var Ut=a?r(Y,z,y,n,t,o):r(z,Y,y,t,n,o);if(!(Ut===i?z===Y||s(z,Y,e,r,o):Ut)){B=!1;break}D||(D=y=="constructor")}if(B&&!D){var Rt=t.constructor,Bt=n.constructor;Rt!=Bt&&"constructor"in t&&"constructor"in n&&!(typeof Rt=="function"&&Rt instanceof Rt&&typeof Bt=="function"&&Bt instanceof Bt)&&(B=!1)}return o.delete(t),o.delete(n),B}function pn(t){return Di(Ku(t,i,$u),t+"")}function Oi(t){return eu(t,pt,Ci)}function Ai(t){return eu(t,Ct,Fu)}var Li=tr?function(t){return tr.get(t)}:Ji;function pr(t){for(var n=t.name+"",e=Qn[n],r=$.call(Qn,n)?e.length:0;r--;){var s=e[r],o=s.func;if(o==null||o==t)return s.name}return n}function te(t){var n=$.call(u,"placeholder")?u:t;return n.placeholder}function I(){var t=u.iteratee||Yi;return t=t===Yi?su:t,arguments.length?t(arguments[0],arguments[1]):t}function dr(t,n){var e=t.__data__;return ec(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Ii(t){for(var n=pt(t),e=n.length;e--;){var r=n[e],s=t[r];n[e]=[r,s,Wu(s)]}return n}function Hn(t,n){var e=sa(t,n);return iu(e)?e:i}function Zl(t){var n=$.call(t,Mn),e=t[Mn];try{t[Mn]=i;var r=!0}catch{}var s=qe.call(t);return r&&(n?t[Mn]=e:delete t[Mn]),s}var Ci=ri?function(t){return t==null?[]:(t=j(t),xn(ri(t),function(n){return Xs.call(t,n)}))}:Vi,Fu=ri?function(t){for(var n=[];t;)yn(n,Ci(t)),t=Ze(t);return n}:Vi,mt=St;(ii&&mt(new ii(new ArrayBuffer(1)))!=Kn||de&&mt(new de)!=$t||si&&mt(si.resolve())!=ji||Zn&&mt(new Zn)!=kt||_e&&mt(new _e)!=ce)&&(mt=function(t){var n=St(t),e=n==an?t.constructor:i,r=e?Fn(e):"";if(r)switch(r){case Ma:return Kn;case ba:return $t;case Na:return ji;case Da:return kt;case Pa:return ce}return n});function Ql(t,n,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":n-=a;break;case"take":n=wt(n,t+a);break;case"takeRight":t=ht(t,n-a);break}}return{start:t,end:n}}function $l(t){var n=t.match(ef);return n?n[1].split(rf):[]}function Uu(t,n,e){n=On(n,t);for(var r=-1,s=n.length,o=!1;++r<s;){var a=on(n[r]);if(!(o=t!=null&&e(t,a)))break;t=t[a]}return o||++r!=s?o:(s=t==null?0:t.length,!!s&&Sr(s)&&dn(a,s)&&(F(t)||Un(t)))}function kl(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&$.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Bu(t){return typeof t.constructor=="function"&&!Te(t)?$n(Ze(t)):{}}function jl(t,n,e){var r=t.constructor;switch(n){case he:return Ei(t);case ue:case oe:return new r(+t);case Kn:return Hl(t,e);case Ir:case Cr:case Mr:case br:case Nr:case Dr:case Pr:case Hr:case Fr:return yu(t,e);case $t:return new r;case fe:case le:return new r(t);case ae:return Fl(t);case kt:return new r;case He:return Ul(t)}}function tc(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(nf,`{
/* [wrapped with `+n+`] */
`)}function nc(t){return F(t)||Un(t)||!!(Gs&&t&&t[Gs])}function dn(t,n){var e=typeof t;return n=n??bt,!!n&&(e=="number"||e!="symbol"&&gf.test(t))&&t>-1&&t%1==0&&t<n}function Et(t,n,e){if(!it(e))return!1;var r=typeof n;return(r=="number"?It(e)&&dn(n,e.length):r=="string"&&n in e)?nn(e[n],t):!1}function Mi(t,n){if(F(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Ft(t)?!0:$o.test(t)||!Qo.test(t)||n!=null&&t in j(n)}function ec(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function bi(t){var n=pr(t),e=u[n];if(typeof e!="function"||!(n in K.prototype))return!1;if(t===e)return!0;var r=Li(e);return!!r&&t===r[0]}function rc(t){return!!Ws&&Ws in t}var ic=Ge?_n:Zi;function Te(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Vn;return t===e}function Wu(t){return t===t&&!it(t)}function zu(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==i||t in j(e))}}function sc(t){var n=xr(t,function(r){return e.size===P&&e.clear(),r}),e=n.cache;return n}function uc(t,n){var e=t[1],r=n[1],s=e|r,o=s<(J|ft|At),a=r==At&&e==Tt||r==At&&e==mn&&t[7].length<=n[8]||r==(At|mn)&&n[7].length<=n[8]&&e==Tt;if(!(o||a))return t;r&J&&(t[2]=n[2],s|=e&J?0:Wn);var l=n[3];if(l){var h=t[3];t[3]=h?Eu(h,l,n[4]):l,t[4]=h?Sn(t[3],A):n[4]}return l=n[5],l&&(h=t[5],t[5]=h?Ru(h,l,n[6]):l,t[6]=h?Sn(t[5],A):n[6]),l=n[7],l&&(t[7]=l),r&At&&(t[8]=t[8]==null?n[8]:wt(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=s,t}function oc(t){var n=[];if(t!=null)for(var e in j(t))n.push(e);return n}function fc(t){return qe.call(t)}function Ku(t,n,e){return n=ht(n===i?t.length-1:n,0),function(){for(var r=arguments,s=-1,o=ht(r.length-n,0),a=g(o);++s<o;)a[s]=r[n+s];s=-1;for(var l=g(n+1);++s<n;)l[s]=r[s];return l[n]=e(a),Dt(t,this,l)}}function Xu(t,n){return n.length<2?t:Pn(t,qt(n,0,-1))}function ac(t,n){for(var e=t.length,r=wt(n.length,e),s=Lt(t);r--;){var o=n[r];t[r]=dn(o,e)?s[o]:i}return t}function Ni(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Gu=qu(gu),Oe=Ra||function(t,n){return _t.setTimeout(t,n)},Di=qu(bl);function Yu(t,n,e){var r=n+"";return Di(t,tc(r,lc($l(r),e)))}function qu(t){var n=0,e=0;return function(){var r=La(),s=V-(r-e);if(e=r,s>0){if(++n>=S)return arguments[0]}else n=0;return t.apply(i,arguments)}}function _r(t,n){var e=-1,r=t.length,s=r-1;for(n=n===i?r:n;++e<n;){var o=_i(e,s),a=t[o];t[o]=t[e],t[e]=a}return t.length=n,t}var Ju=sc(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(ko,function(e,r,s,o){n.push(s?o.replace(of,"$1"):r||e)}),n});function on(t){if(typeof t=="string"||Ft(t))return t;var n=t+"";return n=="0"&&1/t==-yt?"-0":n}function Fn(t){if(t!=null){try{return Ye.call(t)}catch{}try{return t+""}catch{}}return""}function lc(t,n){return Kt(Ho,function(e){var r="_."+e[0];n&e[1]&&!We(t,r)&&t.push(r)}),t.sort()}function Vu(t){if(t instanceof K)return t.clone();var n=new Gt(t.__wrapped__,t.__chain__);return n.__actions__=Lt(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function cc(t,n,e){(e?Et(t,n,e):n===i)?n=1:n=ht(U(n),0);var r=t==null?0:t.length;if(!r||n<1)return[];for(var s=0,o=0,a=g(ke(r/n));s<r;)a[o++]=qt(t,s,s+=n);return a}function hc(t){for(var n=-1,e=t==null?0:t.length,r=0,s=[];++n<e;){var o=t[n];o&&(s[r++]=o)}return s}function gc(){var t=arguments.length;if(!t)return[];for(var n=g(t-1),e=arguments[0],r=t;r--;)n[r-1]=arguments[r];return yn(F(e)?Lt(e):[e],vt(n,1))}var pc=W(function(t,n){return at(t)?xe(t,vt(n,1,at,!0)):[]}),dc=W(function(t,n){var e=Jt(n);return at(e)&&(e=i),at(t)?xe(t,vt(n,1,at,!0),I(e,2)):[]}),_c=W(function(t,n){var e=Jt(n);return at(e)&&(e=i),at(t)?xe(t,vt(n,1,at,!0),i,e):[]});function vc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:U(n),qt(t,n<0?0:n,r)):[]}function wc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:U(n),n=r-n,qt(t,0,n<0?0:n)):[]}function mc(t,n){return t&&t.length?fr(t,I(n,3),!0,!0):[]}function xc(t,n){return t&&t.length?fr(t,I(n,3),!0):[]}function yc(t,n,e,r){var s=t==null?0:t.length;return s?(e&&typeof e!="number"&&Et(t,n,e)&&(e=0,r=s),gl(t,n,e,r)):[]}function Zu(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=e==null?0:U(e);return s<0&&(s=ht(r+s,0)),ze(t,I(n,3),s)}function Qu(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=r-1;return e!==i&&(s=U(e),s=e<0?ht(r+s,0):wt(s,r-1)),ze(t,I(n,3),s,!0)}function $u(t){var n=t==null?0:t.length;return n?vt(t,1):[]}function Sc(t){var n=t==null?0:t.length;return n?vt(t,yt):[]}function Ec(t,n){var e=t==null?0:t.length;return e?(n=n===i?1:U(n),vt(t,n)):[]}function Rc(t){for(var n=-1,e=t==null?0:t.length,r={};++n<e;){var s=t[n];r[s[0]]=s[1]}return r}function ku(t){return t&&t.length?t[0]:i}function Tc(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=e==null?0:U(e);return s<0&&(s=ht(r+s,0)),Gn(t,n,s)}function Oc(t){var n=t==null?0:t.length;return n?qt(t,0,-1):[]}var Ac=W(function(t){var n=et(t,yi);return n.length&&n[0]===t[0]?ci(n):[]}),Lc=W(function(t){var n=Jt(t),e=et(t,yi);return n===Jt(e)?n=i:e.pop(),e.length&&e[0]===t[0]?ci(e,I(n,2)):[]}),Ic=W(function(t){var n=Jt(t),e=et(t,yi);return n=typeof n=="function"?n:i,n&&e.pop(),e.length&&e[0]===t[0]?ci(e,i,n):[]});function Cc(t,n){return t==null?"":Oa.call(t,n)}function Jt(t){var n=t==null?0:t.length;return n?t[n-1]:i}function Mc(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var s=r;return e!==i&&(s=U(e),s=s<0?ht(r+s,0):wt(s,r-1)),n===n?la(t,n,s):ze(t,bs,s,!0)}function bc(t,n){return t&&t.length?au(t,U(n)):i}var Nc=W(ju);function ju(t,n){return t&&t.length&&n&&n.length?di(t,n):t}function Dc(t,n,e){return t&&t.length&&n&&n.length?di(t,n,I(e,2)):t}function Pc(t,n,e){return t&&t.length&&n&&n.length?di(t,n,i,e):t}var Hc=pn(function(t,n){var e=t==null?0:t.length,r=oi(t,n);return hu(t,et(n,function(s){return dn(s,e)?+s:s}).sort(Su)),r});function Fc(t,n){var e=[];if(!(t&&t.length))return e;var r=-1,s=[],o=t.length;for(n=I(n,3);++r<o;){var a=t[r];n(a,r,t)&&(e.push(a),s.push(r))}return hu(t,s),e}function Pi(t){return t==null?t:Ca.call(t)}function Uc(t,n,e){var r=t==null?0:t.length;return r?(e&&typeof e!="number"&&Et(t,n,e)?(n=0,e=r):(n=n==null?0:U(n),e=e===i?r:U(e)),qt(t,n,e)):[]}function Bc(t,n){return or(t,n)}function Wc(t,n,e){return wi(t,n,I(e,2))}function zc(t,n){var e=t==null?0:t.length;if(e){var r=or(t,n);if(r<e&&nn(t[r],n))return r}return-1}function Kc(t,n){return or(t,n,!0)}function Xc(t,n,e){return wi(t,n,I(e,2),!0)}function Gc(t,n){var e=t==null?0:t.length;if(e){var r=or(t,n,!0)-1;if(nn(t[r],n))return r}return-1}function Yc(t){return t&&t.length?pu(t):[]}function qc(t,n){return t&&t.length?pu(t,I(n,2)):[]}function Jc(t){var n=t==null?0:t.length;return n?qt(t,1,n):[]}function Vc(t,n,e){return t&&t.length?(n=e||n===i?1:U(n),qt(t,0,n<0?0:n)):[]}function Zc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:U(n),n=r-n,qt(t,n<0?0:n,r)):[]}function Qc(t,n){return t&&t.length?fr(t,I(n,3),!1,!0):[]}function $c(t,n){return t&&t.length?fr(t,I(n,3)):[]}var kc=W(function(t){return Tn(vt(t,1,at,!0))}),jc=W(function(t){var n=Jt(t);return at(n)&&(n=i),Tn(vt(t,1,at,!0),I(n,2))}),th=W(function(t){var n=Jt(t);return n=typeof n=="function"?n:i,Tn(vt(t,1,at,!0),i,n)});function nh(t){return t&&t.length?Tn(t):[]}function eh(t,n){return t&&t.length?Tn(t,I(n,2)):[]}function rh(t,n){return n=typeof n=="function"?n:i,t&&t.length?Tn(t,i,n):[]}function Hi(t){if(!(t&&t.length))return[];var n=0;return t=xn(t,function(e){if(at(e))return n=ht(e.length,n),!0}),jr(n,function(e){return et(t,Qr(e))})}function to(t,n){if(!(t&&t.length))return[];var e=Hi(t);return n==null?e:et(e,function(r){return Dt(n,i,r)})}var ih=W(function(t,n){return at(t)?xe(t,n):[]}),sh=W(function(t){return xi(xn(t,at))}),uh=W(function(t){var n=Jt(t);return at(n)&&(n=i),xi(xn(t,at),I(n,2))}),oh=W(function(t){var n=Jt(t);return n=typeof n=="function"?n:i,xi(xn(t,at),i,n)}),fh=W(Hi);function ah(t,n){return wu(t||[],n||[],me)}function lh(t,n){return wu(t||[],n||[],Ee)}var ch=W(function(t){var n=t.length,e=n>1?t[n-1]:i;return e=typeof e=="function"?(t.pop(),e):i,to(t,e)});function no(t){var n=u(t);return n.__chain__=!0,n}function hh(t,n){return n(t),t}function vr(t,n){return n(t)}var gh=pn(function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,s=function(o){return oi(o,t)};return n>1||this.__actions__.length||!(r instanceof K)||!dn(e)?this.thru(s):(r=r.slice(e,+e+(n?1:0)),r.__actions__.push({func:vr,args:[s],thisArg:i}),new Gt(r,this.__chain__).thru(function(o){return n&&!o.length&&o.push(i),o}))});function ph(){return no(this)}function dh(){return new Gt(this.value(),this.__chain__)}function _h(){this.__values__===i&&(this.__values__=_o(this.value()));var t=this.__index__>=this.__values__.length,n=t?i:this.__values__[this.__index__++];return{done:t,value:n}}function vh(){return this}function wh(t){for(var n,e=this;e instanceof er;){var r=Vu(e);r.__index__=0,r.__values__=i,n?s.__wrapped__=r:n=r;var s=r;e=e.__wrapped__}return s.__wrapped__=t,n}function mh(){var t=this.__wrapped__;if(t instanceof K){var n=t;return this.__actions__.length&&(n=new K(this)),n=n.reverse(),n.__actions__.push({func:vr,args:[Pi],thisArg:i}),new Gt(n,this.__chain__)}return this.thru(Pi)}function xh(){return vu(this.__wrapped__,this.__actions__)}var yh=ar(function(t,n,e){$.call(t,e)?++t[e]:hn(t,e,1)});function Sh(t,n,e){var r=F(t)?Cs:hl;return e&&Et(t,n,e)&&(n=i),r(t,I(n,3))}function Eh(t,n){var e=F(t)?xn:tu;return e(t,I(n,3))}var Rh=Lu(Zu),Th=Lu(Qu);function Oh(t,n){return vt(wr(t,n),1)}function Ah(t,n){return vt(wr(t,n),yt)}function Lh(t,n,e){return e=e===i?1:U(e),vt(wr(t,n),e)}function eo(t,n){var e=F(t)?Kt:Rn;return e(t,I(n,3))}function ro(t,n){var e=F(t)?Jf:js;return e(t,I(n,3))}var Ih=ar(function(t,n,e){$.call(t,e)?t[e].push(n):hn(t,e,[n])});function Ch(t,n,e,r){t=It(t)?t:ee(t),e=e&&!r?U(e):0;var s=t.length;return e<0&&(e=ht(s+e,0)),Er(t)?e<=s&&t.indexOf(n,e)>-1:!!s&&Gn(t,n,e)>-1}var Mh=W(function(t,n,e){var r=-1,s=typeof n=="function",o=It(t)?g(t.length):[];return Rn(t,function(a){o[++r]=s?Dt(n,a,e):ye(a,n,e)}),o}),bh=ar(function(t,n,e){hn(t,e,n)});function wr(t,n){var e=F(t)?et:uu;return e(t,I(n,3))}function Nh(t,n,e,r){return t==null?[]:(F(n)||(n=n==null?[]:[n]),e=r?i:e,F(e)||(e=e==null?[]:[e]),lu(t,n,e))}var Dh=ar(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]});function Ph(t,n,e){var r=F(t)?Vr:Ds,s=arguments.length<3;return r(t,I(n,4),e,s,Rn)}function Hh(t,n,e){var r=F(t)?Vf:Ds,s=arguments.length<3;return r(t,I(n,4),e,s,js)}function Fh(t,n){var e=F(t)?xn:tu;return e(t,yr(I(n,3)))}function Uh(t){var n=F(t)?Zs:Cl;return n(t)}function Bh(t,n,e){(e?Et(t,n,e):n===i)?n=1:n=U(n);var r=F(t)?ol:Ml;return r(t,n)}function Wh(t){var n=F(t)?fl:Nl;return n(t)}function zh(t){if(t==null)return 0;if(It(t))return Er(t)?qn(t):t.length;var n=mt(t);return n==$t||n==kt?t.size:gi(t).length}function Kh(t,n,e){var r=F(t)?Zr:Dl;return e&&Et(t,n,e)&&(n=i),r(t,I(n,3))}var Xh=W(function(t,n){if(t==null)return[];var e=n.length;return e>1&&Et(t,n[0],n[1])?n=[]:e>2&&Et(n[0],n[1],n[2])&&(n=[n[0]]),lu(t,vt(n,1),[])}),mr=Ea||function(){return _t.Date.now()};function Gh(t,n){if(typeof n!="function")throw new Xt(x);return t=U(t),function(){if(--t<1)return n.apply(this,arguments)}}function io(t,n,e){return n=e?i:n,n=t&&n==null?t.length:n,gn(t,At,i,i,i,i,n)}function so(t,n){var e;if(typeof n!="function")throw new Xt(x);return t=U(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var Fi=W(function(t,n,e){var r=J;if(e.length){var s=Sn(e,te(Fi));r|=Ot}return gn(t,r,n,e,s)}),uo=W(function(t,n,e){var r=J|ft;if(e.length){var s=Sn(e,te(uo));r|=Ot}return gn(n,r,t,e,s)});function oo(t,n,e){n=e?i:n;var r=gn(t,Tt,i,i,i,i,i,n);return r.placeholder=oo.placeholder,r}function fo(t,n,e){n=e?i:n;var r=gn(t,Zt,i,i,i,i,i,n);return r.placeholder=fo.placeholder,r}function ao(t,n,e){var r,s,o,a,l,h,v=0,w=!1,m=!1,y=!0;if(typeof t!="function")throw new Xt(x);n=Vt(n)||0,it(e)&&(w=!!e.leading,m="maxWait"in e,o=m?ht(Vt(e.maxWait)||0,n):o,y="trailing"in e?!!e.trailing:y);function O(lt){var en=r,wn=s;return r=s=i,v=lt,a=t.apply(wn,en),a}function N(lt){return v=lt,l=Oe(z,n),w?O(lt):a}function B(lt){var en=lt-h,wn=lt-v,Io=n-en;return m?wt(Io,o-wn):Io}function D(lt){var en=lt-h,wn=lt-v;return h===i||en>=n||en<0||m&&wn>=o}function z(){var lt=mr();if(D(lt))return Y(lt);l=Oe(z,B(lt))}function Y(lt){return l=i,y&&r?O(lt):(r=s=i,a)}function Ut(){l!==i&&mu(l),v=0,r=h=s=l=i}function Rt(){return l===i?a:Y(mr())}function Bt(){var lt=mr(),en=D(lt);if(r=arguments,s=this,h=lt,en){if(l===i)return N(h);if(m)return mu(l),l=Oe(z,n),O(h)}return l===i&&(l=Oe(z,n)),a}return Bt.cancel=Ut,Bt.flush=Rt,Bt}var Yh=W(function(t,n){return ks(t,1,n)}),qh=W(function(t,n,e){return ks(t,Vt(n)||0,e)});function Jh(t){return gn(t,se)}function xr(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Xt(x);var e=function(){var r=arguments,s=n?n.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var a=t.apply(this,r);return e.cache=o.set(s,a)||o,a};return e.cache=new(xr.Cache||cn),e}xr.Cache=cn;function yr(t){if(typeof t!="function")throw new Xt(x);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Vh(t){return so(2,t)}var Zh=Pl(function(t,n){n=n.length==1&&F(n[0])?et(n[0],Pt(I())):et(vt(n,1),Pt(I()));var e=n.length;return W(function(r){for(var s=-1,o=wt(r.length,e);++s<o;)r[s]=n[s].call(this,r[s]);return Dt(t,this,r)})}),Ui=W(function(t,n){var e=Sn(n,te(Ui));return gn(t,Ot,i,n,e)}),lo=W(function(t,n){var e=Sn(n,te(lo));return gn(t,Qt,i,n,e)}),Qh=pn(function(t,n){return gn(t,mn,i,i,i,n)});function $h(t,n){if(typeof t!="function")throw new Xt(x);return n=n===i?n:U(n),W(t,n)}function kh(t,n){if(typeof t!="function")throw new Xt(x);return n=n==null?0:ht(U(n),0),W(function(e){var r=e[n],s=An(e,0,n);return r&&yn(s,r),Dt(t,this,s)})}function jh(t,n,e){var r=!0,s=!0;if(typeof t!="function")throw new Xt(x);return it(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),ao(t,n,{leading:r,maxWait:n,trailing:s})}function tg(t){return io(t,1)}function ng(t,n){return Ui(Si(n),t)}function eg(){if(!arguments.length)return[];var t=arguments[0];return F(t)?t:[t]}function rg(t){return Yt(t,rt)}function ig(t,n){return n=typeof n=="function"?n:i,Yt(t,rt,n)}function sg(t){return Yt(t,T|rt)}function ug(t,n){return n=typeof n=="function"?n:i,Yt(t,T|rt,n)}function og(t,n){return n==null||$s(t,n,pt(n))}function nn(t,n){return t===n||t!==t&&n!==n}var fg=gr(li),ag=gr(function(t,n){return t>=n}),Un=ru(function(){return arguments}())?ru:function(t){return ot(t)&&$.call(t,"callee")&&!Xs.call(t,"callee")},F=g.isArray,lg=Rs?Pt(Rs):wl;function It(t){return t!=null&&Sr(t.length)&&!_n(t)}function at(t){return ot(t)&&It(t)}function cg(t){return t===!0||t===!1||ot(t)&&St(t)==ue}var Ln=Ta||Zi,hg=Ts?Pt(Ts):ml;function gg(t){return ot(t)&&t.nodeType===1&&!Ae(t)}function pg(t){if(t==null)return!0;if(It(t)&&(F(t)||typeof t=="string"||typeof t.splice=="function"||Ln(t)||ne(t)||Un(t)))return!t.length;var n=mt(t);if(n==$t||n==kt)return!t.size;if(Te(t))return!gi(t).length;for(var e in t)if($.call(t,e))return!1;return!0}function dg(t,n){return Se(t,n)}function _g(t,n,e){e=typeof e=="function"?e:i;var r=e?e(t,n):i;return r===i?Se(t,n,i,e):!!r}function Bi(t){if(!ot(t))return!1;var n=St(t);return n==De||n==Uo||typeof t.message=="string"&&typeof t.name=="string"&&!Ae(t)}function vg(t){return typeof t=="number"&&Ys(t)}function _n(t){if(!it(t))return!1;var n=St(t);return n==Pe||n==ki||n==Fo||n==Wo}function co(t){return typeof t=="number"&&t==U(t)}function Sr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bt}function it(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function ot(t){return t!=null&&typeof t=="object"}var ho=Os?Pt(Os):yl;function wg(t,n){return t===n||hi(t,n,Ii(n))}function mg(t,n,e){return e=typeof e=="function"?e:i,hi(t,n,Ii(n),e)}function xg(t){return go(t)&&t!=+t}function yg(t){if(ic(t))throw new H(E);return iu(t)}function Sg(t){return t===null}function Eg(t){return t==null}function go(t){return typeof t=="number"||ot(t)&&St(t)==fe}function Ae(t){if(!ot(t)||St(t)!=an)return!1;var n=Ze(t);if(n===null)return!0;var e=$.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Ye.call(e)==ma}var Wi=As?Pt(As):Sl;function Rg(t){return co(t)&&t>=-bt&&t<=bt}var po=Ls?Pt(Ls):El;function Er(t){return typeof t=="string"||!F(t)&&ot(t)&&St(t)==le}function Ft(t){return typeof t=="symbol"||ot(t)&&St(t)==He}var ne=Is?Pt(Is):Rl;function Tg(t){return t===i}function Og(t){return ot(t)&&mt(t)==ce}function Ag(t){return ot(t)&&St(t)==Ko}var Lg=gr(pi),Ig=gr(function(t,n){return t<=n});function _o(t){if(!t)return[];if(It(t))return Er(t)?jt(t):Lt(t);if(pe&&t[pe])return oa(t[pe]());var n=mt(t),e=n==$t?ni:n==kt?Ke:ee;return e(t)}function vn(t){if(!t)return t===0?t:0;if(t=Vt(t),t===yt||t===-yt){var n=t<0?-1:1;return n*Nt}return t===t?t:0}function U(t){var n=vn(t),e=n%1;return n===n?e?n-e:n:0}function vo(t){return t?Dn(U(t),0,rn):0}function Vt(t){if(typeof t=="number")return t;if(Ft(t))return be;if(it(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=it(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Ps(t);var e=lf.test(t);return e||hf.test(t)?Gf(t.slice(2),e?2:8):af.test(t)?be:+t}function wo(t){return un(t,Ct(t))}function Cg(t){return t?Dn(U(t),-bt,bt):t===0?t:0}function Q(t){return t==null?"":Ht(t)}var Mg=kn(function(t,n){if(Te(n)||It(n)){un(n,pt(n),t);return}for(var e in n)$.call(n,e)&&me(t,e,n[e])}),mo=kn(function(t,n){un(n,Ct(n),t)}),Rr=kn(function(t,n,e,r){un(n,Ct(n),t,r)}),bg=kn(function(t,n,e,r){un(n,pt(n),t,r)}),Ng=pn(oi);function Dg(t,n){var e=$n(t);return n==null?e:Qs(e,n)}var Pg=W(function(t,n){t=j(t);var e=-1,r=n.length,s=r>2?n[2]:i;for(s&&Et(n[0],n[1],s)&&(r=1);++e<r;)for(var o=n[e],a=Ct(o),l=-1,h=a.length;++l<h;){var v=a[l],w=t[v];(w===i||nn(w,Vn[v])&&!$.call(t,v))&&(t[v]=o[v])}return t}),Hg=W(function(t){return t.push(i,Pu),Dt(xo,i,t)});function Fg(t,n){return Ms(t,I(n,3),sn)}function Ug(t,n){return Ms(t,I(n,3),ai)}function Bg(t,n){return t==null?t:fi(t,I(n,3),Ct)}function Wg(t,n){return t==null?t:nu(t,I(n,3),Ct)}function zg(t,n){return t&&sn(t,I(n,3))}function Kg(t,n){return t&&ai(t,I(n,3))}function Xg(t){return t==null?[]:sr(t,pt(t))}function Gg(t){return t==null?[]:sr(t,Ct(t))}function zi(t,n,e){var r=t==null?i:Pn(t,n);return r===i?e:r}function Yg(t,n){return t!=null&&Uu(t,n,pl)}function Ki(t,n){return t!=null&&Uu(t,n,dl)}var qg=Cu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=qe.call(n)),t[n]=e},Gi(Mt)),Jg=Cu(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=qe.call(n)),$.call(t,n)?t[n].push(e):t[n]=[e]},I),Vg=W(ye);function pt(t){return It(t)?Vs(t):gi(t)}function Ct(t){return It(t)?Vs(t,!0):Tl(t)}function Zg(t,n){var e={};return n=I(n,3),sn(t,function(r,s,o){hn(e,n(r,s,o),r)}),e}function Qg(t,n){var e={};return n=I(n,3),sn(t,function(r,s,o){hn(e,s,n(r,s,o))}),e}var $g=kn(function(t,n,e){ur(t,n,e)}),xo=kn(function(t,n,e,r){ur(t,n,e,r)}),kg=pn(function(t,n){var e={};if(t==null)return e;var r=!1;n=et(n,function(o){return o=On(o,t),r||(r=o.length>1),o}),un(t,Ai(t),e),r&&(e=Yt(e,T|X|rt,ql));for(var s=n.length;s--;)mi(e,n[s]);return e});function jg(t,n){return yo(t,yr(I(n)))}var tp=pn(function(t,n){return t==null?{}:Al(t,n)});function yo(t,n){if(t==null)return{};var e=et(Ai(t),function(r){return[r]});return n=I(n),cu(t,e,function(r,s){return n(r,s[0])})}function np(t,n,e){n=On(n,t);var r=-1,s=n.length;for(s||(s=1,t=i);++r<s;){var o=t==null?i:t[on(n[r])];o===i&&(r=s,o=e),t=_n(o)?o.call(t):o}return t}function ep(t,n,e){return t==null?t:Ee(t,n,e)}function rp(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:Ee(t,n,e,r)}var So=Nu(pt),Eo=Nu(Ct);function ip(t,n,e){var r=F(t),s=r||Ln(t)||ne(t);if(n=I(n,4),e==null){var o=t&&t.constructor;s?e=r?new o:[]:it(t)?e=_n(o)?$n(Ze(t)):{}:e={}}return(s?Kt:sn)(t,function(a,l,h){return n(e,a,l,h)}),e}function sp(t,n){return t==null?!0:mi(t,n)}function up(t,n,e){return t==null?t:_u(t,n,Si(e))}function op(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:_u(t,n,Si(e),r)}function ee(t){return t==null?[]:ti(t,pt(t))}function fp(t){return t==null?[]:ti(t,Ct(t))}function ap(t,n,e){return e===i&&(e=n,n=i),e!==i&&(e=Vt(e),e=e===e?e:0),n!==i&&(n=Vt(n),n=n===n?n:0),Dn(Vt(t),n,e)}function lp(t,n,e){return n=vn(n),e===i?(e=n,n=0):e=vn(e),t=Vt(t),_l(t,n,e)}function cp(t,n,e){if(e&&typeof e!="boolean"&&Et(t,n,e)&&(n=e=i),e===i&&(typeof n=="boolean"?(e=n,n=i):typeof t=="boolean"&&(e=t,t=i)),t===i&&n===i?(t=0,n=1):(t=vn(t),n===i?(n=t,t=0):n=vn(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var s=qs();return wt(t+s*(n-t+Xf("1e-"+((s+"").length-1))),n)}return _i(t,n)}var hp=jn(function(t,n,e){return n=n.toLowerCase(),t+(e?Ro(n):n)});function Ro(t){return Xi(Q(t).toLowerCase())}function To(t){return t=Q(t),t&&t.replace(pf,ea).replace(Nf,"")}function gp(t,n,e){t=Q(t),n=Ht(n);var r=t.length;e=e===i?r:Dn(U(e),0,r);var s=e;return e-=n.length,e>=0&&t.slice(e,s)==n}function pp(t){return t=Q(t),t&&Jo.test(t)?t.replace(ns,ra):t}function dp(t){return t=Q(t),t&&jo.test(t)?t.replace(Ur,"\\$&"):t}var _p=jn(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),vp=jn(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),wp=Au("toLowerCase");function mp(t,n,e){t=Q(t),n=U(n);var r=n?qn(t):0;if(!n||r>=n)return t;var s=(n-r)/2;return hr(je(s),e)+t+hr(ke(s),e)}function xp(t,n,e){t=Q(t),n=U(n);var r=n?qn(t):0;return n&&r<n?t+hr(n-r,e):t}function yp(t,n,e){t=Q(t),n=U(n);var r=n?qn(t):0;return n&&r<n?hr(n-r,e)+t:t}function Sp(t,n,e){return e||n==null?n=0:n&&(n=+n),Ia(Q(t).replace(Br,""),n||0)}function Ep(t,n,e){return(e?Et(t,n,e):n===i)?n=1:n=U(n),vi(Q(t),n)}function Rp(){var t=arguments,n=Q(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var Tp=jn(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()});function Op(t,n,e){return e&&typeof e!="number"&&Et(t,n,e)&&(n=e=i),e=e===i?rn:e>>>0,e?(t=Q(t),t&&(typeof n=="string"||n!=null&&!Wi(n))&&(n=Ht(n),!n&&Yn(t))?An(jt(t),0,e):t.split(n,e)):[]}var Ap=jn(function(t,n,e){return t+(e?" ":"")+Xi(n)});function Lp(t,n,e){return t=Q(t),e=e==null?0:Dn(U(e),0,t.length),n=Ht(n),t.slice(e,e+n.length)==n}function Ip(t,n,e){var r=u.templateSettings;e&&Et(t,n,e)&&(n=i),t=Q(t),n=Rr({},n,r,Du);var s=Rr({},n.imports,r.imports,Du),o=pt(s),a=ti(s,o),l,h,v=0,w=n.interpolate||Fe,m="__p += '",y=ei((n.escape||Fe).source+"|"+w.source+"|"+(w===es?ff:Fe).source+"|"+(n.evaluate||Fe).source+"|$","g"),O="//# sourceURL="+($.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uf+"]")+`
`;t.replace(y,function(D,z,Y,Ut,Rt,Bt){return Y||(Y=Ut),m+=t.slice(v,Bt).replace(df,ia),z&&(l=!0,m+=`' +
__e(`+z+`) +
'`),Rt&&(h=!0,m+=`';
`+Rt+`;
__p += '`),Y&&(m+=`' +
((__t = (`+Y+`)) == null ? '' : __t) +
'`),v=Bt+D.length,D}),m+=`';
`;var N=$.call(n,"variable")&&n.variable;if(!N)m=`with (obj) {
`+m+`
}
`;else if(uf.test(N))throw new H(C);m=(h?m.replace(Xo,""):m).replace(Go,"$1").replace(Yo,"$1;"),m="function("+(N||"obj")+`) {
`+(N?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+m+`return __p
}`;var B=Ao(function(){return Z(o,O+"return "+m).apply(i,a)});if(B.source=m,Bi(B))throw B;return B}function Cp(t){return Q(t).toLowerCase()}function Mp(t){return Q(t).toUpperCase()}function bp(t,n,e){if(t=Q(t),t&&(e||n===i))return Ps(t);if(!t||!(n=Ht(n)))return t;var r=jt(t),s=jt(n),o=Hs(r,s),a=Fs(r,s)+1;return An(r,o,a).join("")}function Np(t,n,e){if(t=Q(t),t&&(e||n===i))return t.slice(0,Bs(t)+1);if(!t||!(n=Ht(n)))return t;var r=jt(t),s=Fs(r,jt(n))+1;return An(r,0,s).join("")}function Dp(t,n,e){if(t=Q(t),t&&(e||n===i))return t.replace(Br,"");if(!t||!(n=Ht(n)))return t;var r=jt(t),s=Hs(r,jt(n));return An(r,s).join("")}function Pp(t,n){var e=Lr,r=Me;if(it(n)){var s="separator"in n?n.separator:s;e="length"in n?U(n.length):e,r="omission"in n?Ht(n.omission):r}t=Q(t);var o=t.length;if(Yn(t)){var a=jt(t);o=a.length}if(e>=o)return t;var l=e-qn(r);if(l<1)return r;var h=a?An(a,0,l).join(""):t.slice(0,l);if(s===i)return h+r;if(a&&(l+=h.length-l),Wi(s)){if(t.slice(l).search(s)){var v,w=h;for(s.global||(s=ei(s.source,Q(rs.exec(s))+"g")),s.lastIndex=0;v=s.exec(w);)var m=v.index;h=h.slice(0,m===i?l:m)}}else if(t.indexOf(Ht(s),l)!=l){var y=h.lastIndexOf(s);y>-1&&(h=h.slice(0,y))}return h+r}function Hp(t){return t=Q(t),t&&qo.test(t)?t.replace(ts,ca):t}var Fp=jn(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),Xi=Au("toUpperCase");function Oo(t,n,e){return t=Q(t),n=e?i:n,n===i?ua(t)?pa(t):$f(t):t.match(n)||[]}var Ao=W(function(t,n){try{return Dt(t,i,n)}catch(e){return Bi(e)?e:new H(e)}}),Up=pn(function(t,n){return Kt(n,function(e){e=on(e),hn(t,e,Fi(t[e],t))}),t});function Bp(t){var n=t==null?0:t.length,e=I();return t=n?et(t,function(r){if(typeof r[1]!="function")throw new Xt(x);return[e(r[0]),r[1]]}):[],W(function(r){for(var s=-1;++s<n;){var o=t[s];if(Dt(o[0],this,r))return Dt(o[1],this,r)}})}function Wp(t){return cl(Yt(t,T))}function Gi(t){return function(){return t}}function zp(t,n){return t==null||t!==t?n:t}var Kp=Iu(),Xp=Iu(!0);function Mt(t){return t}function Yi(t){return su(typeof t=="function"?t:Yt(t,T))}function Gp(t){return ou(Yt(t,T))}function Yp(t,n){return fu(t,Yt(n,T))}var qp=W(function(t,n){return function(e){return ye(e,t,n)}}),Jp=W(function(t,n){return function(e){return ye(t,e,n)}});function qi(t,n,e){var r=pt(n),s=sr(n,r);e==null&&!(it(n)&&(s.length||!r.length))&&(e=n,n=t,t=this,s=sr(n,pt(n)));var o=!(it(e)&&"chain"in e)||!!e.chain,a=_n(t);return Kt(s,function(l){var h=n[l];t[l]=h,a&&(t.prototype[l]=function(){var v=this.__chain__;if(o||v){var w=t(this.__wrapped__),m=w.__actions__=Lt(this.__actions__);return m.push({func:h,args:arguments,thisArg:t}),w.__chain__=v,w}return h.apply(t,yn([this.value()],arguments))})}),t}function Vp(){return _t._===this&&(_t._=xa),this}function Ji(){}function Zp(t){return t=U(t),W(function(n){return au(n,t)})}var Qp=Ri(et),$p=Ri(Cs),kp=Ri(Zr);function Lo(t){return Mi(t)?Qr(on(t)):Ll(t)}function jp(t){return function(n){return t==null?i:Pn(t,n)}}var td=Mu(),nd=Mu(!0);function Vi(){return[]}function Zi(){return!1}function ed(){return{}}function rd(){return""}function id(){return!0}function sd(t,n){if(t=U(t),t<1||t>bt)return[];var e=rn,r=wt(t,rn);n=I(n),t-=rn;for(var s=jr(r,n);++e<t;)n(e);return s}function ud(t){return F(t)?et(t,on):Ft(t)?[t]:Lt(Ju(Q(t)))}function od(t){var n=++wa;return Q(t)+n}var fd=cr(function(t,n){return t+n},0),ad=Ti("ceil"),ld=cr(function(t,n){return t/n},1),cd=Ti("floor");function hd(t){return t&&t.length?ir(t,Mt,li):i}function gd(t,n){return t&&t.length?ir(t,I(n,2),li):i}function pd(t){return Ns(t,Mt)}function dd(t,n){return Ns(t,I(n,2))}function _d(t){return t&&t.length?ir(t,Mt,pi):i}function vd(t,n){return t&&t.length?ir(t,I(n,2),pi):i}var wd=cr(function(t,n){return t*n},1),md=Ti("round"),xd=cr(function(t,n){return t-n},0);function yd(t){return t&&t.length?kr(t,Mt):0}function Sd(t,n){return t&&t.length?kr(t,I(n,2)):0}return u.after=Gh,u.ary=io,u.assign=Mg,u.assignIn=mo,u.assignInWith=Rr,u.assignWith=bg,u.at=Ng,u.before=so,u.bind=Fi,u.bindAll=Up,u.bindKey=uo,u.castArray=eg,u.chain=no,u.chunk=cc,u.compact=hc,u.concat=gc,u.cond=Bp,u.conforms=Wp,u.constant=Gi,u.countBy=yh,u.create=Dg,u.curry=oo,u.curryRight=fo,u.debounce=ao,u.defaults=Pg,u.defaultsDeep=Hg,u.defer=Yh,u.delay=qh,u.difference=pc,u.differenceBy=dc,u.differenceWith=_c,u.drop=vc,u.dropRight=wc,u.dropRightWhile=mc,u.dropWhile=xc,u.fill=yc,u.filter=Eh,u.flatMap=Oh,u.flatMapDeep=Ah,u.flatMapDepth=Lh,u.flatten=$u,u.flattenDeep=Sc,u.flattenDepth=Ec,u.flip=Jh,u.flow=Kp,u.flowRight=Xp,u.fromPairs=Rc,u.functions=Xg,u.functionsIn=Gg,u.groupBy=Ih,u.initial=Oc,u.intersection=Ac,u.intersectionBy=Lc,u.intersectionWith=Ic,u.invert=qg,u.invertBy=Jg,u.invokeMap=Mh,u.iteratee=Yi,u.keyBy=bh,u.keys=pt,u.keysIn=Ct,u.map=wr,u.mapKeys=Zg,u.mapValues=Qg,u.matches=Gp,u.matchesProperty=Yp,u.memoize=xr,u.merge=$g,u.mergeWith=xo,u.method=qp,u.methodOf=Jp,u.mixin=qi,u.negate=yr,u.nthArg=Zp,u.omit=kg,u.omitBy=jg,u.once=Vh,u.orderBy=Nh,u.over=Qp,u.overArgs=Zh,u.overEvery=$p,u.overSome=kp,u.partial=Ui,u.partialRight=lo,u.partition=Dh,u.pick=tp,u.pickBy=yo,u.property=Lo,u.propertyOf=jp,u.pull=Nc,u.pullAll=ju,u.pullAllBy=Dc,u.pullAllWith=Pc,u.pullAt=Hc,u.range=td,u.rangeRight=nd,u.rearg=Qh,u.reject=Fh,u.remove=Fc,u.rest=$h,u.reverse=Pi,u.sampleSize=Bh,u.set=ep,u.setWith=rp,u.shuffle=Wh,u.slice=Uc,u.sortBy=Xh,u.sortedUniq=Yc,u.sortedUniqBy=qc,u.split=Op,u.spread=kh,u.tail=Jc,u.take=Vc,u.takeRight=Zc,u.takeRightWhile=Qc,u.takeWhile=$c,u.tap=hh,u.throttle=jh,u.thru=vr,u.toArray=_o,u.toPairs=So,u.toPairsIn=Eo,u.toPath=ud,u.toPlainObject=wo,u.transform=ip,u.unary=tg,u.union=kc,u.unionBy=jc,u.unionWith=th,u.uniq=nh,u.uniqBy=eh,u.uniqWith=rh,u.unset=sp,u.unzip=Hi,u.unzipWith=to,u.update=up,u.updateWith=op,u.values=ee,u.valuesIn=fp,u.without=ih,u.words=Oo,u.wrap=ng,u.xor=sh,u.xorBy=uh,u.xorWith=oh,u.zip=fh,u.zipObject=ah,u.zipObjectDeep=lh,u.zipWith=ch,u.entries=So,u.entriesIn=Eo,u.extend=mo,u.extendWith=Rr,qi(u,u),u.add=fd,u.attempt=Ao,u.camelCase=hp,u.capitalize=Ro,u.ceil=ad,u.clamp=ap,u.clone=rg,u.cloneDeep=sg,u.cloneDeepWith=ug,u.cloneWith=ig,u.conformsTo=og,u.deburr=To,u.defaultTo=zp,u.divide=ld,u.endsWith=gp,u.eq=nn,u.escape=pp,u.escapeRegExp=dp,u.every=Sh,u.find=Rh,u.findIndex=Zu,u.findKey=Fg,u.findLast=Th,u.findLastIndex=Qu,u.findLastKey=Ug,u.floor=cd,u.forEach=eo,u.forEachRight=ro,u.forIn=Bg,u.forInRight=Wg,u.forOwn=zg,u.forOwnRight=Kg,u.get=zi,u.gt=fg,u.gte=ag,u.has=Yg,u.hasIn=Ki,u.head=ku,u.identity=Mt,u.includes=Ch,u.indexOf=Tc,u.inRange=lp,u.invoke=Vg,u.isArguments=Un,u.isArray=F,u.isArrayBuffer=lg,u.isArrayLike=It,u.isArrayLikeObject=at,u.isBoolean=cg,u.isBuffer=Ln,u.isDate=hg,u.isElement=gg,u.isEmpty=pg,u.isEqual=dg,u.isEqualWith=_g,u.isError=Bi,u.isFinite=vg,u.isFunction=_n,u.isInteger=co,u.isLength=Sr,u.isMap=ho,u.isMatch=wg,u.isMatchWith=mg,u.isNaN=xg,u.isNative=yg,u.isNil=Eg,u.isNull=Sg,u.isNumber=go,u.isObject=it,u.isObjectLike=ot,u.isPlainObject=Ae,u.isRegExp=Wi,u.isSafeInteger=Rg,u.isSet=po,u.isString=Er,u.isSymbol=Ft,u.isTypedArray=ne,u.isUndefined=Tg,u.isWeakMap=Og,u.isWeakSet=Ag,u.join=Cc,u.kebabCase=_p,u.last=Jt,u.lastIndexOf=Mc,u.lowerCase=vp,u.lowerFirst=wp,u.lt=Lg,u.lte=Ig,u.max=hd,u.maxBy=gd,u.mean=pd,u.meanBy=dd,u.min=_d,u.minBy=vd,u.stubArray=Vi,u.stubFalse=Zi,u.stubObject=ed,u.stubString=rd,u.stubTrue=id,u.multiply=wd,u.nth=bc,u.noConflict=Vp,u.noop=Ji,u.now=mr,u.pad=mp,u.padEnd=xp,u.padStart=yp,u.parseInt=Sp,u.random=cp,u.reduce=Ph,u.reduceRight=Hh,u.repeat=Ep,u.replace=Rp,u.result=np,u.round=md,u.runInContext=c,u.sample=Uh,u.size=zh,u.snakeCase=Tp,u.some=Kh,u.sortedIndex=Bc,u.sortedIndexBy=Wc,u.sortedIndexOf=zc,u.sortedLastIndex=Kc,u.sortedLastIndexBy=Xc,u.sortedLastIndexOf=Gc,u.startCase=Ap,u.startsWith=Lp,u.subtract=xd,u.sum=yd,u.sumBy=Sd,u.template=Ip,u.times=sd,u.toFinite=vn,u.toInteger=U,u.toLength=vo,u.toLower=Cp,u.toNumber=Vt,u.toSafeInteger=Cg,u.toString=Q,u.toUpper=Mp,u.trim=bp,u.trimEnd=Np,u.trimStart=Dp,u.truncate=Pp,u.unescape=Hp,u.uniqueId=od,u.upperCase=Fp,u.upperFirst=Xi,u.each=eo,u.eachRight=ro,u.first=ku,qi(u,function(){var t={};return sn(u,function(n,e){$.call(u.prototype,e)||(t[e]=n)}),t}(),{chain:!1}),u.VERSION=p,Kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){u[t].placeholder=u}),Kt(["drop","take"],function(t,n){K.prototype[t]=function(e){e=e===i?1:ht(U(e),0);var r=this.__filtered__&&!n?new K(this):this.clone();return r.__filtered__?r.__takeCount__=wt(e,r.__takeCount__):r.__views__.push({size:wt(e,rn),type:t+(r.__dir__<0?"Right":"")}),r},K.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Kt(["filter","map","takeWhile"],function(t,n){var e=n+1,r=e==G||e==fn;K.prototype[t]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:I(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),Kt(["head","last"],function(t,n){var e="take"+(n?"Right":"");K.prototype[t]=function(){return this[e](1).value()[0]}}),Kt(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");K.prototype[t]=function(){return this.__filtered__?new K(this):this[e](1)}}),K.prototype.compact=function(){return this.filter(Mt)},K.prototype.find=function(t){return this.filter(t).head()},K.prototype.findLast=function(t){return this.reverse().find(t)},K.prototype.invokeMap=W(function(t,n){return typeof t=="function"?new K(this):this.map(function(e){return ye(e,t,n)})}),K.prototype.reject=function(t){return this.filter(yr(I(t)))},K.prototype.slice=function(t,n){t=U(t);var e=this;return e.__filtered__&&(t>0||n<0)?new K(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==i&&(n=U(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},K.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},K.prototype.toArray=function(){return this.take(rn)},sn(K.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),s=u[r?"take"+(n=="last"?"Right":""):n],o=r||/^find/.test(n);s&&(u.prototype[n]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof K,v=l[0],w=h||F(a),m=function(z){var Y=s.apply(u,yn([z],l));return r&&y?Y[0]:Y};w&&e&&typeof v=="function"&&v.length!=1&&(h=w=!1);var y=this.__chain__,O=!!this.__actions__.length,N=o&&!y,B=h&&!O;if(!o&&w){a=B?a:new K(this);var D=t.apply(a,l);return D.__actions__.push({func:vr,args:[m],thisArg:i}),new Gt(D,y)}return N&&B?t.apply(this,l):(D=this.thru(m),N?r?D.value()[0]:D.value():D)})}),Kt(["pop","push","shift","sort","splice","unshift"],function(t){var n=Xe[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);u.prototype[t]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(F(o)?o:[],s)}return this[e](function(a){return n.apply(F(a)?a:[],s)})}}),sn(K.prototype,function(t,n){var e=u[n];if(e){var r=e.name+"";$.call(Qn,r)||(Qn[r]=[]),Qn[r].push({name:n,func:e})}}),Qn[lr(i,ft).name]=[{name:"wrapper",func:i}],K.prototype.clone=Ha,K.prototype.reverse=Fa,K.prototype.value=Ua,u.prototype.at=gh,u.prototype.chain=ph,u.prototype.commit=dh,u.prototype.next=_h,u.prototype.plant=wh,u.prototype.reverse=mh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=xh,u.prototype.first=u.prototype.head,pe&&(u.prototype[pe]=vh),u},Jn=da();Cn?((Cn.exports=Jn)._=Jn,Yr._=Jn):_t._=Jn}).call(Le)})(Or,Or.exports);var Dd=Or.exports;const Wt=Td(Dd);class k{constructor(f,i){this.id=`point-id-${new Date().getTime().toString()}`,this.x=f,this.y=i,this.widthRatio=1,this.heightRatio=1,this.initialX=this.widthRatio*f,this.initialY=this.heightRatio*i}translate(f,i){this.x+=f,this.y+=i,this.initialX=this.x/this.widthRatio,this.initialY=this.y/this.heightRatio}set ratio(f){this.widthRatio=f.width,this.heightRatio=f.height,this.x=this.initialX*this.widthRatio,this.y=this.initialY*this.heightRatio}setRatio(f,i){this.widthRatio=f,this.heightRatio=i,this.initialX=this.x/this.widthRatio,this.initialY=this.y/this.heightRatio}clone(){return new k(this.x,this.y)}serialize(){return`${this.x/this.widthRatio},${this.y/this.heightRatio}`}json(){return JSON.stringify(this)}deserialize(f){const[i,p]=f.split(",").map(d=>parseInt(d));return new k(i,p)}static middlePoint(f,i){return new k((f.x+i.x)/2,(f.y+i.y)/2)}static distance(f,i){return Math.sqrt((f.x-i.x)**2+(f.y-i.y)**2)}static isSame(f,i){return f.x===i.x&&f.y===i.y}static isNear(f,i,p=10){return k.distance(f,i)<p}}class Pd extends Ce{constructor(i,p){super(i,p);st(this,"_point",null);st(this,"_mouseDown",!1);st(this,"_moveAll",!1);st(this,"cursorDefault","default");st(this,"cursorMove","move");st(this,"cursorGrab","grab");st(this,"cursorGrabbing","grabbing")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._point=null,this._moveAll=!1}handleMouseWheel(i,p){}handleMouseDown(i,p){this._mouseDown=!0;const d=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!d||!p)return;const x=this.stateMachine.element,C=this.stateMachine.elements;if(!x)return;const M=i.clientX,P=i.clientY,A=d.clientPointToViewPoint({clientX:M,clientY:P});if(!this._point)if(x.contains(A.x,A.y))this._moveAll=!0;else{const T=C.find(X=>X.contains(A.x,A.y));T&&T!==x?this.stateMachine.element=T:(this.stateMachine.element=null,this.stateMachine.setState(Ie.STATE_SELECT)),this.redraw()}}handleMouseMove(i,p){const d=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!d||!p)return;const x=this.stateMachine.element;if(!x)return;const C=i.clientX,M=i.clientY,P=d.clientPointToViewPoint({clientX:C,clientY:M}),A=x.rectangle.points;if(this._mouseDown){const T={x:i.movementX/d.scale,y:i.movementY/d.scale};this._point?(this._point.translate(T.x,T.y),this.stateMachine.element=x):this._moveAll&&(x.translate(T.x,T.y),this.stateMachine.element=x),this.redraw()}else{const T=A.find(X=>k.isNear(X,new k(P.x,P.y)))||null;this._point=T,p.style.cursor=this._point?"move":"default"}}handleMouseUp(i,p){this._mouseDown=!1,this._point=null,this._moveAll=!1,this.stateMachine.element&&this.stateMachine.element.rectangle.processDisplacement()}redraw(){const i=this.stateMachine.ctx,p=this.stateMachine.canvas;if(!i||!p)return;const d=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,p.width,p.height),Wt.each(E,x=>{x.draw(i)}),Wt.each(E,x=>{x.draw(i)}),d&&(d.drawBoundingBox(i),d.drawLines(i),d.drawPoints(i))}}class Hd extends Ce{constructor(i,p){super(i,p);st(this,"_handle",null);st(this,"_mouseDown",!1);st(this,"cursorDefault","default");st(this,"cursorResize","nwse-resize")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._handle=null}handleMouseWheel(i,p){}handleMouseDown(i,p){this._mouseDown=!0}handleMouseMove(i,p){const d=this.stateMachine.coordinateSystem,E=this.stateMachine.ctx,x=this.stateMachine.element;if(!E||!d||!x)return;const C=i.clientX,M=i.clientY,P=d.clientPointToViewPoint({clientX:C,clientY:M}),A={x:i.movementX/d.scale,y:i.movementY/d.scale};if(this._mouseDown){if(this._handle){const T=x.rectangle.boundingBox,X=T.clone();switch(this._handle){case"topLeft":X.updateDimensions(T.topLeft.x+A.x,T.topLeft.y+A.y,T.width-A.x,T.height-A.y);break;case"topRight":X.updateDimensions(T.topLeft.x,T.topLeft.y+A.y,T.width+A.x,T.height-A.y);break;case"bottomLeft":X.updateDimensions(T.topLeft.x+A.x,T.topLeft.y,T.width-A.x,T.height+A.y);break;case"bottomRight":X.updateDimensions(T.topLeft.x,T.topLeft.y,T.width+A.x,T.height+A.y);break}x.resizeBoundingBox(X),this.redraw()}}else{const T=x.getBoundingBoxHandle(P.x,P.y);if(!T){p.style.cursor=this.cursorDefault;return}const X=x.handleToString(T);this._handle=X,p.style.cursor=this.cursorResize}}handleMouseUp(i,p){this._mouseDown=!1,this._handle=null,this.redraw()}redraw(){const i=this.stateMachine.ctx,p=this.stateMachine.canvas;if(!i||!p)return;const d=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,p.width,p.height),Wt.each(E,x=>{x.draw(i)}),d&&(d.drawBoundingBox(i),d.drawLines(i),d.drawBoundingBoxHandles(i))}}class Fd extends Ce{constructor(i,p){super(i,p);st(this,"isMouseDown",!1)}onEnter(){this.redraw()}onExit(){this.isMouseDown=!1}handleMouseDown(i,p){this.isMouseDown=!0}handleMouseWheel(i,p){this.isMouseDown||i.shiftKey&&this.stateMachine.coordinateSystem.scaleAtClientPoint(-.001*i.deltaY,{clientX:i.clientX,clientY:i.clientY})}handleMouseMove(i,p){}handleMouseUp(i,p){this.isMouseDown=!1;const d=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!d||!p)return;const x=this.stateMachine.elements,C=i.clientX,M=i.clientY,P=d.clientPointToViewPoint({clientX:C,clientY:M}),A=x.find(T=>T.contains(P.x,P.y));A?(this.stateMachine.element=A,this.stateMachine.setState(Ie.STATE_MOVE)):this.stateMachine.element=null,this.redraw()}redraw(){const i=this.stateMachine.ctx,p=this.stateMachine.canvas;if(!i||!p)return;const d=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,p.width,p.height),Wt.each(E,x=>{x.draw(i)}),d&&(d.drawLines(i),d.drawPoints(i))}}class Ud extends Ce{constructor(f,i){super(f,i)}onEnter(){}onExit(){}handleMouseWheel(f,i){}handleMouseDown(f,i){}handleMouseMove(f,i){}handleMouseUp(f,i){}}const ie={Idle:"IDLE",Select:"SELECT",Move:"MOVE",Resize:"RESIZE",Zoom:"ZOOM"},xt=class xt{constructor(f){this._inputs=new Set,this._states={IDLE:new Nd(this,xt.STATE_IDLE),SELECT:new Fd(this,xt.STATE_SELECT),MOVE:new Pd(this,xt.STATE_MOVE),RESIZE:new Hd(this,xt.STATE_RESIZE),ZOOM:new Ud(this,xt.STATE_ZOOM)},this._initialState=f.initialState,this._state=this._states[this._initialState],this._mouseDown=!1,this._elements=f.canvasElements,this._element=null,this._coordinateSystem=f.coordinateSystem,this._canvas=f.canvas,this._ctx=f.ctx}get mouseDown(){return this._mouseDown}get state(){return this._state}set state(f){this._state=f}addState(f){this._states[f.name]=f}setState(f){if(f!==this._state.name){if(!this._states[f])throw new Error(`State ${f} not found`);this._state&&this._state.onExit(),this._state=this._states[f],this._state.onEnter()}}resetState(){this._element=null,this.setState(this._initialState)}handleMouseWheel(f,i){this._state.handleMouseWheel(f,i)}handleMouseDown(f,i){this._state.handleMouseDown(f,i)}handleMouseMove(f,i){this._state.handleMouseMove(f,i)}handleMouseUp(f,i){this._state.handleMouseUp(f,i)}handleKeyDown(f,i){if(f.ctrlKey&&this.state.name===xt.STATE_MOVE){this.setState(xt.STATE_RESIZE);return}}handleKeyUp(f,i){if(!f.ctrlKey&&this.state.name===xt.STATE_RESIZE){this.setState(xt.STATE_MOVE);return}}get inputs(){return this._inputs}set inputs(f){this._inputs=f}get element(){return this._element}set element(f){this._element=f}get elements(){return this._elements}set elements(f){this._elements=f}get coordinateSystem(){return this._coordinateSystem}set coordinateSystem(f){this._coordinateSystem=f}get canvas(){return this._canvas}set canvas(f){this._canvas=f}get ctx(){return this._ctx}set ctx(f){this._ctx=f}setCanvas(f){this.canvas=f}setCtx(f){this.ctx=f}setCoordinateSystem(f){this.coordinateSystem=f}};st(xt,"STATE_IDLE",ie.Idle),st(xt,"STATE_SELECT",ie.Select),st(xt,"STATE_RESIZE",ie.Resize),st(xt,"STATE_MOVE",ie.Move),st(xt,"STATE_ZOOM",ie.Zoom);let Ie=xt,Bn=function(L){return L.AUTO="auto",L.COVER="cover",L.CONTAIN="contain",L}({});var ut=function(L){return L.BACKGROUND="background",L.INTERFACE="interface",L}(ut||{});const No=Bn.CONTAIN,bo=[ut.BACKGROUND,ut.INTERFACE],Bd={display:"block",width:"100%",height:"100%",position:"relative",backgroundColor:"#000"},Wd={display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent"},zd={size:No,imageSrc:"./test.png",width:800,height:800},Kd={min:1,max:5};function Jd({initialState:L=ie.Idle,containerElementStyle:f=Bd,canvasElementStyle:i=Wd,background:p=zd,zoomExtents:d=Kd,elements:E=[]}){const{containerRef:x,screenSize:C}=bd(),M=gt.useRef(null),P=gt.useRef({}),A=gt.useRef({}),T=gt.useRef(Wn()),X=gt.useRef(E),rt=gt.useRef({x:window.innerWidth/1920,y:window.innerHeight/1080}),q=gt.useCallback(()=>new Ie({initialState:L,canvasElements:X.current,coordinateSystem:T.current,canvas:P.current[ut.INTERFACE],ctx:A.current[ut.INTERFACE]}),[L]),b=gt.useRef(q());let J;function ft(S){if(!p)return S;switch(p.size||(p.size=No),p.size){case Bn.COVER:if(M.current&&M.current.complete){const{width:V,height:G}=M.current;if(!p.useImageOriginSize){const dt=S.width,fn=V/G,yt=dt/fn;return{width:dt,height:yt}}return{width:V,height:G}}break;case Bn.CONTAIN:return{width:p.width||0,height:p.height||0}}return S}function Wn(){const S=new Od(d,{width:1920,height:1080});return S.attachViewChangeListener(Tt),S}function Tt(S){b.current&&(X.current=b.current.elements,b.current.resetState());const V=T.current;V&&(bo.map(G=>A.current[G]).forEach(G=>{Zt(G);const dt=V.transformMatrix;G.setTransform(dt.a,dt.b,dt.c,dt.d,dt.e,dt.f)}),Me())}function Zt(S){Ot([S],()=>S.clearRect(0,0,S.canvas.width,S.canvas.height))}function Ot(S,V){S.forEach(G=>{G.save(),G.setTransform(re.a,re.b,re.c,re.d,re.e,re.f)});try{V()}finally{S.forEach(G=>G.restore())}}function Qt(S){T.current.documentSize={...S}}function At({canvas:S,ctx:V,image:G}){if(G&&G.complete&&S&&V&&p)switch(p.size){case Bn.AUTO:Md({canvas:S,ctx:V,image:G});break;case Bn.COVER:Id({ctx:V,image:G});break;case Bn.CONTAIN:default:Cd({canvas:S,ctx:V,image:G});break}}function mn(S,V=!1){J&&clearTimeout(J),J=setTimeout(()=>{let G=!1;const{canvas:dt}=T.current;if((dt.width!==S.width||dt.height!==S.height)&&(Ld(P.current,S),Qt(S),G=!0),V||G){const fn=S.width/T.current.initialViewSize.width,yt=S.height/T.current.initialViewSize.height;fn!==1/0&&yt!==1/0&&Wt.each(X.current,bt=>{bt.ratio={width:fn,height:yt}}),Me()}},100)}function se(){const S=P.current[ut.BACKGROUND],V=A.current[ut.BACKGROUND],G=M.current;!S||!V||(V.clearRect(0,0,S.width,S.height),G&&At({canvas:S,ctx:V,image:G}))}function Lr(){Zt(A.current[ut.INTERFACE]),X.current.forEach(S=>{S.draw(A.current[ut.INTERFACE])})}function Me(){se(),Lr()}return gt.useEffect(()=>{const S=ft(C),V=T.current;V&&V.resetView(),mn(S)},[C]),gt.useEffect(()=>{b.current.setCanvas(P.current[ut.INTERFACE]),b.current.setCtx(A.current[ut.INTERFACE])},[P.current]),gt.useEffect(()=>{if(!(!p||!p.imageSrc||p.imageSrc==="")){if(!M.current||M.current.getAttribute("src")!==p.imageSrc){const S=new Image;S.src=p.imageSrc,S.onload=()=>{const V=ft(C);mn(V,!0)},S.onabort=()=>{M.current=null},M.current=S}return()=>{M.current=null,A.current[ut.BACKGROUND].clearRect(0,0,P.current[ut.BACKGROUND].width,P.current[ut.BACKGROUND].height)}}},[p]),gt.useEffect(()=>(X.current=E,b.current.resetState(),b.current.elements=E,A.current[ut.INTERFACE].clearRect(0,0,P.current[ut.INTERFACE].width,P.current[ut.INTERFACE].height),Wt.each(X.current,S=>{S.ratio={width:rt.current.x,height:rt.current.y},S.draw(A.current[ut.INTERFACE])}),()=>{X.current=[],b.current.resetState(),b.current.elements=[],A.current[ut.INTERFACE].clearRect(0,0,P.current[ut.INTERFACE].width,P.current[ut.INTERFACE].height)}),[E]),gt.useEffect(()=>{const S=P.current[ut.INTERFACE];if(!S)return;const V=Nt=>{b.current.handleMouseMove(Nt,S)},G=Nt=>{b.current.handleMouseUp(Nt,S)},dt=Nt=>{b.current.handleMouseDown(Nt,S)},fn=Nt=>{b.current.handleKeyDown(Nt,S)},yt=Nt=>{b.current.handleKeyUp(Nt,S)},bt=Nt=>{b.current.handleMouseWheel(Nt,S)};return S.addEventListener("mousedown",dt),S.addEventListener("mousemove",V),S.addEventListener("mouseup",G),S.addEventListener("wheel",bt),S.addEventListener("keydown",fn),S.addEventListener("keyup",yt),()=>{S.removeEventListener("mousedown",dt),S.removeEventListener("mousemove",V),S.removeEventListener("mouseup",G),S.removeEventListener("wheel",bt),S.removeEventListener("keydown",fn),S.removeEventListener("keyup",yt)}},[]),Co.jsx("div",{style:{...f},ref:x,children:bo.map(S=>{const V=S===ut.INTERFACE;return Co.jsx("canvas",{tabIndex:V?1:0,ref:G=>{G&&(P.current[S]=G,A.current[S]=G.getContext("2d"),V&&(T.current.canvas=G))},style:{...i}},S)})})}class $i{constructor(f){this._points=f}get points(){return this._points}set points(f){this._points=f}get boundingBox(){let f=this._points[0].x,i=this._points[0].y,p=this._points[0].x,d=this._points[0].y;return Wt.each(this._points,E=>{f=Math.min(f,E.x),i=Math.min(i,E.y),p=Math.max(p,E.x),d=Math.max(d,E.y)}),new In(f,i,p-f,d-i)}translate(f,i){Wt.each(this._points,p=>p.translate(f,i))}clone(){return new $i(this._points.map(f=>f.clone()))}serialize(){return Wt.map(this.points,f=>f.serialize().split(","))}resize(f,i){const p=this.boundingBox,d=[],E=[];Wt.each(this._points,x=>{d.push({x:(x.x-p.topLeft.x)/p.width,y:(x.y-p.topLeft.y)/p.height}),E.push({x:(x.x-f.topLeft.x)/f.width,y:(x.y-f.topLeft.y)/f.height})}),this._points=Wt.map(d,x=>new k(f.topLeft.x+f.width*x.x,f.topLeft.y+f.height*x.y)),Wt.each(this._points,x=>{x.setRatio(i.x,i.y)})}deserialize(f){this.points=Wt.map(f,i=>new k(i[0],i[1]))}isNear(f,i=10){return this._points.some(p=>k.isNear(p,f,i))}isPartOfPolygon(f){return this._points.some(i=>i.id===f.id)}contains(f,i){let p=!1;for(let d=0,E=this._points.length-1;d<this._points.length;E=d++){const x=this._points[d].x,C=this._points[d].y,M=this._points[E].x,P=this._points[E].y;C>i!=P>i&&f<(M-x)*(i-C)/(P-C)+x&&(p=!p)}return p}}class In extends $i{constructor(f=0,i=0,p=0,d=0){if(f instanceof k&&i instanceof k&&p instanceof k&&d instanceof k)super([f,i,p,d]);else if(typeof f=="number"&&typeof i=="number"&&typeof p=="number"&&typeof d=="number")super(In.pointsFromBounds(f,i,p,d));else throw new Error("Invalid arguments")}static pointsFromBounds(f,i,p,d){return[new k(f,i),new k(f+p,i),new k(f+p,i+d),new k(f,i+d)]}get width(){return this._points[1].x-this._points[0].x}get height(){return this._points[2].y-this._points[1].y}get topLeft(){return this._points[0]}get topRight(){return this._points[1]}get bottomRight(){return this._points[2]}get bottomLeft(){return this._points[3]}get topMid(){return k.middlePoint(this.topLeft,this.topRight)}get rightMid(){return k.middlePoint(this.topRight,this.bottomRight)}get bottomMid(){return k.middlePoint(this.bottomLeft,this.bottomRight)}get leftMid(){return k.middlePoint(this.topLeft,this.bottomLeft)}updateDimensions(f,i,p,d){this.points=In.pointsFromBounds(f,i,p,d)}processDisplacement(){this.width<0&&([this._points[0],this._points[1]]=[this._points[1],this._points[0]],[this._points[2],this._points[3]]=[this._points[3],this._points[2]]),this.height<0&&([this._points[0],this._points[3]]=[this._points[3],this._points[0]],[this._points[1],this._points[2]]=[this._points[2],this._points[1]])}clone(){return new In(this._points[0].x,this._points[0].y,this.width,this.height)}json(){return JSON.stringify(this)}}const Xd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAAAXNSR0IB2cksfwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAtGSURBVHhe7d3JblzXFUbhCiN2Yt+USBY7SWFkwwNPBHjgiaZ+AQ2SOH0iJ47j3pn60Z1zjCMg4l1X9yjYNeDmWgDFutSH39gDAyRAkbOJNtbW1r65vr7eaM9j6Tgdp+NCXYojSjpOx6VwG5ubm11jOkzH6bg4V/+y9O3UmI7TcTou1NW/3Nra6hrTDdNxOi7UXVxcbO7s7EyO6Tgdp+NCXUPfdY7pbqXjdFyoq2hvb69rTDdMx+m4aDfLcISO03GZ3M9fILdnrKKDg4PvdW+m43Tcslx75O7KEbo303H3yp2dnT08OjqaHNNxOk7Hhbrnz59X9MPUmI7TcTou1KU4oqTjdFwKV9F8Pv9Pz5humI7TcaHuNXrx4kXXmO7NdJyOC3UVnZycdI3phuk4HRfqPvzww62KPvnkk/X2IUzH6TgdF+1mBf3QOaa7lY7TcctwswxH6IbpuGyuPXJ35Qjdm+m4e+UqWiwWXWO6YTpOx4W6FEeUdJyOS+E++OCD7Z4xHafjdFyoS3FEScfpuBQuxRElHafjUrjX6OXLl2vtQ5iO03E6LtSlOKKk43RcFjfLcISO03GZ3CzDEbphOi6ba4/ce++9t9MzpuN0nI4LdR9//HHXmI7TcTou1DX0feeY7lY6TseFuhRHlHScjkvhXqNXr16ttg9hOk7H6bhQ99FHH+32jOk4HafjQl2KI0o6TselcCmOKOk4HZfF1e/E+v758+ddY7o303E6bhmu/ujKO3+EbpiOy+baI3dzc7N7eno6OabjdJyOC3VPnz7d6xnTcTpOx4W6FEeUdJyOS+FeoxcvXjxoH8J0nI7TcaEuxRElHafjUriK5vN515humI7TcaEuxRElHafjUriKjo6OusZ0w3Scjot2s4K+6xzT3UrH6bhluFmGI3TDdFw21x65ig4ODr7tGdMN03E6LtSlOKKk43RcCldR6ZueMd0wHafjQt1r9PLly1+2D2E6TsfpuFBX0c7OTteYbpiO03GhrnxeXdHXU2M6TsfpuFBX0dbW1tfl5eSYbpiO03GhrqLNzc2vysvJMd0wHafjot0swxE6TsdlcvX9JFpbW+sa0w3TcTru/3DjNfRledkzpruVjtNxoa6iBw8edI3phuk4HRfqUhxR0nE6LoVLcURJx+m4FK6ilZWVrjHdMB2n46JdFyrpOB2n40JdiiNKOk7HpXApjijpOB2Xw6U4QjeWjkvj6h89qHdMN0zH6bh3dW/trhyhezMdd69ciiNKOk7HpXBpvkbQYTouhUtxREnH6bgULsURJR2n41K4FEeUdJyOS+G6vqG6pON0nI4LdSmOKOk4HZfDpThCN5aOS+PqH5Oo58d8lHScjtNx7+re2n7nmI7TcTou1O1vbm52jekwHafj4tze3l5Fkz/aUsfpOB0X6ira2trqGtMN03E6LtSlOKKk43RcClfQwc7OTs+YDtJxOi7UNTT529J0nI7TcaGuovI2+XtKdZyO03HRrsI7f4SO03GZ3GwKXV1dHRweHr791/uXdJyO03Hv6tojd3FxUcz0mI7TcTou1FV0fHzcNaYbpuN0XKhr6NvOMd2tdJyOC3UVPXr0qGtMN0zH6bhQt1gsjnrGdJyO03GhrqLT09OuMd0wHafjQl2KI0o6TselcO+///7P6Mcff1xpH8J0nI7TcdFuluEIHafjMrnZFHr27Nlxz5iO03E67l1de+QqOj8//6ZnTDdMx+m4UJfiiJKO03EpXIojSjpOx6VwKY4o6Tgdl8Ld3NzMe8Z0nI7TcaGuoa87x3S30nE6LtSlOKKk43RcCpfiiJKO03FZ3KwHPX369JFumI7Tcctwk9+JdReO0A3Tcdlce+Qa+qpzTHcrHafjQl2KI0o6TselcCmOKOk4HZfCPXny5KRnTMfpOB0X6l6jn3766RftQ5iO03E6LtSlOKKk43RcCpfiiJKO03Ep3PX19WlBX06N6Tgdp+OiXf1OrDt/hI7TcZncrAednZ11jemG6Tgd966uPXJ35Qjdm+m4e+Wurq6KmR7TcTpOx4W6FEeUdJyOS+FSHFHScTouhavo5OTk3z1jumE6TseFuhRHlHScjkvhLi8vFz1jOk7H6bhQV9F8Pu8a0w3TcTou2s0K+qJzTHcrHafjluHq+0l0eHj4RXmp+590nI5bohuvoqOjo3+Vl5NjumE6TseFugIW+/v7k2M6TsfpuFDX0OftcTQdp+N0XKiraHd3t2tMN0zH6bhQ19A/2+NoOk7H6bhQV9H29nbXmG6YjtNxoa6hf7TH0XScjtNxoa6izc3NrjHdMB2n46LdrKDP2svR2pjuVjpOxy3DtZfjlaHF+vr65JiO03E6LtSlOKKk43RcClfR6urqq/Y4mo7TcTou1KU4oqTjdFwKV9HKykrXmG6YjtNxoS7FESUdp+NSuBRHlHScjsviulBJx+k4HRfqUhxR0nE6LoubdY2VN90wHafjluEmuwtH6IbpuHvlUhxR0nE6LoVLcURJx+m4FC7LF/g6TselcCmOKOk4HZfCpTiipON0XArX9Q3VJR2n43RcqEtxREnH6bgULsURJR2n43K49fX1rjEdpuN0XLhr799ammN1mI5L4VIcUdJxOu7uu/rvEB8+fDg5puN0nI4LdRWVt66fjqcbpuN0XKgr4Hx7e7tnTAfpOB0X6lIcUdJxOi6Fq2h3d3fyd7HoOB2n40Ld4eHh+cHBweSYjtNxOi7UFXTROaaDdJyOi3b1N5x1jemG6TgdtwzXXo7XxiZ/k7iO03E6LtSlOKKk43RcClc+/76cz+eTYzpOx+m4ULdYLLrGdJyO03GhrqLT09PP2+NoOk7H6bhQd3Z2dtUzpuN0nI4LdRWV/8u7xnTDdJyOC3UpjijpOB2XwjU0+QW0jtNxOi7a1S+OJ1H5/PtaN0zH6bhluPZyvIouLy+7xnTDdJyOC3WPHz+uaPJ7MnWcjtNxoS7FESUdp+NSuOvr68c9YzpOx+m4UNfQ5I/50HE6TseFuhRHlHScjkvhUhxR0nE6LoW7urp6Ut4mf6i0jtNxOi7UhY6VdJyO03G9rsI7f4SO03GZXHs5XkFPO8d0kI7TcaGuob+3x9F0nI7TcaEudKyk43ScjutyoWMlHafjdFyXu7y8/FVBf2uPo+k4HafjQl2KI0o6TselcCmOKOk4HZfCXVxc3PSM6Tgdp+NCXUN/bY+j6Tgdp+OiXYVdY7phOk7HLcO1l+Mt4z+qG6bjdFyXOz8//3XPmI7TcTou1DX0l/Y4mo7TcTou1KU4oqTjdFwKt1gsnpW3yTEdp+N0XKgLHSvpOB2n47pcQ39uj6PpOB2n40JdRScnJ11jumE6TseFuhRHlHScjsviZvP5/E/t5WjHx8fPdMN0nI5bhmsvx7sLR+iG6bh75Rr6Y3scTcfpOB0X6io6PDzsGtMN03E6LtQ19If2OJqO03E6LtRVtL+///v2OJqO03E6LtSlOKKk43RcCrezs/OsvH3aHkfTcTpOx4W6ira2trrGdMN0nI4LdQ39rj2OpuN0nI6LdrONjY2uMd0wHafjluHay/Ha2G/b42g6TsfpuFBX0erqateYbpiO03Ghbm1traLftMfRdJyO03GhrqKVlZWuMd0wHafjQl2KI0o6TselcCmOKOk4HZfCpTiipON0XAqX4oiSjtNxWVwXKuk4Hafjot2sa6y86YbpOB23DDfZXThCN0zH3SuX4oiSjtNxKVyKI0o6TselcFm+wNdxOi6FS3FEScfpuBQuxRElHafjUrgUR5R0nI5L4br+KVNJx+k4HRfqUhxR0nE6LodLcYRuLB2XxrX3b+1mY2Nj8kdglnScjtNx7+A2Pv0v5rAz6DVYBGkAAAAASUVORK5CYII=",Qi=new Image;Qi.src=Xd;class Ar{constructor(f,i,p,d,E,x,C){st(this,"_ratio",{width:1,height:1});this._id=f,this._color=i,this._isCurrent=p,this._numberOfEquipments=d,this._rectangle=E,this._isEdit=typeof x=="boolean"?x:!0,this._isTemplate=C||!1}get id(){return this._id}set id(f){this._id=f}get color(){return this._color}get isCurrent(){return this._isCurrent}get numberOfEquipments(){return this._numberOfEquipments}get rectangle(){return this._rectangle}get isEdit(){return this._isEdit}get isTemplate(){return this._isTemplate}set ratio(f){this._ratio=f,this._rectangle.points.map(i=>{i.ratio=f})}translate(f,i){this._rectangle.translate(f,i)}updateDimensions(f,i){this._rectangle.updateDimensions(this._rectangle.topLeft.x,this._rectangle.topLeft.y,f,i)}resizeBoundingBox(f){this._rectangle.resize(f,{x:this._ratio.width,y:this._ratio.height})}draw(f){this.drawPolygon(f),this.drawNumberOfEquipments(f),this.drawIsCurrent(f),this.drawIsTemplate(f)}contains(f,i){return this.isEdit&&this.rectangle.contains(f,i)}drawDebug(f){f.fillStyle="black",f.fillText("TL",this.rectangle.topLeft.x,this.rectangle.topLeft.y,this.rectangle.width),f.fillText("TR",this.rectangle.topRight.x,this.rectangle.topRight.y,this.rectangle.width),f.fillText("BR",this.rectangle.bottomRight.x,this.rectangle.bottomRight.y,this.rectangle.width),f.fillText("BL",this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y,this.rectangle.width)}drawPolygon(f){const i=this.rectangle.points;f.fillStyle=this.color,f.beginPath(),f.moveTo(i[0].x,i[0].y);for(let p=1;p<i.length;p++)f.lineTo(i[p].x,i[p].y);f.closePath(),f.fill()}drawLines(f){const i=this.rectangle.points;f.fillStyle="black",f.lineWidth=1,f.setLineDash([]),f.beginPath(),f.moveTo(i[0].x,i[0].y);for(let p=1;p<i.length;p++)f.lineTo(i[p].x,i[p].y);f.closePath(),f.stroke()}drawIsCurrent(f){this.isCurrent&&(f.fillStyle="red",f.font="40px Arial",f.fillText("*",this.rectangle.topLeft.x,this.rectangle.topLeft.y+35,this.rectangle.width))}drawNumberOfEquipments(f){this.numberOfEquipments>0&&(f.fillStyle="black",f.font="14px Arial",f.fillText(`(${this.numberOfEquipments.toString()})`,this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y+14,this.rectangle.width))}drawIsTemplate(f){if(this.isTemplate&&Qi){const i=f.createPattern(Qi,"repeat");i&&(f.fillStyle=i,f.beginPath(),f.moveTo(this.rectangle.topLeft.x,this.rectangle.topLeft.y),f.lineTo(this.rectangle.topRight.x,this.rectangle.topRight.y),f.lineTo(this.rectangle.bottomRight.x,this.rectangle.bottomRight.y),f.lineTo(this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y),f.lineTo(this.rectangle.topLeft.x,this.rectangle.topLeft.y),f.closePath(),f.fill())}}drawBoundingBox(f){const i=this.rectangle.boundingBox;f.lineWidth=1,f.lineDashOffset=0,f.setLineDash([2,3]),f.beginPath(),f.moveTo(i.topLeft.x,i.topLeft.y),f.lineTo(i.topRight.x,i.topRight.y),f.lineTo(i.bottomRight.x,i.bottomRight.y),f.lineTo(i.bottomLeft.x,i.bottomLeft.y),f.lineTo(i.topLeft.x,i.topLeft.y),f.closePath(),f.stroke()}drawPoints(f){const i=this.rectangle.points;f.fillStyle="purple",i.forEach(p=>{f.beginPath(),f.arc(p.x,p.y,3,0,2*Math.PI),f.fill()}),f.closePath()}drawBoundingBoxHandles(f){const{topLeft:d,topRight:E,bottomRight:x,bottomLeft:C}=this.rectangle.boundingBox;f.strokeStyle="black",f.fillStyle="white",f.setLineDash([]),f.fillRect(d.x-3,d.y-3,6,6),f.fillRect(E.x-3,E.y-3,6,6),f.fillRect(x.x-3,x.y-3,6,6),f.fillRect(C.x-3,C.y-3,6,6),f.strokeRect(d.x-3,d.y-3,6,6),f.strokeRect(E.x-3,E.y-3,6,6),f.strokeRect(x.x-3,x.y-3,6,6),f.strokeRect(C.x-3,C.y-3,6,6),f.stroke()}getBoundingBoxHandle(f,i){const p=this.rectangle.boundingBox,d=[p.topLeft,p.topRight,p.bottomRight,p.bottomLeft],E=d.map(M=>k.distance(M,new k(f,i))),x=Math.min(...E),C=E.findIndex(M=>M===x&&M<10);return d[C]}handleToString(f){const{topLeft:i,topRight:p,bottomRight:d,bottomLeft:E}=this.rectangle.boundingBox;return k.isSame(f,i)?"topLeft":k.isSame(f,p)?"topRight":k.isSame(f,d)?"bottomRight":k.isSame(f,E)?"bottomLeft":null}clone(){const f=this.rectangle.points.map(i=>i.clone());return new Ar(this.id,this.color,this.isCurrent,this.numberOfEquipments,new In(f[0],f[1],f[2],f[3]),this.isEdit,this.isTemplate)}}const Gd="#ffff66";function Vd(){const L={size:Bn.COVER},[f,i]=gt.useState([]),[p,d]=gt.useState(L),[E,x]=gt.useState(!1),C=q=>{d(b=>({...b,...q}))},M=q=>{const b=q.map(J=>{const ft=new In(0,0,0,0);return ft.deserialize(JSON.parse(J.JsonRectangle)),new Ar(J.id.toString(),J.Color,J.IsCurrent,J.NumberEquipment,ft,J.IsEdit,J.IsTemplate)});i([...b])},P=q=>{C({imageSrc:q.imageSource}),M(q.data),x(q.viewMode)},A=()=>{const q=new In(0,0,100,100),b=new Ar(`${f.length+1}`,Gd,!1,4,q,!0);i([...f,b])},T=q=>{typeof q=="function"&&q(rt())},X=()=>f.map(b=>({id:b.id,IsTemplate:!1,NumberEquipment:b.numberOfEquipments,Color:b.color,IsCurrent:b.isCurrent,JsonRectangle:b.rectangle.serialize(),IsEdit:b.isEdit})),rt=()=>{const q=f.map(b=>({id:parseInt(b.id),IsTemplate:!1,NumberEquipment:b.numberOfEquipments,Color:b.color,IsCurrent:b.isCurrent,JsonRectangle:JSON.stringify(b.rectangle.serialize()),IsEdit:b.isEdit}));return JSON.stringify({viewMode:E,imageSource:p.imageSrc,data:q})};return{viewMode:E,background:p,elements:f,loadBackground:C,loadDataSource:M,loadAll:P,addRectangle:A,exportRectangles:X,toString:rt,saveData:T}}export{Jd as C,Vd as u};
