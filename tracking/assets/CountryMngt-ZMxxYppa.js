import{z as I,l as j,r as h,j as t}from"./index-DVdUffN9.js";import{D,E as b}from"./api-BVwJHRoD.js";import{f as y,L as N}from"./DefaultLayout-CfPVXb2h.js";import{a as f,b as x}from"./index.es-B3rfzgWZ.js";import{C as S}from"./CForm-Xve7Slsh.js";import{C as a}from"./CCol-CkNqnnbR.js";import{C as n}from"./CFormLabel-DkOTcXBr.js";import{C as m}from"./CFormInput-Um-rMPli.js";import{C as v}from"./CFormSelect-BcylGtpm.js";import"./cil-user-Ddrdy7PS.js";import"./CFormControlWrapper-DwzJvsqv.js";const W=({setToast:g})=>{const{countryid:l}=I(),i=j(),[e,d]=h.useState({CountryID:0,CountryName:"",StatusID:"",Description:""});h.useEffect(()=>{l&&l!=0&&D(l).then(r=>{if(r.error){i(y,{isErrorMessage:!0,message:"Something went wrong. Try again later."});return}else r.data.data.IsEdit=!0,d(r.data.data)})},[]);const s=r=>{const{name:u,value:o}=r.target;d({...e,[u]:o})},c=r=>{console.log(r);const u=r.currentTarget;r.preventDefault(),u.checkValidity()===!1&&r.stopPropagation();var o=localStorage.getItem("user");if(o==null)return i(N);var p=JSON.parse(o).data;b(p.UserID,p.UserName,e.CountryID,e.CountryName,e.StatusID,e.Description).then(C=>{if(C.error)g(MyAlert(!0,"Error",C.error.response.data.message));else{i(y,{state:{isErrorMessage:!1,message:e.IsEdit?"Country has been updated":"Country has been created"}});return}})};return t.jsxs("div",{children:[t.jsx(f,{color:"primary",onClick:c,children:"Test"}),t.jsx(x,{children:t.jsx("h3",{children:"Country List"})}),t.jsx(x,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:t.jsxs(S,{className:"row g-3",onSubmit:c,children:[e.CountryID!=0?t.jsxs(a,{md:6,children:[t.jsxs(n,{htmlFor:"CountryIDInput",className:"col-form-label fw-bolder",children:["CountryID",t.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),t.jsx(m,{type:"text",id:"CountryIDInput",value:e.CountryID,name:"CountryID",onChange:s,disabled:!0})]}):t.jsx("span",{}),t.jsxs(a,{md:6,children:[t.jsxs(n,{htmlFor:"CountryNameInput",className:"col-form-label fw-bolder",children:["CountryName",t.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),t.jsx(m,{type:"text",id:"CountryNameInput",name:"CountryName",required:!0,value:e.CountryName,onChange:s})]}),t.jsxs(a,{xs:6,children:[t.jsx(n,{htmlFor:"DescriptionInput",className:"col-form-label fw-bolder",children:"Description"}),t.jsx(m,{type:"text",id:"DescriptionInput",name:"Description",value:e.Description,onChange:s})]}),t.jsxs(a,{md:6,children:[t.jsxs(n,{htmlFor:"statusInput",className:"col-form-label fw-bolder",children:["Status",t.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),t.jsx(v,{type:"text",id:"statusInput",name:"StatusID",onChange:s,value:e.StatusID,options:[{label:"True",value:1},{label:"False",value:0}],required:!0})]}),t.jsx("div",{className:"d-flex justify-content-center",children:t.jsx(f,{style:{width:"fit-content",marginTop:"30px"},color:"primary",type:"submit",children:e.IsEdit?"Update country":"Create country"})})]})})]})};export{W as default};
