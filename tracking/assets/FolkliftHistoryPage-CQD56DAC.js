import{w as x,n as g,o as d,r,j as t}from"./index-CpNJ6ZVU.js";import{Z as E,u as j,M,G as S,I as L}from"./index.esm-D0LwprAU.js";import{f as B,h as c,i as D}from"./api-BVwJHRoD.js";import{C as u}from"./CCol-Kho4-ZsH.js";import{b as I,a as T}from"./index.es-CiFilu0v.js";import{C as A}from"./CRow-DYwe4O6d.js";import{A as K,T as R}from"./TextField-Bk2duZ4z.js";import"./DefaultLayout-t0UtGZNy.js";import"./cil-user-Ddrdy7PS.js";const O=({setToast:p})=>{let[h,k]=x(),o=h.get("equipmentqr");const i=g(),n=d(e=>e.equipmentsBayList),f=d(e=>e.equipmentList);r.useState(0);const[C,l]=r.useState("");r.useEffect(()=>{B("",1,1,1e4).then(e=>{if(!e.error){if(i({type:"set",equipmentList:e.data.data}),o!=null){let a=e.data.data.find(s=>s.EquipmentCode==o).EquipmentID;l(o),c("",a,0,0,0,-100,1,1e4).then(s=>{if(!s.error){i({type:"set",equipmentsBayList:s.data.data});return}})}return}p(MyAlert(!0,"Error",e.error.response.data.message))})},[]);const y=r.useMemo(()=>[{accessorKey:"EquipmentCode",header:"Equipment QR"},{accessorKey:"ModelName",header:"Equipment Model"},{accessorKey:"ChassisNo",header:"Chassis No"},{accessorKey:"AreaCode",header:"Current Bay"},{accessorKey:"Date_In",header:"Parked date",Cell:({cell:e})=>t.jsx("span",{children:D(e.getValue()).format("DD/MM/YYYY hh:mm")})},{accessorKey:"UserName_In",header:"Parked By"}],[]),m=E({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),b=()=>{const e=S(m)(n);L(m)(e)},q=j({columns:y,data:n,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,renderTopToolbarCustomActions:({table:e})=>t.jsx(T,{onClick:b,children:"Export"})});return t.jsxs(u,{children:[t.jsx(I,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},fluid:!0,children:t.jsx(A,{className:"mb-3",children:t.jsx(u,{xs:12,children:t.jsx(K,{id:"size-small-standard",size:"small",inputValue:C,options:f,getOptionLabel:e=>e.EquipmentCode,onInputChange:(e,a)=>{a!=""&&l(a)},onChange:(e,a)=>{c("",a==null?void 0:a.EquipmentID,0,0,0,-100,1,1e4).then(s=>{if(!s.error){i({type:"set",equipmentsBayList:s.data.data});return}})},renderInput:e=>t.jsx(R,{...e,label:"Equiment",placeholder:"Equiment"})})})})}),t.jsx(M,{table:q})]})};export{O as default};
