import{r as g,j as a,n as O,o as f}from"./index-Df67LvnZ.js";import{Z as S,G as U,I as H}from"./index-Dntgz-Jr.js";import{J as W,o as Y,f as G,m as V,j as M,k as J}from"./api-D0CI0FXg.js";import{T as Q,u as Z,M as X}from"./index.esm-DQwAVOjC.js";import{F as w,o as N,p as ee}from"./DefaultLayout-ChSX5Qog.js";import{B as ae}from"./Box-ClPNTXLH.js";import{g as se,a as te,b as T,c as re,s as oe,d as P,_ as A,u as ne,e as ie,f as le,h as ce}from"./styled-GyNyOFDO.js";import{u as de,a as ue,A as I,T as h}from"./TextField-CGQe4LUV.js";import{d as u,b as B,a as me}from"./index.es-GiY7mkae.js";import{C as F}from"./CRow-DtrdDwyb.js";function pe(r){return te("MuiLink",r)}const fe=se("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),he=fe,z={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ge=r=>z[r]||r,be=({theme:r,ownerState:s})=>{const n=ge(s.color),i=T(r,`palette.${n}`,!1)||s.color,l=T(r,`palette.${n}Channel`);return"vars"in r&&l?`rgba(${l} / 0.4)`:re(i,.4)},xe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ye=r=>{const{classes:s,component:n,focusVisible:i,underline:l}=r,c={root:["root",`underline${P(l)}`,n==="button"&&"button",i&&"focusVisible"]};return ce(c,pe,s)},Le=oe(Q,{name:"MuiLink",slot:"Root",overridesResolver:(r,s)=>{const{ownerState:n}=r;return[s.root,s[`underline${P(n.underline)}`],n.component==="button"&&s.button]}})(({theme:r,ownerState:s})=>A({},s.underline==="none"&&{textDecoration:"none"},s.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},s.underline==="always"&&A({textDecoration:"underline"},s.color!=="inherit"&&{textDecorationColor:be({theme:r,ownerState:s})},{"&:hover":{textDecorationColor:"inherit"}}),s.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${he.focusVisible}`]:{outline:"auto"}})),Ce=g.forwardRef(function(s,n){const i=ne({props:s,name:"MuiLink"}),{className:l,color:c="primary",component:b="a",onBlur:o,onFocus:x,TypographyClasses:j,underline:y="always",variant:L="inherit",sx:m}=i,d=ie(i,xe),{isFocusVisibleRef:e,onBlur:t,onFocus:C,ref:D}=de(),[k,v]=g.useState(!1),$=ue(n,D),E=p=>{t(p),e.current===!1&&v(!1),o&&o(p)},K=p=>{C(p),e.current===!0&&v(!0),x&&x(p)},R=A({},i,{color:c,component:b,focusVisible:k,underline:y,variant:L}),_=ye(R);return a.jsx(Le,A({color:c,className:le(_.root,l),classes:j,component:b,onBlur:E,onFocus:K,ref:$,ownerState:R,variant:L,sx:[...Object.keys(z).includes(c)?[]:[{color:c}],...Array.isArray(m)?m:[m]]},d))}),q=Ce,Te=({setToast:r})=>{const s=O(),n=f(e=>e.equipmentsBayList),i=f(e=>e.faLabelList),l=f(e=>e.modelList),c=f(e=>e.areaList),b=f(e=>e.parkingList),[o,x]=g.useState({equipmentID:0,faLabelID:0,remark:"",areaID:0,parkingID:0});g.useEffect(()=>{W().then(e=>{if(!e.error){s({type:"set",faLabelList:e.data.data});return}}),Y("",0,0,1,1,1e4).then(e=>{s({type:"set",areaList:e.data.data})}),G("",1,1,1e5).then(e=>{s({type:"set",parkingList:e.data.data})}),V("",1,1,1e4).then(e=>{if(!e.error){s({type:"set",modelList:e.data.data.data});return}}),M("",o.equipmentID,o.parkingID,o.areaID,o.faLabelID,0,1,1e4).then(e=>{if(!e.error){s({type:"set",equipmentsBayList:e.data.data});return}})},[]);const j=g.useMemo(()=>[{accessorKey:"EquipmentCode",header:"Equipment QR",grow:!0},{accessorKey:"ModelName",header:"Equipment Model"},{accessorKey:"ChassisNo",header:"Chassis No"},{accessorKey:"AreaCode",header:"Current Bay"},{accessorKey:"BayTypeName",header:"Bay Type"},{accessorKey:"Date_In",header:"Parked date",Cell:({cell:e})=>a.jsx("span",{children:J(e.getValue()).format("DD/MM/YYYY hh:mm")})},{accessorKey:"UserName_In",header:"Parked By"},{accessorKey:"FALabelName",header:"FA label",Cell:({cell:e})=>a.jsxs(ae,{display:"flex",alignItems:"center",p:2,sx:{borderRadius:1,width:80,height:30,color:"#fff",fontWeight:"bold",bgcolor:w[e.getValue()]},children:[e.getValue()," "]})},{accessorKey:"AreaID",header:"Map",Cell:({cell:e})=>a.jsx(q,{href:`${window.location.href.split(N)[0]}${ee}?parkingid=${e.row.original.ParkingID}&areaid=${e.row.original.AreaID}`,target:"_blank",children:"View"})},{header:"History",Cell:({cell:e})=>a.jsx(q,{href:`${window.location.href.split(N)[0]}/pages/folklifthistorypage?equipmentqr=`+e.getValue(),children:"View"})},{accessorKey:"Description",header:"Remark"}],[]),y=S({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),L=()=>{const e=U(y)(n);H(y)(e)},m=Z({columns:j,data:n,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,renderTopToolbarCustomActions:({table:e})=>a.jsx(me,{onClick:L,children:"Export"})}),d=e=>{const{name:t,value:C}=e.target;let D=C;C==-1&&(D=void 0),x({...o,[t]:D}),M("",o.equipmentID,o.parkingID,o.areaID,o.faLabelID,0,1,1e4).then(k=>{if(!k.error){s({type:"set",equipmentsBayList:k.data.data});return}})};return a.jsxs(u,{children:[a.jsxs(B,{style:{background:"#fff",padding:12,borderRadius:4},fluid:!0,children:[a.jsx(F,{className:"mb-3",children:a.jsx(u,{xs:12,children:a.jsx(I,{id:"size-small-standard",size:"small",options:b,getOptionLabel:e=>e.ParkingName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.ParkingID,name:"parkingID"}})},renderInput:e=>a.jsx(h,{...e,label:"Parking",placeholder:"Parking"})})})}),a.jsxs(F,{className:"mb-3",children:[a.jsx(u,{xs:6,children:a.jsx(I,{id:"size-small-standard",size:"small",options:[{AreaName:"All",AreaID:0},...c],getOptionLabel:e=>e.AreaName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.AreaID,name:"areaID"}})},renderInput:e=>a.jsx(h,{...e,label:"Department",placeholder:"Department"})})}),a.jsx(u,{xs:6,children:a.jsx(I,{id:"size-small-standard",size:"small",options:[{ModelName:"All",ModelID:0},...l],getOptionLabel:e=>e.ModelName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.ModelID,name:"equipmentID"}})},renderInput:e=>a.jsx(h,{...e,label:"Equipment model",placeholder:"Equipment model"})})})]}),a.jsxs(F,{children:[a.jsx(u,{xs:6,children:a.jsx(I,{xs:6,id:"size-small-standard",size:"small",options:[{FALabelName:"All",FALabelID:0},...i],getOptionLabel:e=>e.FALabelName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.FALabelID,name:"faLabelID"}})},renderInput:e=>a.jsx(h,{...e,label:"FA Label",placeholder:"Favorites"})})}),a.jsx(u,{xs:6,children:a.jsx(h,{label:"Remark",id:"outlined-size-small",size:"small",value:o.remark,fullWidth:!0,onChange:e=>{d({target:{value:e.target.value,name:"remark"}})}})})]})]}),a.jsx(B,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},className:"row g-3",fluid:!0,children:a.jsx(X,{table:m})})]})};export{Te as default};
