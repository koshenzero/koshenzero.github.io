import{r as b,j as a,n as K,o as h}from"./index-CEuIzQF6.js";import{T as S,b as _,Z as $,u as O,M as H,G as U,I as W}from"./index.esm-C6lCNA3u.js";import{E as Y,m as G,e as V,j as Q,i as Z,h as J}from"./api-BfBva5oo.js";import{F as X}from"./DefaultLayout-hw1nnULZ.js";import{g as w,a as ee,b as N,c as ae,s as se,d as T,_ as A,e as te,f as re,h as oe,j as ne,k as ie,l as le,A as j,T as f}from"./TextField-CfqoDtEE.js";import{C as u}from"./CCol-Cj_yAkpZ.js";import{b as ce,a as de}from"./index.es-CvT3HhZV.js";import{C as F}from"./CRow-D-0kM1GJ.js";import"./cil-user-Ddrdy7PS.js";function ue(r){return ee("MuiLink",r)}const me=w("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),pe=me,B={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},he=r=>B[r]||r,fe=({theme:r,ownerState:s})=>{const o=he(s.color),n=N(r,`palette.${o}`,!1)||s.color,l=N(r,`palette.${o}Channel`);return"vars"in r&&l?`rgba(${l} / 0.4)`:ae(n,.4)},be=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ge=r=>{const{classes:s,component:o,focusVisible:n,underline:l}=r,c={root:["root",`underline${T(l)}`,o==="button"&&"button",n&&"focusVisible"]};return le(c,ue,s)},xe=se(S,{name:"MuiLink",slot:"Root",overridesResolver:(r,s)=>{const{ownerState:o}=r;return[s.root,s[`underline${T(o.underline)}`],o.component==="button"&&s.button]}})(({theme:r,ownerState:s})=>A({},s.underline==="none"&&{textDecoration:"none"},s.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},s.underline==="always"&&A({textDecoration:"underline"},s.color!=="inherit"&&{textDecorationColor:fe({theme:r,ownerState:s})},{"&:hover":{textDecorationColor:"inherit"}}),s.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${pe.focusVisible}`]:{outline:"auto"}})),ye=b.forwardRef(function(s,o){const n=te({props:s,name:"MuiLink"}),{className:l,color:c="primary",component:g="a",onBlur:i,onFocus:x,TypographyClasses:I,underline:y="always",variant:L="inherit",sx:m}=n,d=re(n,be),{isFocusVisibleRef:e,onBlur:t,onFocus:C,ref:k}=oe(),[D,v]=b.useState(!1),q=ne(o,k),E=p=>{t(p),e.current===!1&&v(!1),i&&i(p)},z=p=>{C(p),e.current===!0&&v(!0),x&&x(p)},M=A({},n,{color:c,component:g,focusVisible:D,underline:y,variant:L}),P=ge(M);return a.jsx(xe,A({color:c,className:ie(P.root,l),classes:I,component:g,onBlur:E,onFocus:z,ref:q,ownerState:M,variant:L,sx:[...Object.keys(B).includes(c)?[]:[{color:c}],...Array.isArray(m)?m:[m]]},d))}),R=ye,Me=({setToast:r})=>{const s=K(),o=h(e=>e.equipmentsBayList),n=h(e=>e.faLabelList),l=h(e=>e.modelList),c=h(e=>e.areaList),g=h(e=>e.parkingList),[i,x]=b.useState({equipmentID:0,faLabelID:0,remark:"",areaID:0,parkingID:0});b.useEffect(()=>{Y().then(e=>{if(!e.error){s({type:"set",faLabelList:e.data.data});return}}),G("",0,0,1,1,1e4).then(e=>{s({type:"set",areaList:e.data.data})}),V("",1,1,1e5).then(e=>{s({type:"set",parkingList:e.data.data})}),Q("",1,1,1e4).then(e=>{if(!e.error){s({type:"set",modelList:e.data.data.data});return}})},[]);const I=b.useMemo(()=>[{accessorKey:"EquipmentCode",header:"Equipment QR",grow:!0},{accessorKey:"ModelName",header:"Equipment Model"},{accessorKey:"ChassisNo",header:"Chassis No"},{accessorKey:"AreaCode",header:"Current Bay"},{accessorKey:"BayTypeName",header:"Bay Type"},{accessorKey:"Date_In",header:"Parked date",Cell:({cell:e})=>a.jsx("span",{children:Z(e.getValue()).format("DD/MM/YYYY hh:mm")})},{accessorKey:"UserName_In",header:"Parked By"},{accessorKey:"FALabelName",header:"FA label",Cell:({cell:e})=>a.jsxs(_,{display:"flex",alignItems:"center",p:2,sx:{borderRadius:1,width:80,height:30,color:"#fff",fontWeight:"bold",bgcolor:X[e.getValue()]},children:[e.getValue()," "]})},{accessorKey:"EquipmentCode2",header:"Map",Cell:({cell:e})=>a.jsx(R,{href:"#",children:"View"})},{accessorKey:"EquipmentCod12",header:"History",Cell:({cell:e})=>a.jsx(R,{href:"/#/pages/folklifthistorypage?equipmentqr="+e.getValue(),children:"View"})},{accessorKey:"Description",header:"Remark"}],[]),y=$({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),L=()=>{const e=U(y)(o);W(y)(e)},m=O({columns:I,data:o,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,enableFullScreenToggle:!1,visibleInShowHideMenu:!1,enableDensityToggle:!1,initialState:{density:"compact"},enableHiding:!1,renderTopToolbarCustomActions:({table:e})=>a.jsx(de,{onClick:L,children:"Export"})}),d=e=>{const{name:t,value:C}=e.target;let k=C;C==-1&&(k=void 0),x({...i,[t]:k}),J("",i.equipmentID,i.parkingID,i.areaID,i.faLabelID,-100,1,1e4).then(D=>{if(!D.error){s({type:"set",equipmentsBayList:D.data.data});return}})};return a.jsxs(u,{children:[a.jsxs(ce,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},fluid:!0,children:[a.jsx(F,{className:"mb-3",children:a.jsx(u,{xs:12,children:a.jsx(j,{id:"size-small-standard",size:"small",options:g,getOptionLabel:e=>e.ParkingName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.ParkingID,name:"parkingID"}})},renderInput:e=>a.jsx(f,{...e,label:"Parking",placeholder:"Parking"})})})}),a.jsxs(F,{className:"mb-3",children:[a.jsx(u,{xs:6,children:a.jsx(j,{id:"size-small-standard",size:"small",options:[{AreaName:"All",AreaID:0},...c],getOptionLabel:e=>e.AreaName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.AreaID,name:"areaID"}})},renderInput:e=>a.jsx(f,{...e,label:"Department",placeholder:"Department"})})}),a.jsx(u,{xs:6,children:a.jsx(j,{id:"size-small-standard",size:"small",options:[{ModelName:"All",ModelID:0},...l],getOptionLabel:e=>e.ModelName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.ModelID,name:"equipmentID"}})},renderInput:e=>a.jsx(f,{...e,label:"Equipment model",placeholder:"Equipment model"})})})]}),a.jsxs(F,{children:[a.jsx(u,{xs:6,children:a.jsx(j,{xs:6,id:"size-small-standard",size:"small",options:[{FALabelName:"All",FALabelID:0},...n],getOptionLabel:e=>e.FALabelName,onChange:(e,t)=>{d({target:{value:t==null?void 0:t.FALabelID,name:"faLabelID"}})},renderInput:e=>a.jsx(f,{...e,label:"FA Label",placeholder:"Favorites"})})}),a.jsx(u,{xs:6,children:a.jsx(f,{label:"Remark",id:"outlined-size-small",size:"small",value:i.remark,fullWidth:!0,onChange:e=>{d({target:{value:e.target.value,name:"remark"}})}})})]})]}),a.jsx(H,{table:m})]})};export{Me as default};
