import{z as E,l as S,r as d,o as L,j as a}from"./index-Df67LvnZ.js";import{c as O,f as A,D as R}from"./api-D0CI0FXg.js";import{A as T,D,g as p,s as j,L as U,M as F}from"./DefaultLayout-ChSX5Qog.js";import{b as C,d as c,a as B}from"./index.es-GiY7mkae.js";import{C as M}from"./CForm-BlQPlA_m.js";import{C as m}from"./CFormLabel-U7mi1tVG.js";import{A as _,T as q}from"./TextField-CGQe4LUV.js";import{C as g}from"./CFormInput-DweMMv1W.js";import"./styled-GyNyOFDO.js";import"./CFormControlWrapper-C6kxU_lF.js";const X=({setToast:b})=>{const{areaid:u}=E(),n=S(),[N,f]=d.useState([]),[P,h]=d.useState(null),v=L(e=>e.permission),[t,I]=d.useState({AreaID:0,IsParent:void 0,ParkingID:void 0,ParkingObj:void 0,BayTypeID:1,AreaCode:"",AreaName:"",JsonAddress:"",NumberPosition:0,StatusID:1,Description:""});d.useEffect(()=>{var e=v.find(r=>r.ModuleID===T.id);if(u&&u!=0)if((e==null?void 0:e.IsUpdate)===0){n(D,p(!0,"You aren't allowed to do this action"));return}else O(u).then(r=>{x(r);let s=r.data.data;s.IsEdit=!0,I(s),A("",1,0,1e4).then(o=>{let i=o.data.data;f(i),h(i.filter(y=>y.ParkingID==s.ParkingID)[0])})});else if((e==null?void 0:e.IsInsert)===0){n(D,p(!0,"You aren't allowed to do this action"));return}else A("",1,0,1e4).then(r=>{x(r),f(r.data.data)})},[]);const x=e=>{if(e.error){n(j,p());return}},l=e=>{const{name:r,value:s}=e.target;let o=s;s==-1&&(o=void 0),I({...t,[r]:o})},k=e=>{const r=e.currentTarget;e.preventDefault(),r.checkValidity()===!1&&e.stopPropagation();var s=localStorage.getItem("user");if(s==null)return n(U);var o=JSON.parse(s).data;R(o.UserID,o.UserName,t.AreaID,t.IsParent,t.ParkingID,t.BayTypeID,t.AreaCode,t.AreaName,t.NumberPosition,t.IsTemplate,t.StatusID,t.Description).then(i=>{if(i.error)b(F(!0,"Error",i.error.response.data.message));else{n(j,{state:{isErrorMessage:!1,message:`Area has been ${t.IsEdit?"updated":"inserted"}`}});return}})};return a.jsxs("div",{children:[a.jsx(C,{children:a.jsxs("h3",{children:[t.IsEdit?"Update":"Insert"," Area"]})}),a.jsx(C,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:a.jsxs(M,{className:"row g-3",onSubmit:k,children:[a.jsxs(c,{xs:12,children:[a.jsx(m,{htmlFor:"ParkingIDInput",className:"col-form-label fw-bolder",children:"Branch"}),a.jsx(_,{sx:{"& .MuiOutlinedInput-root":{padding:"0px!important"}},required:!0,className:"mb-3",disablePortal:!0,id:"ParkingID",value:P,onChange:(e,r)=>{l({target:{value:r==null?void 0:r.ParkingID,name:"ParkingID"}}),h(r)},options:N,getOptionLabel:e=>`${e==null?void 0:e.ParkingName}`,isOptionEqualToValue:(e,r)=>e==r,renderInput:e=>a.jsx(q,{...e})})]}),a.jsxs(c,{md:12,children:[a.jsxs(m,{htmlFor:"AreaCodeInput",className:"col-form-label fw-bolder",children:["AreaCode",a.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),a.jsx(g,{type:"text",id:"AreaCodeInput",name:"AreaCode",required:!0,value:t.AreaCode,onChange:l})]}),a.jsxs(c,{xs:12,children:[a.jsxs(m,{htmlFor:"AreaNameInput",className:"col-form-label fw-bolder",children:["AreaName",a.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),a.jsx(g,{type:"text",id:"AreaNameInput",name:"AreaName",value:t.AreaName,onChange:l,required:!0})]}),a.jsxs(c,{xs:12,children:[a.jsx(m,{htmlFor:"DescriptionInput",className:"col-form-label fw-bolder",children:"Description"}),a.jsx(g,{type:"text",id:"DescriptionInput",name:"Description",value:t.Description,onChange:l})]}),a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx(B,{style:{width:"fit-content",marginTop:"30px"},color:"primary",type:"submit",children:t.IsEdit?"Update area":"Create area"})})]})})]})};export{X as default};
