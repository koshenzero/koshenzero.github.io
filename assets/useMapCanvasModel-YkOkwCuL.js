var Sp=Object.defineProperty;var Ep=(L,f,i)=>f in L?Sp(L,f,{enumerable:!0,configurable:!0,writable:!0,value:i}):L[f]=i;var ft=(L,f,i)=>(Ep(L,typeof f!="symbol"?f+"":f,i),i);import{r as ht,w as Me,n as Rp,j as Mo}from"./index-kc6QG_iO.js";const Co=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),Ar=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:Co,viewMax:Co}),ie=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0});class Ap{constructor(f,i){ft(this,"_canvas",null);ft(this,"_view",{scale:1,x:0,y:0});ft(this,"_viewChangeListeners",new Set);ft(this,"_initialViewSize",{width:0,height:0});this._scaleExtents=f,this._documentSize=i}get canvas(){return this._canvas}set canvas(f){this._canvas=f,this.setView()}get scale(){return this._view.scale}setScale(f){this.setView({scale:f})}get initialViewSize(){return this._initialViewSize}set initialViewSize(f){this._initialViewSize=f}get x(){return this._view.x}set x(f){this.setView({x:f})}get y(){return this._view.y}set y(f){this.setView({y:f})}get view(){return{...this._view}}get scaleExtents(){return{...this._scaleExtents}}set scaleExtents(f){this._scaleExtents={...f},this.setView()}get documentSize(){return{...this._documentSize}}set documentSize(f){this._documentSize={...f},this.setView()}get transformMatrix(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}get canvasBounds(){if(this._canvas){const{left:f,top:i,right:_,bottom:d}=this._canvas.getBoundingClientRect();return{viewMin:this.clientPointToViewPoint({clientX:f,clientY:i}),viewMax:this.clientPointToViewPoint({clientX:_,clientY:d}),left:f,top:i,right:_,bottom:d,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}else return}get canvasRect(){if(this._canvas)return this._canvas.getBoundingClientRect()}clampView(f){const{min:i,max:_}=this._scaleExtents,{width:d,height:E}=this._documentSize,{left:x,top:b,right:D,bottom:W}=this.canvasRect||Ar,M=D-x,A=W-b,q=M/2,ut=-(d*this._view.scale-M/2),gt=A/2,X=-(E*this._view.scale-A/2);return{scale:Math.min(Math.max(f.scale,i),_),x:Math.min(Math.max(f.x,ut),q),y:Math.min(Math.max(f.y,X),gt)}}resetView(){this.setView({scale:1,x:0,y:0})}setView(f){const i=this.clampView({...this._view,...f||{}}),{scale:_,x:d,y:E}=this._view;return(i.scale!==_||i.x!==d||i.y!==E)&&(this._view=i,this._viewChangeListeners.forEach(x=>x&&x({view:i,transform:this.transformMatrix}))),{...this._view}}scaleAtClientPoint(f,i){const _=this.clientPointToViewPoint(i),d=this.clampView({...this._view,scale:this._view.scale+f}),E=this.viewPointToClientPoint(_,d);d.x=this._view.x-(E.clientX-i.clientX),d.y=this._view.y-(E.clientY-i.clientY);const{width:x,height:b}=this._documentSize,{left:D,top:W,right:M,bottom:A}=this.canvasRect||Ar,q=M-D,ut=A-W,gt=q/2,X=-(x*d.scale-q/2),j=ut/2,N=-(b*d.scale-ut/2);return d.x=Math.min(Math.max(d.x,X),gt),d.y=Math.min(Math.max(d.y,N),j),d.scale===this._scaleExtents.min&&(d.x=0,d.y=0),this.setView(d)}clientPointToViewPoint(f,i=this._view){const{left:_,top:d}=this.canvasRect||Ar,E=f.clientX-_,x=f.clientY-d;return{x:(E-i.x)/i.scale,y:(x-i.y)/i.scale,relativeClientX:E,relativeClientY:x}}viewPointToClientPoint(f,i=this._view){const{left:_,top:d}=this.canvasRect||Ar,E=f.x*i.scale+i.x,x=f.y*i.scale+i.y,b=E+_,D=x+d;return{clientX:b,clientY:D,relativeX:E,relativeY:x,x:b,y:D}}attachViewChangeListener(f){this._viewChangeListeners.add(f)}}const Tp=(L,f,i)=>{L.width=f,L.height=i,L.style.width=`${f}px`,L.style.height=`${i}px`},Lp=(L,f)=>{for(const i in L)Object.prototype.hasOwnProperty.call(L,i)&&Tp(L[i],f.width,f.height)};function Mp({ctx:L,image:f,x:i=0,y:_=0,w:d=L.canvas.width,h:E=L.canvas.height,offsetX:x=.5,offsetY:b=.5}){x<0&&(x=0),b<0&&(b=0),x>1&&(x=1),b>1&&(b=1);const D=f.width,W=f.height,M=Math.min(d/D,E/W);let A=D*M,q=W*M,ut,gt,X,j,N=1;A<d&&(N=d/A),Math.abs(N-1)<1e-14&&q<E&&(N=E/q),A*=N,q*=N,X=D/(A/d),j=W/(q/E),ut=(D-X)*x,gt=(W-j)*b,ut<0&&(ut=0),gt<0&&(gt=0),X>D&&(X=D),j>W&&(j=W),L.drawImage(f,ut,gt,X,j,i,_,d,E)}function Cp({canvas:L,ctx:f,image:i}){if(i&&i.complete&&L&&f){const _=i.width,d=i.height,E=L.getBoundingClientRect(),x=E.width,b=E.height,D=_/d;let W=x,M=W/D;M>b&&(M=b,W=M*D),f.drawImage(i,0,0,_,d,0,0,W,M)}}function Ip({canvas:L,ctx:f,image:i}){if(i&&i.complete&&L&&f){const _=i.width,d=i.height,E=L.getBoundingClientRect(),x=E.width,b=E.height;f.drawImage(i,0,0,_,d,0,0,x,b)}}function Op(L){const f=ht.useRef(null),[i,_]=ht.useState({width:window.innerWidth,height:window.innerHeight});return ht.useEffect(()=>{const d=new ResizeObserver(E=>{for(const x of E){if(x.contentRect){const{width:b,height:D}=x.contentRect;_({width:b,height:D})}typeof L=="function"&&L(x)}});return f.current&&d.observe(f.current),()=>{d.disconnect()}},[L]),{containerRef:f,screenSize:i}}class Ie{constructor(f,i){this._stateMachine=f,this._name=i}get stateMachine(){return this._stateMachine}get name(){return this._name}}class bp extends Ie{constructor(f,i){super(f,i)}onEnter(){}onExit(){}handleMouseWheel(f,i){}handleMouseDown(f,i){}handleMouseMove(f,i){}handleMouseUp(f,i){}}var Tr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Tr.exports;(function(L,f){(function(){var i,_="4.17.21",d=200,E="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",b="Invalid `variable` option passed into `_.template`",D="__lodash_hash_undefined__",W=500,M="__lodash_placeholder__",A=1,q=2,ut=4,gt=1,X=2,j=1,N=2,rt=4,ct=8,Vt=16,Ut=32,mn=64,Ft=128,In=256,Gn=512,Oe=30,S="...",V=800,Y=16,dt=1,on=2,fn=3,Tt=1/0,nt=9007199254740991,bo=17976931348623157e292,be=NaN,en=4294967295,Do=en-1,Po=en>>>1,Bo=[["ary",Ft],["bind",j],["bindKey",N],["curry",ct],["curryRight",Vt],["flip",Gn],["partial",Ut],["partialRight",mn],["rearg",In]],Hn="[object Arguments]",De="[object Array]",Wo="[object AsyncFunction]",se="[object Boolean]",oe="[object Date]",zo="[object DOMException]",Pe="[object Error]",Be="[object Function]",Ji="[object GeneratorFunction]",Jt="[object Map]",fe="[object Number]",Uo="[object Null]",an="[object Object]",Qi="[object Promise]",Fo="[object Proxy]",ae="[object RegExp]",Qt="[object Set]",le="[object String]",We="[object Symbol]",No="[object Undefined]",ce="[object WeakMap]",Go="[object WeakSet]",he="[object ArrayBuffer]",qn="[object DataView]",Mr="[object Float32Array]",Cr="[object Float64Array]",Ir="[object Int8Array]",Or="[object Int16Array]",br="[object Int32Array]",Dr="[object Uint8Array]",Pr="[object Uint8ClampedArray]",Br="[object Uint16Array]",Wr="[object Uint32Array]",Ho=/\b__p \+= '';/g,qo=/\b(__p \+=) '' \+/g,Ko=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ki=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,Yo=RegExp(ki.source),$o=RegExp(ji.source),Xo=/<%-([\s\S]+?)%>/g,Zo=/<%([\s\S]+?)%>/g,tu=/<%=([\s\S]+?)%>/g,Vo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jo=/^\w*$/,Qo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zr=/[\\^$.*+?()[\]{}|]/g,ko=RegExp(zr.source),Ur=/^\s+/,jo=/\s/,tf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nf=/\{\n\/\* \[wrapped with (.+)\] \*/,ef=/,? & /,rf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uf=/[()=,{}\[\]\/\s]/,sf=/\\(\\)?/g,of=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nu=/\w*$/,ff=/^[-+]0x[0-9a-f]+$/i,af=/^0b[01]+$/i,lf=/^\[object .+?Constructor\]$/,cf=/^0o[0-7]+$/i,hf=/^(?:0|[1-9]\d*)$/,gf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ze=/($^)/,_f=/['\n\r\u2028\u2029\\]/g,Ue="\\ud800-\\udfff",pf="\\u0300-\\u036f",df="\\ufe20-\\ufe2f",vf="\\u20d0-\\u20ff",eu=pf+df+vf,ru="\\u2700-\\u27bf",iu="a-z\\xdf-\\xf6\\xf8-\\xff",wf="\\xac\\xb1\\xd7\\xf7",mf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xf="\\u2000-\\u206f",yf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uu="A-Z\\xc0-\\xd6\\xd8-\\xde",su="\\ufe0e\\ufe0f",ou=wf+mf+xf+yf,Fr="['’]",Sf="["+Ue+"]",fu="["+ou+"]",Fe="["+eu+"]",au="\\d+",Ef="["+ru+"]",lu="["+iu+"]",cu="[^"+Ue+ou+au+ru+iu+uu+"]",Nr="\\ud83c[\\udffb-\\udfff]",Rf="(?:"+Fe+"|"+Nr+")",hu="[^"+Ue+"]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",Hr="[\\ud800-\\udbff][\\udc00-\\udfff]",Kn="["+uu+"]",gu="\\u200d",_u="(?:"+lu+"|"+cu+")",Af="(?:"+Kn+"|"+cu+")",pu="(?:"+Fr+"(?:d|ll|m|re|s|t|ve))?",du="(?:"+Fr+"(?:D|LL|M|RE|S|T|VE))?",vu=Rf+"?",wu="["+su+"]?",Tf="(?:"+gu+"(?:"+[hu,Gr,Hr].join("|")+")"+wu+vu+")*",Lf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mu=wu+vu+Tf,Cf="(?:"+[Ef,Gr,Hr].join("|")+")"+mu,If="(?:"+[hu+Fe+"?",Fe,Gr,Hr,Sf].join("|")+")",Of=RegExp(Fr,"g"),bf=RegExp(Fe,"g"),qr=RegExp(Nr+"(?="+Nr+")|"+If+mu,"g"),Df=RegExp([Kn+"?"+lu+"+"+pu+"(?="+[fu,Kn,"$"].join("|")+")",Af+"+"+du+"(?="+[fu,Kn+_u,"$"].join("|")+")",Kn+"?"+_u+"+"+pu,Kn+"+"+du,Mf,Lf,au,Cf].join("|"),"g"),Pf=RegExp("["+gu+Ue+eu+su+"]"),Bf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zf=-1,et={};et[Mr]=et[Cr]=et[Ir]=et[Or]=et[br]=et[Dr]=et[Pr]=et[Br]=et[Wr]=!0,et[Hn]=et[De]=et[he]=et[se]=et[qn]=et[oe]=et[Pe]=et[Be]=et[Jt]=et[fe]=et[an]=et[ae]=et[Qt]=et[le]=et[ce]=!1;var tt={};tt[Hn]=tt[De]=tt[he]=tt[qn]=tt[se]=tt[oe]=tt[Mr]=tt[Cr]=tt[Ir]=tt[Or]=tt[br]=tt[Jt]=tt[fe]=tt[an]=tt[ae]=tt[Qt]=tt[le]=tt[We]=tt[Dr]=tt[Pr]=tt[Br]=tt[Wr]=!0,tt[Pe]=tt[Be]=tt[ce]=!1;var Uf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ff={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Nf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hf=parseFloat,qf=parseInt,xu=typeof Me=="object"&&Me&&Me.Object===Object&&Me,Kf=typeof self=="object"&&self&&self.Object===Object&&self,wt=xu||Kf||Function("return this")(),Kr=f&&!f.nodeType&&f,On=Kr&&!0&&L&&!L.nodeType&&L,yu=On&&On.exports===Kr,Yr=yu&&xu.process,Nt=function(){try{var c=On&&On.require&&On.require("util").types;return c||Yr&&Yr.binding&&Yr.binding("util")}catch{}}(),Su=Nt&&Nt.isArrayBuffer,Eu=Nt&&Nt.isDate,Ru=Nt&&Nt.isMap,Au=Nt&&Nt.isRegExp,Tu=Nt&&Nt.isSet,Lu=Nt&&Nt.isTypedArray;function bt(c,p,g){switch(g.length){case 0:return c.call(p);case 1:return c.call(p,g[0]);case 2:return c.call(p,g[0],g[1]);case 3:return c.call(p,g[0],g[1],g[2])}return c.apply(p,g)}function Yf(c,p,g,R){for(var P=-1,$=c==null?0:c.length;++P<$;){var _t=c[P];p(R,_t,g(_t),c)}return R}function Gt(c,p){for(var g=-1,R=c==null?0:c.length;++g<R&&p(c[g],g,c)!==!1;);return c}function $f(c,p){for(var g=c==null?0:c.length;g--&&p(c[g],g,c)!==!1;);return c}function Mu(c,p){for(var g=-1,R=c==null?0:c.length;++g<R;)if(!p(c[g],g,c))return!1;return!0}function xn(c,p){for(var g=-1,R=c==null?0:c.length,P=0,$=[];++g<R;){var _t=c[g];p(_t,g,c)&&($[P++]=_t)}return $}function Ne(c,p){var g=c==null?0:c.length;return!!g&&Yn(c,p,0)>-1}function $r(c,p,g){for(var R=-1,P=c==null?0:c.length;++R<P;)if(g(p,c[R]))return!0;return!1}function it(c,p){for(var g=-1,R=c==null?0:c.length,P=Array(R);++g<R;)P[g]=p(c[g],g,c);return P}function yn(c,p){for(var g=-1,R=p.length,P=c.length;++g<R;)c[P+g]=p[g];return c}function Xr(c,p,g,R){var P=-1,$=c==null?0:c.length;for(R&&$&&(g=c[++P]);++P<$;)g=p(g,c[P],P,c);return g}function Xf(c,p,g,R){var P=c==null?0:c.length;for(R&&P&&(g=c[--P]);P--;)g=p(g,c[P],P,c);return g}function Zr(c,p){for(var g=-1,R=c==null?0:c.length;++g<R;)if(p(c[g],g,c))return!0;return!1}var Zf=Vr("length");function Vf(c){return c.split("")}function Jf(c){return c.match(rf)||[]}function Cu(c,p,g){var R;return g(c,function(P,$,_t){if(p(P,$,_t))return R=$,!1}),R}function Ge(c,p,g,R){for(var P=c.length,$=g+(R?1:-1);R?$--:++$<P;)if(p(c[$],$,c))return $;return-1}function Yn(c,p,g){return p===p?fa(c,p,g):Ge(c,Iu,g)}function Qf(c,p,g,R){for(var P=g-1,$=c.length;++P<$;)if(R(c[P],p))return P;return-1}function Iu(c){return c!==c}function Ou(c,p){var g=c==null?0:c.length;return g?Qr(c,p)/g:be}function Vr(c){return function(p){return p==null?i:p[c]}}function Jr(c){return function(p){return c==null?i:c[p]}}function bu(c,p,g,R,P){return P(c,function($,_t,k){g=R?(R=!1,$):p(g,$,_t,k)}),g}function kf(c,p){var g=c.length;for(c.sort(p);g--;)c[g]=c[g].value;return c}function Qr(c,p){for(var g,R=-1,P=c.length;++R<P;){var $=p(c[R]);$!==i&&(g=g===i?$:g+$)}return g}function kr(c,p){for(var g=-1,R=Array(c);++g<c;)R[g]=p(g);return R}function jf(c,p){return it(p,function(g){return[g,c[g]]})}function Du(c){return c&&c.slice(0,zu(c)+1).replace(Ur,"")}function Dt(c){return function(p){return c(p)}}function jr(c,p){return it(p,function(g){return c[g]})}function ge(c,p){return c.has(p)}function Pu(c,p){for(var g=-1,R=c.length;++g<R&&Yn(p,c[g],0)>-1;);return g}function Bu(c,p){for(var g=c.length;g--&&Yn(p,c[g],0)>-1;);return g}function ta(c,p){for(var g=c.length,R=0;g--;)c[g]===p&&++R;return R}var na=Jr(Uf),ea=Jr(Ff);function ra(c){return"\\"+Gf[c]}function ia(c,p){return c==null?i:c[p]}function $n(c){return Pf.test(c)}function ua(c){return Bf.test(c)}function sa(c){for(var p,g=[];!(p=c.next()).done;)g.push(p.value);return g}function ti(c){var p=-1,g=Array(c.size);return c.forEach(function(R,P){g[++p]=[P,R]}),g}function Wu(c,p){return function(g){return c(p(g))}}function Sn(c,p){for(var g=-1,R=c.length,P=0,$=[];++g<R;){var _t=c[g];(_t===p||_t===M)&&(c[g]=M,$[P++]=g)}return $}function He(c){var p=-1,g=Array(c.size);return c.forEach(function(R){g[++p]=R}),g}function oa(c){var p=-1,g=Array(c.size);return c.forEach(function(R){g[++p]=[R,R]}),g}function fa(c,p,g){for(var R=g-1,P=c.length;++R<P;)if(c[R]===p)return R;return-1}function aa(c,p,g){for(var R=g+1;R--;)if(c[R]===p)return R;return R}function Xn(c){return $n(c)?ca(c):Zf(c)}function kt(c){return $n(c)?ha(c):Vf(c)}function zu(c){for(var p=c.length;p--&&jo.test(c.charAt(p)););return p}var la=Jr(Nf);function ca(c){for(var p=qr.lastIndex=0;qr.test(c);)++p;return p}function ha(c){return c.match(qr)||[]}function ga(c){return c.match(Df)||[]}var _a=function c(p){p=p==null?wt:Zn.defaults(wt.Object(),p,Zn.pick(wt,Wf));var g=p.Array,R=p.Date,P=p.Error,$=p.Function,_t=p.Math,k=p.Object,ni=p.RegExp,pa=p.String,Ht=p.TypeError,qe=g.prototype,da=$.prototype,Vn=k.prototype,Ke=p["__core-js_shared__"],Ye=da.toString,J=Vn.hasOwnProperty,va=0,Uu=function(){var t=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),$e=Vn.toString,wa=Ye.call(k),ma=wt._,xa=ni("^"+Ye.call(J).replace(zr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xe=yu?p.Buffer:i,En=p.Symbol,Ze=p.Uint8Array,Fu=Xe?Xe.allocUnsafe:i,Ve=Wu(k.getPrototypeOf,k),Nu=k.create,Gu=Vn.propertyIsEnumerable,Je=qe.splice,Hu=En?En.isConcatSpreadable:i,_e=En?En.iterator:i,bn=En?En.toStringTag:i,Qe=function(){try{var t=zn(k,"defineProperty");return t({},"",{}),t}catch{}}(),ya=p.clearTimeout!==wt.clearTimeout&&p.clearTimeout,Sa=R&&R.now!==wt.Date.now&&R.now,Ea=p.setTimeout!==wt.setTimeout&&p.setTimeout,ke=_t.ceil,je=_t.floor,ei=k.getOwnPropertySymbols,Ra=Xe?Xe.isBuffer:i,qu=p.isFinite,Aa=qe.join,Ta=Wu(k.keys,k),pt=_t.max,xt=_t.min,La=R.now,Ma=p.parseInt,Ku=_t.random,Ca=qe.reverse,ri=zn(p,"DataView"),pe=zn(p,"Map"),ii=zn(p,"Promise"),Jn=zn(p,"Set"),de=zn(p,"WeakMap"),ve=zn(k,"create"),tr=de&&new de,Qn={},Ia=Un(ri),Oa=Un(pe),ba=Un(ii),Da=Un(Jn),Pa=Un(de),nr=En?En.prototype:i,we=nr?nr.valueOf:i,Yu=nr?nr.toString:i;function s(t){if(ot(t)&&!B(t)&&!(t instanceof H)){if(t instanceof qt)return t;if(J.call(t,"__wrapped__"))return $s(t)}return new qt(t)}var kn=function(){function t(){}return function(n){if(!st(n))return{};if(Nu)return Nu(n);t.prototype=n;var e=new t;return t.prototype=i,e}}();function er(){}function qt(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}s.templateSettings={escape:Xo,evaluate:Zo,interpolate:tu,variable:"",imports:{_:s}},s.prototype=er.prototype,s.prototype.constructor=s,qt.prototype=kn(er.prototype),qt.prototype.constructor=qt;function H(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=en,this.__views__=[]}function Ba(){var t=new H(this.__wrapped__);return t.__actions__=Lt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Lt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Lt(this.__views__),t}function Wa(){if(this.__filtered__){var t=new H(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function za(){var t=this.__wrapped__.value(),n=this.__dir__,e=B(t),r=n<0,u=e?t.length:0,o=Vl(0,u,this.__views__),a=o.start,l=o.end,h=l-a,v=r?l:a-1,w=this.__iteratees__,m=w.length,y=0,T=xt(h,this.__takeCount__);if(!e||!r&&u==h&&T==h)return ps(t,this.__actions__);var I=[];t:for(;h--&&y<T;){v+=n;for(var U=-1,O=t[v];++U<m;){var G=w[U],K=G.iteratee,Wt=G.type,At=K(O);if(Wt==on)O=At;else if(!At){if(Wt==dt)continue t;break t}}I[y++]=O}return I}H.prototype=kn(er.prototype),H.prototype.constructor=H;function Dn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ua(){this.__data__=ve?ve(null):{},this.size=0}function Fa(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Na(t){var n=this.__data__;if(ve){var e=n[t];return e===D?i:e}return J.call(n,t)?n[t]:i}function Ga(t){var n=this.__data__;return ve?n[t]!==i:J.call(n,t)}function Ha(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ve&&n===i?D:n,this}Dn.prototype.clear=Ua,Dn.prototype.delete=Fa,Dn.prototype.get=Na,Dn.prototype.has=Ga,Dn.prototype.set=Ha;function ln(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function qa(){this.__data__=[],this.size=0}function Ka(t){var n=this.__data__,e=rr(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():Je.call(n,e,1),--this.size,!0}function Ya(t){var n=this.__data__,e=rr(n,t);return e<0?i:n[e][1]}function $a(t){return rr(this.__data__,t)>-1}function Xa(t,n){var e=this.__data__,r=rr(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}ln.prototype.clear=qa,ln.prototype.delete=Ka,ln.prototype.get=Ya,ln.prototype.has=$a,ln.prototype.set=Xa;function cn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Za(){this.size=0,this.__data__={hash:new Dn,map:new(pe||ln),string:new Dn}}function Va(t){var n=pr(this,t).delete(t);return this.size-=n?1:0,n}function Ja(t){return pr(this,t).get(t)}function Qa(t){return pr(this,t).has(t)}function ka(t,n){var e=pr(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}cn.prototype.clear=Za,cn.prototype.delete=Va,cn.prototype.get=Ja,cn.prototype.has=Qa,cn.prototype.set=ka;function Pn(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new cn;++n<e;)this.add(t[n])}function ja(t){return this.__data__.set(t,D),this}function tl(t){return this.__data__.has(t)}Pn.prototype.add=Pn.prototype.push=ja,Pn.prototype.has=tl;function jt(t){var n=this.__data__=new ln(t);this.size=n.size}function nl(){this.__data__=new ln,this.size=0}function el(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function rl(t){return this.__data__.get(t)}function il(t){return this.__data__.has(t)}function ul(t,n){var e=this.__data__;if(e instanceof ln){var r=e.__data__;if(!pe||r.length<d-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new cn(r)}return e.set(t,n),this.size=e.size,this}jt.prototype.clear=nl,jt.prototype.delete=el,jt.prototype.get=rl,jt.prototype.has=il,jt.prototype.set=ul;function $u(t,n){var e=B(t),r=!e&&Fn(t),u=!e&&!r&&Mn(t),o=!e&&!r&&!u&&ee(t),a=e||r||u||o,l=a?kr(t.length,pa):[],h=l.length;for(var v in t)(n||J.call(t,v))&&!(a&&(v=="length"||u&&(v=="offset"||v=="parent")||o&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||pn(v,h)))&&l.push(v);return l}function Xu(t){var n=t.length;return n?t[pi(0,n-1)]:i}function sl(t,n){return dr(Lt(t),Bn(n,0,t.length))}function ol(t){return dr(Lt(t))}function ui(t,n,e){(e!==i&&!tn(t[n],e)||e===i&&!(n in t))&&hn(t,n,e)}function me(t,n,e){var r=t[n];(!(J.call(t,n)&&tn(r,e))||e===i&&!(n in t))&&hn(t,n,e)}function rr(t,n){for(var e=t.length;e--;)if(tn(t[e][0],n))return e;return-1}function fl(t,n,e,r){return Rn(t,function(u,o,a){n(r,u,e(u),a)}),r}function Zu(t,n){return t&&un(n,vt(n),t)}function al(t,n){return t&&un(n,Ct(n),t)}function hn(t,n,e){n=="__proto__"&&Qe?Qe(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function si(t,n){for(var e=-1,r=n.length,u=g(r),o=t==null;++e<r;)u[e]=o?i:Ni(t,n[e]);return u}function Bn(t,n,e){return t===t&&(e!==i&&(t=t<=e?t:e),n!==i&&(t=t>=n?t:n)),t}function Kt(t,n,e,r,u,o){var a,l=n&A,h=n&q,v=n&ut;if(e&&(a=u?e(t,r,u,o):e(t)),a!==i)return a;if(!st(t))return t;var w=B(t);if(w){if(a=Ql(t),!l)return Lt(t,a)}else{var m=yt(t),y=m==Be||m==Ji;if(Mn(t))return ws(t,l);if(m==an||m==Hn||y&&!u){if(a=h||y?{}:zs(t),!l)return h?Nl(t,al(a,t)):Fl(t,Zu(a,t))}else{if(!tt[m])return u?t:{};a=kl(t,m,l)}}o||(o=new jt);var T=o.get(t);if(T)return T;o.set(t,a),ho(t)?t.forEach(function(O){a.add(Kt(O,n,e,O,t,o))}):lo(t)&&t.forEach(function(O,G){a.set(G,Kt(O,n,e,G,t,o))});var I=v?h?Ti:Ai:h?Ct:vt,U=w?i:I(t);return Gt(U||t,function(O,G){U&&(G=O,O=t[G]),me(a,G,Kt(O,n,e,G,t,o))}),a}function ll(t){var n=vt(t);return function(e){return Vu(e,t,n)}}function Vu(t,n,e){var r=e.length;if(t==null)return!r;for(t=k(t);r--;){var u=e[r],o=n[u],a=t[u];if(a===i&&!(u in t)||!o(a))return!1}return!0}function Ju(t,n,e){if(typeof t!="function")throw new Ht(x);return Te(function(){t.apply(i,e)},n)}function xe(t,n,e,r){var u=-1,o=Ne,a=!0,l=t.length,h=[],v=n.length;if(!l)return h;e&&(n=it(n,Dt(e))),r?(o=$r,a=!1):n.length>=d&&(o=ge,a=!1,n=new Pn(n));t:for(;++u<l;){var w=t[u],m=e==null?w:e(w);if(w=r||w!==0?w:0,a&&m===m){for(var y=v;y--;)if(n[y]===m)continue t;h.push(w)}else o(n,m,r)||h.push(w)}return h}var Rn=Es(rn),Qu=Es(fi,!0);function cl(t,n){var e=!0;return Rn(t,function(r,u,o){return e=!!n(r,u,o),e}),e}function ir(t,n,e){for(var r=-1,u=t.length;++r<u;){var o=t[r],a=n(o);if(a!=null&&(l===i?a===a&&!Bt(a):e(a,l)))var l=a,h=o}return h}function hl(t,n,e,r){var u=t.length;for(e=z(e),e<0&&(e=-e>u?0:u+e),r=r===i||r>u?u:z(r),r<0&&(r+=u),r=e>r?0:_o(r);e<r;)t[e++]=n;return t}function ku(t,n){var e=[];return Rn(t,function(r,u,o){n(r,u,o)&&e.push(r)}),e}function mt(t,n,e,r,u){var o=-1,a=t.length;for(e||(e=tc),u||(u=[]);++o<a;){var l=t[o];n>0&&e(l)?n>1?mt(l,n-1,e,r,u):yn(u,l):r||(u[u.length]=l)}return u}var oi=Rs(),ju=Rs(!0);function rn(t,n){return t&&oi(t,n,vt)}function fi(t,n){return t&&ju(t,n,vt)}function ur(t,n){return xn(n,function(e){return dn(t[e])})}function Wn(t,n){n=Tn(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[sn(n[e++])];return e&&e==r?t:i}function ts(t,n,e){var r=n(t);return B(t)?r:yn(r,e(t))}function Et(t){return t==null?t===i?No:Uo:bn&&bn in k(t)?Zl(t):oc(t)}function ai(t,n){return t>n}function gl(t,n){return t!=null&&J.call(t,n)}function _l(t,n){return t!=null&&n in k(t)}function pl(t,n,e){return t>=xt(n,e)&&t<pt(n,e)}function li(t,n,e){for(var r=e?$r:Ne,u=t[0].length,o=t.length,a=o,l=g(o),h=1/0,v=[];a--;){var w=t[a];a&&n&&(w=it(w,Dt(n))),h=xt(w.length,h),l[a]=!e&&(n||u>=120&&w.length>=120)?new Pn(a&&w):i}w=t[0];var m=-1,y=l[0];t:for(;++m<u&&v.length<h;){var T=w[m],I=n?n(T):T;if(T=e||T!==0?T:0,!(y?ge(y,I):r(v,I,e))){for(a=o;--a;){var U=l[a];if(!(U?ge(U,I):r(t[a],I,e)))continue t}y&&y.push(I),v.push(T)}}return v}function dl(t,n,e,r){return rn(t,function(u,o,a){n(r,e(u),o,a)}),r}function ye(t,n,e){n=Tn(n,t),t=Gs(t,n);var r=t==null?t:t[sn($t(n))];return r==null?i:bt(r,t,e)}function ns(t){return ot(t)&&Et(t)==Hn}function vl(t){return ot(t)&&Et(t)==he}function wl(t){return ot(t)&&Et(t)==oe}function Se(t,n,e,r,u){return t===n?!0:t==null||n==null||!ot(t)&&!ot(n)?t!==t&&n!==n:ml(t,n,e,r,Se,u)}function ml(t,n,e,r,u,o){var a=B(t),l=B(n),h=a?De:yt(t),v=l?De:yt(n);h=h==Hn?an:h,v=v==Hn?an:v;var w=h==an,m=v==an,y=h==v;if(y&&Mn(t)){if(!Mn(n))return!1;a=!0,w=!1}if(y&&!w)return o||(o=new jt),a||ee(t)?Ps(t,n,e,r,u,o):$l(t,n,h,e,r,u,o);if(!(e&gt)){var T=w&&J.call(t,"__wrapped__"),I=m&&J.call(n,"__wrapped__");if(T||I){var U=T?t.value():t,O=I?n.value():n;return o||(o=new jt),u(U,O,e,r,o)}}return y?(o||(o=new jt),Xl(t,n,e,r,u,o)):!1}function xl(t){return ot(t)&&yt(t)==Jt}function ci(t,n,e,r){var u=e.length,o=u,a=!r;if(t==null)return!o;for(t=k(t);u--;){var l=e[u];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++u<o;){l=e[u];var h=l[0],v=t[h],w=l[1];if(a&&l[2]){if(v===i&&!(h in t))return!1}else{var m=new jt;if(r)var y=r(v,w,h,t,n,m);if(!(y===i?Se(w,v,gt|X,r,m):y))return!1}}return!0}function es(t){if(!st(t)||ec(t))return!1;var n=dn(t)?xa:lf;return n.test(Un(t))}function yl(t){return ot(t)&&Et(t)==ae}function Sl(t){return ot(t)&&yt(t)==Qt}function El(t){return ot(t)&&Sr(t.length)&&!!et[Et(t)]}function rs(t){return typeof t=="function"?t:t==null?It:typeof t=="object"?B(t)?ss(t[0],t[1]):us(t):To(t)}function hi(t){if(!Ae(t))return Ta(t);var n=[];for(var e in k(t))J.call(t,e)&&e!="constructor"&&n.push(e);return n}function Rl(t){if(!st(t))return sc(t);var n=Ae(t),e=[];for(var r in t)r=="constructor"&&(n||!J.call(t,r))||e.push(r);return e}function gi(t,n){return t<n}function is(t,n){var e=-1,r=Mt(t)?g(t.length):[];return Rn(t,function(u,o,a){r[++e]=n(u,o,a)}),r}function us(t){var n=Mi(t);return n.length==1&&n[0][2]?Fs(n[0][0],n[0][1]):function(e){return e===t||ci(e,t,n)}}function ss(t,n){return Ii(t)&&Us(n)?Fs(sn(t),n):function(e){var r=Ni(e,t);return r===i&&r===n?Gi(e,t):Se(n,r,gt|X)}}function sr(t,n,e,r,u){t!==n&&oi(n,function(o,a){if(u||(u=new jt),st(o))Al(t,n,a,e,sr,r,u);else{var l=r?r(bi(t,a),o,a+"",t,n,u):i;l===i&&(l=o),ui(t,a,l)}},Ct)}function Al(t,n,e,r,u,o,a){var l=bi(t,e),h=bi(n,e),v=a.get(h);if(v){ui(t,e,v);return}var w=o?o(l,h,e+"",t,n,a):i,m=w===i;if(m){var y=B(h),T=!y&&Mn(h),I=!y&&!T&&ee(h);w=h,y||T||I?B(l)?w=l:at(l)?w=Lt(l):T?(m=!1,w=ws(h,!0)):I?(m=!1,w=ms(h,!0)):w=[]:Le(h)||Fn(h)?(w=l,Fn(l)?w=po(l):(!st(l)||dn(l))&&(w=zs(h))):m=!1}m&&(a.set(h,w),u(w,h,r,o,a),a.delete(h)),ui(t,e,w)}function os(t,n){var e=t.length;if(e)return n+=n<0?e:0,pn(n,e)?t[n]:i}function fs(t,n,e){n.length?n=it(n,function(o){return B(o)?function(a){return Wn(a,o.length===1?o[0]:o)}:o}):n=[It];var r=-1;n=it(n,Dt(C()));var u=is(t,function(o,a,l){var h=it(n,function(v){return v(o)});return{criteria:h,index:++r,value:o}});return kf(u,function(o,a){return Ul(o,a,e)})}function Tl(t,n){return as(t,n,function(e,r){return Gi(t,r)})}function as(t,n,e){for(var r=-1,u=n.length,o={};++r<u;){var a=n[r],l=Wn(t,a);e(l,a)&&Ee(o,Tn(a,t),l)}return o}function Ll(t){return function(n){return Wn(n,t)}}function _i(t,n,e,r){var u=r?Qf:Yn,o=-1,a=n.length,l=t;for(t===n&&(n=Lt(n)),e&&(l=it(t,Dt(e)));++o<a;)for(var h=0,v=n[o],w=e?e(v):v;(h=u(l,w,h,r))>-1;)l!==t&&Je.call(l,h,1),Je.call(t,h,1);return t}function ls(t,n){for(var e=t?n.length:0,r=e-1;e--;){var u=n[e];if(e==r||u!==o){var o=u;pn(u)?Je.call(t,u,1):wi(t,u)}}return t}function pi(t,n){return t+je(Ku()*(n-t+1))}function Ml(t,n,e,r){for(var u=-1,o=pt(ke((n-t)/(e||1)),0),a=g(o);o--;)a[r?o:++u]=t,t+=e;return a}function di(t,n){var e="";if(!t||n<1||n>nt)return e;do n%2&&(e+=t),n=je(n/2),n&&(t+=t);while(n);return e}function F(t,n){return Di(Ns(t,n,It),t+"")}function Cl(t){return Xu(re(t))}function Il(t,n){var e=re(t);return dr(e,Bn(n,0,e.length))}function Ee(t,n,e,r){if(!st(t))return t;n=Tn(n,t);for(var u=-1,o=n.length,a=o-1,l=t;l!=null&&++u<o;){var h=sn(n[u]),v=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(u!=a){var w=l[h];v=r?r(w,h,l):i,v===i&&(v=st(w)?w:pn(n[u+1])?[]:{})}me(l,h,v),l=l[h]}return t}var cs=tr?function(t,n){return tr.set(t,n),t}:It,Ol=Qe?function(t,n){return Qe(t,"toString",{configurable:!0,enumerable:!1,value:qi(n),writable:!0})}:It;function bl(t){return dr(re(t))}function Yt(t,n,e){var r=-1,u=t.length;n<0&&(n=-n>u?0:u+n),e=e>u?u:e,e<0&&(e+=u),u=n>e?0:e-n>>>0,n>>>=0;for(var o=g(u);++r<u;)o[r]=t[r+n];return o}function Dl(t,n){var e;return Rn(t,function(r,u,o){return e=n(r,u,o),!e}),!!e}function or(t,n,e){var r=0,u=t==null?r:t.length;if(typeof n=="number"&&n===n&&u<=Po){for(;r<u;){var o=r+u>>>1,a=t[o];a!==null&&!Bt(a)&&(e?a<=n:a<n)?r=o+1:u=o}return u}return vi(t,n,It,e)}function vi(t,n,e,r){var u=0,o=t==null?0:t.length;if(o===0)return 0;n=e(n);for(var a=n!==n,l=n===null,h=Bt(n),v=n===i;u<o;){var w=je((u+o)/2),m=e(t[w]),y=m!==i,T=m===null,I=m===m,U=Bt(m);if(a)var O=r||I;else v?O=I&&(r||y):l?O=I&&y&&(r||!T):h?O=I&&y&&!T&&(r||!U):T||U?O=!1:O=r?m<=n:m<n;O?u=w+1:o=w}return xt(o,Do)}function hs(t,n){for(var e=-1,r=t.length,u=0,o=[];++e<r;){var a=t[e],l=n?n(a):a;if(!e||!tn(l,h)){var h=l;o[u++]=a===0?0:a}}return o}function gs(t){return typeof t=="number"?t:Bt(t)?be:+t}function Pt(t){if(typeof t=="string")return t;if(B(t))return it(t,Pt)+"";if(Bt(t))return Yu?Yu.call(t):"";var n=t+"";return n=="0"&&1/t==-Tt?"-0":n}function An(t,n,e){var r=-1,u=Ne,o=t.length,a=!0,l=[],h=l;if(e)a=!1,u=$r;else if(o>=d){var v=n?null:Kl(t);if(v)return He(v);a=!1,u=ge,h=new Pn}else h=n?[]:l;t:for(;++r<o;){var w=t[r],m=n?n(w):w;if(w=e||w!==0?w:0,a&&m===m){for(var y=h.length;y--;)if(h[y]===m)continue t;n&&h.push(m),l.push(w)}else u(h,m,e)||(h!==l&&h.push(m),l.push(w))}return l}function wi(t,n){return n=Tn(n,t),t=Gs(t,n),t==null||delete t[sn($t(n))]}function _s(t,n,e,r){return Ee(t,n,e(Wn(t,n)),r)}function fr(t,n,e,r){for(var u=t.length,o=r?u:-1;(r?o--:++o<u)&&n(t[o],o,t););return e?Yt(t,r?0:o,r?o+1:u):Yt(t,r?o+1:0,r?u:o)}function ps(t,n){var e=t;return e instanceof H&&(e=e.value()),Xr(n,function(r,u){return u.func.apply(u.thisArg,yn([r],u.args))},e)}function mi(t,n,e){var r=t.length;if(r<2)return r?An(t[0]):[];for(var u=-1,o=g(r);++u<r;)for(var a=t[u],l=-1;++l<r;)l!=u&&(o[u]=xe(o[u]||a,t[l],n,e));return An(mt(o,1),n,e)}function ds(t,n,e){for(var r=-1,u=t.length,o=n.length,a={};++r<u;){var l=r<o?n[r]:i;e(a,t[r],l)}return a}function xi(t){return at(t)?t:[]}function yi(t){return typeof t=="function"?t:It}function Tn(t,n){return B(t)?t:Ii(t,n)?[t]:Ys(Z(t))}var Pl=F;function Ln(t,n,e){var r=t.length;return e=e===i?r:e,!n&&e>=r?t:Yt(t,n,e)}var vs=ya||function(t){return wt.clearTimeout(t)};function ws(t,n){if(n)return t.slice();var e=t.length,r=Fu?Fu(e):new t.constructor(e);return t.copy(r),r}function Si(t){var n=new t.constructor(t.byteLength);return new Ze(n).set(new Ze(t)),n}function Bl(t,n){var e=n?Si(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function Wl(t){var n=new t.constructor(t.source,nu.exec(t));return n.lastIndex=t.lastIndex,n}function zl(t){return we?k(we.call(t)):{}}function ms(t,n){var e=n?Si(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function xs(t,n){if(t!==n){var e=t!==i,r=t===null,u=t===t,o=Bt(t),a=n!==i,l=n===null,h=n===n,v=Bt(n);if(!l&&!v&&!o&&t>n||o&&a&&h&&!l&&!v||r&&a&&h||!e&&h||!u)return 1;if(!r&&!o&&!v&&t<n||v&&e&&u&&!r&&!o||l&&e&&u||!a&&u||!h)return-1}return 0}function Ul(t,n,e){for(var r=-1,u=t.criteria,o=n.criteria,a=u.length,l=e.length;++r<a;){var h=xs(u[r],o[r]);if(h){if(r>=l)return h;var v=e[r];return h*(v=="desc"?-1:1)}}return t.index-n.index}function ys(t,n,e,r){for(var u=-1,o=t.length,a=e.length,l=-1,h=n.length,v=pt(o-a,0),w=g(h+v),m=!r;++l<h;)w[l]=n[l];for(;++u<a;)(m||u<o)&&(w[e[u]]=t[u]);for(;v--;)w[l++]=t[u++];return w}function Ss(t,n,e,r){for(var u=-1,o=t.length,a=-1,l=e.length,h=-1,v=n.length,w=pt(o-l,0),m=g(w+v),y=!r;++u<w;)m[u]=t[u];for(var T=u;++h<v;)m[T+h]=n[h];for(;++a<l;)(y||u<o)&&(m[T+e[a]]=t[u++]);return m}function Lt(t,n){var e=-1,r=t.length;for(n||(n=g(r));++e<r;)n[e]=t[e];return n}function un(t,n,e,r){var u=!e;e||(e={});for(var o=-1,a=n.length;++o<a;){var l=n[o],h=r?r(e[l],t[l],l,e,t):i;h===i&&(h=t[l]),u?hn(e,l,h):me(e,l,h)}return e}function Fl(t,n){return un(t,Ci(t),n)}function Nl(t,n){return un(t,Bs(t),n)}function ar(t,n){return function(e,r){var u=B(e)?Yf:fl,o=n?n():{};return u(e,t,C(r,2),o)}}function jn(t){return F(function(n,e){var r=-1,u=e.length,o=u>1?e[u-1]:i,a=u>2?e[2]:i;for(o=t.length>3&&typeof o=="function"?(u--,o):i,a&&Rt(e[0],e[1],a)&&(o=u<3?i:o,u=1),n=k(n);++r<u;){var l=e[r];l&&t(n,l,r,o)}return n})}function Es(t,n){return function(e,r){if(e==null)return e;if(!Mt(e))return t(e,r);for(var u=e.length,o=n?u:-1,a=k(e);(n?o--:++o<u)&&r(a[o],o,a)!==!1;);return e}}function Rs(t){return function(n,e,r){for(var u=-1,o=k(n),a=r(n),l=a.length;l--;){var h=a[t?l:++u];if(e(o[h],h,o)===!1)break}return n}}function Gl(t,n,e){var r=n&j,u=Re(t);function o(){var a=this&&this!==wt&&this instanceof o?u:t;return a.apply(r?e:this,arguments)}return o}function As(t){return function(n){n=Z(n);var e=$n(n)?kt(n):i,r=e?e[0]:n.charAt(0),u=e?Ln(e,1).join(""):n.slice(1);return r[t]()+u}}function te(t){return function(n){return Xr(Ro(Eo(n).replace(Of,"")),t,"")}}function Re(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=kn(t.prototype),r=t.apply(e,n);return st(r)?r:e}}function Hl(t,n,e){var r=Re(t);function u(){for(var o=arguments.length,a=g(o),l=o,h=ne(u);l--;)a[l]=arguments[l];var v=o<3&&a[0]!==h&&a[o-1]!==h?[]:Sn(a,h);if(o-=v.length,o<e)return Is(t,n,lr,u.placeholder,i,a,v,i,i,e-o);var w=this&&this!==wt&&this instanceof u?r:t;return bt(w,this,a)}return u}function Ts(t){return function(n,e,r){var u=k(n);if(!Mt(n)){var o=C(e,3);n=vt(n),e=function(l){return o(u[l],l,u)}}var a=t(n,e,r);return a>-1?u[o?n[a]:a]:i}}function Ls(t){return _n(function(n){var e=n.length,r=e,u=qt.prototype.thru;for(t&&n.reverse();r--;){var o=n[r];if(typeof o!="function")throw new Ht(x);if(u&&!a&&_r(o)=="wrapper")var a=new qt([],!0)}for(r=a?r:e;++r<e;){o=n[r];var l=_r(o),h=l=="wrapper"?Li(o):i;h&&Oi(h[0])&&h[1]==(Ft|ct|Ut|In)&&!h[4].length&&h[9]==1?a=a[_r(h[0])].apply(a,h[3]):a=o.length==1&&Oi(o)?a[l]():a.thru(o)}return function(){var v=arguments,w=v[0];if(a&&v.length==1&&B(w))return a.plant(w).value();for(var m=0,y=e?n[m].apply(this,v):w;++m<e;)y=n[m].call(this,y);return y}})}function lr(t,n,e,r,u,o,a,l,h,v){var w=n&Ft,m=n&j,y=n&N,T=n&(ct|Vt),I=n&Gn,U=y?i:Re(t);function O(){for(var G=arguments.length,K=g(G),Wt=G;Wt--;)K[Wt]=arguments[Wt];if(T)var At=ne(O),zt=ta(K,At);if(r&&(K=ys(K,r,u,T)),o&&(K=Ss(K,o,a,T)),G-=zt,T&&G<v){var lt=Sn(K,At);return Is(t,n,lr,O.placeholder,e,K,lt,l,h,v-G)}var nn=m?e:this,wn=y?nn[t]:t;return G=K.length,l?K=fc(K,l):I&&G>1&&K.reverse(),w&&h<G&&(K.length=h),this&&this!==wt&&this instanceof O&&(wn=U||Re(wn)),wn.apply(nn,K)}return O}function Ms(t,n){return function(e,r){return dl(e,t,n(r),{})}}function cr(t,n){return function(e,r){var u;if(e===i&&r===i)return n;if(e!==i&&(u=e),r!==i){if(u===i)return r;typeof e=="string"||typeof r=="string"?(e=Pt(e),r=Pt(r)):(e=gs(e),r=gs(r)),u=t(e,r)}return u}}function Ei(t){return _n(function(n){return n=it(n,Dt(C())),F(function(e){var r=this;return t(n,function(u){return bt(u,r,e)})})})}function hr(t,n){n=n===i?" ":Pt(n);var e=n.length;if(e<2)return e?di(n,t):n;var r=di(n,ke(t/Xn(n)));return $n(n)?Ln(kt(r),0,t).join(""):r.slice(0,t)}function ql(t,n,e,r){var u=n&j,o=Re(t);function a(){for(var l=-1,h=arguments.length,v=-1,w=r.length,m=g(w+h),y=this&&this!==wt&&this instanceof a?o:t;++v<w;)m[v]=r[v];for(;h--;)m[v++]=arguments[++l];return bt(y,u?e:this,m)}return a}function Cs(t){return function(n,e,r){return r&&typeof r!="number"&&Rt(n,e,r)&&(e=r=i),n=vn(n),e===i?(e=n,n=0):e=vn(e),r=r===i?n<e?1:-1:vn(r),Ml(n,e,r,t)}}function gr(t){return function(n,e){return typeof n=="string"&&typeof e=="string"||(n=Xt(n),e=Xt(e)),t(n,e)}}function Is(t,n,e,r,u,o,a,l,h,v){var w=n&ct,m=w?a:i,y=w?i:a,T=w?o:i,I=w?i:o;n|=w?Ut:mn,n&=~(w?mn:Ut),n&rt||(n&=~(j|N));var U=[t,n,u,T,m,I,y,l,h,v],O=e.apply(i,U);return Oi(t)&&Hs(O,U),O.placeholder=r,qs(O,t,n)}function Ri(t){var n=_t[t];return function(e,r){if(e=Xt(e),r=r==null?0:xt(z(r),292),r&&qu(e)){var u=(Z(e)+"e").split("e"),o=n(u[0]+"e"+(+u[1]+r));return u=(Z(o)+"e").split("e"),+(u[0]+"e"+(+u[1]-r))}return n(e)}}var Kl=Jn&&1/He(new Jn([,-0]))[1]==Tt?function(t){return new Jn(t)}:$i;function Os(t){return function(n){var e=yt(n);return e==Jt?ti(n):e==Qt?oa(n):jf(n,t(n))}}function gn(t,n,e,r,u,o,a,l){var h=n&N;if(!h&&typeof t!="function")throw new Ht(x);var v=r?r.length:0;if(v||(n&=~(Ut|mn),r=u=i),a=a===i?a:pt(z(a),0),l=l===i?l:z(l),v-=u?u.length:0,n&mn){var w=r,m=u;r=u=i}var y=h?i:Li(t),T=[t,n,e,r,u,w,m,o,a,l];if(y&&uc(T,y),t=T[0],n=T[1],e=T[2],r=T[3],u=T[4],l=T[9]=T[9]===i?h?0:t.length:pt(T[9]-v,0),!l&&n&(ct|Vt)&&(n&=~(ct|Vt)),!n||n==j)var I=Gl(t,n,e);else n==ct||n==Vt?I=Hl(t,n,l):(n==Ut||n==(j|Ut))&&!u.length?I=ql(t,n,e,r):I=lr.apply(i,T);var U=y?cs:Hs;return qs(U(I,T),t,n)}function bs(t,n,e,r){return t===i||tn(t,Vn[e])&&!J.call(r,e)?n:t}function Ds(t,n,e,r,u,o){return st(t)&&st(n)&&(o.set(n,t),sr(t,n,i,Ds,o),o.delete(n)),t}function Yl(t){return Le(t)?i:t}function Ps(t,n,e,r,u,o){var a=e&gt,l=t.length,h=n.length;if(l!=h&&!(a&&h>l))return!1;var v=o.get(t),w=o.get(n);if(v&&w)return v==n&&w==t;var m=-1,y=!0,T=e&X?new Pn:i;for(o.set(t,n),o.set(n,t);++m<l;){var I=t[m],U=n[m];if(r)var O=a?r(U,I,m,n,t,o):r(I,U,m,t,n,o);if(O!==i){if(O)continue;y=!1;break}if(T){if(!Zr(n,function(G,K){if(!ge(T,K)&&(I===G||u(I,G,e,r,o)))return T.push(K)})){y=!1;break}}else if(!(I===U||u(I,U,e,r,o))){y=!1;break}}return o.delete(t),o.delete(n),y}function $l(t,n,e,r,u,o,a){switch(e){case qn:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case he:return!(t.byteLength!=n.byteLength||!o(new Ze(t),new Ze(n)));case se:case oe:case fe:return tn(+t,+n);case Pe:return t.name==n.name&&t.message==n.message;case ae:case le:return t==n+"";case Jt:var l=ti;case Qt:var h=r&gt;if(l||(l=He),t.size!=n.size&&!h)return!1;var v=a.get(t);if(v)return v==n;r|=X,a.set(t,n);var w=Ps(l(t),l(n),r,u,o,a);return a.delete(t),w;case We:if(we)return we.call(t)==we.call(n)}return!1}function Xl(t,n,e,r,u,o){var a=e&gt,l=Ai(t),h=l.length,v=Ai(n),w=v.length;if(h!=w&&!a)return!1;for(var m=h;m--;){var y=l[m];if(!(a?y in n:J.call(n,y)))return!1}var T=o.get(t),I=o.get(n);if(T&&I)return T==n&&I==t;var U=!0;o.set(t,n),o.set(n,t);for(var O=a;++m<h;){y=l[m];var G=t[y],K=n[y];if(r)var Wt=a?r(K,G,y,n,t,o):r(G,K,y,t,n,o);if(!(Wt===i?G===K||u(G,K,e,r,o):Wt)){U=!1;break}O||(O=y=="constructor")}if(U&&!O){var At=t.constructor,zt=n.constructor;At!=zt&&"constructor"in t&&"constructor"in n&&!(typeof At=="function"&&At instanceof At&&typeof zt=="function"&&zt instanceof zt)&&(U=!1)}return o.delete(t),o.delete(n),U}function _n(t){return Di(Ns(t,i,Vs),t+"")}function Ai(t){return ts(t,vt,Ci)}function Ti(t){return ts(t,Ct,Bs)}var Li=tr?function(t){return tr.get(t)}:$i;function _r(t){for(var n=t.name+"",e=Qn[n],r=J.call(Qn,n)?e.length:0;r--;){var u=e[r],o=u.func;if(o==null||o==t)return u.name}return n}function ne(t){var n=J.call(s,"placeholder")?s:t;return n.placeholder}function C(){var t=s.iteratee||Ki;return t=t===Ki?rs:t,arguments.length?t(arguments[0],arguments[1]):t}function pr(t,n){var e=t.__data__;return nc(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Mi(t){for(var n=vt(t),e=n.length;e--;){var r=n[e],u=t[r];n[e]=[r,u,Us(u)]}return n}function zn(t,n){var e=ia(t,n);return es(e)?e:i}function Zl(t){var n=J.call(t,bn),e=t[bn];try{t[bn]=i;var r=!0}catch{}var u=$e.call(t);return r&&(n?t[bn]=e:delete t[bn]),u}var Ci=ei?function(t){return t==null?[]:(t=k(t),xn(ei(t),function(n){return Gu.call(t,n)}))}:Xi,Bs=ei?function(t){for(var n=[];t;)yn(n,Ci(t)),t=Ve(t);return n}:Xi,yt=Et;(ri&&yt(new ri(new ArrayBuffer(1)))!=qn||pe&&yt(new pe)!=Jt||ii&&yt(ii.resolve())!=Qi||Jn&&yt(new Jn)!=Qt||de&&yt(new de)!=ce)&&(yt=function(t){var n=Et(t),e=n==an?t.constructor:i,r=e?Un(e):"";if(r)switch(r){case Ia:return qn;case Oa:return Jt;case ba:return Qi;case Da:return Qt;case Pa:return ce}return n});function Vl(t,n,e){for(var r=-1,u=e.length;++r<u;){var o=e[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":n-=a;break;case"take":n=xt(n,t+a);break;case"takeRight":t=pt(t,n-a);break}}return{start:t,end:n}}function Jl(t){var n=t.match(nf);return n?n[1].split(ef):[]}function Ws(t,n,e){n=Tn(n,t);for(var r=-1,u=n.length,o=!1;++r<u;){var a=sn(n[r]);if(!(o=t!=null&&e(t,a)))break;t=t[a]}return o||++r!=u?o:(u=t==null?0:t.length,!!u&&Sr(u)&&pn(a,u)&&(B(t)||Fn(t)))}function Ql(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&J.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function zs(t){return typeof t.constructor=="function"&&!Ae(t)?kn(Ve(t)):{}}function kl(t,n,e){var r=t.constructor;switch(n){case he:return Si(t);case se:case oe:return new r(+t);case qn:return Bl(t,e);case Mr:case Cr:case Ir:case Or:case br:case Dr:case Pr:case Br:case Wr:return ms(t,e);case Jt:return new r;case fe:case le:return new r(t);case ae:return Wl(t);case Qt:return new r;case We:return zl(t)}}function jl(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(tf,`{
/* [wrapped with `+n+`] */
`)}function tc(t){return B(t)||Fn(t)||!!(Hu&&t&&t[Hu])}function pn(t,n){var e=typeof t;return n=n??nt,!!n&&(e=="number"||e!="symbol"&&hf.test(t))&&t>-1&&t%1==0&&t<n}function Rt(t,n,e){if(!st(e))return!1;var r=typeof n;return(r=="number"?Mt(e)&&pn(n,e.length):r=="string"&&n in e)?tn(e[n],t):!1}function Ii(t,n){if(B(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Bt(t)?!0:Jo.test(t)||!Vo.test(t)||n!=null&&t in k(n)}function nc(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Oi(t){var n=_r(t),e=s[n];if(typeof e!="function"||!(n in H.prototype))return!1;if(t===e)return!0;var r=Li(e);return!!r&&t===r[0]}function ec(t){return!!Uu&&Uu in t}var rc=Ke?dn:Zi;function Ae(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Vn;return t===e}function Us(t){return t===t&&!st(t)}function Fs(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==i||t in k(e))}}function ic(t){var n=xr(t,function(r){return e.size===W&&e.clear(),r}),e=n.cache;return n}function uc(t,n){var e=t[1],r=n[1],u=e|r,o=u<(j|N|Ft),a=r==Ft&&e==ct||r==Ft&&e==In&&t[7].length<=n[8]||r==(Ft|In)&&n[7].length<=n[8]&&e==ct;if(!(o||a))return t;r&j&&(t[2]=n[2],u|=e&j?0:rt);var l=n[3];if(l){var h=t[3];t[3]=h?ys(h,l,n[4]):l,t[4]=h?Sn(t[3],M):n[4]}return l=n[5],l&&(h=t[5],t[5]=h?Ss(h,l,n[6]):l,t[6]=h?Sn(t[5],M):n[6]),l=n[7],l&&(t[7]=l),r&Ft&&(t[8]=t[8]==null?n[8]:xt(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=u,t}function sc(t){var n=[];if(t!=null)for(var e in k(t))n.push(e);return n}function oc(t){return $e.call(t)}function Ns(t,n,e){return n=pt(n===i?t.length-1:n,0),function(){for(var r=arguments,u=-1,o=pt(r.length-n,0),a=g(o);++u<o;)a[u]=r[n+u];u=-1;for(var l=g(n+1);++u<n;)l[u]=r[u];return l[n]=e(a),bt(t,this,l)}}function Gs(t,n){return n.length<2?t:Wn(t,Yt(n,0,-1))}function fc(t,n){for(var e=t.length,r=xt(n.length,e),u=Lt(t);r--;){var o=n[r];t[r]=pn(o,e)?u[o]:i}return t}function bi(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Hs=Ks(cs),Te=Ea||function(t,n){return wt.setTimeout(t,n)},Di=Ks(Ol);function qs(t,n,e){var r=n+"";return Di(t,jl(r,ac(Jl(r),e)))}function Ks(t){var n=0,e=0;return function(){var r=La(),u=Y-(r-e);if(e=r,u>0){if(++n>=V)return arguments[0]}else n=0;return t.apply(i,arguments)}}function dr(t,n){var e=-1,r=t.length,u=r-1;for(n=n===i?r:n;++e<n;){var o=pi(e,u),a=t[o];t[o]=t[e],t[e]=a}return t.length=n,t}var Ys=ic(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Qo,function(e,r,u,o){n.push(u?o.replace(sf,"$1"):r||e)}),n});function sn(t){if(typeof t=="string"||Bt(t))return t;var n=t+"";return n=="0"&&1/t==-Tt?"-0":n}function Un(t){if(t!=null){try{return Ye.call(t)}catch{}try{return t+""}catch{}}return""}function ac(t,n){return Gt(Bo,function(e){var r="_."+e[0];n&e[1]&&!Ne(t,r)&&t.push(r)}),t.sort()}function $s(t){if(t instanceof H)return t.clone();var n=new qt(t.__wrapped__,t.__chain__);return n.__actions__=Lt(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function lc(t,n,e){(e?Rt(t,n,e):n===i)?n=1:n=pt(z(n),0);var r=t==null?0:t.length;if(!r||n<1)return[];for(var u=0,o=0,a=g(ke(r/n));u<r;)a[o++]=Yt(t,u,u+=n);return a}function cc(t){for(var n=-1,e=t==null?0:t.length,r=0,u=[];++n<e;){var o=t[n];o&&(u[r++]=o)}return u}function hc(){var t=arguments.length;if(!t)return[];for(var n=g(t-1),e=arguments[0],r=t;r--;)n[r-1]=arguments[r];return yn(B(e)?Lt(e):[e],mt(n,1))}var gc=F(function(t,n){return at(t)?xe(t,mt(n,1,at,!0)):[]}),_c=F(function(t,n){var e=$t(n);return at(e)&&(e=i),at(t)?xe(t,mt(n,1,at,!0),C(e,2)):[]}),pc=F(function(t,n){var e=$t(n);return at(e)&&(e=i),at(t)?xe(t,mt(n,1,at,!0),i,e):[]});function dc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:z(n),Yt(t,n<0?0:n,r)):[]}function vc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:z(n),n=r-n,Yt(t,0,n<0?0:n)):[]}function wc(t,n){return t&&t.length?fr(t,C(n,3),!0,!0):[]}function mc(t,n){return t&&t.length?fr(t,C(n,3),!0):[]}function xc(t,n,e,r){var u=t==null?0:t.length;return u?(e&&typeof e!="number"&&Rt(t,n,e)&&(e=0,r=u),hl(t,n,e,r)):[]}function Xs(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=e==null?0:z(e);return u<0&&(u=pt(r+u,0)),Ge(t,C(n,3),u)}function Zs(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=r-1;return e!==i&&(u=z(e),u=e<0?pt(r+u,0):xt(u,r-1)),Ge(t,C(n,3),u,!0)}function Vs(t){var n=t==null?0:t.length;return n?mt(t,1):[]}function yc(t){var n=t==null?0:t.length;return n?mt(t,Tt):[]}function Sc(t,n){var e=t==null?0:t.length;return e?(n=n===i?1:z(n),mt(t,n)):[]}function Ec(t){for(var n=-1,e=t==null?0:t.length,r={};++n<e;){var u=t[n];r[u[0]]=u[1]}return r}function Js(t){return t&&t.length?t[0]:i}function Rc(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=e==null?0:z(e);return u<0&&(u=pt(r+u,0)),Yn(t,n,u)}function Ac(t){var n=t==null?0:t.length;return n?Yt(t,0,-1):[]}var Tc=F(function(t){var n=it(t,xi);return n.length&&n[0]===t[0]?li(n):[]}),Lc=F(function(t){var n=$t(t),e=it(t,xi);return n===$t(e)?n=i:e.pop(),e.length&&e[0]===t[0]?li(e,C(n,2)):[]}),Mc=F(function(t){var n=$t(t),e=it(t,xi);return n=typeof n=="function"?n:i,n&&e.pop(),e.length&&e[0]===t[0]?li(e,i,n):[]});function Cc(t,n){return t==null?"":Aa.call(t,n)}function $t(t){var n=t==null?0:t.length;return n?t[n-1]:i}function Ic(t,n,e){var r=t==null?0:t.length;if(!r)return-1;var u=r;return e!==i&&(u=z(e),u=u<0?pt(r+u,0):xt(u,r-1)),n===n?aa(t,n,u):Ge(t,Iu,u,!0)}function Oc(t,n){return t&&t.length?os(t,z(n)):i}var bc=F(Qs);function Qs(t,n){return t&&t.length&&n&&n.length?_i(t,n):t}function Dc(t,n,e){return t&&t.length&&n&&n.length?_i(t,n,C(e,2)):t}function Pc(t,n,e){return t&&t.length&&n&&n.length?_i(t,n,i,e):t}var Bc=_n(function(t,n){var e=t==null?0:t.length,r=si(t,n);return ls(t,it(n,function(u){return pn(u,e)?+u:u}).sort(xs)),r});function Wc(t,n){var e=[];if(!(t&&t.length))return e;var r=-1,u=[],o=t.length;for(n=C(n,3);++r<o;){var a=t[r];n(a,r,t)&&(e.push(a),u.push(r))}return ls(t,u),e}function Pi(t){return t==null?t:Ca.call(t)}function zc(t,n,e){var r=t==null?0:t.length;return r?(e&&typeof e!="number"&&Rt(t,n,e)?(n=0,e=r):(n=n==null?0:z(n),e=e===i?r:z(e)),Yt(t,n,e)):[]}function Uc(t,n){return or(t,n)}function Fc(t,n,e){return vi(t,n,C(e,2))}function Nc(t,n){var e=t==null?0:t.length;if(e){var r=or(t,n);if(r<e&&tn(t[r],n))return r}return-1}function Gc(t,n){return or(t,n,!0)}function Hc(t,n,e){return vi(t,n,C(e,2),!0)}function qc(t,n){var e=t==null?0:t.length;if(e){var r=or(t,n,!0)-1;if(tn(t[r],n))return r}return-1}function Kc(t){return t&&t.length?hs(t):[]}function Yc(t,n){return t&&t.length?hs(t,C(n,2)):[]}function $c(t){var n=t==null?0:t.length;return n?Yt(t,1,n):[]}function Xc(t,n,e){return t&&t.length?(n=e||n===i?1:z(n),Yt(t,0,n<0?0:n)):[]}function Zc(t,n,e){var r=t==null?0:t.length;return r?(n=e||n===i?1:z(n),n=r-n,Yt(t,n<0?0:n,r)):[]}function Vc(t,n){return t&&t.length?fr(t,C(n,3),!1,!0):[]}function Jc(t,n){return t&&t.length?fr(t,C(n,3)):[]}var Qc=F(function(t){return An(mt(t,1,at,!0))}),kc=F(function(t){var n=$t(t);return at(n)&&(n=i),An(mt(t,1,at,!0),C(n,2))}),jc=F(function(t){var n=$t(t);return n=typeof n=="function"?n:i,An(mt(t,1,at,!0),i,n)});function th(t){return t&&t.length?An(t):[]}function nh(t,n){return t&&t.length?An(t,C(n,2)):[]}function eh(t,n){return n=typeof n=="function"?n:i,t&&t.length?An(t,i,n):[]}function Bi(t){if(!(t&&t.length))return[];var n=0;return t=xn(t,function(e){if(at(e))return n=pt(e.length,n),!0}),kr(n,function(e){return it(t,Vr(e))})}function ks(t,n){if(!(t&&t.length))return[];var e=Bi(t);return n==null?e:it(e,function(r){return bt(n,i,r)})}var rh=F(function(t,n){return at(t)?xe(t,n):[]}),ih=F(function(t){return mi(xn(t,at))}),uh=F(function(t){var n=$t(t);return at(n)&&(n=i),mi(xn(t,at),C(n,2))}),sh=F(function(t){var n=$t(t);return n=typeof n=="function"?n:i,mi(xn(t,at),i,n)}),oh=F(Bi);function fh(t,n){return ds(t||[],n||[],me)}function ah(t,n){return ds(t||[],n||[],Ee)}var lh=F(function(t){var n=t.length,e=n>1?t[n-1]:i;return e=typeof e=="function"?(t.pop(),e):i,ks(t,e)});function js(t){var n=s(t);return n.__chain__=!0,n}function ch(t,n){return n(t),t}function vr(t,n){return n(t)}var hh=_n(function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,u=function(o){return si(o,t)};return n>1||this.__actions__.length||!(r instanceof H)||!pn(e)?this.thru(u):(r=r.slice(e,+e+(n?1:0)),r.__actions__.push({func:vr,args:[u],thisArg:i}),new qt(r,this.__chain__).thru(function(o){return n&&!o.length&&o.push(i),o}))});function gh(){return js(this)}function _h(){return new qt(this.value(),this.__chain__)}function ph(){this.__values__===i&&(this.__values__=go(this.value()));var t=this.__index__>=this.__values__.length,n=t?i:this.__values__[this.__index__++];return{done:t,value:n}}function dh(){return this}function vh(t){for(var n,e=this;e instanceof er;){var r=$s(e);r.__index__=0,r.__values__=i,n?u.__wrapped__=r:n=r;var u=r;e=e.__wrapped__}return u.__wrapped__=t,n}function wh(){var t=this.__wrapped__;if(t instanceof H){var n=t;return this.__actions__.length&&(n=new H(this)),n=n.reverse(),n.__actions__.push({func:vr,args:[Pi],thisArg:i}),new qt(n,this.__chain__)}return this.thru(Pi)}function mh(){return ps(this.__wrapped__,this.__actions__)}var xh=ar(function(t,n,e){J.call(t,e)?++t[e]:hn(t,e,1)});function yh(t,n,e){var r=B(t)?Mu:cl;return e&&Rt(t,n,e)&&(n=i),r(t,C(n,3))}function Sh(t,n){var e=B(t)?xn:ku;return e(t,C(n,3))}var Eh=Ts(Xs),Rh=Ts(Zs);function Ah(t,n){return mt(wr(t,n),1)}function Th(t,n){return mt(wr(t,n),Tt)}function Lh(t,n,e){return e=e===i?1:z(e),mt(wr(t,n),e)}function to(t,n){var e=B(t)?Gt:Rn;return e(t,C(n,3))}function no(t,n){var e=B(t)?$f:Qu;return e(t,C(n,3))}var Mh=ar(function(t,n,e){J.call(t,e)?t[e].push(n):hn(t,e,[n])});function Ch(t,n,e,r){t=Mt(t)?t:re(t),e=e&&!r?z(e):0;var u=t.length;return e<0&&(e=pt(u+e,0)),Er(t)?e<=u&&t.indexOf(n,e)>-1:!!u&&Yn(t,n,e)>-1}var Ih=F(function(t,n,e){var r=-1,u=typeof n=="function",o=Mt(t)?g(t.length):[];return Rn(t,function(a){o[++r]=u?bt(n,a,e):ye(a,n,e)}),o}),Oh=ar(function(t,n,e){hn(t,e,n)});function wr(t,n){var e=B(t)?it:is;return e(t,C(n,3))}function bh(t,n,e,r){return t==null?[]:(B(n)||(n=n==null?[]:[n]),e=r?i:e,B(e)||(e=e==null?[]:[e]),fs(t,n,e))}var Dh=ar(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]});function Ph(t,n,e){var r=B(t)?Xr:bu,u=arguments.length<3;return r(t,C(n,4),e,u,Rn)}function Bh(t,n,e){var r=B(t)?Xf:bu,u=arguments.length<3;return r(t,C(n,4),e,u,Qu)}function Wh(t,n){var e=B(t)?xn:ku;return e(t,yr(C(n,3)))}function zh(t){var n=B(t)?Xu:Cl;return n(t)}function Uh(t,n,e){(e?Rt(t,n,e):n===i)?n=1:n=z(n);var r=B(t)?sl:Il;return r(t,n)}function Fh(t){var n=B(t)?ol:bl;return n(t)}function Nh(t){if(t==null)return 0;if(Mt(t))return Er(t)?Xn(t):t.length;var n=yt(t);return n==Jt||n==Qt?t.size:hi(t).length}function Gh(t,n,e){var r=B(t)?Zr:Dl;return e&&Rt(t,n,e)&&(n=i),r(t,C(n,3))}var Hh=F(function(t,n){if(t==null)return[];var e=n.length;return e>1&&Rt(t,n[0],n[1])?n=[]:e>2&&Rt(n[0],n[1],n[2])&&(n=[n[0]]),fs(t,mt(n,1),[])}),mr=Sa||function(){return wt.Date.now()};function qh(t,n){if(typeof n!="function")throw new Ht(x);return t=z(t),function(){if(--t<1)return n.apply(this,arguments)}}function eo(t,n,e){return n=e?i:n,n=t&&n==null?t.length:n,gn(t,Ft,i,i,i,i,n)}function ro(t,n){var e;if(typeof n!="function")throw new Ht(x);return t=z(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var Wi=F(function(t,n,e){var r=j;if(e.length){var u=Sn(e,ne(Wi));r|=Ut}return gn(t,r,n,e,u)}),io=F(function(t,n,e){var r=j|N;if(e.length){var u=Sn(e,ne(io));r|=Ut}return gn(n,r,t,e,u)});function uo(t,n,e){n=e?i:n;var r=gn(t,ct,i,i,i,i,i,n);return r.placeholder=uo.placeholder,r}function so(t,n,e){n=e?i:n;var r=gn(t,Vt,i,i,i,i,i,n);return r.placeholder=so.placeholder,r}function oo(t,n,e){var r,u,o,a,l,h,v=0,w=!1,m=!1,y=!0;if(typeof t!="function")throw new Ht(x);n=Xt(n)||0,st(e)&&(w=!!e.leading,m="maxWait"in e,o=m?pt(Xt(e.maxWait)||0,n):o,y="trailing"in e?!!e.trailing:y);function T(lt){var nn=r,wn=u;return r=u=i,v=lt,a=t.apply(wn,nn),a}function I(lt){return v=lt,l=Te(G,n),w?T(lt):a}function U(lt){var nn=lt-h,wn=lt-v,Lo=n-nn;return m?xt(Lo,o-wn):Lo}function O(lt){var nn=lt-h,wn=lt-v;return h===i||nn>=n||nn<0||m&&wn>=o}function G(){var lt=mr();if(O(lt))return K(lt);l=Te(G,U(lt))}function K(lt){return l=i,y&&r?T(lt):(r=u=i,a)}function Wt(){l!==i&&vs(l),v=0,r=h=u=l=i}function At(){return l===i?a:K(mr())}function zt(){var lt=mr(),nn=O(lt);if(r=arguments,u=this,h=lt,nn){if(l===i)return I(h);if(m)return vs(l),l=Te(G,n),T(h)}return l===i&&(l=Te(G,n)),a}return zt.cancel=Wt,zt.flush=At,zt}var Kh=F(function(t,n){return Ju(t,1,n)}),Yh=F(function(t,n,e){return Ju(t,Xt(n)||0,e)});function $h(t){return gn(t,Gn)}function xr(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Ht(x);var e=function(){var r=arguments,u=n?n.apply(this,r):r[0],o=e.cache;if(o.has(u))return o.get(u);var a=t.apply(this,r);return e.cache=o.set(u,a)||o,a};return e.cache=new(xr.Cache||cn),e}xr.Cache=cn;function yr(t){if(typeof t!="function")throw new Ht(x);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Xh(t){return ro(2,t)}var Zh=Pl(function(t,n){n=n.length==1&&B(n[0])?it(n[0],Dt(C())):it(mt(n,1),Dt(C()));var e=n.length;return F(function(r){for(var u=-1,o=xt(r.length,e);++u<o;)r[u]=n[u].call(this,r[u]);return bt(t,this,r)})}),zi=F(function(t,n){var e=Sn(n,ne(zi));return gn(t,Ut,i,n,e)}),fo=F(function(t,n){var e=Sn(n,ne(fo));return gn(t,mn,i,n,e)}),Vh=_n(function(t,n){return gn(t,In,i,i,i,n)});function Jh(t,n){if(typeof t!="function")throw new Ht(x);return n=n===i?n:z(n),F(t,n)}function Qh(t,n){if(typeof t!="function")throw new Ht(x);return n=n==null?0:pt(z(n),0),F(function(e){var r=e[n],u=Ln(e,0,n);return r&&yn(u,r),bt(t,this,u)})}function kh(t,n,e){var r=!0,u=!0;if(typeof t!="function")throw new Ht(x);return st(e)&&(r="leading"in e?!!e.leading:r,u="trailing"in e?!!e.trailing:u),oo(t,n,{leading:r,maxWait:n,trailing:u})}function jh(t){return eo(t,1)}function tg(t,n){return zi(yi(n),t)}function ng(){if(!arguments.length)return[];var t=arguments[0];return B(t)?t:[t]}function eg(t){return Kt(t,ut)}function rg(t,n){return n=typeof n=="function"?n:i,Kt(t,ut,n)}function ig(t){return Kt(t,A|ut)}function ug(t,n){return n=typeof n=="function"?n:i,Kt(t,A|ut,n)}function sg(t,n){return n==null||Vu(t,n,vt(n))}function tn(t,n){return t===n||t!==t&&n!==n}var og=gr(ai),fg=gr(function(t,n){return t>=n}),Fn=ns(function(){return arguments}())?ns:function(t){return ot(t)&&J.call(t,"callee")&&!Gu.call(t,"callee")},B=g.isArray,ag=Su?Dt(Su):vl;function Mt(t){return t!=null&&Sr(t.length)&&!dn(t)}function at(t){return ot(t)&&Mt(t)}function lg(t){return t===!0||t===!1||ot(t)&&Et(t)==se}var Mn=Ra||Zi,cg=Eu?Dt(Eu):wl;function hg(t){return ot(t)&&t.nodeType===1&&!Le(t)}function gg(t){if(t==null)return!0;if(Mt(t)&&(B(t)||typeof t=="string"||typeof t.splice=="function"||Mn(t)||ee(t)||Fn(t)))return!t.length;var n=yt(t);if(n==Jt||n==Qt)return!t.size;if(Ae(t))return!hi(t).length;for(var e in t)if(J.call(t,e))return!1;return!0}function _g(t,n){return Se(t,n)}function pg(t,n,e){e=typeof e=="function"?e:i;var r=e?e(t,n):i;return r===i?Se(t,n,i,e):!!r}function Ui(t){if(!ot(t))return!1;var n=Et(t);return n==Pe||n==zo||typeof t.message=="string"&&typeof t.name=="string"&&!Le(t)}function dg(t){return typeof t=="number"&&qu(t)}function dn(t){if(!st(t))return!1;var n=Et(t);return n==Be||n==Ji||n==Wo||n==Fo}function ao(t){return typeof t=="number"&&t==z(t)}function Sr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=nt}function st(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function ot(t){return t!=null&&typeof t=="object"}var lo=Ru?Dt(Ru):xl;function vg(t,n){return t===n||ci(t,n,Mi(n))}function wg(t,n,e){return e=typeof e=="function"?e:i,ci(t,n,Mi(n),e)}function mg(t){return co(t)&&t!=+t}function xg(t){if(rc(t))throw new P(E);return es(t)}function yg(t){return t===null}function Sg(t){return t==null}function co(t){return typeof t=="number"||ot(t)&&Et(t)==fe}function Le(t){if(!ot(t)||Et(t)!=an)return!1;var n=Ve(t);if(n===null)return!0;var e=J.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Ye.call(e)==wa}var Fi=Au?Dt(Au):yl;function Eg(t){return ao(t)&&t>=-nt&&t<=nt}var ho=Tu?Dt(Tu):Sl;function Er(t){return typeof t=="string"||!B(t)&&ot(t)&&Et(t)==le}function Bt(t){return typeof t=="symbol"||ot(t)&&Et(t)==We}var ee=Lu?Dt(Lu):El;function Rg(t){return t===i}function Ag(t){return ot(t)&&yt(t)==ce}function Tg(t){return ot(t)&&Et(t)==Go}var Lg=gr(gi),Mg=gr(function(t,n){return t<=n});function go(t){if(!t)return[];if(Mt(t))return Er(t)?kt(t):Lt(t);if(_e&&t[_e])return sa(t[_e]());var n=yt(t),e=n==Jt?ti:n==Qt?He:re;return e(t)}function vn(t){if(!t)return t===0?t:0;if(t=Xt(t),t===Tt||t===-Tt){var n=t<0?-1:1;return n*bo}return t===t?t:0}function z(t){var n=vn(t),e=n%1;return n===n?e?n-e:n:0}function _o(t){return t?Bn(z(t),0,en):0}function Xt(t){if(typeof t=="number")return t;if(Bt(t))return be;if(st(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=st(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Du(t);var e=af.test(t);return e||cf.test(t)?qf(t.slice(2),e?2:8):ff.test(t)?be:+t}function po(t){return un(t,Ct(t))}function Cg(t){return t?Bn(z(t),-nt,nt):t===0?t:0}function Z(t){return t==null?"":Pt(t)}var Ig=jn(function(t,n){if(Ae(n)||Mt(n)){un(n,vt(n),t);return}for(var e in n)J.call(n,e)&&me(t,e,n[e])}),vo=jn(function(t,n){un(n,Ct(n),t)}),Rr=jn(function(t,n,e,r){un(n,Ct(n),t,r)}),Og=jn(function(t,n,e,r){un(n,vt(n),t,r)}),bg=_n(si);function Dg(t,n){var e=kn(t);return n==null?e:Zu(e,n)}var Pg=F(function(t,n){t=k(t);var e=-1,r=n.length,u=r>2?n[2]:i;for(u&&Rt(n[0],n[1],u)&&(r=1);++e<r;)for(var o=n[e],a=Ct(o),l=-1,h=a.length;++l<h;){var v=a[l],w=t[v];(w===i||tn(w,Vn[v])&&!J.call(t,v))&&(t[v]=o[v])}return t}),Bg=F(function(t){return t.push(i,Ds),bt(wo,i,t)});function Wg(t,n){return Cu(t,C(n,3),rn)}function zg(t,n){return Cu(t,C(n,3),fi)}function Ug(t,n){return t==null?t:oi(t,C(n,3),Ct)}function Fg(t,n){return t==null?t:ju(t,C(n,3),Ct)}function Ng(t,n){return t&&rn(t,C(n,3))}function Gg(t,n){return t&&fi(t,C(n,3))}function Hg(t){return t==null?[]:ur(t,vt(t))}function qg(t){return t==null?[]:ur(t,Ct(t))}function Ni(t,n,e){var r=t==null?i:Wn(t,n);return r===i?e:r}function Kg(t,n){return t!=null&&Ws(t,n,gl)}function Gi(t,n){return t!=null&&Ws(t,n,_l)}var Yg=Ms(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=$e.call(n)),t[n]=e},qi(It)),$g=Ms(function(t,n,e){n!=null&&typeof n.toString!="function"&&(n=$e.call(n)),J.call(t,n)?t[n].push(e):t[n]=[e]},C),Xg=F(ye);function vt(t){return Mt(t)?$u(t):hi(t)}function Ct(t){return Mt(t)?$u(t,!0):Rl(t)}function Zg(t,n){var e={};return n=C(n,3),rn(t,function(r,u,o){hn(e,n(r,u,o),r)}),e}function Vg(t,n){var e={};return n=C(n,3),rn(t,function(r,u,o){hn(e,u,n(r,u,o))}),e}var Jg=jn(function(t,n,e){sr(t,n,e)}),wo=jn(function(t,n,e,r){sr(t,n,e,r)}),Qg=_n(function(t,n){var e={};if(t==null)return e;var r=!1;n=it(n,function(o){return o=Tn(o,t),r||(r=o.length>1),o}),un(t,Ti(t),e),r&&(e=Kt(e,A|q|ut,Yl));for(var u=n.length;u--;)wi(e,n[u]);return e});function kg(t,n){return mo(t,yr(C(n)))}var jg=_n(function(t,n){return t==null?{}:Tl(t,n)});function mo(t,n){if(t==null)return{};var e=it(Ti(t),function(r){return[r]});return n=C(n),as(t,e,function(r,u){return n(r,u[0])})}function t_(t,n,e){n=Tn(n,t);var r=-1,u=n.length;for(u||(u=1,t=i);++r<u;){var o=t==null?i:t[sn(n[r])];o===i&&(r=u,o=e),t=dn(o)?o.call(t):o}return t}function n_(t,n,e){return t==null?t:Ee(t,n,e)}function e_(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:Ee(t,n,e,r)}var xo=Os(vt),yo=Os(Ct);function r_(t,n,e){var r=B(t),u=r||Mn(t)||ee(t);if(n=C(n,4),e==null){var o=t&&t.constructor;u?e=r?new o:[]:st(t)?e=dn(o)?kn(Ve(t)):{}:e={}}return(u?Gt:rn)(t,function(a,l,h){return n(e,a,l,h)}),e}function i_(t,n){return t==null?!0:wi(t,n)}function u_(t,n,e){return t==null?t:_s(t,n,yi(e))}function s_(t,n,e,r){return r=typeof r=="function"?r:i,t==null?t:_s(t,n,yi(e),r)}function re(t){return t==null?[]:jr(t,vt(t))}function o_(t){return t==null?[]:jr(t,Ct(t))}function f_(t,n,e){return e===i&&(e=n,n=i),e!==i&&(e=Xt(e),e=e===e?e:0),n!==i&&(n=Xt(n),n=n===n?n:0),Bn(Xt(t),n,e)}function a_(t,n,e){return n=vn(n),e===i?(e=n,n=0):e=vn(e),t=Xt(t),pl(t,n,e)}function l_(t,n,e){if(e&&typeof e!="boolean"&&Rt(t,n,e)&&(n=e=i),e===i&&(typeof n=="boolean"?(e=n,n=i):typeof t=="boolean"&&(e=t,t=i)),t===i&&n===i?(t=0,n=1):(t=vn(t),n===i?(n=t,t=0):n=vn(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var u=Ku();return xt(t+u*(n-t+Hf("1e-"+((u+"").length-1))),n)}return pi(t,n)}var c_=te(function(t,n,e){return n=n.toLowerCase(),t+(e?So(n):n)});function So(t){return Hi(Z(t).toLowerCase())}function Eo(t){return t=Z(t),t&&t.replace(gf,na).replace(bf,"")}function h_(t,n,e){t=Z(t),n=Pt(n);var r=t.length;e=e===i?r:Bn(z(e),0,r);var u=e;return e-=n.length,e>=0&&t.slice(e,u)==n}function g_(t){return t=Z(t),t&&$o.test(t)?t.replace(ji,ea):t}function __(t){return t=Z(t),t&&ko.test(t)?t.replace(zr,"\\$&"):t}var p_=te(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),d_=te(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),v_=As("toLowerCase");function w_(t,n,e){t=Z(t),n=z(n);var r=n?Xn(t):0;if(!n||r>=n)return t;var u=(n-r)/2;return hr(je(u),e)+t+hr(ke(u),e)}function m_(t,n,e){t=Z(t),n=z(n);var r=n?Xn(t):0;return n&&r<n?t+hr(n-r,e):t}function x_(t,n,e){t=Z(t),n=z(n);var r=n?Xn(t):0;return n&&r<n?hr(n-r,e)+t:t}function y_(t,n,e){return e||n==null?n=0:n&&(n=+n),Ma(Z(t).replace(Ur,""),n||0)}function S_(t,n,e){return(e?Rt(t,n,e):n===i)?n=1:n=z(n),di(Z(t),n)}function E_(){var t=arguments,n=Z(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var R_=te(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()});function A_(t,n,e){return e&&typeof e!="number"&&Rt(t,n,e)&&(n=e=i),e=e===i?en:e>>>0,e?(t=Z(t),t&&(typeof n=="string"||n!=null&&!Fi(n))&&(n=Pt(n),!n&&$n(t))?Ln(kt(t),0,e):t.split(n,e)):[]}var T_=te(function(t,n,e){return t+(e?" ":"")+Hi(n)});function L_(t,n,e){return t=Z(t),e=e==null?0:Bn(z(e),0,t.length),n=Pt(n),t.slice(e,e+n.length)==n}function M_(t,n,e){var r=s.templateSettings;e&&Rt(t,n,e)&&(n=i),t=Z(t),n=Rr({},n,r,bs);var u=Rr({},n.imports,r.imports,bs),o=vt(u),a=jr(u,o),l,h,v=0,w=n.interpolate||ze,m="__p += '",y=ni((n.escape||ze).source+"|"+w.source+"|"+(w===tu?of:ze).source+"|"+(n.evaluate||ze).source+"|$","g"),T="//# sourceURL="+(J.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zf+"]")+`
`;t.replace(y,function(O,G,K,Wt,At,zt){return K||(K=Wt),m+=t.slice(v,zt).replace(_f,ra),G&&(l=!0,m+=`' +
__e(`+G+`) +
'`),At&&(h=!0,m+=`';
`+At+`;
__p += '`),K&&(m+=`' +
((__t = (`+K+`)) == null ? '' : __t) +
'`),v=zt+O.length,O}),m+=`';
`;var I=J.call(n,"variable")&&n.variable;if(!I)m=`with (obj) {
`+m+`
}
`;else if(uf.test(I))throw new P(b);m=(h?m.replace(Ho,""):m).replace(qo,"$1").replace(Ko,"$1;"),m="function("+(I||"obj")+`) {
`+(I?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+m+`return __p
}`;var U=Ao(function(){return $(o,T+"return "+m).apply(i,a)});if(U.source=m,Ui(U))throw U;return U}function C_(t){return Z(t).toLowerCase()}function I_(t){return Z(t).toUpperCase()}function O_(t,n,e){if(t=Z(t),t&&(e||n===i))return Du(t);if(!t||!(n=Pt(n)))return t;var r=kt(t),u=kt(n),o=Pu(r,u),a=Bu(r,u)+1;return Ln(r,o,a).join("")}function b_(t,n,e){if(t=Z(t),t&&(e||n===i))return t.slice(0,zu(t)+1);if(!t||!(n=Pt(n)))return t;var r=kt(t),u=Bu(r,kt(n))+1;return Ln(r,0,u).join("")}function D_(t,n,e){if(t=Z(t),t&&(e||n===i))return t.replace(Ur,"");if(!t||!(n=Pt(n)))return t;var r=kt(t),u=Pu(r,kt(n));return Ln(r,u).join("")}function P_(t,n){var e=Oe,r=S;if(st(n)){var u="separator"in n?n.separator:u;e="length"in n?z(n.length):e,r="omission"in n?Pt(n.omission):r}t=Z(t);var o=t.length;if($n(t)){var a=kt(t);o=a.length}if(e>=o)return t;var l=e-Xn(r);if(l<1)return r;var h=a?Ln(a,0,l).join(""):t.slice(0,l);if(u===i)return h+r;if(a&&(l+=h.length-l),Fi(u)){if(t.slice(l).search(u)){var v,w=h;for(u.global||(u=ni(u.source,Z(nu.exec(u))+"g")),u.lastIndex=0;v=u.exec(w);)var m=v.index;h=h.slice(0,m===i?l:m)}}else if(t.indexOf(Pt(u),l)!=l){var y=h.lastIndexOf(u);y>-1&&(h=h.slice(0,y))}return h+r}function B_(t){return t=Z(t),t&&Yo.test(t)?t.replace(ki,la):t}var W_=te(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),Hi=As("toUpperCase");function Ro(t,n,e){return t=Z(t),n=e?i:n,n===i?ua(t)?ga(t):Jf(t):t.match(n)||[]}var Ao=F(function(t,n){try{return bt(t,i,n)}catch(e){return Ui(e)?e:new P(e)}}),z_=_n(function(t,n){return Gt(n,function(e){e=sn(e),hn(t,e,Wi(t[e],t))}),t});function U_(t){var n=t==null?0:t.length,e=C();return t=n?it(t,function(r){if(typeof r[1]!="function")throw new Ht(x);return[e(r[0]),r[1]]}):[],F(function(r){for(var u=-1;++u<n;){var o=t[u];if(bt(o[0],this,r))return bt(o[1],this,r)}})}function F_(t){return ll(Kt(t,A))}function qi(t){return function(){return t}}function N_(t,n){return t==null||t!==t?n:t}var G_=Ls(),H_=Ls(!0);function It(t){return t}function Ki(t){return rs(typeof t=="function"?t:Kt(t,A))}function q_(t){return us(Kt(t,A))}function K_(t,n){return ss(t,Kt(n,A))}var Y_=F(function(t,n){return function(e){return ye(e,t,n)}}),$_=F(function(t,n){return function(e){return ye(t,e,n)}});function Yi(t,n,e){var r=vt(n),u=ur(n,r);e==null&&!(st(n)&&(u.length||!r.length))&&(e=n,n=t,t=this,u=ur(n,vt(n)));var o=!(st(e)&&"chain"in e)||!!e.chain,a=dn(t);return Gt(u,function(l){var h=n[l];t[l]=h,a&&(t.prototype[l]=function(){var v=this.__chain__;if(o||v){var w=t(this.__wrapped__),m=w.__actions__=Lt(this.__actions__);return m.push({func:h,args:arguments,thisArg:t}),w.__chain__=v,w}return h.apply(t,yn([this.value()],arguments))})}),t}function X_(){return wt._===this&&(wt._=ma),this}function $i(){}function Z_(t){return t=z(t),F(function(n){return os(n,t)})}var V_=Ei(it),J_=Ei(Mu),Q_=Ei(Zr);function To(t){return Ii(t)?Vr(sn(t)):Ll(t)}function k_(t){return function(n){return t==null?i:Wn(t,n)}}var j_=Cs(),tp=Cs(!0);function Xi(){return[]}function Zi(){return!1}function np(){return{}}function ep(){return""}function rp(){return!0}function ip(t,n){if(t=z(t),t<1||t>nt)return[];var e=en,r=xt(t,en);n=C(n),t-=en;for(var u=kr(r,n);++e<t;)n(e);return u}function up(t){return B(t)?it(t,sn):Bt(t)?[t]:Lt(Ys(Z(t)))}function sp(t){var n=++va;return Z(t)+n}var op=cr(function(t,n){return t+n},0),fp=Ri("ceil"),ap=cr(function(t,n){return t/n},1),lp=Ri("floor");function cp(t){return t&&t.length?ir(t,It,ai):i}function hp(t,n){return t&&t.length?ir(t,C(n,2),ai):i}function gp(t){return Ou(t,It)}function _p(t,n){return Ou(t,C(n,2))}function pp(t){return t&&t.length?ir(t,It,gi):i}function dp(t,n){return t&&t.length?ir(t,C(n,2),gi):i}var vp=cr(function(t,n){return t*n},1),wp=Ri("round"),mp=cr(function(t,n){return t-n},0);function xp(t){return t&&t.length?Qr(t,It):0}function yp(t,n){return t&&t.length?Qr(t,C(n,2)):0}return s.after=qh,s.ary=eo,s.assign=Ig,s.assignIn=vo,s.assignInWith=Rr,s.assignWith=Og,s.at=bg,s.before=ro,s.bind=Wi,s.bindAll=z_,s.bindKey=io,s.castArray=ng,s.chain=js,s.chunk=lc,s.compact=cc,s.concat=hc,s.cond=U_,s.conforms=F_,s.constant=qi,s.countBy=xh,s.create=Dg,s.curry=uo,s.curryRight=so,s.debounce=oo,s.defaults=Pg,s.defaultsDeep=Bg,s.defer=Kh,s.delay=Yh,s.difference=gc,s.differenceBy=_c,s.differenceWith=pc,s.drop=dc,s.dropRight=vc,s.dropRightWhile=wc,s.dropWhile=mc,s.fill=xc,s.filter=Sh,s.flatMap=Ah,s.flatMapDeep=Th,s.flatMapDepth=Lh,s.flatten=Vs,s.flattenDeep=yc,s.flattenDepth=Sc,s.flip=$h,s.flow=G_,s.flowRight=H_,s.fromPairs=Ec,s.functions=Hg,s.functionsIn=qg,s.groupBy=Mh,s.initial=Ac,s.intersection=Tc,s.intersectionBy=Lc,s.intersectionWith=Mc,s.invert=Yg,s.invertBy=$g,s.invokeMap=Ih,s.iteratee=Ki,s.keyBy=Oh,s.keys=vt,s.keysIn=Ct,s.map=wr,s.mapKeys=Zg,s.mapValues=Vg,s.matches=q_,s.matchesProperty=K_,s.memoize=xr,s.merge=Jg,s.mergeWith=wo,s.method=Y_,s.methodOf=$_,s.mixin=Yi,s.negate=yr,s.nthArg=Z_,s.omit=Qg,s.omitBy=kg,s.once=Xh,s.orderBy=bh,s.over=V_,s.overArgs=Zh,s.overEvery=J_,s.overSome=Q_,s.partial=zi,s.partialRight=fo,s.partition=Dh,s.pick=jg,s.pickBy=mo,s.property=To,s.propertyOf=k_,s.pull=bc,s.pullAll=Qs,s.pullAllBy=Dc,s.pullAllWith=Pc,s.pullAt=Bc,s.range=j_,s.rangeRight=tp,s.rearg=Vh,s.reject=Wh,s.remove=Wc,s.rest=Jh,s.reverse=Pi,s.sampleSize=Uh,s.set=n_,s.setWith=e_,s.shuffle=Fh,s.slice=zc,s.sortBy=Hh,s.sortedUniq=Kc,s.sortedUniqBy=Yc,s.split=A_,s.spread=Qh,s.tail=$c,s.take=Xc,s.takeRight=Zc,s.takeRightWhile=Vc,s.takeWhile=Jc,s.tap=ch,s.throttle=kh,s.thru=vr,s.toArray=go,s.toPairs=xo,s.toPairsIn=yo,s.toPath=up,s.toPlainObject=po,s.transform=r_,s.unary=jh,s.union=Qc,s.unionBy=kc,s.unionWith=jc,s.uniq=th,s.uniqBy=nh,s.uniqWith=eh,s.unset=i_,s.unzip=Bi,s.unzipWith=ks,s.update=u_,s.updateWith=s_,s.values=re,s.valuesIn=o_,s.without=rh,s.words=Ro,s.wrap=tg,s.xor=ih,s.xorBy=uh,s.xorWith=sh,s.zip=oh,s.zipObject=fh,s.zipObjectDeep=ah,s.zipWith=lh,s.entries=xo,s.entriesIn=yo,s.extend=vo,s.extendWith=Rr,Yi(s,s),s.add=op,s.attempt=Ao,s.camelCase=c_,s.capitalize=So,s.ceil=fp,s.clamp=f_,s.clone=eg,s.cloneDeep=ig,s.cloneDeepWith=ug,s.cloneWith=rg,s.conformsTo=sg,s.deburr=Eo,s.defaultTo=N_,s.divide=ap,s.endsWith=h_,s.eq=tn,s.escape=g_,s.escapeRegExp=__,s.every=yh,s.find=Eh,s.findIndex=Xs,s.findKey=Wg,s.findLast=Rh,s.findLastIndex=Zs,s.findLastKey=zg,s.floor=lp,s.forEach=to,s.forEachRight=no,s.forIn=Ug,s.forInRight=Fg,s.forOwn=Ng,s.forOwnRight=Gg,s.get=Ni,s.gt=og,s.gte=fg,s.has=Kg,s.hasIn=Gi,s.head=Js,s.identity=It,s.includes=Ch,s.indexOf=Rc,s.inRange=a_,s.invoke=Xg,s.isArguments=Fn,s.isArray=B,s.isArrayBuffer=ag,s.isArrayLike=Mt,s.isArrayLikeObject=at,s.isBoolean=lg,s.isBuffer=Mn,s.isDate=cg,s.isElement=hg,s.isEmpty=gg,s.isEqual=_g,s.isEqualWith=pg,s.isError=Ui,s.isFinite=dg,s.isFunction=dn,s.isInteger=ao,s.isLength=Sr,s.isMap=lo,s.isMatch=vg,s.isMatchWith=wg,s.isNaN=mg,s.isNative=xg,s.isNil=Sg,s.isNull=yg,s.isNumber=co,s.isObject=st,s.isObjectLike=ot,s.isPlainObject=Le,s.isRegExp=Fi,s.isSafeInteger=Eg,s.isSet=ho,s.isString=Er,s.isSymbol=Bt,s.isTypedArray=ee,s.isUndefined=Rg,s.isWeakMap=Ag,s.isWeakSet=Tg,s.join=Cc,s.kebabCase=p_,s.last=$t,s.lastIndexOf=Ic,s.lowerCase=d_,s.lowerFirst=v_,s.lt=Lg,s.lte=Mg,s.max=cp,s.maxBy=hp,s.mean=gp,s.meanBy=_p,s.min=pp,s.minBy=dp,s.stubArray=Xi,s.stubFalse=Zi,s.stubObject=np,s.stubString=ep,s.stubTrue=rp,s.multiply=vp,s.nth=Oc,s.noConflict=X_,s.noop=$i,s.now=mr,s.pad=w_,s.padEnd=m_,s.padStart=x_,s.parseInt=y_,s.random=l_,s.reduce=Ph,s.reduceRight=Bh,s.repeat=S_,s.replace=E_,s.result=t_,s.round=wp,s.runInContext=c,s.sample=zh,s.size=Nh,s.snakeCase=R_,s.some=Gh,s.sortedIndex=Uc,s.sortedIndexBy=Fc,s.sortedIndexOf=Nc,s.sortedLastIndex=Gc,s.sortedLastIndexBy=Hc,s.sortedLastIndexOf=qc,s.startCase=T_,s.startsWith=L_,s.subtract=mp,s.sum=xp,s.sumBy=yp,s.template=M_,s.times=ip,s.toFinite=vn,s.toInteger=z,s.toLength=_o,s.toLower=C_,s.toNumber=Xt,s.toSafeInteger=Cg,s.toString=Z,s.toUpper=I_,s.trim=O_,s.trimEnd=b_,s.trimStart=D_,s.truncate=P_,s.unescape=B_,s.uniqueId=sp,s.upperCase=W_,s.upperFirst=Hi,s.each=to,s.eachRight=no,s.first=Js,Yi(s,function(){var t={};return rn(s,function(n,e){J.call(s.prototype,e)||(t[e]=n)}),t}(),{chain:!1}),s.VERSION=_,Gt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){s[t].placeholder=s}),Gt(["drop","take"],function(t,n){H.prototype[t]=function(e){e=e===i?1:pt(z(e),0);var r=this.__filtered__&&!n?new H(this):this.clone();return r.__filtered__?r.__takeCount__=xt(e,r.__takeCount__):r.__views__.push({size:xt(e,en),type:t+(r.__dir__<0?"Right":"")}),r},H.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Gt(["filter","map","takeWhile"],function(t,n){var e=n+1,r=e==dt||e==fn;H.prototype[t]=function(u){var o=this.clone();return o.__iteratees__.push({iteratee:C(u,3),type:e}),o.__filtered__=o.__filtered__||r,o}}),Gt(["head","last"],function(t,n){var e="take"+(n?"Right":"");H.prototype[t]=function(){return this[e](1).value()[0]}}),Gt(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");H.prototype[t]=function(){return this.__filtered__?new H(this):this[e](1)}}),H.prototype.compact=function(){return this.filter(It)},H.prototype.find=function(t){return this.filter(t).head()},H.prototype.findLast=function(t){return this.reverse().find(t)},H.prototype.invokeMap=F(function(t,n){return typeof t=="function"?new H(this):this.map(function(e){return ye(e,t,n)})}),H.prototype.reject=function(t){return this.filter(yr(C(t)))},H.prototype.slice=function(t,n){t=z(t);var e=this;return e.__filtered__&&(t>0||n<0)?new H(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==i&&(n=z(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},H.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},H.prototype.toArray=function(){return this.take(en)},rn(H.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),u=s[r?"take"+(n=="last"?"Right":""):n],o=r||/^find/.test(n);u&&(s.prototype[n]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof H,v=l[0],w=h||B(a),m=function(G){var K=u.apply(s,yn([G],l));return r&&y?K[0]:K};w&&e&&typeof v=="function"&&v.length!=1&&(h=w=!1);var y=this.__chain__,T=!!this.__actions__.length,I=o&&!y,U=h&&!T;if(!o&&w){a=U?a:new H(this);var O=t.apply(a,l);return O.__actions__.push({func:vr,args:[m],thisArg:i}),new qt(O,y)}return I&&U?t.apply(this,l):(O=this.thru(m),I?r?O.value()[0]:O.value():O)})}),Gt(["pop","push","shift","sort","splice","unshift"],function(t){var n=qe[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);s.prototype[t]=function(){var u=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(B(o)?o:[],u)}return this[e](function(a){return n.apply(B(a)?a:[],u)})}}),rn(H.prototype,function(t,n){var e=s[n];if(e){var r=e.name+"";J.call(Qn,r)||(Qn[r]=[]),Qn[r].push({name:n,func:e})}}),Qn[lr(i,N).name]=[{name:"wrapper",func:i}],H.prototype.clone=Ba,H.prototype.reverse=Wa,H.prototype.value=za,s.prototype.at=hh,s.prototype.chain=gh,s.prototype.commit=_h,s.prototype.next=ph,s.prototype.plant=vh,s.prototype.reverse=wh,s.prototype.toJSON=s.prototype.valueOf=s.prototype.value=mh,s.prototype.first=s.prototype.head,_e&&(s.prototype[_e]=dh),s},Zn=_a();On?((On.exports=Zn)._=Zn,Kr._=Zn):wt._=Zn}).call(Me)})(Tr,Tr.exports);var Dp=Tr.exports;const Zt=Rp(Dp);class Q{constructor(f,i){this.id=`point-id-${new Date().getTime().toString()}`,this.x=f,this.y=i,this.initialX=f,this.initialY=i}translate(f,i){this.x+=f,this.y+=i,this.initialX=this.x,this.initialY=this.y}clone(){return new Q(this.x,this.y)}serialize(){return`${this.x},${this.y}`}json(){return JSON.stringify(this)}deserialize(f){const[i,_]=f.split(",").map(d=>parseInt(d));return new Q(i,_)}static middlePoint(f,i){return new Q((f.x+i.x)/2,(f.y+i.y)/2)}static distance(f,i){return Math.sqrt((f.x-i.x)**2+(f.y-i.y)**2)}static isSame(f,i){return f.x===i.x&&f.y===i.y}static isNear(f,i,_=10){return Q.distance(f,i)<_}}class Pp extends Ie{constructor(i,_){super(i,_);ft(this,"_point",null);ft(this,"_mouseDown",!1);ft(this,"_moveAll",!1);ft(this,"cursorDefault","default");ft(this,"cursorMove","move");ft(this,"cursorGrab","grab");ft(this,"cursorGrabbing","grabbing")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._point=null,this._moveAll=!1}handleMouseWheel(i,_){}handleMouseDown(i,_){this._mouseDown=!0;const d=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!d||!_)return;const x=this.stateMachine.element,b=this.stateMachine.elements;if(!x)return;const D=i.clientX,W=i.clientY,M=d.clientPointToViewPoint({clientX:D,clientY:W});if(!this._point)if(x.contains(M.x,M.y))this._moveAll=!0;else{const A=b.find(q=>q.contains(M.x,M.y));A&&A!==x?this.stateMachine.element=A:(this.stateMachine.element=null,this.stateMachine.setState(Ce.STATE_SELECT)),this.redraw()}}handleMouseMove(i,_){const d=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!d||!_)return;const x=this.stateMachine.element;if(!x)return;const b=i.clientX,D=i.clientY,W=d.clientPointToViewPoint({clientX:b,clientY:D}),M=x.rectangle.points;if(this._mouseDown){const A={x:i.movementX/d.scale,y:i.movementY/d.scale};this._point?(this._point.translate(A.x,A.y),this.stateMachine.element=x):this._moveAll&&(x.translate(A.x,A.y),this.stateMachine.element=x),this.redraw()}else{const A=M.find(q=>Q.isNear(q,new Q(W.x,W.y)))||null;this._point=A,_.style.cursor=this._point?"move":"default"}}handleMouseUp(i,_){this._mouseDown=!1,this._point=null,this._moveAll=!1,this.stateMachine.element&&this.stateMachine.element.rectangle.processDisplacement()}redraw(){const i=this.stateMachine.ctx,_=this.stateMachine.canvas;if(!i||!_)return;const d=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,_.width,_.height),Zt.each(E,x=>{x.draw(i)}),Zt.each(E,x=>{x.draw(i)}),d&&(d.drawBoundingBox(i),d.drawLines(i),d.drawPoints(i))}}class Bp extends Ie{constructor(i,_){super(i,_);ft(this,"_handle",null);ft(this,"_mouseDown",!1);ft(this,"cursorDefault","default");ft(this,"cursorResize","nwse-resize")}onEnter(){this.redraw()}onExit(){this._mouseDown=!1,this._handle=null}handleMouseWheel(i,_){}handleMouseDown(i,_){this._mouseDown=!0}handleMouseMove(i,_){const d=this.stateMachine.coordinateSystem,E=this.stateMachine.ctx,x=this.stateMachine.element;if(!E||!d||!x)return;const b=i.clientX,D=i.clientY,W=d.clientPointToViewPoint({clientX:b,clientY:D}),M={x:i.movementX,y:i.movementY};if(this._mouseDown){if(this._handle){const A=x.rectangle.boundingBox,q=A.clone();switch(this._handle){case"topLeft":q.updateDimensions(A.topLeft.x+M.x,A.topLeft.y+M.y,A.width-M.x,A.height-M.y);break;case"topRight":q.updateDimensions(A.topLeft.x,A.topLeft.y+M.y,A.width+M.x,A.height-M.y);break;case"bottomLeft":q.updateDimensions(A.topLeft.x+M.x,A.topLeft.y,A.width-M.x,A.height+M.y);break;case"bottomRight":q.updateDimensions(A.topLeft.x,A.topLeft.y,A.width+M.x,A.height+M.y);break}x.resizeBoundingBox(q),this.redraw()}}else{const A=x.getBoundingBoxHandle(W.x,W.y);if(!A){_.style.cursor=this.cursorDefault;return}const q=x.handleToString(A);this._handle=q,_.style.cursor=this.cursorResize}}handleMouseUp(i,_){this._mouseDown=!1,this._handle=null,this.redraw()}redraw(){const i=this.stateMachine.ctx,_=this.stateMachine.canvas;if(!i||!_)return;const d=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,_.width,_.height),Zt.each(E,x=>{x.draw(i)}),d&&(d.drawBoundingBox(i),d.drawLines(i),d.drawBoundingBoxHandles(i))}}class Wp extends Ie{constructor(i,_){super(i,_);ft(this,"isMouseDown",!1)}onEnter(){this.redraw()}onExit(){this.isMouseDown=!1}handleMouseDown(i,_){this.isMouseDown=!0}handleMouseWheel(i,_){this.isMouseDown||i.shiftKey&&this.stateMachine.coordinateSystem.scaleAtClientPoint(-.001*i.deltaY,{clientX:i.clientX,clientY:i.clientY})}handleMouseMove(i,_){}handleMouseUp(i,_){this.isMouseDown=!1;const d=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!d||!_)return;const x=this.stateMachine.elements,b=i.clientX,D=i.clientY,W=d.clientPointToViewPoint({clientX:b,clientY:D}),M=x.find(A=>A.contains(W.x,W.y));M?(this.stateMachine.element=M,this.stateMachine.setState(Ce.STATE_MOVE)):this.stateMachine.element=null,this.redraw()}redraw(){const i=this.stateMachine.ctx,_=this.stateMachine.canvas;if(!i||!_)return;const d=this.stateMachine.element,E=this.stateMachine.elements;i.clearRect(0,0,_.width,_.height),Zt.each(E,x=>{x.draw(i)}),d&&(d.drawLines(i),d.drawPoints(i))}}class zp extends Ie{constructor(f,i){super(f,i)}onEnter(){}onExit(){}handleMouseWheel(f,i){}handleMouseDown(f,i){}handleMouseMove(f,i){}handleMouseUp(f,i){}}const ue={Idle:"IDLE",Select:"SELECT",Move:"MOVE",Resize:"RESIZE",Zoom:"ZOOM"},St=class St{constructor(f){this._inputs=new Set,this._states={IDLE:new bp(this,St.STATE_IDLE),SELECT:new Wp(this,St.STATE_SELECT),MOVE:new Pp(this,St.STATE_MOVE),RESIZE:new Bp(this,St.STATE_RESIZE),ZOOM:new zp(this,St.STATE_ZOOM)},this._initialState=f.initialState,this._state=this._states[this._initialState],this._mouseDown=!1,this._elements=f.canvasElements,this._element=null,this._coordinateSystem=f.coordinateSystem,this._canvas=f.canvas,this._ctx=f.ctx}get mouseDown(){return this._mouseDown}get state(){return this._state}set state(f){this._state=f}addState(f){this._states[f.name]=f}setState(f){if(f!==this._state.name){if(!this._states[f])throw new Error(`State ${f} not found`);this._state&&this._state.onExit(),this._state=this._states[f],this._state.onEnter()}}resetState(){this._elements=[],this._element=null,this.setState(this._initialState)}handleMouseWheel(f,i){this._state.handleMouseWheel(f,i)}handleMouseDown(f,i){this._state.handleMouseDown(f,i)}handleMouseMove(f,i){this._state.handleMouseMove(f,i)}handleMouseUp(f,i){this._state.handleMouseUp(f,i)}handleKeyDown(f,i){if(f.ctrlKey&&this.state.name===St.STATE_MOVE){this.setState(St.STATE_RESIZE);return}}handleKeyUp(f,i){if(!f.ctrlKey&&this.state.name===St.STATE_RESIZE){this.setState(St.STATE_MOVE);return}}get inputs(){return this._inputs}set inputs(f){this._inputs=f}get element(){return this._element}set element(f){this._element=f}get elements(){return this._elements}set elements(f){this._elements=f}get coordinateSystem(){return this._coordinateSystem}set coordinateSystem(f){this._coordinateSystem=f}get canvas(){return this._canvas}set canvas(f){this._canvas=f}get ctx(){return this._ctx}set ctx(f){this._ctx=f}setCanvas(f){this.canvas=f}setCtx(f){this.ctx=f}setCoordinateSystem(f){this.coordinateSystem=f}};ft(St,"STATE_IDLE",ue.Idle),ft(St,"STATE_SELECT",ue.Select),ft(St,"STATE_RESIZE",ue.Resize),ft(St,"STATE_MOVE",ue.Move),ft(St,"STATE_ZOOM",ue.Zoom);let Ce=St,Nn=function(L){return L.AUTO="auto",L.COVER="cover",L.CONTAIN="contain",L}({});var Ot=function(L){return L.BACKGROUND="background",L.INTERFACE="interface",L}(Ot||{});const Oo=Nn.CONTAIN,Io=[Ot.BACKGROUND,Ot.INTERFACE],Up={display:"block",width:"100%",height:"100vh",position:"relative",backgroundColor:"lightblue"},Fp={display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent"},Np={size:Oo,imageSrc:"./test.png",width:800,height:800},Gp={min:1,max:5};function Yp({initialState:L=ue.Idle,containerElementStyle:f=Up,canvasElementStyle:i=Fp,background:_=Np,zoomExtents:d=Gp,elements:E=[],onViewChange:x}){const{containerRef:b,screenSize:D}=Op(),W=ht.useRef(null),M=ht.useRef({}),A=ht.useRef({}),q=ht.useRef(N()),ut=ht.useRef(E),gt=ht.useCallback(()=>new Ce({initialState:L,canvasElements:E,coordinateSystem:q.current,canvas:M.current[Ot.INTERFACE],ctx:A.current[Ot.INTERFACE]}),[E]),X=ht.useRef(gt());ht.useEffect(()=>{const S=M.current[Ot.INTERFACE];if(!S)return;const V=nt=>{X.current.handleMouseMove(nt,S)},Y=nt=>{X.current.handleMouseUp(nt,S)},dt=nt=>{X.current.handleMouseDown(nt,S)},on=nt=>{X.current.handleKeyDown(nt,S)},fn=nt=>{X.current.handleKeyUp(nt,S)},Tt=nt=>{X.current.handleMouseWheel(nt,S)};return S.addEventListener("mousedown",dt),S.addEventListener("mousemove",V),S.addEventListener("mouseup",Y),S.addEventListener("wheel",Tt),S.addEventListener("keydown",on),S.addEventListener("keyup",fn),()=>{S.removeEventListener("mousedown",dt),S.removeEventListener("mousemove",V),S.removeEventListener("mouseup",Y),S.removeEventListener("wheel",Tt),S.removeEventListener("keydown",on),S.removeEventListener("keyup",fn)}},[E]),ht.useEffect(()=>{X.current.resetState(),X.current.elements=E,Gn()},[E]);function j(S){if(!_)return S;switch(_.size||(_.size=Oo),_.size){case Nn.COVER:const V=W.current;if(V){const{width:Y,height:dt}=V;if(!_.useImageOriginSize){let on=S.width,fn=S.height;const Tt=Y/dt;return fn=on/Tt,{width:on,height:fn}}return{width:Y,height:dt}}break;case Nn.CONTAIN:return{width:_.width||0,height:_.height||0}}return S}function N(){const S=new Ap(d,{width:1920,height:1080});return S.attachViewChangeListener(rt),S}function rt(S){X.current&&X.current.resetState();const V=q.current;V&&(Io.map(Y=>A.current[Y]).forEach(Y=>{ct(Y);const dt=V.transformMatrix;Y.setTransform(dt.a,dt.b,dt.c,dt.d,dt.e,dt.f)}),Oe())}function ct(S){Vt([S],()=>S.clearRect(0,0,S.canvas.width,S.canvas.height))}function Vt(S,V){S.forEach(Y=>{Y.save(),Y.setTransform(ie.a,ie.b,ie.c,ie.d,ie.e,ie.f)});try{V()}finally{S.forEach(Y=>Y.restore())}}function Ut(S){q.current.documentSize={...S}}function mn({canvas:S,ctx:V,image:Y}){if(Y&&Y.complete&&S&&V&&_)switch(_.size){case Nn.AUTO:Ip({canvas:S,ctx:V,image:Y});break;case Nn.COVER:Mp({ctx:V,image:Y});break;case Nn.CONTAIN:default:Cp({canvas:S,ctx:V,image:Y});break}}function Ft(S,V=!1){let Y=!1;const{canvas:dt}=q.current;if((dt.width!==S.width||dt.height!==S.height)&&(Lp(M.current,S),Ut(S),Y=!0),V||Y){const on=S.width/q.current.initialViewSize.width,fn=S.height/q.current.initialViewSize.height;Zt.each(ut.current,Tt=>{Tt.rectangle.points.forEach(nt=>{nt.x=nt.initialX*on,nt.y=nt.initialY*fn})}),Oe()}}function In(){const S=M.current[Ot.BACKGROUND],V=A.current[Ot.BACKGROUND],Y=W.current;!S||!V||(V.clearRect(0,0,S.width,S.height),Y&&mn({canvas:S,ctx:V,image:Y}))}function Gn(){ct(A.current[Ot.INTERFACE]),ut.current.forEach(S=>{S.draw(A.current[Ot.INTERFACE])})}function Oe(){In(),Gn()}return ht.useEffect(()=>{const S=j(D);Ft(S),typeof x=="function"&&x(S)},[D]),ht.useEffect(()=>{X.current.setCanvas(M.current[Ot.INTERFACE]),X.current.setCtx(A.current[Ot.INTERFACE])},[M.current]),ht.useEffect(()=>{if(!(!_||!_.imageSrc||_.imageSrc==="")&&(!W.current||W.current.getAttribute("src")!==_.imageSrc)){const S=new Image;S.src=_.imageSrc,S.onload=()=>{const V=j(D);Ft(V,!0),q.current.initialViewSize=V},S.onabort=()=>{W.current=null},W.current=S}},[_,W]),ht.useEffect(()=>{ut.current=E,X.current.elements=E,Zt.each(ut.current,S=>{S.draw(A.current[Ot.INTERFACE])})},[E]),Mo.jsx("div",{style:{...f},ref:b,children:Io.map(S=>{const V=S===Ot.INTERFACE;return Mo.jsx("canvas",{tabIndex:V?1:0,ref:Y=>{Y&&(M.current[S]=Y,A.current[S]=Y.getContext("2d"),V&&(q.current.canvas=Y))},style:{...i}},S)})})}class Vi{constructor(f){this._points=f}get points(){return this._points}set points(f){this._points=f}get boundingBox(){let f=this._points[0].x,i=this._points[0].y,_=this._points[0].x,d=this._points[0].y;return Zt.each(this._points,E=>{f=Math.min(f,E.x),i=Math.min(i,E.y),_=Math.max(_,E.x),d=Math.max(d,E.y)}),new Cn(f,i,_-f,d-i)}translate(f,i){Zt.each(this._points,_=>_.translate(f,i))}clone(){return new Vi(this._points.map(f=>f.clone()))}serialize(){return Zt.map(this.points,f=>[f.x,f.y])}resize(f){const i=this.boundingBox,_=[];Zt.each(this._points,d=>{_.push({x:(d.x-i.topLeft.x)/i.width,y:(d.y-i.topLeft.y)/i.height})}),this._points=Zt.map(_,d=>new Q(f.topLeft.x+f.width*d.x,f.topLeft.y+f.height*d.y))}deserialize(f){this.points=Zt.map(f,i=>new Q(i[0],i[1]))}isNear(f,i=10){return this._points.some(_=>Q.isNear(_,f,i))}isPartOfPolygon(f){return this._points.some(i=>i.id===f.id)}contains(f,i){let _=!1;for(let d=0,E=this._points.length-1;d<this._points.length;E=d++){const x=this._points[d].x,b=this._points[d].y,D=this._points[E].x,W=this._points[E].y;b>i!=W>i&&f<(D-x)*(i-b)/(W-b)+x&&(_=!_)}return _}}class Cn extends Vi{constructor(f=0,i=0,_=0,d=0){if(f instanceof Q&&i instanceof Q&&_ instanceof Q&&d instanceof Q)super([f,i,_,d]);else if(typeof f=="number"&&typeof i=="number"&&typeof _=="number"&&typeof d=="number")super(Cn.pointsFromBounds(f,i,_,d));else throw new Error("Invalid arguments")}static pointsFromBounds(f,i,_,d){return[new Q(f,i),new Q(f+_,i),new Q(f+_,i+d),new Q(f,i+d)]}get width(){return this._points[1].x-this._points[0].x}get height(){return this._points[2].y-this._points[1].y}get topLeft(){return this._points[0]}get topRight(){return this._points[1]}get bottomRight(){return this._points[2]}get bottomLeft(){return this._points[3]}get topMid(){return Q.middlePoint(this.topLeft,this.topRight)}get rightMid(){return Q.middlePoint(this.topRight,this.bottomRight)}get bottomMid(){return Q.middlePoint(this.bottomLeft,this.bottomRight)}get leftMid(){return Q.middlePoint(this.topLeft,this.bottomLeft)}updateDimensions(f,i,_,d){this.points=Cn.pointsFromBounds(f,i,_,d)}processDisplacement(){this.width<0&&([this._points[0],this._points[1]]=[this._points[1],this._points[0]],[this._points[2],this._points[3]]=[this._points[3],this._points[2]]),this.height<0&&([this._points[0],this._points[3]]=[this._points[3],this._points[0]],[this._points[1],this._points[2]]=[this._points[2],this._points[1]])}clone(){return new Cn(this._points[0].x,this._points[0].y,this.width,this.height)}json(){return JSON.stringify(this)}}class Lr{constructor(f,i,_,d,E,x){this._id=f,this._color=i,this._isCurrent=_,this._numberOfEquipments=d,this._rectangle=E,this._isEdit=typeof x=="boolean"?x:!0}get id(){return this._id}set id(f){this._id=f}get color(){return this._color}get isCurrent(){return this._isCurrent}get numberOfEquipments(){return this._numberOfEquipments}get rectangle(){return this._rectangle}get isEdit(){return this._isEdit}translate(f,i){this._rectangle.translate(f,i)}updateDimensions(f,i){this._rectangle.updateDimensions(this._rectangle.topLeft.x,this._rectangle.topLeft.y,f,i)}resizeBoundingBox(f){this._rectangle.resize(f)}draw(f){this.drawPolygon(f),this.drawNumberOfEquipments(f),this.drawIsCurrent(f)}contains(f,i){return this.isEdit&&this.rectangle.contains(f,i)}drawDebug(f){f.fillStyle="black",f.fillText("TL",this.rectangle.topLeft.x,this.rectangle.topLeft.y,this.rectangle.width),f.fillText("TR",this.rectangle.topRight.x,this.rectangle.topRight.y,this.rectangle.width),f.fillText("BR",this.rectangle.bottomRight.x,this.rectangle.bottomRight.y,this.rectangle.width),f.fillText("BL",this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y,this.rectangle.width)}drawPolygon(f){const i=this.rectangle.points;f.fillStyle=this.color,f.beginPath(),f.moveTo(i[0].x,i[0].y);for(let _=1;_<i.length;_++)f.lineTo(i[_].x,i[_].y);f.closePath(),f.fill()}drawLines(f){const i=this.rectangle.points;f.fillStyle="black",f.lineWidth=1,f.setLineDash([]),f.beginPath(),f.moveTo(i[0].x,i[0].y);for(let _=1;_<i.length;_++)f.lineTo(i[_].x,i[_].y);f.closePath(),f.stroke()}drawIsCurrent(f){this.isCurrent&&(f.fillStyle="red",f.font="40px Arial",f.fillText("*",this.rectangle.topLeft.x,this.rectangle.topLeft.y+35,this.rectangle.width))}drawNumberOfEquipments(f){this.numberOfEquipments>0&&(f.fillStyle="black",f.font="14px Arial",f.fillText(`(${this.numberOfEquipments.toString()})`,this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y+14,this.rectangle.width))}drawBoundingBox(f){const i=this.rectangle.boundingBox;f.lineWidth=1,f.lineDashOffset=0,f.setLineDash([2,3]),f.beginPath(),f.moveTo(i.topLeft.x,i.topLeft.y),f.lineTo(i.topRight.x,i.topRight.y),f.lineTo(i.bottomRight.x,i.bottomRight.y),f.lineTo(i.bottomLeft.x,i.bottomLeft.y),f.lineTo(i.topLeft.x,i.topLeft.y),f.closePath(),f.stroke()}drawPoints(f){const i=this.rectangle.points;f.fillStyle="purple",i.forEach(_=>{f.beginPath(),f.arc(_.x,_.y,3,0,2*Math.PI),f.fill()}),f.closePath()}drawBoundingBoxHandles(f){const{topLeft:d,topRight:E,bottomRight:x,bottomLeft:b}=this.rectangle.boundingBox;f.strokeStyle="black",f.fillStyle="white",f.setLineDash([]),f.fillRect(d.x-3,d.y-3,6,6),f.fillRect(E.x-3,E.y-3,6,6),f.fillRect(x.x-3,x.y-3,6,6),f.fillRect(b.x-3,b.y-3,6,6),f.strokeRect(d.x-3,d.y-3,6,6),f.strokeRect(E.x-3,E.y-3,6,6),f.strokeRect(x.x-3,x.y-3,6,6),f.strokeRect(b.x-3,b.y-3,6,6),f.stroke()}getBoundingBoxHandle(f,i){const _=this.rectangle.boundingBox,d=[_.topLeft,_.topRight,_.bottomRight,_.bottomLeft],E=d.map(D=>Q.distance(D,new Q(f,i))),x=Math.min(...E),b=E.findIndex(D=>D===x&&D<10);return d[b]}handleToString(f){const{topLeft:i,topRight:_,bottomRight:d,bottomLeft:E}=this.rectangle.boundingBox;return Q.isSame(f,i)?"topLeft":Q.isSame(f,_)?"topRight":Q.isSame(f,d)?"bottomRight":Q.isSame(f,E)?"bottomLeft":null}clone(){const f=this.rectangle.points.map(i=>i.clone());return new Lr(this.id,this.color,this.isCurrent,this.numberOfEquipments,new Cn(f[0],f[1],f[2],f[3]),this.isEdit)}}const Hp="#ffff66";function $p(){const L={size:Nn.COVER},f=ht.useRef(null),[i,_]=ht.useState([]),[d,E]=ht.useState(L),[x,b]=ht.useState(!1),D=N=>{f.current={...N}},W=N=>{E(rt=>({...rt,...N}))},M=N=>{const rt=N.map(ct=>{const Vt=new Cn(0,0,0,0);return Vt.deserialize(JSON.parse(ct.JsonRectangle)),new Lr(ct.id.toString(),ct.Color,ct.IsCurrent,ct.NumberEquipment,Vt,ct.IsEdit)});_([...rt])},A=N=>{D(N),W({imageSrc:N.imageSource}),M(N.data),b(N.viewMode)},q=()=>{const N=new Cn(0,0,100,100),rt=new Lr(`${i.length+1}`,Hp,!1,4,N,!0);_([...i,rt])},ut=()=>{f.current&&A(f.current)},gt=N=>{D({background:d,elements:i}),typeof N=="function"&&N(j())},X=()=>{const N=i.map(rt=>({id:rt.id,IsTemplate:!1,NumberEquipment:rt.numberOfEquipments,Color:rt.color,IsCurrent:rt.isCurrent,JsonRectangle:rt.rectangle.serialize(),isEdit:rt.isEdit}));return console.log("exportRectangles: ",N),N},j=()=>{const N=i.map(rt=>({id:parseInt(rt.id),IsTemplate:!1,NumberEquipment:rt.numberOfEquipments,Color:rt.color,IsCurrent:rt.isCurrent,JsonRectangle:JSON.stringify(rt.rectangle.serialize()),isEdit:rt.isEdit}));return JSON.stringify({background:d,data:N})};return{viewMode:x,background:d,elements:i,loadBackground:W,loadDataSource:M,loadAll:A,addRectangle:q,exportRectangles:X,toString:j,saveData:gt,resetData:ut}}export{Yp as C,$p as u};
