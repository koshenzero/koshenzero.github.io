import{z as D,l as F,r as u,j as e}from"./index-BQUYc1y5.js";import{g as E,r as A,s as S,t as T}from"./api-BlvfAFOo.js";import{U as x,C as M,a as b,b as j,c as R,d as N,L,M as C}from"./DefaultLayout-CwGb_L_k.js";import{b as w,a as O}from"./index.es-wYNqpc8s.js";import{C as q}from"./CForm-DUNXBUgp.js";import{C as t}from"./CCol-OSVi6w-E.js";import{C as o}from"./CFormControlWrapper-tRgqBfHP.js";import{C as l}from"./CFormInput-CeSoBgL6.js";import{C as I}from"./CFormSelect-ChswjSGD.js";import"./cil-user-Ddrdy7PS.js";const Q=({setToast:h})=>{const{id:f}=D(),d=F(),[P,v]=u.useState([]),[s,y]=u.useState({UserID:0,FullName:"",IDNumber:"",Email:"",PhoneOffice:"",Phone:"",Address:"",PostCode:"",City:"",TypeUserID:"",IsAllowToMoveExpiredRecord:"",StatusID:"",CountryID:"",UserName:"",IsEdit:!1,Password:"",ConfirmPassword:""});u.useEffect(()=>{f&&f!=0&&E(f,1).then(a=>{if(a.error){d(x,{isErrorMessage:!0,message:"Some things went wrong. Try again later."});return}else a.data.data.IsEdit=!0,y(a.data.data)}),A("",1,0,1e4).then(a=>{v(a.data.data.data)})},[]);const r=a=>{const{name:p,value:m}=a.target;y({...s,[p]:m})},U=a=>{const p=a.currentTarget;a.preventDefault(),p.checkValidity()===!1&&a.stopPropagation();var m=localStorage.getItem("user");if(m==null)return d(L);var c=JSON.parse(m).data;if(s.IsEdit)S(c.UserID,c.UserName,"",s.TypeUserID,s.UserID,"",s.FullName,s.Email,s.Phone,s.StatusID,0,0,s.CountryID,s.PostCode,s.City,s.Address,s.PhoneOffice,s.UserID).then(n=>{if(n.error)h(C(!0,"Error",n.error.response.data.message));else{d(x,{state:{isErrorMessage:!1,message:"User has been updated"}});return}});else{if(s.Password!==s.ConfirmPassword){h(C(!0,"Error","Confirm password is incorrect"));return}T(c.UserID,c.UserName,"",s.TypeUserID,s.UserName,s.Password,s.FullName,s.Email,s.Phone,s.StatusID,0,0,s.CountryID,s.PostCode,s.City,s.Address,s.PhoneOffice,s.UserID).then(n=>{if(n.error)h(C(!0,"Error",n.error.response.data.message));else{d(x,{isErrorMessage:!1,message:"User has been created"});return}})}},[i,g]=u.useState(1);return e.jsxs("div",{children:[e.jsx(w,{children:e.jsx("h3",{children:"User List"})}),e.jsx(w,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:e.jsxs(q,{className:"row g-3",onSubmit:U,children:[e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"UIDInput",className:"col-form-label fw-bolder",children:["UID",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(l,{type:"text",id:"UIDInput",value:s.UserID,name:"UserID",onChange:r,disabled:!0})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"fullNameInput",className:"col-form-label fw-bolder",children:["Full Name",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(l,{type:"text",id:"fullNameInput",name:"FullName",required:!0,value:s.FullName,onChange:r})]}),e.jsxs(t,{xs:6,children:[e.jsx(o,{htmlFor:"emailAddressInput",className:"col-form-label fw-bolder",children:"Email Address"}),e.jsx(l,{type:"email",id:"emailAddressInput",name:"Email",value:s.Email,onChange:r})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"isAdminInput",className:"col-form-label fw-bolder",children:["Is Administrator",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(I,{type:"text",id:"isAdminInput",name:"TypeUserID",value:s.TypeUserID,options:[{label:"True",value:1},{label:"False",value:0}],onChange:r,required:!0})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"statusInput",className:"col-form-label fw-bolder",children:["Status",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(I,{type:"text",id:"statusInput",name:"StatusID",onChange:r,value:s.StatusID,options:[{label:"True",value:1},{label:"False",value:0}],required:!0})]}),e.jsxs(M,{variant:"tabs",role:"tablist",children:[e.jsx(b,{children:e.jsx(j,{"data-tab":"contact-information-tab",className:"fw-bolder",active:i===1,role:"button",onClick:()=>g(1),children:"Contact Information"})}),s.IsEdit?e.jsx(b,{children:e.jsx(j,{"data-tab":"ResetPasswordTab",href:"#!",className:"fw-bolder",role:"button",children:"Reset Password"})}):e.jsx(b,{children:e.jsx(j,{"data-tab":"accountTab",className:"fw-bolder",role:"button",active:i===2,onClick:()=>g(2),children:"Account"})})]}),e.jsxs(R,{children:[e.jsx(N,{role:"tabpanel","aria-labelledby":"contact-information-tab",visible:i===1,children:e.jsxs("div",{className:"row g-3 d-flex",children:[e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"officePhoneInput",className:"col-form-label fw-bolder",children:"Office Phone"}),e.jsx(l,{type:"text",id:"officePhoneInput",value:s.PhoneOffice,onChange:r,name:"PhoneOffice"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"mobilePhoneInput",className:"col-form-label fw-bolder",children:"Mobile Phone"}),e.jsx(l,{type:"text",id:"mobilePhoneInput",value:s.Phone,onChange:r,name:"MobilePhone"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"addressInput",className:"col-form-label fw-bolder",children:"Address"}),e.jsx(l,{type:"text",id:"addressInput",value:s.Address,onChange:r,name:"Address"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"postalCodeInput",className:"col-form-label fw-bolder",children:"Postal Code"}),e.jsx(l,{type:"text",id:"postalCodeInput",value:s.PostCode,onChange:r,name:"PostCode"})]}),e.jsxs(t,{md:6,children:[e.jsx(o,{htmlFor:"cityInput",className:"col-form-label fw-bolder",children:"City"}),e.jsx(l,{type:"text",id:"cityInput",value:s.City,onChange:r,name:"City"})]}),e.jsxs(t,{md:6,children:[e.jsxs(o,{htmlFor:"countryInput",className:"col-form-label fw-bolder",children:["Country ",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(I,{type:"text",id:"countryInput",name:"CountryID",onChange:r,value:s.CountryID,options:[...P.map(a=>({label:a.CountryName,value:a.CountryID}))],required:!0})]})]})}),s.IsEdit?e.jsx(e.Fragment,{}):e.jsxs(N,{role:"tabpanel","aria-labelledby":"accountTab",visible:i===2,children:[e.jsxs(t,{md:12,children:[e.jsxs(o,{htmlFor:"userNameInput",className:"col-form-label fw-bolder",children:["User Name",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(l,{type:"text",id:"userNameInput",value:s.UserName,onChange:r,name:"UserName",required:!0})]}),e.jsxs(t,{md:12,children:[e.jsx(o,{htmlFor:"passwordInput",className:"col-form-label fw-bolder",children:"Password"}),e.jsx(l,{type:"password",id:"passwordInput",value:s.Password,onChange:r,name:"Password",required:!0})]}),e.jsxs(t,{md:12,children:[e.jsx(o,{htmlFor:"confirmPasswordInput",className:"col-form-label fw-bolder",children:"Confirm-Password"}),e.jsx(l,{type:"password",id:"confirmPasswordInput",value:s.ConfirmPassword,onChange:r,name:"ConfirmPassword",required:!0})]})]})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(O,{style:{width:"fit-content",marginTop:"30px"},color:"primary",type:"submit",children:s.IsEdit?"Update profile":"Create user"})})]})})]})};export{Q as default};
