import{z as j,l as k,r as u,j as e}from"./index-WQ4jDpb6.js";import{D as C,E as b}from"./api-DjNeoDhA.js";import{P as h,L as D,M as S}from"./DefaultLayout-DmcXjY2j.js";import{b as f,a as N}from"./index.es-l5u6UMqL.js";import{C as y}from"./CForm-BXQKpNjB.js";import{C as s}from"./CCol-D3F1gN_M.js";import{C as n}from"./CFormControlWrapper-D9zEezM_.js";import{C as l}from"./CFormInput-CzTrp7ea.js";import{C as v}from"./CFormSelect-CjVwp1UV.js";import"./cil-user-Ddrdy7PS.js";const q=({setToast:x})=>{const{parkingid:d}=j(),m=k();u.useState([]);const[r,g]=u.useState({ParkingID:0,ParkingCode:"",ParkingName:"",Address:"",ImagePath:"",StatusID:void 0,Description:""});u.useEffect(()=>{d&&d!=0&&C(d).then(a=>{I(a),a.data.data.IsEdit=!0,g(a.data.data)})},[]);const I=a=>{if(a.error){m(h,{isErrorMessage:!0,message:"Some things went wrong. Try again later."});return}},t=a=>{const{name:c,value:o}=a.target;let i=o;o==-1&&(i=void 0),g({...r,[c]:i})},P=a=>{const c=a.currentTarget;if(a.preventDefault(),c.checkValidity()===!1){a.stopPropagation();return}var o=localStorage.getItem("user");if(o==null)return m(D);var i=JSON.parse(o).data;b(i.UserID,i.UserName,r.ParkingID,r.ParkingCode,r.ParkingName,r.Address,r.ImagePath,r.StatusID,r.Description).then(p=>{if(p.error)x(S(!0,"Error",p.error.response.data.message));else{m(h,{state:{isErrorMessage:!1,message:`Parking slot has been ${r.IsEdit?"updated":"added"}`}});return}})};return e.jsxs("div",{children:[e.jsx(f,{children:e.jsx("h3",{children:r.IsEdit?"Update Parking Slot":"Add Parking Slot"})}),e.jsx(f,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:e.jsxs(y,{className:"row g-3",onSubmit:P,children:[e.jsxs(s,{md:6,children:[e.jsxs(n,{htmlFor:"ParkingIDInput",className:"col-form-label fw-bolder",children:["ParkingID",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(l,{type:"text",id:"ParkingIDInput",value:r.ParkingID,name:"ParkingID",onChange:t,disabled:!0})]}),e.jsxs(s,{md:6,children:[e.jsxs(n,{htmlFor:"ParkingCodeInput",className:"col-form-label fw-bolder",children:["ParkingCode",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(l,{type:"text",id:"ParkingCodeInput",name:"ParkingCode",required:!0,value:r.ParkingCode,onChange:t})]}),e.jsxs(s,{xs:6,children:[e.jsxs(n,{htmlFor:"ParkingNameInput",className:"col-form-label fw-bolder",children:["ParkingName",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(l,{type:"text",id:"ParkingNameInput",name:"ParkingName",value:r.ParkingName,onChange:t,required:!0})]}),e.jsxs(s,{xs:6,children:[e.jsx(n,{htmlFor:"AddressInput",className:"col-form-label fw-bolder",children:"Address"}),e.jsx(l,{type:"text",id:"AddressInput",name:"Address",value:r.Address,onChange:t})]}),e.jsxs(s,{xs:6,children:[e.jsx(n,{htmlFor:"DescriptionInput",className:"col-form-label fw-bolder",children:"Description"}),e.jsx(l,{type:"email",id:"DescriptionInput",name:"Description",value:r.Description,onChange:t})]}),e.jsxs(s,{md:6,children:[e.jsxs(n,{htmlFor:"statusInput",className:"col-form-label fw-bolder",children:["Status",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(v,{type:"text",id:"statusInput",name:"StatusID",onChange:t,value:r.StatusID,options:[{label:"True",value:1},{label:"False",value:0}],required:!0})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(N,{style:{width:"fit-content",marginTop:"30px"},color:"primary",type:"submit",children:r.IsEdit?"Update Parking Slot":"Add Parking Slot"})})]})})]})};export{q as default};
