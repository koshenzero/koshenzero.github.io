import{z as E,l as D,r as p,j as e}from"./index-BC3rt2Tj.js";import{o as N,q as F,r as y}from"./api-CDRdZ8ug.js";import{E as c,L,M}from"./DefaultLayout-BHiChobn.js";import{b as f,a as q}from"./index.es-BTvPOdxb.js";import{C as v}from"./CForm-DvgVRi3Q.js";import{C as r}from"./CCol-BO_cn80g.js";import{C as l}from"./CFormControlWrapper-BS7iXlYm.js";import{C as n}from"./CFormInput-DqKhq3XX.js";import{C as x}from"./CFormSelect-BqBqkGHb.js";import"./cil-user-Ddrdy7PS.js";const J=({setToast:I})=>{const{equipmentid:d}=E(),i=D(),[g,j]=p.useState([]),[t,u]=p.useState({EquipmentID:0,ChassisNo:"",StatusID:0,Description:"",ETC:"",FALabelID:0,Model:"",MastNumber:"",IsEdit:!1});p.useEffect(()=>{d&&d!=0&&N(d).then(s=>{if(s.error){i(c,{isErrorMessage:!0,message:"Something went wrong. Try again later."});return}else s.data.data.IsEdit=!0,u(s.data.data)}),F().then(s=>{if(s.error){i(c,{isErrorMessage:!0,message:"Something went wrong. Try again later."});return}j(s.data.data.filter(o=>o.StatusID=1)),u({...t,FALabelID:s.data.data.filter(o=>o.StatusID=1)[0].FALabelID})})},[]);const a=s=>{const{name:o,value:m}=s.target;u({...t,[o]:m})},C=s=>{console.log(s);const o=s.currentTarget;if(s.preventDefault(),o.checkValidity()===!1){s.stopPropagation();return}var m=localStorage.getItem("user");if(m==null)return i(L);var h=JSON.parse(m).data;y(h.UserID,h.UserName,t.FALabelID,t.EquipmentID,t.Model,t.ChassisNo,t.StatusID,t.MastNumber,t.ETC,t.Description).then(b=>{if(b.error)I(M(!0,"Error",b.error.response.data.message));else{i(c,{state:{isErrorMessage:!1,message:t.IsEdit?"Equipment has been updated":"Equipment has been created"}});return}})};return e.jsxs("div",{children:[e.jsx(f,{children:e.jsx("h3",{children:"Equipment List"})}),e.jsx(f,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:e.jsxs(v,{className:"row g-3",onSubmit:C,children:[e.jsxs(r,{md:6,children:[e.jsxs(l,{htmlFor:"EquipmentIDInput",className:"col-form-label fw-bolder",children:["EquipmentID",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(n,{type:"text",id:"EquipmentIDInput",value:t.EquipmentID,name:"EquipmentID",onChange:a,disabled:!0})]}),e.jsxs(r,{md:6,children:[e.jsxs(l,{htmlFor:"ChassisNoInput",className:"col-form-label fw-bolder",children:["ChassisNo",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(n,{type:"text",id:"ChassisNoInput",name:"ChassisNo",required:!0,value:t.ChassisNo,onChange:a})]}),e.jsxs(r,{xs:6,children:[e.jsx(l,{htmlFor:"ModelInput",className:"col-form-label fw-bolder",children:"Model"}),e.jsx(n,{type:"text",id:"ModelInput",name:"Model",value:t.Model,onChange:a})]}),e.jsxs(r,{xs:6,children:[e.jsx(l,{htmlFor:"MastNumberInput",className:"col-form-label fw-bolder",children:"MastNumber"}),e.jsx(n,{type:"text",id:"MastNumberInput",name:"MastNumber",value:t.MastNumber,onChange:a})]}),e.jsxs(r,{xs:6,children:[e.jsx(l,{htmlFor:"ETCInput",className:"col-form-label fw-bolder",children:"ETC"}),e.jsx(n,{type:"text",id:"ETCInput",name:"ETC",value:t.ETC,onChange:a})]}),e.jsxs(r,{xs:6,children:[e.jsx(l,{htmlFor:"DescriptionInput",className:"col-form-label fw-bolder",children:"Description"}),e.jsx(n,{type:"text",id:"DescriptionInput",name:"Description",value:t.Description,onChange:a})]}),e.jsxs(r,{md:6,children:[e.jsxs(l,{htmlFor:"statusInput",className:"col-form-label fw-bolder",children:["Status",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(x,{type:"text",id:"statusInput",name:"StatusID",onChange:a,value:t.StatusID,options:[{label:"True",value:1},{label:"False",value:0}],required:!0})]}),e.jsxs(r,{md:6,children:[e.jsxs(l,{htmlFor:"FALabelInput",className:"col-form-label fw-bolder",children:["FALabel ",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(x,{type:"text",id:"FALabelInput",name:"FALabelID",onChange:a,value:t.FALabel,options:[...g.map(s=>({label:s.FALabelName,value:s.FALabelID}))],required:!0})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(q,{style:{width:"fit-content",marginTop:"30px"},color:"primary",type:"submit",children:t.IsEdit?"Update equipment":"Create equipment"})})]})})]})};export{J as default};
