import{z as g,l as I,r as m,j as e}from"./index-BC3rt2Tj.js";import{j,k as b}from"./api-CDRdZ8ug.js";import{e as h,M as D}from"./DefaultLayout-BHiChobn.js";import{b as f,a as N}from"./index.es-BTvPOdxb.js";import{C as S}from"./CForm-DvgVRi3Q.js";import{C as o}from"./CCol-BO_cn80g.js";import{C as n}from"./CFormControlWrapper-BS7iXlYm.js";import{C as d}from"./CFormInput-DqKhq3XX.js";import{C as v}from"./CFormSelect-BqBqkGHb.js";import"./cil-user-Ddrdy7PS.js";const O=({setToast:y})=>{const{id:l}=g(),i=I();m.useState([]);const[t,c]=m.useState({CountryID:0,CountryName:"",StatusID:"",Description:""});m.useEffect(()=>{l&&l!=0&&j(l).then(r=>{if(r.error){i(h,{isErrorMessage:!0,message:"Something went wrong. Try again later."});return}else r.data.data.IsEdit=!0,c(r.data.data)})},[]);const s=r=>{const{name:u,value:a}=r.target;c({...t,[u]:a})},x=r=>{console.log(r);const u=r.currentTarget;r.preventDefault(),u.checkValidity()===!1&&r.stopPropagation();var a=localStorage.getItem("user");if(a==null)return i(LOGIN_URL);var p=JSON.parse(a).data;b(p.UserID,p.UserName,t.CountryID,t.CountryName,"",t.StatusID,t.Description).then(C=>{if(C.error)y(D(!0,"Error",C.error.response.data.message));else{i(h,{state:{isErrorMessage:!1,message:t.IsEdit?"Country has been updated":"Country has been created"}});return}})};return e.jsxs("div",{children:[e.jsx(f,{children:e.jsx("h3",{children:"Country List"})}),e.jsx(f,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},children:e.jsxs(S,{className:"row g-3",onSubmit:x,children:[e.jsxs(o,{md:6,children:[e.jsxs(n,{htmlFor:"CountryIDInput",className:"col-form-label fw-bolder",children:["CountryID",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(d,{type:"text",id:"CountryIDInput",value:t.CountryID,name:"CountryID",onChange:s,disabled:!0})]}),e.jsxs(o,{md:6,children:[e.jsxs(n,{htmlFor:"CountryNameInput",className:"col-form-label fw-bolder",children:["CountryName",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(d,{type:"text",id:"CountryNameInput",name:"CountryName",required:!0,value:t.CountryName,onChange:s})]}),e.jsxs(o,{xs:6,children:[e.jsx(n,{htmlFor:"DescriptionInput",className:"col-form-label fw-bolder",children:"Description"}),e.jsx(d,{type:"text",id:"DescriptionInput",name:"Description",value:t.Description,onChange:s})]}),e.jsxs(o,{md:6,children:[e.jsxs(n,{htmlFor:"statusInput",className:"col-form-label fw-bolder",children:["Status",e.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),e.jsx(v,{type:"text",id:"statusInput",name:"StatusID",onChange:s,value:t.StatusID,options:[{label:"True",value:1},{label:"False",value:0}],required:!0})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(N,{style:{width:"fit-content",marginTop:"30px"},color:"primary",type:"submit",children:t.IsEdit?"Update country":"Create country"})})]})})]})};export{O as default};
