var Ep=Object.defineProperty;var yp=(T,o,i)=>o in T?Ep(T,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):T[o]=i;var Rn=(T,o,i)=>(yp(T,typeof o!="symbol"?o+"":o,i),i);import{r as pn,y as Le,q as Sp,j as Tf}from"./index-WQ4jDpb6.js";const Cf=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),Sr=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:Cf,viewMax:Cf}),ue=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0});class Ap{constructor(o,i){Rn(this,"_canvas",null);Rn(this,"_view",{scale:1,x:0,y:0});Rn(this,"_viewChangeListeners",new Set);Rn(this,"_initialViewSize",{width:0,height:0});this._scaleExtents=o,this._documentSize=i}get canvas(){return this._canvas}set canvas(o){this._canvas=o,this.setView()}get scale(){return this._view.scale}setScale(o){this.setView({scale:o})}get initialViewSize(){return this._initialViewSize}set initialViewSize(o){this._initialViewSize=o}get x(){return this._view.x}set x(o){this.setView({x:o})}get y(){return this._view.y}set y(o){this.setView({y:o})}get view(){return{...this._view}}get scaleExtents(){return{...this._scaleExtents}}set scaleExtents(o){this._scaleExtents={...o},this.setView()}get documentSize(){return{...this._documentSize}}set documentSize(o){this._documentSize={...o},this.setView()}get transformMatrix(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}get canvasBounds(){if(this._canvas){const{left:o,top:i,right:w,bottom:m}=this._canvas.getBoundingClientRect();return{viewMin:this.clientPointToViewPoint({clientX:o,clientY:i}),viewMax:this.clientPointToViewPoint({clientX:w,clientY:m}),left:o,top:i,right:w,bottom:m,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}else return}get canvasRect(){if(this._canvas)return this._canvas.getBoundingClientRect()}clampView(o){const{min:i,max:w}=this._scaleExtents,{width:m,height:A}=this._documentSize,{left:S,top:b,right:B,bottom:F}=this.canvasRect||Sr,G=B-S,D=F-b,tn=G/2,ln=-(m*this._view.scale-G/2),V=D/2,q=-(A*this._view.scale-D/2);return{scale:Math.min(Math.max(o.scale,i),w),x:Math.min(Math.max(o.x,ln),tn),y:Math.min(Math.max(o.y,q),V)}}resetView(){this.setView({scale:1,x:0,y:0})}setView(o){const i=this.clampView({...this._view,...o||{}}),{scale:w,x:m,y:A}=this._view;return(i.scale!==w||i.x!==m||i.y!==A)&&(this._view=i,this._viewChangeListeners.forEach(S=>S&&S({view:i,transform:this.transformMatrix}))),{...this._view}}scaleAtClientPoint(o,i){const w=this.clientPointToViewPoint(i),m=this.clampView({...this._view,scale:this._view.scale+o}),A=this.viewPointToClientPoint(w,m);m.x=this._view.x-(A.clientX-i.clientX),m.y=this._view.y-(A.clientY-i.clientY);const{width:S,height:b}=this._documentSize,{left:B,top:F,right:G,bottom:D}=this.canvasRect||Sr,tn=G-B,ln=D-F,V=tn/2,q=-(S*m.scale-tn/2),P=ln/2,en=-(b*m.scale-ln/2);return m.x=Math.min(Math.max(m.x,q),V),m.y=Math.min(Math.max(m.y,en),P),m.scale===this._scaleExtents.min&&(m.x=0,m.y=0),this.setView(m)}clientPointToViewPoint(o,i=this._view){const{left:w,top:m}=this.canvasRect||Sr,A=o.clientX-w,S=o.clientY-m;return{x:(A-i.x)/i.scale,y:(S-i.y)/i.scale,relativeClientX:A,relativeClientY:S}}viewPointToClientPoint(o,i=this._view){const{left:w,top:m}=this.canvasRect||Sr,A=o.x*i.scale+i.x,S=o.y*i.scale+i.y,b=A+w,B=S+m;return{clientX:b,clientY:B,relativeX:A,relativeY:S,x:b,y:B}}attachViewChangeListener(o){this._viewChangeListeners.add(o)}}const Rp=(T,o,i)=>{T.width=o,T.height=i,T.style.width=`${o}px`,T.style.height=`${i}px`},Tp=(T,o)=>{for(const i in T)Object.prototype.hasOwnProperty.call(T,i)&&Rp(T[i],o.width,o.height)};function Cp({ctx:T,image:o,x:i=0,y:w=0,w:m=T.canvas.width,h:A=T.canvas.height,offsetX:S=.5,offsetY:b=.5}){S<0&&(S=0),b<0&&(b=0),S>1&&(S=1),b>1&&(b=1);const B=o.width,F=o.height,G=Math.min(m/B,A/F);let D=B*G,tn=F*G,ln,V,q,P,en=1;D<m&&(en=m/D),Math.abs(en-1)<1e-14&&tn<A&&(en=A/tn),D*=en,tn*=en,q=B/(D/m),P=F/(tn/A),ln=(B-q)*S,V=(F-P)*b,ln<0&&(ln=0),V<0&&(V=0),q>B&&(q=B),P>F&&(P=F),T.drawImage(o,ln,V,q,P,i,w,m,A)}function Lp({canvas:T,ctx:o,image:i}){if(i&&i.complete&&T&&o){const w=i.width,m=i.height,A=T.getBoundingClientRect(),S=A.width,b=A.height,B=w/m;let F=S,G=F/B;G>b&&(G=b,F=G*B),o.drawImage(i,0,0,w,m,0,0,F,G)}}function Ip({canvas:T,ctx:o,image:i}){if(i&&i.complete&&T&&o){const w=i.width,m=i.height,A=T.getBoundingClientRect(),S=A.width,b=A.height;o.drawImage(i,0,0,w,m,0,0,S,b)}}function Mp(T){const o=pn.useRef(null),[i,w]=pn.useState({width:window.innerWidth,height:window.innerHeight});return pn.useEffect(()=>{const m=new ResizeObserver(A=>{for(const S of A){if(S.contentRect){const{width:b,height:B}=S.contentRect;w({width:b,height:B})}typeof T=="function"&&T(S)}});return o.current&&m.observe(o.current),()=>{m.disconnect()}},[T]),{containerRef:o,screenSize:i}}class Ie{constructor(o,i){this._stateMachine=o,this._name=i}get stateMachine(){return this._stateMachine}get name(){return this._name}}class Op extends Ie{constructor(o,i){super(o,i)}onEnter(){}onExit(){}handleMouseWheel(o,i){}handleMouseDown(o,i){}handleMouseMove(o,i){}handleMouseUp(o,i){}}var Ar={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ar.exports;(function(T,o){(function(){var i,w="4.17.21",m=200,A="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",S="Expected a function",b="Invalid `variable` option passed into `_.template`",B="__lodash_hash_undefined__",F=500,G="__lodash_placeholder__",D=1,tn=2,ln=4,V=1,q=2,P=1,en=2,wt=4,Un=8,mt=16,Fn=32,st=64,Zn=128,Mt=256,Gt=512,x=30,J="...",Y=800,En=16,gn=1,Nn=2,ft=3,j=1/0,xt=9007199254740991,Of=17976931348623157e292,Me=NaN,tt=4294967295,bf=tt-1,Df=tt>>>1,Pf=[["ary",Zn],["bind",P],["bindKey",en],["curry",Un],["curryRight",mt],["flip",Gt],["partial",Fn],["partialRight",st],["rearg",Mt]],qt="[object Arguments]",Oe="[object Array]",Wf="[object AsyncFunction]",se="[object Boolean]",fe="[object Date]",Bf="[object DOMException]",be="[object Error]",De="[object Function]",Zi="[object GeneratorFunction]",Vn="[object Map]",oe="[object Number]",Uf="[object Null]",ot="[object Object]",Vi="[object Promise]",Ff="[object Proxy]",ae="[object RegExp]",Jn="[object Set]",le="[object String]",Pe="[object Symbol]",Nf="[object Undefined]",ce="[object WeakMap]",zf="[object WeakSet]",he="[object ArrayBuffer]",Kt="[object DataView]",Rr="[object Float32Array]",Tr="[object Float64Array]",Cr="[object Int8Array]",Lr="[object Int16Array]",Ir="[object Int32Array]",Mr="[object Uint8Array]",Or="[object Uint8ClampedArray]",br="[object Uint16Array]",Dr="[object Uint32Array]",Hf=/\b__p \+= '';/g,Gf=/\b(__p \+=) '' \+/g,qf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ji=/&(?:amp|lt|gt|quot|#39);/g,Qi=/[&<>"']/g,Kf=RegExp(Ji.source),Yf=RegExp(Qi.source),$f=/<%-([\s\S]+?)%>/g,Xf=/<%([\s\S]+?)%>/g,ki=/<%=([\s\S]+?)%>/g,Zf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vf=/^\w*$/,Jf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pr=/[\\^$.*+?()[\]{}|]/g,Qf=RegExp(Pr.source),Wr=/^\s+/,kf=/\s/,jf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,no=/\{\n\/\* \[wrapped with (.+)\] \*/,to=/,? & /,eo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ro=/[()=,{}\[\]\/\s]/,io=/\\(\\)?/g,uo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ji=/\w*$/,so=/^[-+]0x[0-9a-f]+$/i,fo=/^0b[01]+$/i,oo=/^\[object .+?Constructor\]$/,ao=/^0o[0-7]+$/i,lo=/^(?:0|[1-9]\d*)$/,co=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,We=/($^)/,ho=/['\n\r\u2028\u2029\\]/g,Be="\\ud800-\\udfff",go="\\u0300-\\u036f",_o="\\ufe20-\\ufe2f",po="\\u20d0-\\u20ff",nu=go+_o+po,tu="\\u2700-\\u27bf",eu="a-z\\xdf-\\xf6\\xf8-\\xff",vo="\\xac\\xb1\\xd7\\xf7",wo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mo="\\u2000-\\u206f",xo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ru="A-Z\\xc0-\\xd6\\xd8-\\xde",iu="\\ufe0e\\ufe0f",uu=vo+wo+mo+xo,Br="['’]",Eo="["+Be+"]",su="["+uu+"]",Ue="["+nu+"]",fu="\\d+",yo="["+tu+"]",ou="["+eu+"]",au="[^"+Be+uu+fu+tu+eu+ru+"]",Ur="\\ud83c[\\udffb-\\udfff]",So="(?:"+Ue+"|"+Ur+")",lu="[^"+Be+"]",Fr="(?:\\ud83c[\\udde6-\\uddff]){2}",Nr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yt="["+ru+"]",cu="\\u200d",hu="(?:"+ou+"|"+au+")",Ao="(?:"+Yt+"|"+au+")",gu="(?:"+Br+"(?:d|ll|m|re|s|t|ve))?",_u="(?:"+Br+"(?:D|LL|M|RE|S|T|VE))?",pu=So+"?",du="["+iu+"]?",Ro="(?:"+cu+"(?:"+[lu,Fr,Nr].join("|")+")"+du+pu+")*",To="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Co="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vu=du+pu+Ro,Lo="(?:"+[yo,Fr,Nr].join("|")+")"+vu,Io="(?:"+[lu+Ue+"?",Ue,Fr,Nr,Eo].join("|")+")",Mo=RegExp(Br,"g"),Oo=RegExp(Ue,"g"),zr=RegExp(Ur+"(?="+Ur+")|"+Io+vu,"g"),bo=RegExp([Yt+"?"+ou+"+"+gu+"(?="+[su,Yt,"$"].join("|")+")",Ao+"+"+_u+"(?="+[su,Yt+hu,"$"].join("|")+")",Yt+"?"+hu+"+"+gu,Yt+"+"+_u,Co,To,fu,Lo].join("|"),"g"),Do=RegExp("["+cu+Be+nu+iu+"]"),Po=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bo=-1,nn={};nn[Rr]=nn[Tr]=nn[Cr]=nn[Lr]=nn[Ir]=nn[Mr]=nn[Or]=nn[br]=nn[Dr]=!0,nn[qt]=nn[Oe]=nn[he]=nn[se]=nn[Kt]=nn[fe]=nn[be]=nn[De]=nn[Vn]=nn[oe]=nn[ot]=nn[ae]=nn[Jn]=nn[le]=nn[ce]=!1;var k={};k[qt]=k[Oe]=k[he]=k[Kt]=k[se]=k[fe]=k[Rr]=k[Tr]=k[Cr]=k[Lr]=k[Ir]=k[Vn]=k[oe]=k[ot]=k[ae]=k[Jn]=k[le]=k[Pe]=k[Mr]=k[Or]=k[br]=k[Dr]=!0,k[be]=k[De]=k[ce]=!1;var Uo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Fo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},No={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ho=parseFloat,Go=parseInt,wu=typeof Le=="object"&&Le&&Le.Object===Object&&Le,qo=typeof self=="object"&&self&&self.Object===Object&&self,dn=wu||qo||Function("return this")(),Hr=o&&!o.nodeType&&o,Ot=Hr&&!0&&T&&!T.nodeType&&T,mu=Ot&&Ot.exports===Hr,Gr=mu&&wu.process,zn=function(){try{var c=Ot&&Ot.require&&Ot.require("util").types;return c||Gr&&Gr.binding&&Gr.binding("util")}catch{}}(),xu=zn&&zn.isArrayBuffer,Eu=zn&&zn.isDate,yu=zn&&zn.isMap,Su=zn&&zn.isRegExp,Au=zn&&zn.isSet,Ru=zn&&zn.isTypedArray;function On(c,_,g){switch(g.length){case 0:return c.call(_);case 1:return c.call(_,g[0]);case 2:return c.call(_,g[0],g[1]);case 3:return c.call(_,g[0],g[1],g[2])}return c.apply(_,g)}function Ko(c,_,g,y){for(var M=-1,$=c==null?0:c.length;++M<$;){var cn=c[M];_(y,cn,g(cn),c)}return y}function Hn(c,_){for(var g=-1,y=c==null?0:c.length;++g<y&&_(c[g],g,c)!==!1;);return c}function Yo(c,_){for(var g=c==null?0:c.length;g--&&_(c[g],g,c)!==!1;);return c}function Tu(c,_){for(var g=-1,y=c==null?0:c.length;++g<y;)if(!_(c[g],g,c))return!1;return!0}function Et(c,_){for(var g=-1,y=c==null?0:c.length,M=0,$=[];++g<y;){var cn=c[g];_(cn,g,c)&&($[M++]=cn)}return $}function Fe(c,_){var g=c==null?0:c.length;return!!g&&$t(c,_,0)>-1}function qr(c,_,g){for(var y=-1,M=c==null?0:c.length;++y<M;)if(g(_,c[y]))return!0;return!1}function rn(c,_){for(var g=-1,y=c==null?0:c.length,M=Array(y);++g<y;)M[g]=_(c[g],g,c);return M}function yt(c,_){for(var g=-1,y=_.length,M=c.length;++g<y;)c[M+g]=_[g];return c}function Kr(c,_,g,y){var M=-1,$=c==null?0:c.length;for(y&&$&&(g=c[++M]);++M<$;)g=_(g,c[M],M,c);return g}function $o(c,_,g,y){var M=c==null?0:c.length;for(y&&M&&(g=c[--M]);M--;)g=_(g,c[M],M,c);return g}function Yr(c,_){for(var g=-1,y=c==null?0:c.length;++g<y;)if(_(c[g],g,c))return!0;return!1}var Xo=$r("length");function Zo(c){return c.split("")}function Vo(c){return c.match(eo)||[]}function Cu(c,_,g){var y;return g(c,function(M,$,cn){if(_(M,$,cn))return y=$,!1}),y}function Ne(c,_,g,y){for(var M=c.length,$=g+(y?1:-1);y?$--:++$<M;)if(_(c[$],$,c))return $;return-1}function $t(c,_,g){return _===_?fa(c,_,g):Ne(c,Lu,g)}function Jo(c,_,g,y){for(var M=g-1,$=c.length;++M<$;)if(y(c[M],_))return M;return-1}function Lu(c){return c!==c}function Iu(c,_){var g=c==null?0:c.length;return g?Zr(c,_)/g:Me}function $r(c){return function(_){return _==null?i:_[c]}}function Xr(c){return function(_){return c==null?i:c[_]}}function Mu(c,_,g,y,M){return M(c,function($,cn,Q){g=y?(y=!1,$):_(g,$,cn,Q)}),g}function Qo(c,_){var g=c.length;for(c.sort(_);g--;)c[g]=c[g].value;return c}function Zr(c,_){for(var g,y=-1,M=c.length;++y<M;){var $=_(c[y]);$!==i&&(g=g===i?$:g+$)}return g}function Vr(c,_){for(var g=-1,y=Array(c);++g<c;)y[g]=_(g);return y}function ko(c,_){return rn(_,function(g){return[g,c[g]]})}function Ou(c){return c&&c.slice(0,Wu(c)+1).replace(Wr,"")}function bn(c){return function(_){return c(_)}}function Jr(c,_){return rn(_,function(g){return c[g]})}function ge(c,_){return c.has(_)}function bu(c,_){for(var g=-1,y=c.length;++g<y&&$t(_,c[g],0)>-1;);return g}function Du(c,_){for(var g=c.length;g--&&$t(_,c[g],0)>-1;);return g}function jo(c,_){for(var g=c.length,y=0;g--;)c[g]===_&&++y;return y}var na=Xr(Uo),ta=Xr(Fo);function ea(c){return"\\"+zo[c]}function ra(c,_){return c==null?i:c[_]}function Xt(c){return Do.test(c)}function ia(c){return Po.test(c)}function ua(c){for(var _,g=[];!(_=c.next()).done;)g.push(_.value);return g}function Qr(c){var _=-1,g=Array(c.size);return c.forEach(function(y,M){g[++_]=[M,y]}),g}function Pu(c,_){return function(g){return c(_(g))}}function St(c,_){for(var g=-1,y=c.length,M=0,$=[];++g<y;){var cn=c[g];(cn===_||cn===G)&&(c[g]=G,$[M++]=g)}return $}function ze(c){var _=-1,g=Array(c.size);return c.forEach(function(y){g[++_]=y}),g}function sa(c){var _=-1,g=Array(c.size);return c.forEach(function(y){g[++_]=[y,y]}),g}function fa(c,_,g){for(var y=g-1,M=c.length;++y<M;)if(c[y]===_)return y;return-1}function oa(c,_,g){for(var y=g+1;y--;)if(c[y]===_)return y;return y}function Zt(c){return Xt(c)?la(c):Xo(c)}function Qn(c){return Xt(c)?ca(c):Zo(c)}function Wu(c){for(var _=c.length;_--&&kf.test(c.charAt(_)););return _}var aa=Xr(No);function la(c){for(var _=zr.lastIndex=0;zr.test(c);)++_;return _}function ca(c){return c.match(zr)||[]}function ha(c){return c.match(bo)||[]}var ga=function c(_){_=_==null?dn:Vt.defaults(dn.Object(),_,Vt.pick(dn,Wo));var g=_.Array,y=_.Date,M=_.Error,$=_.Function,cn=_.Math,Q=_.Object,kr=_.RegExp,_a=_.String,Gn=_.TypeError,He=g.prototype,pa=$.prototype,Jt=Q.prototype,Ge=_["__core-js_shared__"],qe=pa.toString,Z=Jt.hasOwnProperty,da=0,Bu=function(){var n=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Ke=Jt.toString,va=qe.call(Q),wa=dn._,ma=kr("^"+qe.call(Z).replace(Pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=mu?_.Buffer:i,At=_.Symbol,$e=_.Uint8Array,Uu=Ye?Ye.allocUnsafe:i,Xe=Pu(Q.getPrototypeOf,Q),Fu=Q.create,Nu=Jt.propertyIsEnumerable,Ze=He.splice,zu=At?At.isConcatSpreadable:i,_e=At?At.iterator:i,bt=At?At.toStringTag:i,Ve=function(){try{var n=Ut(Q,"defineProperty");return n({},"",{}),n}catch{}}(),xa=_.clearTimeout!==dn.clearTimeout&&_.clearTimeout,Ea=y&&y.now!==dn.Date.now&&y.now,ya=_.setTimeout!==dn.setTimeout&&_.setTimeout,Je=cn.ceil,Qe=cn.floor,jr=Q.getOwnPropertySymbols,Sa=Ye?Ye.isBuffer:i,Hu=_.isFinite,Aa=He.join,Ra=Pu(Q.keys,Q),hn=cn.max,wn=cn.min,Ta=y.now,Ca=_.parseInt,Gu=cn.random,La=He.reverse,ni=Ut(_,"DataView"),pe=Ut(_,"Map"),ti=Ut(_,"Promise"),Qt=Ut(_,"Set"),de=Ut(_,"WeakMap"),ve=Ut(Q,"create"),ke=de&&new de,kt={},Ia=Ft(ni),Ma=Ft(pe),Oa=Ft(ti),ba=Ft(Qt),Da=Ft(de),je=At?At.prototype:i,we=je?je.valueOf:i,qu=je?je.toString:i;function s(n){if(fn(n)&&!O(n)&&!(n instanceof H)){if(n instanceof qn)return n;if(Z.call(n,"__wrapped__"))return Ks(n)}return new qn(n)}var jt=function(){function n(){}return function(t){if(!un(t))return{};if(Fu)return Fu(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function nr(){}function qn(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}s.templateSettings={escape:$f,evaluate:Xf,interpolate:ki,variable:"",imports:{_:s}},s.prototype=nr.prototype,s.prototype.constructor=s,qn.prototype=jt(nr.prototype),qn.prototype.constructor=qn;function H(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=tt,this.__views__=[]}function Pa(){var n=new H(this.__wrapped__);return n.__actions__=Tn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Tn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Tn(this.__views__),n}function Wa(){if(this.__filtered__){var n=new H(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Ba(){var n=this.__wrapped__.value(),t=this.__dir__,e=O(n),r=t<0,u=e?n.length:0,f=Zl(0,u,this.__views__),a=f.start,l=f.end,h=l-a,p=r?l:a-1,d=this.__iteratees__,v=d.length,E=0,R=wn(h,this.__takeCount__);if(!e||!r&&u==h&&R==h)return gs(n,this.__actions__);var L=[];n:for(;h--&&E<R;){p+=t;for(var U=-1,I=n[p];++U<v;){var z=d[U],K=z.iteratee,Wn=z.type,An=K(I);if(Wn==Nn)I=An;else if(!An){if(Wn==gn)continue n;break n}}L[E++]=I}return L}H.prototype=jt(nr.prototype),H.prototype.constructor=H;function Dt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function Ua(){this.__data__=ve?ve(null):{},this.size=0}function Fa(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function Na(n){var t=this.__data__;if(ve){var e=t[n];return e===B?i:e}return Z.call(t,n)?t[n]:i}function za(n){var t=this.__data__;return ve?t[n]!==i:Z.call(t,n)}function Ha(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=ve&&t===i?B:t,this}Dt.prototype.clear=Ua,Dt.prototype.delete=Fa,Dt.prototype.get=Na,Dt.prototype.has=za,Dt.prototype.set=Ha;function at(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function Ga(){this.__data__=[],this.size=0}function qa(n){var t=this.__data__,e=tr(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():Ze.call(t,e,1),--this.size,!0}function Ka(n){var t=this.__data__,e=tr(t,n);return e<0?i:t[e][1]}function Ya(n){return tr(this.__data__,n)>-1}function $a(n,t){var e=this.__data__,r=tr(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}at.prototype.clear=Ga,at.prototype.delete=qa,at.prototype.get=Ka,at.prototype.has=Ya,at.prototype.set=$a;function lt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function Xa(){this.size=0,this.__data__={hash:new Dt,map:new(pe||at),string:new Dt}}function Za(n){var t=gr(this,n).delete(n);return this.size-=t?1:0,t}function Va(n){return gr(this,n).get(n)}function Ja(n){return gr(this,n).has(n)}function Qa(n,t){var e=gr(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}lt.prototype.clear=Xa,lt.prototype.delete=Za,lt.prototype.get=Va,lt.prototype.has=Ja,lt.prototype.set=Qa;function Pt(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new lt;++t<e;)this.add(n[t])}function ka(n){return this.__data__.set(n,B),this}function ja(n){return this.__data__.has(n)}Pt.prototype.add=Pt.prototype.push=ka,Pt.prototype.has=ja;function kn(n){var t=this.__data__=new at(n);this.size=t.size}function nl(){this.__data__=new at,this.size=0}function tl(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function el(n){return this.__data__.get(n)}function rl(n){return this.__data__.has(n)}function il(n,t){var e=this.__data__;if(e instanceof at){var r=e.__data__;if(!pe||r.length<m-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new lt(r)}return e.set(n,t),this.size=e.size,this}kn.prototype.clear=nl,kn.prototype.delete=tl,kn.prototype.get=el,kn.prototype.has=rl,kn.prototype.set=il;function Ku(n,t){var e=O(n),r=!e&&Nt(n),u=!e&&!r&&It(n),f=!e&&!r&&!u&&re(n),a=e||r||u||f,l=a?Vr(n.length,_a):[],h=l.length;for(var p in n)(t||Z.call(n,p))&&!(a&&(p=="length"||u&&(p=="offset"||p=="parent")||f&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||_t(p,h)))&&l.push(p);return l}function Yu(n){var t=n.length;return t?n[hi(0,t-1)]:i}function ul(n,t){return _r(Tn(n),Wt(t,0,n.length))}function sl(n){return _r(Tn(n))}function ei(n,t,e){(e!==i&&!jn(n[t],e)||e===i&&!(t in n))&&ct(n,t,e)}function me(n,t,e){var r=n[t];(!(Z.call(n,t)&&jn(r,e))||e===i&&!(t in n))&&ct(n,t,e)}function tr(n,t){for(var e=n.length;e--;)if(jn(n[e][0],t))return e;return-1}function fl(n,t,e,r){return Rt(n,function(u,f,a){t(r,u,e(u),a)}),r}function $u(n,t){return n&&rt(t,_n(t),n)}function ol(n,t){return n&&rt(t,Ln(t),n)}function ct(n,t,e){t=="__proto__"&&Ve?Ve(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function ri(n,t){for(var e=-1,r=t.length,u=g(r),f=n==null;++e<r;)u[e]=f?i:Ui(n,t[e]);return u}function Wt(n,t,e){return n===n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function Kn(n,t,e,r,u,f){var a,l=t&D,h=t&tn,p=t&ln;if(e&&(a=u?e(n,r,u,f):e(n)),a!==i)return a;if(!un(n))return n;var d=O(n);if(d){if(a=Jl(n),!l)return Tn(n,a)}else{var v=mn(n),E=v==De||v==Zi;if(It(n))return ds(n,l);if(v==ot||v==qt||E&&!u){if(a=h||E?{}:Ws(n),!l)return h?Nl(n,ol(a,n)):Fl(n,$u(a,n))}else{if(!k[v])return u?n:{};a=Ql(n,v,l)}}f||(f=new kn);var R=f.get(n);if(R)return R;f.set(n,a),cf(n)?n.forEach(function(I){a.add(Kn(I,t,e,I,n,f))}):af(n)&&n.forEach(function(I,z){a.set(z,Kn(I,t,e,z,n,f))});var L=p?h?Si:yi:h?Ln:_n,U=d?i:L(n);return Hn(U||n,function(I,z){U&&(z=I,I=n[z]),me(a,z,Kn(I,t,e,z,n,f))}),a}function al(n){var t=_n(n);return function(e){return Xu(e,n,t)}}function Xu(n,t,e){var r=e.length;if(n==null)return!r;for(n=Q(n);r--;){var u=e[r],f=t[u],a=n[u];if(a===i&&!(u in n)||!f(a))return!1}return!0}function Zu(n,t,e){if(typeof n!="function")throw new Gn(S);return Te(function(){n.apply(i,e)},t)}function xe(n,t,e,r){var u=-1,f=Fe,a=!0,l=n.length,h=[],p=t.length;if(!l)return h;e&&(t=rn(t,bn(e))),r?(f=qr,a=!1):t.length>=m&&(f=ge,a=!1,t=new Pt(t));n:for(;++u<l;){var d=n[u],v=e==null?d:e(d);if(d=r||d!==0?d:0,a&&v===v){for(var E=p;E--;)if(t[E]===v)continue n;h.push(d)}else f(t,v,r)||h.push(d)}return h}var Rt=Es(et),Vu=Es(ui,!0);function ll(n,t){var e=!0;return Rt(n,function(r,u,f){return e=!!t(r,u,f),e}),e}function er(n,t,e){for(var r=-1,u=n.length;++r<u;){var f=n[r],a=t(f);if(a!=null&&(l===i?a===a&&!Pn(a):e(a,l)))var l=a,h=f}return h}function cl(n,t,e,r){var u=n.length;for(e=W(e),e<0&&(e=-e>u?0:u+e),r=r===i||r>u?u:W(r),r<0&&(r+=u),r=e>r?0:gf(r);e<r;)n[e++]=t;return n}function Ju(n,t){var e=[];return Rt(n,function(r,u,f){t(r,u,f)&&e.push(r)}),e}function vn(n,t,e,r,u){var f=-1,a=n.length;for(e||(e=jl),u||(u=[]);++f<a;){var l=n[f];t>0&&e(l)?t>1?vn(l,t-1,e,r,u):yt(u,l):r||(u[u.length]=l)}return u}var ii=ys(),Qu=ys(!0);function et(n,t){return n&&ii(n,t,_n)}function ui(n,t){return n&&Qu(n,t,_n)}function rr(n,t){return Et(t,function(e){return pt(n[e])})}function Bt(n,t){t=Ct(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[it(t[e++])];return e&&e==r?n:i}function ku(n,t,e){var r=t(n);return O(n)?r:yt(r,e(n))}function yn(n){return n==null?n===i?Nf:Uf:bt&&bt in Q(n)?Xl(n):sc(n)}function si(n,t){return n>t}function hl(n,t){return n!=null&&Z.call(n,t)}function gl(n,t){return n!=null&&t in Q(n)}function _l(n,t,e){return n>=wn(t,e)&&n<hn(t,e)}function fi(n,t,e){for(var r=e?qr:Fe,u=n[0].length,f=n.length,a=f,l=g(f),h=1/0,p=[];a--;){var d=n[a];a&&t&&(d=rn(d,bn(t))),h=wn(d.length,h),l[a]=!e&&(t||u>=120&&d.length>=120)?new Pt(a&&d):i}d=n[0];var v=-1,E=l[0];n:for(;++v<u&&p.length<h;){var R=d[v],L=t?t(R):R;if(R=e||R!==0?R:0,!(E?ge(E,L):r(p,L,e))){for(a=f;--a;){var U=l[a];if(!(U?ge(U,L):r(n[a],L,e)))continue n}E&&E.push(L),p.push(R)}}return p}function pl(n,t,e,r){return et(n,function(u,f,a){t(r,e(u),f,a)}),r}function Ee(n,t,e){t=Ct(t,n),n=Ns(n,t);var r=n==null?n:n[it($n(t))];return r==null?i:On(r,n,e)}function ju(n){return fn(n)&&yn(n)==qt}function dl(n){return fn(n)&&yn(n)==he}function vl(n){return fn(n)&&yn(n)==fe}function ye(n,t,e,r,u){return n===t?!0:n==null||t==null||!fn(n)&&!fn(t)?n!==n&&t!==t:wl(n,t,e,r,ye,u)}function wl(n,t,e,r,u,f){var a=O(n),l=O(t),h=a?Oe:mn(n),p=l?Oe:mn(t);h=h==qt?ot:h,p=p==qt?ot:p;var d=h==ot,v=p==ot,E=h==p;if(E&&It(n)){if(!It(t))return!1;a=!0,d=!1}if(E&&!d)return f||(f=new kn),a||re(n)?bs(n,t,e,r,u,f):Yl(n,t,h,e,r,u,f);if(!(e&V)){var R=d&&Z.call(n,"__wrapped__"),L=v&&Z.call(t,"__wrapped__");if(R||L){var U=R?n.value():n,I=L?t.value():t;return f||(f=new kn),u(U,I,e,r,f)}}return E?(f||(f=new kn),$l(n,t,e,r,u,f)):!1}function ml(n){return fn(n)&&mn(n)==Vn}function oi(n,t,e,r){var u=e.length,f=u,a=!r;if(n==null)return!f;for(n=Q(n);u--;){var l=e[u];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++u<f;){l=e[u];var h=l[0],p=n[h],d=l[1];if(a&&l[2]){if(p===i&&!(h in n))return!1}else{var v=new kn;if(r)var E=r(p,d,h,n,t,v);if(!(E===i?ye(d,p,V|q,r,v):E))return!1}}return!0}function ns(n){if(!un(n)||tc(n))return!1;var t=pt(n)?ma:oo;return t.test(Ft(n))}function xl(n){return fn(n)&&yn(n)==ae}function El(n){return fn(n)&&mn(n)==Jn}function yl(n){return fn(n)&&xr(n.length)&&!!nn[yn(n)]}function ts(n){return typeof n=="function"?n:n==null?In:typeof n=="object"?O(n)?is(n[0],n[1]):rs(n):Af(n)}function ai(n){if(!Re(n))return Ra(n);var t=[];for(var e in Q(n))Z.call(n,e)&&e!="constructor"&&t.push(e);return t}function Sl(n){if(!un(n))return uc(n);var t=Re(n),e=[];for(var r in n)r=="constructor"&&(t||!Z.call(n,r))||e.push(r);return e}function li(n,t){return n<t}function es(n,t){var e=-1,r=Cn(n)?g(n.length):[];return Rt(n,function(u,f,a){r[++e]=t(u,f,a)}),r}function rs(n){var t=Ri(n);return t.length==1&&t[0][2]?Us(t[0][0],t[0][1]):function(e){return e===n||oi(e,n,t)}}function is(n,t){return Ci(n)&&Bs(t)?Us(it(n),t):function(e){var r=Ui(e,n);return r===i&&r===t?Fi(e,n):ye(t,r,V|q)}}function ir(n,t,e,r,u){n!==t&&ii(t,function(f,a){if(u||(u=new kn),un(f))Al(n,t,a,e,ir,r,u);else{var l=r?r(Ii(n,a),f,a+"",n,t,u):i;l===i&&(l=f),ei(n,a,l)}},Ln)}function Al(n,t,e,r,u,f,a){var l=Ii(n,e),h=Ii(t,e),p=a.get(h);if(p){ei(n,e,p);return}var d=f?f(l,h,e+"",n,t,a):i,v=d===i;if(v){var E=O(h),R=!E&&It(h),L=!E&&!R&&re(h);d=h,E||R||L?O(l)?d=l:on(l)?d=Tn(l):R?(v=!1,d=ds(h,!0)):L?(v=!1,d=vs(h,!0)):d=[]:Ce(h)||Nt(h)?(d=l,Nt(l)?d=_f(l):(!un(l)||pt(l))&&(d=Ws(h))):v=!1}v&&(a.set(h,d),u(d,h,r,f,a),a.delete(h)),ei(n,e,d)}function us(n,t){var e=n.length;if(e)return t+=t<0?e:0,_t(t,e)?n[t]:i}function ss(n,t,e){t.length?t=rn(t,function(f){return O(f)?function(a){return Bt(a,f.length===1?f[0]:f)}:f}):t=[In];var r=-1;t=rn(t,bn(C()));var u=es(n,function(f,a,l){var h=rn(t,function(p){return p(f)});return{criteria:h,index:++r,value:f}});return Qo(u,function(f,a){return Ul(f,a,e)})}function Rl(n,t){return fs(n,t,function(e,r){return Fi(n,r)})}function fs(n,t,e){for(var r=-1,u=t.length,f={};++r<u;){var a=t[r],l=Bt(n,a);e(l,a)&&Se(f,Ct(a,n),l)}return f}function Tl(n){return function(t){return Bt(t,n)}}function ci(n,t,e,r){var u=r?Jo:$t,f=-1,a=t.length,l=n;for(n===t&&(t=Tn(t)),e&&(l=rn(n,bn(e)));++f<a;)for(var h=0,p=t[f],d=e?e(p):p;(h=u(l,d,h,r))>-1;)l!==n&&Ze.call(l,h,1),Ze.call(n,h,1);return n}function os(n,t){for(var e=n?t.length:0,r=e-1;e--;){var u=t[e];if(e==r||u!==f){var f=u;_t(u)?Ze.call(n,u,1):pi(n,u)}}return n}function hi(n,t){return n+Qe(Gu()*(t-n+1))}function Cl(n,t,e,r){for(var u=-1,f=hn(Je((t-n)/(e||1)),0),a=g(f);f--;)a[r?f:++u]=n,n+=e;return a}function gi(n,t){var e="";if(!n||t<1||t>xt)return e;do t%2&&(e+=n),t=Qe(t/2),t&&(n+=n);while(t);return e}function N(n,t){return Mi(Fs(n,t,In),n+"")}function Ll(n){return Yu(ie(n))}function Il(n,t){var e=ie(n);return _r(e,Wt(t,0,e.length))}function Se(n,t,e,r){if(!un(n))return n;t=Ct(t,n);for(var u=-1,f=t.length,a=f-1,l=n;l!=null&&++u<f;){var h=it(t[u]),p=e;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(u!=a){var d=l[h];p=r?r(d,h,l):i,p===i&&(p=un(d)?d:_t(t[u+1])?[]:{})}me(l,h,p),l=l[h]}return n}var as=ke?function(n,t){return ke.set(n,t),n}:In,Ml=Ve?function(n,t){return Ve(n,"toString",{configurable:!0,enumerable:!1,value:zi(t),writable:!0})}:In;function Ol(n){return _r(ie(n))}function Yn(n,t,e){var r=-1,u=n.length;t<0&&(t=-t>u?0:u+t),e=e>u?u:e,e<0&&(e+=u),u=t>e?0:e-t>>>0,t>>>=0;for(var f=g(u);++r<u;)f[r]=n[r+t];return f}function bl(n,t){var e;return Rt(n,function(r,u,f){return e=t(r,u,f),!e}),!!e}function ur(n,t,e){var r=0,u=n==null?r:n.length;if(typeof t=="number"&&t===t&&u<=Df){for(;r<u;){var f=r+u>>>1,a=n[f];a!==null&&!Pn(a)&&(e?a<=t:a<t)?r=f+1:u=f}return u}return _i(n,t,In,e)}function _i(n,t,e,r){var u=0,f=n==null?0:n.length;if(f===0)return 0;t=e(t);for(var a=t!==t,l=t===null,h=Pn(t),p=t===i;u<f;){var d=Qe((u+f)/2),v=e(n[d]),E=v!==i,R=v===null,L=v===v,U=Pn(v);if(a)var I=r||L;else p?I=L&&(r||E):l?I=L&&E&&(r||!R):h?I=L&&E&&!R&&(r||!U):R||U?I=!1:I=r?v<=t:v<t;I?u=d+1:f=d}return wn(f,bf)}function ls(n,t){for(var e=-1,r=n.length,u=0,f=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!jn(l,h)){var h=l;f[u++]=a===0?0:a}}return f}function cs(n){return typeof n=="number"?n:Pn(n)?Me:+n}function Dn(n){if(typeof n=="string")return n;if(O(n))return rn(n,Dn)+"";if(Pn(n))return qu?qu.call(n):"";var t=n+"";return t=="0"&&1/n==-j?"-0":t}function Tt(n,t,e){var r=-1,u=Fe,f=n.length,a=!0,l=[],h=l;if(e)a=!1,u=qr;else if(f>=m){var p=t?null:ql(n);if(p)return ze(p);a=!1,u=ge,h=new Pt}else h=t?[]:l;n:for(;++r<f;){var d=n[r],v=t?t(d):d;if(d=e||d!==0?d:0,a&&v===v){for(var E=h.length;E--;)if(h[E]===v)continue n;t&&h.push(v),l.push(d)}else u(h,v,e)||(h!==l&&h.push(v),l.push(d))}return l}function pi(n,t){return t=Ct(t,n),n=Ns(n,t),n==null||delete n[it($n(t))]}function hs(n,t,e,r){return Se(n,t,e(Bt(n,t)),r)}function sr(n,t,e,r){for(var u=n.length,f=r?u:-1;(r?f--:++f<u)&&t(n[f],f,n););return e?Yn(n,r?0:f,r?f+1:u):Yn(n,r?f+1:0,r?u:f)}function gs(n,t){var e=n;return e instanceof H&&(e=e.value()),Kr(t,function(r,u){return u.func.apply(u.thisArg,yt([r],u.args))},e)}function di(n,t,e){var r=n.length;if(r<2)return r?Tt(n[0]):[];for(var u=-1,f=g(r);++u<r;)for(var a=n[u],l=-1;++l<r;)l!=u&&(f[u]=xe(f[u]||a,n[l],t,e));return Tt(vn(f,1),t,e)}function _s(n,t,e){for(var r=-1,u=n.length,f=t.length,a={};++r<u;){var l=r<f?t[r]:i;e(a,n[r],l)}return a}function vi(n){return on(n)?n:[]}function wi(n){return typeof n=="function"?n:In}function Ct(n,t){return O(n)?n:Ci(n,t)?[n]:qs(X(n))}var Dl=N;function Lt(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:Yn(n,t,e)}var ps=xa||function(n){return dn.clearTimeout(n)};function ds(n,t){if(t)return n.slice();var e=n.length,r=Uu?Uu(e):new n.constructor(e);return n.copy(r),r}function mi(n){var t=new n.constructor(n.byteLength);return new $e(t).set(new $e(n)),t}function Pl(n,t){var e=t?mi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}function Wl(n){var t=new n.constructor(n.source,ji.exec(n));return t.lastIndex=n.lastIndex,t}function Bl(n){return we?Q(we.call(n)):{}}function vs(n,t){var e=t?mi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function ws(n,t){if(n!==t){var e=n!==i,r=n===null,u=n===n,f=Pn(n),a=t!==i,l=t===null,h=t===t,p=Pn(t);if(!l&&!p&&!f&&n>t||f&&a&&h&&!l&&!p||r&&a&&h||!e&&h||!u)return 1;if(!r&&!f&&!p&&n<t||p&&e&&u&&!r&&!f||l&&e&&u||!a&&u||!h)return-1}return 0}function Ul(n,t,e){for(var r=-1,u=n.criteria,f=t.criteria,a=u.length,l=e.length;++r<a;){var h=ws(u[r],f[r]);if(h){if(r>=l)return h;var p=e[r];return h*(p=="desc"?-1:1)}}return n.index-t.index}function ms(n,t,e,r){for(var u=-1,f=n.length,a=e.length,l=-1,h=t.length,p=hn(f-a,0),d=g(h+p),v=!r;++l<h;)d[l]=t[l];for(;++u<a;)(v||u<f)&&(d[e[u]]=n[u]);for(;p--;)d[l++]=n[u++];return d}function xs(n,t,e,r){for(var u=-1,f=n.length,a=-1,l=e.length,h=-1,p=t.length,d=hn(f-l,0),v=g(d+p),E=!r;++u<d;)v[u]=n[u];for(var R=u;++h<p;)v[R+h]=t[h];for(;++a<l;)(E||u<f)&&(v[R+e[a]]=n[u++]);return v}function Tn(n,t){var e=-1,r=n.length;for(t||(t=g(r));++e<r;)t[e]=n[e];return t}function rt(n,t,e,r){var u=!e;e||(e={});for(var f=-1,a=t.length;++f<a;){var l=t[f],h=r?r(e[l],n[l],l,e,n):i;h===i&&(h=n[l]),u?ct(e,l,h):me(e,l,h)}return e}function Fl(n,t){return rt(n,Ti(n),t)}function Nl(n,t){return rt(n,Ds(n),t)}function fr(n,t){return function(e,r){var u=O(e)?Ko:fl,f=t?t():{};return u(e,n,C(r,2),f)}}function ne(n){return N(function(t,e){var r=-1,u=e.length,f=u>1?e[u-1]:i,a=u>2?e[2]:i;for(f=n.length>3&&typeof f=="function"?(u--,f):i,a&&Sn(e[0],e[1],a)&&(f=u<3?i:f,u=1),t=Q(t);++r<u;){var l=e[r];l&&n(t,l,r,f)}return t})}function Es(n,t){return function(e,r){if(e==null)return e;if(!Cn(e))return n(e,r);for(var u=e.length,f=t?u:-1,a=Q(e);(t?f--:++f<u)&&r(a[f],f,a)!==!1;);return e}}function ys(n){return function(t,e,r){for(var u=-1,f=Q(t),a=r(t),l=a.length;l--;){var h=a[n?l:++u];if(e(f[h],h,f)===!1)break}return t}}function zl(n,t,e){var r=t&P,u=Ae(n);function f(){var a=this&&this!==dn&&this instanceof f?u:n;return a.apply(r?e:this,arguments)}return f}function Ss(n){return function(t){t=X(t);var e=Xt(t)?Qn(t):i,r=e?e[0]:t.charAt(0),u=e?Lt(e,1).join(""):t.slice(1);return r[n]()+u}}function te(n){return function(t){return Kr(yf(Ef(t).replace(Mo,"")),n,"")}}function Ae(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=jt(n.prototype),r=n.apply(e,t);return un(r)?r:e}}function Hl(n,t,e){var r=Ae(n);function u(){for(var f=arguments.length,a=g(f),l=f,h=ee(u);l--;)a[l]=arguments[l];var p=f<3&&a[0]!==h&&a[f-1]!==h?[]:St(a,h);if(f-=p.length,f<e)return Ls(n,t,or,u.placeholder,i,a,p,i,i,e-f);var d=this&&this!==dn&&this instanceof u?r:n;return On(d,this,a)}return u}function As(n){return function(t,e,r){var u=Q(t);if(!Cn(t)){var f=C(e,3);t=_n(t),e=function(l){return f(u[l],l,u)}}var a=n(t,e,r);return a>-1?u[f?t[a]:a]:i}}function Rs(n){return gt(function(t){var e=t.length,r=e,u=qn.prototype.thru;for(n&&t.reverse();r--;){var f=t[r];if(typeof f!="function")throw new Gn(S);if(u&&!a&&hr(f)=="wrapper")var a=new qn([],!0)}for(r=a?r:e;++r<e;){f=t[r];var l=hr(f),h=l=="wrapper"?Ai(f):i;h&&Li(h[0])&&h[1]==(Zn|Un|Fn|Mt)&&!h[4].length&&h[9]==1?a=a[hr(h[0])].apply(a,h[3]):a=f.length==1&&Li(f)?a[l]():a.thru(f)}return function(){var p=arguments,d=p[0];if(a&&p.length==1&&O(d))return a.plant(d).value();for(var v=0,E=e?t[v].apply(this,p):d;++v<e;)E=t[v].call(this,E);return E}})}function or(n,t,e,r,u,f,a,l,h,p){var d=t&Zn,v=t&P,E=t&en,R=t&(Un|mt),L=t&Gt,U=E?i:Ae(n);function I(){for(var z=arguments.length,K=g(z),Wn=z;Wn--;)K[Wn]=arguments[Wn];if(R)var An=ee(I),Bn=jo(K,An);if(r&&(K=ms(K,r,u,R)),f&&(K=xs(K,f,a,R)),z-=Bn,R&&z<p){var an=St(K,An);return Ls(n,t,or,I.placeholder,e,K,an,l,h,p-z)}var nt=v?e:this,vt=E?nt[n]:n;return z=K.length,l?K=fc(K,l):L&&z>1&&K.reverse(),d&&h<z&&(K.length=h),this&&this!==dn&&this instanceof I&&(vt=U||Ae(vt)),vt.apply(nt,K)}return I}function Ts(n,t){return function(e,r){return pl(e,n,t(r),{})}}function ar(n,t){return function(e,r){var u;if(e===i&&r===i)return t;if(e!==i&&(u=e),r!==i){if(u===i)return r;typeof e=="string"||typeof r=="string"?(e=Dn(e),r=Dn(r)):(e=cs(e),r=cs(r)),u=n(e,r)}return u}}function xi(n){return gt(function(t){return t=rn(t,bn(C())),N(function(e){var r=this;return n(t,function(u){return On(u,r,e)})})})}function lr(n,t){t=t===i?" ":Dn(t);var e=t.length;if(e<2)return e?gi(t,n):t;var r=gi(t,Je(n/Zt(t)));return Xt(t)?Lt(Qn(r),0,n).join(""):r.slice(0,n)}function Gl(n,t,e,r){var u=t&P,f=Ae(n);function a(){for(var l=-1,h=arguments.length,p=-1,d=r.length,v=g(d+h),E=this&&this!==dn&&this instanceof a?f:n;++p<d;)v[p]=r[p];for(;h--;)v[p++]=arguments[++l];return On(E,u?e:this,v)}return a}function Cs(n){return function(t,e,r){return r&&typeof r!="number"&&Sn(t,e,r)&&(e=r=i),t=dt(t),e===i?(e=t,t=0):e=dt(e),r=r===i?t<e?1:-1:dt(r),Cl(t,e,r,n)}}function cr(n){return function(t,e){return typeof t=="string"&&typeof e=="string"||(t=Xn(t),e=Xn(e)),n(t,e)}}function Ls(n,t,e,r,u,f,a,l,h,p){var d=t&Un,v=d?a:i,E=d?i:a,R=d?f:i,L=d?i:f;t|=d?Fn:st,t&=~(d?st:Fn),t&wt||(t&=~(P|en));var U=[n,t,u,R,v,L,E,l,h,p],I=e.apply(i,U);return Li(n)&&zs(I,U),I.placeholder=r,Hs(I,n,t)}function Ei(n){var t=cn[n];return function(e,r){if(e=Xn(e),r=r==null?0:wn(W(r),292),r&&Hu(e)){var u=(X(e)+"e").split("e"),f=t(u[0]+"e"+(+u[1]+r));return u=(X(f)+"e").split("e"),+(u[0]+"e"+(+u[1]-r))}return t(e)}}var ql=Qt&&1/ze(new Qt([,-0]))[1]==j?function(n){return new Qt(n)}:qi;function Is(n){return function(t){var e=mn(t);return e==Vn?Qr(t):e==Jn?sa(t):ko(t,n(t))}}function ht(n,t,e,r,u,f,a,l){var h=t&en;if(!h&&typeof n!="function")throw new Gn(S);var p=r?r.length:0;if(p||(t&=~(Fn|st),r=u=i),a=a===i?a:hn(W(a),0),l=l===i?l:W(l),p-=u?u.length:0,t&st){var d=r,v=u;r=u=i}var E=h?i:Ai(n),R=[n,t,e,r,u,d,v,f,a,l];if(E&&ic(R,E),n=R[0],t=R[1],e=R[2],r=R[3],u=R[4],l=R[9]=R[9]===i?h?0:n.length:hn(R[9]-p,0),!l&&t&(Un|mt)&&(t&=~(Un|mt)),!t||t==P)var L=zl(n,t,e);else t==Un||t==mt?L=Hl(n,t,l):(t==Fn||t==(P|Fn))&&!u.length?L=Gl(n,t,e,r):L=or.apply(i,R);var U=E?as:zs;return Hs(U(L,R),n,t)}function Ms(n,t,e,r){return n===i||jn(n,Jt[e])&&!Z.call(r,e)?t:n}function Os(n,t,e,r,u,f){return un(n)&&un(t)&&(f.set(t,n),ir(n,t,i,Os,f),f.delete(t)),n}function Kl(n){return Ce(n)?i:n}function bs(n,t,e,r,u,f){var a=e&V,l=n.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var p=f.get(n),d=f.get(t);if(p&&d)return p==t&&d==n;var v=-1,E=!0,R=e&q?new Pt:i;for(f.set(n,t),f.set(t,n);++v<l;){var L=n[v],U=t[v];if(r)var I=a?r(U,L,v,t,n,f):r(L,U,v,n,t,f);if(I!==i){if(I)continue;E=!1;break}if(R){if(!Yr(t,function(z,K){if(!ge(R,K)&&(L===z||u(L,z,e,r,f)))return R.push(K)})){E=!1;break}}else if(!(L===U||u(L,U,e,r,f))){E=!1;break}}return f.delete(n),f.delete(t),E}function Yl(n,t,e,r,u,f,a){switch(e){case Kt:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case he:return!(n.byteLength!=t.byteLength||!f(new $e(n),new $e(t)));case se:case fe:case oe:return jn(+n,+t);case be:return n.name==t.name&&n.message==t.message;case ae:case le:return n==t+"";case Vn:var l=Qr;case Jn:var h=r&V;if(l||(l=ze),n.size!=t.size&&!h)return!1;var p=a.get(n);if(p)return p==t;r|=q,a.set(n,t);var d=bs(l(n),l(t),r,u,f,a);return a.delete(n),d;case Pe:if(we)return we.call(n)==we.call(t)}return!1}function $l(n,t,e,r,u,f){var a=e&V,l=yi(n),h=l.length,p=yi(t),d=p.length;if(h!=d&&!a)return!1;for(var v=h;v--;){var E=l[v];if(!(a?E in t:Z.call(t,E)))return!1}var R=f.get(n),L=f.get(t);if(R&&L)return R==t&&L==n;var U=!0;f.set(n,t),f.set(t,n);for(var I=a;++v<h;){E=l[v];var z=n[E],K=t[E];if(r)var Wn=a?r(K,z,E,t,n,f):r(z,K,E,n,t,f);if(!(Wn===i?z===K||u(z,K,e,r,f):Wn)){U=!1;break}I||(I=E=="constructor")}if(U&&!I){var An=n.constructor,Bn=t.constructor;An!=Bn&&"constructor"in n&&"constructor"in t&&!(typeof An=="function"&&An instanceof An&&typeof Bn=="function"&&Bn instanceof Bn)&&(U=!1)}return f.delete(n),f.delete(t),U}function gt(n){return Mi(Fs(n,i,Xs),n+"")}function yi(n){return ku(n,_n,Ti)}function Si(n){return ku(n,Ln,Ds)}var Ai=ke?function(n){return ke.get(n)}:qi;function hr(n){for(var t=n.name+"",e=kt[t],r=Z.call(kt,t)?e.length:0;r--;){var u=e[r],f=u.func;if(f==null||f==n)return u.name}return t}function ee(n){var t=Z.call(s,"placeholder")?s:n;return t.placeholder}function C(){var n=s.iteratee||Hi;return n=n===Hi?ts:n,arguments.length?n(arguments[0],arguments[1]):n}function gr(n,t){var e=n.__data__;return nc(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Ri(n){for(var t=_n(n),e=t.length;e--;){var r=t[e],u=n[r];t[e]=[r,u,Bs(u)]}return t}function Ut(n,t){var e=ra(n,t);return ns(e)?e:i}function Xl(n){var t=Z.call(n,bt),e=n[bt];try{n[bt]=i;var r=!0}catch{}var u=Ke.call(n);return r&&(t?n[bt]=e:delete n[bt]),u}var Ti=jr?function(n){return n==null?[]:(n=Q(n),Et(jr(n),function(t){return Nu.call(n,t)}))}:Ki,Ds=jr?function(n){for(var t=[];n;)yt(t,Ti(n)),n=Xe(n);return t}:Ki,mn=yn;(ni&&mn(new ni(new ArrayBuffer(1)))!=Kt||pe&&mn(new pe)!=Vn||ti&&mn(ti.resolve())!=Vi||Qt&&mn(new Qt)!=Jn||de&&mn(new de)!=ce)&&(mn=function(n){var t=yn(n),e=t==ot?n.constructor:i,r=e?Ft(e):"";if(r)switch(r){case Ia:return Kt;case Ma:return Vn;case Oa:return Vi;case ba:return Jn;case Da:return ce}return t});function Zl(n,t,e){for(var r=-1,u=e.length;++r<u;){var f=e[r],a=f.size;switch(f.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=wn(t,n+a);break;case"takeRight":n=hn(n,t-a);break}}return{start:n,end:t}}function Vl(n){var t=n.match(no);return t?t[1].split(to):[]}function Ps(n,t,e){t=Ct(t,n);for(var r=-1,u=t.length,f=!1;++r<u;){var a=it(t[r]);if(!(f=n!=null&&e(n,a)))break;n=n[a]}return f||++r!=u?f:(u=n==null?0:n.length,!!u&&xr(u)&&_t(a,u)&&(O(n)||Nt(n)))}function Jl(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&Z.call(n,"index")&&(e.index=n.index,e.input=n.input),e}function Ws(n){return typeof n.constructor=="function"&&!Re(n)?jt(Xe(n)):{}}function Ql(n,t,e){var r=n.constructor;switch(t){case he:return mi(n);case se:case fe:return new r(+n);case Kt:return Pl(n,e);case Rr:case Tr:case Cr:case Lr:case Ir:case Mr:case Or:case br:case Dr:return vs(n,e);case Vn:return new r;case oe:case le:return new r(n);case ae:return Wl(n);case Jn:return new r;case Pe:return Bl(n)}}function kl(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(jf,`{
/* [wrapped with `+t+`] */
`)}function jl(n){return O(n)||Nt(n)||!!(zu&&n&&n[zu])}function _t(n,t){var e=typeof n;return t=t??xt,!!t&&(e=="number"||e!="symbol"&&lo.test(n))&&n>-1&&n%1==0&&n<t}function Sn(n,t,e){if(!un(e))return!1;var r=typeof t;return(r=="number"?Cn(e)&&_t(t,e.length):r=="string"&&t in e)?jn(e[t],n):!1}function Ci(n,t){if(O(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||Pn(n)?!0:Vf.test(n)||!Zf.test(n)||t!=null&&n in Q(t)}function nc(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Li(n){var t=hr(n),e=s[t];if(typeof e!="function"||!(t in H.prototype))return!1;if(n===e)return!0;var r=Ai(e);return!!r&&n===r[0]}function tc(n){return!!Bu&&Bu in n}var ec=Ge?pt:Yi;function Re(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Jt;return n===e}function Bs(n){return n===n&&!un(n)}function Us(n,t){return function(e){return e==null?!1:e[n]===t&&(t!==i||n in Q(e))}}function rc(n){var t=wr(n,function(r){return e.size===F&&e.clear(),r}),e=t.cache;return t}function ic(n,t){var e=n[1],r=t[1],u=e|r,f=u<(P|en|Zn),a=r==Zn&&e==Un||r==Zn&&e==Mt&&n[7].length<=t[8]||r==(Zn|Mt)&&t[7].length<=t[8]&&e==Un;if(!(f||a))return n;r&P&&(n[2]=t[2],u|=e&P?0:wt);var l=t[3];if(l){var h=n[3];n[3]=h?ms(h,l,t[4]):l,n[4]=h?St(n[3],G):t[4]}return l=t[5],l&&(h=n[5],n[5]=h?xs(h,l,t[6]):l,n[6]=h?St(n[5],G):t[6]),l=t[7],l&&(n[7]=l),r&Zn&&(n[8]=n[8]==null?t[8]:wn(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function uc(n){var t=[];if(n!=null)for(var e in Q(n))t.push(e);return t}function sc(n){return Ke.call(n)}function Fs(n,t,e){return t=hn(t===i?n.length-1:t,0),function(){for(var r=arguments,u=-1,f=hn(r.length-t,0),a=g(f);++u<f;)a[u]=r[t+u];u=-1;for(var l=g(t+1);++u<t;)l[u]=r[u];return l[t]=e(a),On(n,this,l)}}function Ns(n,t){return t.length<2?n:Bt(n,Yn(t,0,-1))}function fc(n,t){for(var e=n.length,r=wn(t.length,e),u=Tn(n);r--;){var f=t[r];n[r]=_t(f,e)?u[f]:i}return n}function Ii(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var zs=Gs(as),Te=ya||function(n,t){return dn.setTimeout(n,t)},Mi=Gs(Ml);function Hs(n,t,e){var r=t+"";return Mi(n,kl(r,oc(Vl(r),e)))}function Gs(n){var t=0,e=0;return function(){var r=Ta(),u=En-(r-e);if(e=r,u>0){if(++t>=Y)return arguments[0]}else t=0;return n.apply(i,arguments)}}function _r(n,t){var e=-1,r=n.length,u=r-1;for(t=t===i?r:t;++e<t;){var f=hi(e,u),a=n[f];n[f]=n[e],n[e]=a}return n.length=t,n}var qs=rc(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(Jf,function(e,r,u,f){t.push(u?f.replace(io,"$1"):r||e)}),t});function it(n){if(typeof n=="string"||Pn(n))return n;var t=n+"";return t=="0"&&1/n==-j?"-0":t}function Ft(n){if(n!=null){try{return qe.call(n)}catch{}try{return n+""}catch{}}return""}function oc(n,t){return Hn(Pf,function(e){var r="_."+e[0];t&e[1]&&!Fe(n,r)&&n.push(r)}),n.sort()}function Ks(n){if(n instanceof H)return n.clone();var t=new qn(n.__wrapped__,n.__chain__);return t.__actions__=Tn(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function ac(n,t,e){(e?Sn(n,t,e):t===i)?t=1:t=hn(W(t),0);var r=n==null?0:n.length;if(!r||t<1)return[];for(var u=0,f=0,a=g(Je(r/t));u<r;)a[f++]=Yn(n,u,u+=t);return a}function lc(n){for(var t=-1,e=n==null?0:n.length,r=0,u=[];++t<e;){var f=n[t];f&&(u[r++]=f)}return u}function cc(){var n=arguments.length;if(!n)return[];for(var t=g(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return yt(O(e)?Tn(e):[e],vn(t,1))}var hc=N(function(n,t){return on(n)?xe(n,vn(t,1,on,!0)):[]}),gc=N(function(n,t){var e=$n(t);return on(e)&&(e=i),on(n)?xe(n,vn(t,1,on,!0),C(e,2)):[]}),_c=N(function(n,t){var e=$n(t);return on(e)&&(e=i),on(n)?xe(n,vn(t,1,on,!0),i,e):[]});function pc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:W(t),Yn(n,t<0?0:t,r)):[]}function dc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:W(t),t=r-t,Yn(n,0,t<0?0:t)):[]}function vc(n,t){return n&&n.length?sr(n,C(t,3),!0,!0):[]}function wc(n,t){return n&&n.length?sr(n,C(t,3),!0):[]}function mc(n,t,e,r){var u=n==null?0:n.length;return u?(e&&typeof e!="number"&&Sn(n,t,e)&&(e=0,r=u),cl(n,t,e,r)):[]}function Ys(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var u=e==null?0:W(e);return u<0&&(u=hn(r+u,0)),Ne(n,C(t,3),u)}function $s(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var u=r-1;return e!==i&&(u=W(e),u=e<0?hn(r+u,0):wn(u,r-1)),Ne(n,C(t,3),u,!0)}function Xs(n){var t=n==null?0:n.length;return t?vn(n,1):[]}function xc(n){var t=n==null?0:n.length;return t?vn(n,j):[]}function Ec(n,t){var e=n==null?0:n.length;return e?(t=t===i?1:W(t),vn(n,t)):[]}function yc(n){for(var t=-1,e=n==null?0:n.length,r={};++t<e;){var u=n[t];r[u[0]]=u[1]}return r}function Zs(n){return n&&n.length?n[0]:i}function Sc(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var u=e==null?0:W(e);return u<0&&(u=hn(r+u,0)),$t(n,t,u)}function Ac(n){var t=n==null?0:n.length;return t?Yn(n,0,-1):[]}var Rc=N(function(n){var t=rn(n,vi);return t.length&&t[0]===n[0]?fi(t):[]}),Tc=N(function(n){var t=$n(n),e=rn(n,vi);return t===$n(e)?t=i:e.pop(),e.length&&e[0]===n[0]?fi(e,C(t,2)):[]}),Cc=N(function(n){var t=$n(n),e=rn(n,vi);return t=typeof t=="function"?t:i,t&&e.pop(),e.length&&e[0]===n[0]?fi(e,i,t):[]});function Lc(n,t){return n==null?"":Aa.call(n,t)}function $n(n){var t=n==null?0:n.length;return t?n[t-1]:i}function Ic(n,t,e){var r=n==null?0:n.length;if(!r)return-1;var u=r;return e!==i&&(u=W(e),u=u<0?hn(r+u,0):wn(u,r-1)),t===t?oa(n,t,u):Ne(n,Lu,u,!0)}function Mc(n,t){return n&&n.length?us(n,W(t)):i}var Oc=N(Vs);function Vs(n,t){return n&&n.length&&t&&t.length?ci(n,t):n}function bc(n,t,e){return n&&n.length&&t&&t.length?ci(n,t,C(e,2)):n}function Dc(n,t,e){return n&&n.length&&t&&t.length?ci(n,t,i,e):n}var Pc=gt(function(n,t){var e=n==null?0:n.length,r=ri(n,t);return os(n,rn(t,function(u){return _t(u,e)?+u:u}).sort(ws)),r});function Wc(n,t){var e=[];if(!(n&&n.length))return e;var r=-1,u=[],f=n.length;for(t=C(t,3);++r<f;){var a=n[r];t(a,r,n)&&(e.push(a),u.push(r))}return os(n,u),e}function Oi(n){return n==null?n:La.call(n)}function Bc(n,t,e){var r=n==null?0:n.length;return r?(e&&typeof e!="number"&&Sn(n,t,e)?(t=0,e=r):(t=t==null?0:W(t),e=e===i?r:W(e)),Yn(n,t,e)):[]}function Uc(n,t){return ur(n,t)}function Fc(n,t,e){return _i(n,t,C(e,2))}function Nc(n,t){var e=n==null?0:n.length;if(e){var r=ur(n,t);if(r<e&&jn(n[r],t))return r}return-1}function zc(n,t){return ur(n,t,!0)}function Hc(n,t,e){return _i(n,t,C(e,2),!0)}function Gc(n,t){var e=n==null?0:n.length;if(e){var r=ur(n,t,!0)-1;if(jn(n[r],t))return r}return-1}function qc(n){return n&&n.length?ls(n):[]}function Kc(n,t){return n&&n.length?ls(n,C(t,2)):[]}function Yc(n){var t=n==null?0:n.length;return t?Yn(n,1,t):[]}function $c(n,t,e){return n&&n.length?(t=e||t===i?1:W(t),Yn(n,0,t<0?0:t)):[]}function Xc(n,t,e){var r=n==null?0:n.length;return r?(t=e||t===i?1:W(t),t=r-t,Yn(n,t<0?0:t,r)):[]}function Zc(n,t){return n&&n.length?sr(n,C(t,3),!1,!0):[]}function Vc(n,t){return n&&n.length?sr(n,C(t,3)):[]}var Jc=N(function(n){return Tt(vn(n,1,on,!0))}),Qc=N(function(n){var t=$n(n);return on(t)&&(t=i),Tt(vn(n,1,on,!0),C(t,2))}),kc=N(function(n){var t=$n(n);return t=typeof t=="function"?t:i,Tt(vn(n,1,on,!0),i,t)});function jc(n){return n&&n.length?Tt(n):[]}function nh(n,t){return n&&n.length?Tt(n,C(t,2)):[]}function th(n,t){return t=typeof t=="function"?t:i,n&&n.length?Tt(n,i,t):[]}function bi(n){if(!(n&&n.length))return[];var t=0;return n=Et(n,function(e){if(on(e))return t=hn(e.length,t),!0}),Vr(t,function(e){return rn(n,$r(e))})}function Js(n,t){if(!(n&&n.length))return[];var e=bi(n);return t==null?e:rn(e,function(r){return On(t,i,r)})}var eh=N(function(n,t){return on(n)?xe(n,t):[]}),rh=N(function(n){return di(Et(n,on))}),ih=N(function(n){var t=$n(n);return on(t)&&(t=i),di(Et(n,on),C(t,2))}),uh=N(function(n){var t=$n(n);return t=typeof t=="function"?t:i,di(Et(n,on),i,t)}),sh=N(bi);function fh(n,t){return _s(n||[],t||[],me)}function oh(n,t){return _s(n||[],t||[],Se)}var ah=N(function(n){var t=n.length,e=t>1?n[t-1]:i;return e=typeof e=="function"?(n.pop(),e):i,Js(n,e)});function Qs(n){var t=s(n);return t.__chain__=!0,t}function lh(n,t){return t(n),n}function pr(n,t){return t(n)}var ch=gt(function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,u=function(f){return ri(f,n)};return t>1||this.__actions__.length||!(r instanceof H)||!_t(e)?this.thru(u):(r=r.slice(e,+e+(t?1:0)),r.__actions__.push({func:pr,args:[u],thisArg:i}),new qn(r,this.__chain__).thru(function(f){return t&&!f.length&&f.push(i),f}))});function hh(){return Qs(this)}function gh(){return new qn(this.value(),this.__chain__)}function _h(){this.__values__===i&&(this.__values__=hf(this.value()));var n=this.__index__>=this.__values__.length,t=n?i:this.__values__[this.__index__++];return{done:n,value:t}}function ph(){return this}function dh(n){for(var t,e=this;e instanceof nr;){var r=Ks(e);r.__index__=0,r.__values__=i,t?u.__wrapped__=r:t=r;var u=r;e=e.__wrapped__}return u.__wrapped__=n,t}function vh(){var n=this.__wrapped__;if(n instanceof H){var t=n;return this.__actions__.length&&(t=new H(this)),t=t.reverse(),t.__actions__.push({func:pr,args:[Oi],thisArg:i}),new qn(t,this.__chain__)}return this.thru(Oi)}function wh(){return gs(this.__wrapped__,this.__actions__)}var mh=fr(function(n,t,e){Z.call(n,e)?++n[e]:ct(n,e,1)});function xh(n,t,e){var r=O(n)?Tu:ll;return e&&Sn(n,t,e)&&(t=i),r(n,C(t,3))}function Eh(n,t){var e=O(n)?Et:Ju;return e(n,C(t,3))}var yh=As(Ys),Sh=As($s);function Ah(n,t){return vn(dr(n,t),1)}function Rh(n,t){return vn(dr(n,t),j)}function Th(n,t,e){return e=e===i?1:W(e),vn(dr(n,t),e)}function ks(n,t){var e=O(n)?Hn:Rt;return e(n,C(t,3))}function js(n,t){var e=O(n)?Yo:Vu;return e(n,C(t,3))}var Ch=fr(function(n,t,e){Z.call(n,e)?n[e].push(t):ct(n,e,[t])});function Lh(n,t,e,r){n=Cn(n)?n:ie(n),e=e&&!r?W(e):0;var u=n.length;return e<0&&(e=hn(u+e,0)),Er(n)?e<=u&&n.indexOf(t,e)>-1:!!u&&$t(n,t,e)>-1}var Ih=N(function(n,t,e){var r=-1,u=typeof t=="function",f=Cn(n)?g(n.length):[];return Rt(n,function(a){f[++r]=u?On(t,a,e):Ee(a,t,e)}),f}),Mh=fr(function(n,t,e){ct(n,e,t)});function dr(n,t){var e=O(n)?rn:es;return e(n,C(t,3))}function Oh(n,t,e,r){return n==null?[]:(O(t)||(t=t==null?[]:[t]),e=r?i:e,O(e)||(e=e==null?[]:[e]),ss(n,t,e))}var bh=fr(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]});function Dh(n,t,e){var r=O(n)?Kr:Mu,u=arguments.length<3;return r(n,C(t,4),e,u,Rt)}function Ph(n,t,e){var r=O(n)?$o:Mu,u=arguments.length<3;return r(n,C(t,4),e,u,Vu)}function Wh(n,t){var e=O(n)?Et:Ju;return e(n,mr(C(t,3)))}function Bh(n){var t=O(n)?Yu:Ll;return t(n)}function Uh(n,t,e){(e?Sn(n,t,e):t===i)?t=1:t=W(t);var r=O(n)?ul:Il;return r(n,t)}function Fh(n){var t=O(n)?sl:Ol;return t(n)}function Nh(n){if(n==null)return 0;if(Cn(n))return Er(n)?Zt(n):n.length;var t=mn(n);return t==Vn||t==Jn?n.size:ai(n).length}function zh(n,t,e){var r=O(n)?Yr:bl;return e&&Sn(n,t,e)&&(t=i),r(n,C(t,3))}var Hh=N(function(n,t){if(n==null)return[];var e=t.length;return e>1&&Sn(n,t[0],t[1])?t=[]:e>2&&Sn(t[0],t[1],t[2])&&(t=[t[0]]),ss(n,vn(t,1),[])}),vr=Ea||function(){return dn.Date.now()};function Gh(n,t){if(typeof t!="function")throw new Gn(S);return n=W(n),function(){if(--n<1)return t.apply(this,arguments)}}function nf(n,t,e){return t=e?i:t,t=n&&t==null?n.length:t,ht(n,Zn,i,i,i,i,t)}function tf(n,t){var e;if(typeof t!="function")throw new Gn(S);return n=W(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Di=N(function(n,t,e){var r=P;if(e.length){var u=St(e,ee(Di));r|=Fn}return ht(n,r,t,e,u)}),ef=N(function(n,t,e){var r=P|en;if(e.length){var u=St(e,ee(ef));r|=Fn}return ht(t,r,n,e,u)});function rf(n,t,e){t=e?i:t;var r=ht(n,Un,i,i,i,i,i,t);return r.placeholder=rf.placeholder,r}function uf(n,t,e){t=e?i:t;var r=ht(n,mt,i,i,i,i,i,t);return r.placeholder=uf.placeholder,r}function sf(n,t,e){var r,u,f,a,l,h,p=0,d=!1,v=!1,E=!0;if(typeof n!="function")throw new Gn(S);t=Xn(t)||0,un(e)&&(d=!!e.leading,v="maxWait"in e,f=v?hn(Xn(e.maxWait)||0,t):f,E="trailing"in e?!!e.trailing:E);function R(an){var nt=r,vt=u;return r=u=i,p=an,a=n.apply(vt,nt),a}function L(an){return p=an,l=Te(z,t),d?R(an):a}function U(an){var nt=an-h,vt=an-p,Rf=t-nt;return v?wn(Rf,f-vt):Rf}function I(an){var nt=an-h,vt=an-p;return h===i||nt>=t||nt<0||v&&vt>=f}function z(){var an=vr();if(I(an))return K(an);l=Te(z,U(an))}function K(an){return l=i,E&&r?R(an):(r=u=i,a)}function Wn(){l!==i&&ps(l),p=0,r=h=u=l=i}function An(){return l===i?a:K(vr())}function Bn(){var an=vr(),nt=I(an);if(r=arguments,u=this,h=an,nt){if(l===i)return L(h);if(v)return ps(l),l=Te(z,t),R(h)}return l===i&&(l=Te(z,t)),a}return Bn.cancel=Wn,Bn.flush=An,Bn}var qh=N(function(n,t){return Zu(n,1,t)}),Kh=N(function(n,t,e){return Zu(n,Xn(t)||0,e)});function Yh(n){return ht(n,Gt)}function wr(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new Gn(S);var e=function(){var r=arguments,u=t?t.apply(this,r):r[0],f=e.cache;if(f.has(u))return f.get(u);var a=n.apply(this,r);return e.cache=f.set(u,a)||f,a};return e.cache=new(wr.Cache||lt),e}wr.Cache=lt;function mr(n){if(typeof n!="function")throw new Gn(S);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function $h(n){return tf(2,n)}var Xh=Dl(function(n,t){t=t.length==1&&O(t[0])?rn(t[0],bn(C())):rn(vn(t,1),bn(C()));var e=t.length;return N(function(r){for(var u=-1,f=wn(r.length,e);++u<f;)r[u]=t[u].call(this,r[u]);return On(n,this,r)})}),Pi=N(function(n,t){var e=St(t,ee(Pi));return ht(n,Fn,i,t,e)}),ff=N(function(n,t){var e=St(t,ee(ff));return ht(n,st,i,t,e)}),Zh=gt(function(n,t){return ht(n,Mt,i,i,i,t)});function Vh(n,t){if(typeof n!="function")throw new Gn(S);return t=t===i?t:W(t),N(n,t)}function Jh(n,t){if(typeof n!="function")throw new Gn(S);return t=t==null?0:hn(W(t),0),N(function(e){var r=e[t],u=Lt(e,0,t);return r&&yt(u,r),On(n,this,u)})}function Qh(n,t,e){var r=!0,u=!0;if(typeof n!="function")throw new Gn(S);return un(e)&&(r="leading"in e?!!e.leading:r,u="trailing"in e?!!e.trailing:u),sf(n,t,{leading:r,maxWait:t,trailing:u})}function kh(n){return nf(n,1)}function jh(n,t){return Pi(wi(t),n)}function ng(){if(!arguments.length)return[];var n=arguments[0];return O(n)?n:[n]}function tg(n){return Kn(n,ln)}function eg(n,t){return t=typeof t=="function"?t:i,Kn(n,ln,t)}function rg(n){return Kn(n,D|ln)}function ig(n,t){return t=typeof t=="function"?t:i,Kn(n,D|ln,t)}function ug(n,t){return t==null||Xu(n,t,_n(t))}function jn(n,t){return n===t||n!==n&&t!==t}var sg=cr(si),fg=cr(function(n,t){return n>=t}),Nt=ju(function(){return arguments}())?ju:function(n){return fn(n)&&Z.call(n,"callee")&&!Nu.call(n,"callee")},O=g.isArray,og=xu?bn(xu):dl;function Cn(n){return n!=null&&xr(n.length)&&!pt(n)}function on(n){return fn(n)&&Cn(n)}function ag(n){return n===!0||n===!1||fn(n)&&yn(n)==se}var It=Sa||Yi,lg=Eu?bn(Eu):vl;function cg(n){return fn(n)&&n.nodeType===1&&!Ce(n)}function hg(n){if(n==null)return!0;if(Cn(n)&&(O(n)||typeof n=="string"||typeof n.splice=="function"||It(n)||re(n)||Nt(n)))return!n.length;var t=mn(n);if(t==Vn||t==Jn)return!n.size;if(Re(n))return!ai(n).length;for(var e in n)if(Z.call(n,e))return!1;return!0}function gg(n,t){return ye(n,t)}function _g(n,t,e){e=typeof e=="function"?e:i;var r=e?e(n,t):i;return r===i?ye(n,t,i,e):!!r}function Wi(n){if(!fn(n))return!1;var t=yn(n);return t==be||t==Bf||typeof n.message=="string"&&typeof n.name=="string"&&!Ce(n)}function pg(n){return typeof n=="number"&&Hu(n)}function pt(n){if(!un(n))return!1;var t=yn(n);return t==De||t==Zi||t==Wf||t==Ff}function of(n){return typeof n=="number"&&n==W(n)}function xr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=xt}function un(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function fn(n){return n!=null&&typeof n=="object"}var af=yu?bn(yu):ml;function dg(n,t){return n===t||oi(n,t,Ri(t))}function vg(n,t,e){return e=typeof e=="function"?e:i,oi(n,t,Ri(t),e)}function wg(n){return lf(n)&&n!=+n}function mg(n){if(ec(n))throw new M(A);return ns(n)}function xg(n){return n===null}function Eg(n){return n==null}function lf(n){return typeof n=="number"||fn(n)&&yn(n)==oe}function Ce(n){if(!fn(n)||yn(n)!=ot)return!1;var t=Xe(n);if(t===null)return!0;var e=Z.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&qe.call(e)==va}var Bi=Su?bn(Su):xl;function yg(n){return of(n)&&n>=-xt&&n<=xt}var cf=Au?bn(Au):El;function Er(n){return typeof n=="string"||!O(n)&&fn(n)&&yn(n)==le}function Pn(n){return typeof n=="symbol"||fn(n)&&yn(n)==Pe}var re=Ru?bn(Ru):yl;function Sg(n){return n===i}function Ag(n){return fn(n)&&mn(n)==ce}function Rg(n){return fn(n)&&yn(n)==zf}var Tg=cr(li),Cg=cr(function(n,t){return n<=t});function hf(n){if(!n)return[];if(Cn(n))return Er(n)?Qn(n):Tn(n);if(_e&&n[_e])return ua(n[_e]());var t=mn(n),e=t==Vn?Qr:t==Jn?ze:ie;return e(n)}function dt(n){if(!n)return n===0?n:0;if(n=Xn(n),n===j||n===-j){var t=n<0?-1:1;return t*Of}return n===n?n:0}function W(n){var t=dt(n),e=t%1;return t===t?e?t-e:t:0}function gf(n){return n?Wt(W(n),0,tt):0}function Xn(n){if(typeof n=="number")return n;if(Pn(n))return Me;if(un(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=un(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=Ou(n);var e=fo.test(n);return e||ao.test(n)?Go(n.slice(2),e?2:8):so.test(n)?Me:+n}function _f(n){return rt(n,Ln(n))}function Lg(n){return n?Wt(W(n),-xt,xt):n===0?n:0}function X(n){return n==null?"":Dn(n)}var Ig=ne(function(n,t){if(Re(t)||Cn(t)){rt(t,_n(t),n);return}for(var e in t)Z.call(t,e)&&me(n,e,t[e])}),pf=ne(function(n,t){rt(t,Ln(t),n)}),yr=ne(function(n,t,e,r){rt(t,Ln(t),n,r)}),Mg=ne(function(n,t,e,r){rt(t,_n(t),n,r)}),Og=gt(ri);function bg(n,t){var e=jt(n);return t==null?e:$u(e,t)}var Dg=N(function(n,t){n=Q(n);var e=-1,r=t.length,u=r>2?t[2]:i;for(u&&Sn(t[0],t[1],u)&&(r=1);++e<r;)for(var f=t[e],a=Ln(f),l=-1,h=a.length;++l<h;){var p=a[l],d=n[p];(d===i||jn(d,Jt[p])&&!Z.call(n,p))&&(n[p]=f[p])}return n}),Pg=N(function(n){return n.push(i,Os),On(df,i,n)});function Wg(n,t){return Cu(n,C(t,3),et)}function Bg(n,t){return Cu(n,C(t,3),ui)}function Ug(n,t){return n==null?n:ii(n,C(t,3),Ln)}function Fg(n,t){return n==null?n:Qu(n,C(t,3),Ln)}function Ng(n,t){return n&&et(n,C(t,3))}function zg(n,t){return n&&ui(n,C(t,3))}function Hg(n){return n==null?[]:rr(n,_n(n))}function Gg(n){return n==null?[]:rr(n,Ln(n))}function Ui(n,t,e){var r=n==null?i:Bt(n,t);return r===i?e:r}function qg(n,t){return n!=null&&Ps(n,t,hl)}function Fi(n,t){return n!=null&&Ps(n,t,gl)}var Kg=Ts(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=Ke.call(t)),n[t]=e},zi(In)),Yg=Ts(function(n,t,e){t!=null&&typeof t.toString!="function"&&(t=Ke.call(t)),Z.call(n,t)?n[t].push(e):n[t]=[e]},C),$g=N(Ee);function _n(n){return Cn(n)?Ku(n):ai(n)}function Ln(n){return Cn(n)?Ku(n,!0):Sl(n)}function Xg(n,t){var e={};return t=C(t,3),et(n,function(r,u,f){ct(e,t(r,u,f),r)}),e}function Zg(n,t){var e={};return t=C(t,3),et(n,function(r,u,f){ct(e,u,t(r,u,f))}),e}var Vg=ne(function(n,t,e){ir(n,t,e)}),df=ne(function(n,t,e,r){ir(n,t,e,r)}),Jg=gt(function(n,t){var e={};if(n==null)return e;var r=!1;t=rn(t,function(f){return f=Ct(f,n),r||(r=f.length>1),f}),rt(n,Si(n),e),r&&(e=Kn(e,D|tn|ln,Kl));for(var u=t.length;u--;)pi(e,t[u]);return e});function Qg(n,t){return vf(n,mr(C(t)))}var kg=gt(function(n,t){return n==null?{}:Rl(n,t)});function vf(n,t){if(n==null)return{};var e=rn(Si(n),function(r){return[r]});return t=C(t),fs(n,e,function(r,u){return t(r,u[0])})}function jg(n,t,e){t=Ct(t,n);var r=-1,u=t.length;for(u||(u=1,n=i);++r<u;){var f=n==null?i:n[it(t[r])];f===i&&(r=u,f=e),n=pt(f)?f.call(n):f}return n}function n_(n,t,e){return n==null?n:Se(n,t,e)}function t_(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:Se(n,t,e,r)}var wf=Is(_n),mf=Is(Ln);function e_(n,t,e){var r=O(n),u=r||It(n)||re(n);if(t=C(t,4),e==null){var f=n&&n.constructor;u?e=r?new f:[]:un(n)?e=pt(f)?jt(Xe(n)):{}:e={}}return(u?Hn:et)(n,function(a,l,h){return t(e,a,l,h)}),e}function r_(n,t){return n==null?!0:pi(n,t)}function i_(n,t,e){return n==null?n:hs(n,t,wi(e))}function u_(n,t,e,r){return r=typeof r=="function"?r:i,n==null?n:hs(n,t,wi(e),r)}function ie(n){return n==null?[]:Jr(n,_n(n))}function s_(n){return n==null?[]:Jr(n,Ln(n))}function f_(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=Xn(e),e=e===e?e:0),t!==i&&(t=Xn(t),t=t===t?t:0),Wt(Xn(n),t,e)}function o_(n,t,e){return t=dt(t),e===i?(e=t,t=0):e=dt(e),n=Xn(n),_l(n,t,e)}function a_(n,t,e){if(e&&typeof e!="boolean"&&Sn(n,t,e)&&(t=e=i),e===i&&(typeof t=="boolean"?(e=t,t=i):typeof n=="boolean"&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=dt(n),t===i?(t=n,n=0):t=dt(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var u=Gu();return wn(n+u*(t-n+Ho("1e-"+((u+"").length-1))),t)}return hi(n,t)}var l_=te(function(n,t,e){return t=t.toLowerCase(),n+(e?xf(t):t)});function xf(n){return Ni(X(n).toLowerCase())}function Ef(n){return n=X(n),n&&n.replace(co,na).replace(Oo,"")}function c_(n,t,e){n=X(n),t=Dn(t);var r=n.length;e=e===i?r:Wt(W(e),0,r);var u=e;return e-=t.length,e>=0&&n.slice(e,u)==t}function h_(n){return n=X(n),n&&Yf.test(n)?n.replace(Qi,ta):n}function g_(n){return n=X(n),n&&Qf.test(n)?n.replace(Pr,"\\$&"):n}var __=te(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),p_=te(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),d_=Ss("toLowerCase");function v_(n,t,e){n=X(n),t=W(t);var r=t?Zt(n):0;if(!t||r>=t)return n;var u=(t-r)/2;return lr(Qe(u),e)+n+lr(Je(u),e)}function w_(n,t,e){n=X(n),t=W(t);var r=t?Zt(n):0;return t&&r<t?n+lr(t-r,e):n}function m_(n,t,e){n=X(n),t=W(t);var r=t?Zt(n):0;return t&&r<t?lr(t-r,e)+n:n}function x_(n,t,e){return e||t==null?t=0:t&&(t=+t),Ca(X(n).replace(Wr,""),t||0)}function E_(n,t,e){return(e?Sn(n,t,e):t===i)?t=1:t=W(t),gi(X(n),t)}function y_(){var n=arguments,t=X(n[0]);return n.length<3?t:t.replace(n[1],n[2])}var S_=te(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()});function A_(n,t,e){return e&&typeof e!="number"&&Sn(n,t,e)&&(t=e=i),e=e===i?tt:e>>>0,e?(n=X(n),n&&(typeof t=="string"||t!=null&&!Bi(t))&&(t=Dn(t),!t&&Xt(n))?Lt(Qn(n),0,e):n.split(t,e)):[]}var R_=te(function(n,t,e){return n+(e?" ":"")+Ni(t)});function T_(n,t,e){return n=X(n),e=e==null?0:Wt(W(e),0,n.length),t=Dn(t),n.slice(e,e+t.length)==t}function C_(n,t,e){var r=s.templateSettings;e&&Sn(n,t,e)&&(t=i),n=X(n),t=yr({},t,r,Ms);var u=yr({},t.imports,r.imports,Ms),f=_n(u),a=Jr(u,f),l,h,p=0,d=t.interpolate||We,v="__p += '",E=kr((t.escape||We).source+"|"+d.source+"|"+(d===ki?uo:We).source+"|"+(t.evaluate||We).source+"|$","g"),R="//# sourceURL="+(Z.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bo+"]")+`
`;n.replace(E,function(I,z,K,Wn,An,Bn){return K||(K=Wn),v+=n.slice(p,Bn).replace(ho,ea),z&&(l=!0,v+=`' +
__e(`+z+`) +
'`),An&&(h=!0,v+=`';
`+An+`;
__p += '`),K&&(v+=`' +
((__t = (`+K+`)) == null ? '' : __t) +
'`),p=Bn+I.length,I}),v+=`';
`;var L=Z.call(t,"variable")&&t.variable;if(!L)v=`with (obj) {
`+v+`
}
`;else if(ro.test(L))throw new M(b);v=(h?v.replace(Hf,""):v).replace(Gf,"$1").replace(qf,"$1;"),v="function("+(L||"obj")+`) {
`+(L?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+v+`return __p
}`;var U=Sf(function(){return $(f,R+"return "+v).apply(i,a)});if(U.source=v,Wi(U))throw U;return U}function L_(n){return X(n).toLowerCase()}function I_(n){return X(n).toUpperCase()}function M_(n,t,e){if(n=X(n),n&&(e||t===i))return Ou(n);if(!n||!(t=Dn(t)))return n;var r=Qn(n),u=Qn(t),f=bu(r,u),a=Du(r,u)+1;return Lt(r,f,a).join("")}function O_(n,t,e){if(n=X(n),n&&(e||t===i))return n.slice(0,Wu(n)+1);if(!n||!(t=Dn(t)))return n;var r=Qn(n),u=Du(r,Qn(t))+1;return Lt(r,0,u).join("")}function b_(n,t,e){if(n=X(n),n&&(e||t===i))return n.replace(Wr,"");if(!n||!(t=Dn(t)))return n;var r=Qn(n),u=bu(r,Qn(t));return Lt(r,u).join("")}function D_(n,t){var e=x,r=J;if(un(t)){var u="separator"in t?t.separator:u;e="length"in t?W(t.length):e,r="omission"in t?Dn(t.omission):r}n=X(n);var f=n.length;if(Xt(n)){var a=Qn(n);f=a.length}if(e>=f)return n;var l=e-Zt(r);if(l<1)return r;var h=a?Lt(a,0,l).join(""):n.slice(0,l);if(u===i)return h+r;if(a&&(l+=h.length-l),Bi(u)){if(n.slice(l).search(u)){var p,d=h;for(u.global||(u=kr(u.source,X(ji.exec(u))+"g")),u.lastIndex=0;p=u.exec(d);)var v=p.index;h=h.slice(0,v===i?l:v)}}else if(n.indexOf(Dn(u),l)!=l){var E=h.lastIndexOf(u);E>-1&&(h=h.slice(0,E))}return h+r}function P_(n){return n=X(n),n&&Kf.test(n)?n.replace(Ji,aa):n}var W_=te(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),Ni=Ss("toUpperCase");function yf(n,t,e){return n=X(n),t=e?i:t,t===i?ia(n)?ha(n):Vo(n):n.match(t)||[]}var Sf=N(function(n,t){try{return On(n,i,t)}catch(e){return Wi(e)?e:new M(e)}}),B_=gt(function(n,t){return Hn(t,function(e){e=it(e),ct(n,e,Di(n[e],n))}),n});function U_(n){var t=n==null?0:n.length,e=C();return n=t?rn(n,function(r){if(typeof r[1]!="function")throw new Gn(S);return[e(r[0]),r[1]]}):[],N(function(r){for(var u=-1;++u<t;){var f=n[u];if(On(f[0],this,r))return On(f[1],this,r)}})}function F_(n){return al(Kn(n,D))}function zi(n){return function(){return n}}function N_(n,t){return n==null||n!==n?t:n}var z_=Rs(),H_=Rs(!0);function In(n){return n}function Hi(n){return ts(typeof n=="function"?n:Kn(n,D))}function G_(n){return rs(Kn(n,D))}function q_(n,t){return is(n,Kn(t,D))}var K_=N(function(n,t){return function(e){return Ee(e,n,t)}}),Y_=N(function(n,t){return function(e){return Ee(n,e,t)}});function Gi(n,t,e){var r=_n(t),u=rr(t,r);e==null&&!(un(t)&&(u.length||!r.length))&&(e=t,t=n,n=this,u=rr(t,_n(t)));var f=!(un(e)&&"chain"in e)||!!e.chain,a=pt(n);return Hn(u,function(l){var h=t[l];n[l]=h,a&&(n.prototype[l]=function(){var p=this.__chain__;if(f||p){var d=n(this.__wrapped__),v=d.__actions__=Tn(this.__actions__);return v.push({func:h,args:arguments,thisArg:n}),d.__chain__=p,d}return h.apply(n,yt([this.value()],arguments))})}),n}function $_(){return dn._===this&&(dn._=wa),this}function qi(){}function X_(n){return n=W(n),N(function(t){return us(t,n)})}var Z_=xi(rn),V_=xi(Tu),J_=xi(Yr);function Af(n){return Ci(n)?$r(it(n)):Tl(n)}function Q_(n){return function(t){return n==null?i:Bt(n,t)}}var k_=Cs(),j_=Cs(!0);function Ki(){return[]}function Yi(){return!1}function np(){return{}}function tp(){return""}function ep(){return!0}function rp(n,t){if(n=W(n),n<1||n>xt)return[];var e=tt,r=wn(n,tt);t=C(t),n-=tt;for(var u=Vr(r,t);++e<n;)t(e);return u}function ip(n){return O(n)?rn(n,it):Pn(n)?[n]:Tn(qs(X(n)))}function up(n){var t=++da;return X(n)+t}var sp=ar(function(n,t){return n+t},0),fp=Ei("ceil"),op=ar(function(n,t){return n/t},1),ap=Ei("floor");function lp(n){return n&&n.length?er(n,In,si):i}function cp(n,t){return n&&n.length?er(n,C(t,2),si):i}function hp(n){return Iu(n,In)}function gp(n,t){return Iu(n,C(t,2))}function _p(n){return n&&n.length?er(n,In,li):i}function pp(n,t){return n&&n.length?er(n,C(t,2),li):i}var dp=ar(function(n,t){return n*t},1),vp=Ei("round"),wp=ar(function(n,t){return n-t},0);function mp(n){return n&&n.length?Zr(n,In):0}function xp(n,t){return n&&n.length?Zr(n,C(t,2)):0}return s.after=Gh,s.ary=nf,s.assign=Ig,s.assignIn=pf,s.assignInWith=yr,s.assignWith=Mg,s.at=Og,s.before=tf,s.bind=Di,s.bindAll=B_,s.bindKey=ef,s.castArray=ng,s.chain=Qs,s.chunk=ac,s.compact=lc,s.concat=cc,s.cond=U_,s.conforms=F_,s.constant=zi,s.countBy=mh,s.create=bg,s.curry=rf,s.curryRight=uf,s.debounce=sf,s.defaults=Dg,s.defaultsDeep=Pg,s.defer=qh,s.delay=Kh,s.difference=hc,s.differenceBy=gc,s.differenceWith=_c,s.drop=pc,s.dropRight=dc,s.dropRightWhile=vc,s.dropWhile=wc,s.fill=mc,s.filter=Eh,s.flatMap=Ah,s.flatMapDeep=Rh,s.flatMapDepth=Th,s.flatten=Xs,s.flattenDeep=xc,s.flattenDepth=Ec,s.flip=Yh,s.flow=z_,s.flowRight=H_,s.fromPairs=yc,s.functions=Hg,s.functionsIn=Gg,s.groupBy=Ch,s.initial=Ac,s.intersection=Rc,s.intersectionBy=Tc,s.intersectionWith=Cc,s.invert=Kg,s.invertBy=Yg,s.invokeMap=Ih,s.iteratee=Hi,s.keyBy=Mh,s.keys=_n,s.keysIn=Ln,s.map=dr,s.mapKeys=Xg,s.mapValues=Zg,s.matches=G_,s.matchesProperty=q_,s.memoize=wr,s.merge=Vg,s.mergeWith=df,s.method=K_,s.methodOf=Y_,s.mixin=Gi,s.negate=mr,s.nthArg=X_,s.omit=Jg,s.omitBy=Qg,s.once=$h,s.orderBy=Oh,s.over=Z_,s.overArgs=Xh,s.overEvery=V_,s.overSome=J_,s.partial=Pi,s.partialRight=ff,s.partition=bh,s.pick=kg,s.pickBy=vf,s.property=Af,s.propertyOf=Q_,s.pull=Oc,s.pullAll=Vs,s.pullAllBy=bc,s.pullAllWith=Dc,s.pullAt=Pc,s.range=k_,s.rangeRight=j_,s.rearg=Zh,s.reject=Wh,s.remove=Wc,s.rest=Vh,s.reverse=Oi,s.sampleSize=Uh,s.set=n_,s.setWith=t_,s.shuffle=Fh,s.slice=Bc,s.sortBy=Hh,s.sortedUniq=qc,s.sortedUniqBy=Kc,s.split=A_,s.spread=Jh,s.tail=Yc,s.take=$c,s.takeRight=Xc,s.takeRightWhile=Zc,s.takeWhile=Vc,s.tap=lh,s.throttle=Qh,s.thru=pr,s.toArray=hf,s.toPairs=wf,s.toPairsIn=mf,s.toPath=ip,s.toPlainObject=_f,s.transform=e_,s.unary=kh,s.union=Jc,s.unionBy=Qc,s.unionWith=kc,s.uniq=jc,s.uniqBy=nh,s.uniqWith=th,s.unset=r_,s.unzip=bi,s.unzipWith=Js,s.update=i_,s.updateWith=u_,s.values=ie,s.valuesIn=s_,s.without=eh,s.words=yf,s.wrap=jh,s.xor=rh,s.xorBy=ih,s.xorWith=uh,s.zip=sh,s.zipObject=fh,s.zipObjectDeep=oh,s.zipWith=ah,s.entries=wf,s.entriesIn=mf,s.extend=pf,s.extendWith=yr,Gi(s,s),s.add=sp,s.attempt=Sf,s.camelCase=l_,s.capitalize=xf,s.ceil=fp,s.clamp=f_,s.clone=tg,s.cloneDeep=rg,s.cloneDeepWith=ig,s.cloneWith=eg,s.conformsTo=ug,s.deburr=Ef,s.defaultTo=N_,s.divide=op,s.endsWith=c_,s.eq=jn,s.escape=h_,s.escapeRegExp=g_,s.every=xh,s.find=yh,s.findIndex=Ys,s.findKey=Wg,s.findLast=Sh,s.findLastIndex=$s,s.findLastKey=Bg,s.floor=ap,s.forEach=ks,s.forEachRight=js,s.forIn=Ug,s.forInRight=Fg,s.forOwn=Ng,s.forOwnRight=zg,s.get=Ui,s.gt=sg,s.gte=fg,s.has=qg,s.hasIn=Fi,s.head=Zs,s.identity=In,s.includes=Lh,s.indexOf=Sc,s.inRange=o_,s.invoke=$g,s.isArguments=Nt,s.isArray=O,s.isArrayBuffer=og,s.isArrayLike=Cn,s.isArrayLikeObject=on,s.isBoolean=ag,s.isBuffer=It,s.isDate=lg,s.isElement=cg,s.isEmpty=hg,s.isEqual=gg,s.isEqualWith=_g,s.isError=Wi,s.isFinite=pg,s.isFunction=pt,s.isInteger=of,s.isLength=xr,s.isMap=af,s.isMatch=dg,s.isMatchWith=vg,s.isNaN=wg,s.isNative=mg,s.isNil=Eg,s.isNull=xg,s.isNumber=lf,s.isObject=un,s.isObjectLike=fn,s.isPlainObject=Ce,s.isRegExp=Bi,s.isSafeInteger=yg,s.isSet=cf,s.isString=Er,s.isSymbol=Pn,s.isTypedArray=re,s.isUndefined=Sg,s.isWeakMap=Ag,s.isWeakSet=Rg,s.join=Lc,s.kebabCase=__,s.last=$n,s.lastIndexOf=Ic,s.lowerCase=p_,s.lowerFirst=d_,s.lt=Tg,s.lte=Cg,s.max=lp,s.maxBy=cp,s.mean=hp,s.meanBy=gp,s.min=_p,s.minBy=pp,s.stubArray=Ki,s.stubFalse=Yi,s.stubObject=np,s.stubString=tp,s.stubTrue=ep,s.multiply=dp,s.nth=Mc,s.noConflict=$_,s.noop=qi,s.now=vr,s.pad=v_,s.padEnd=w_,s.padStart=m_,s.parseInt=x_,s.random=a_,s.reduce=Dh,s.reduceRight=Ph,s.repeat=E_,s.replace=y_,s.result=jg,s.round=vp,s.runInContext=c,s.sample=Bh,s.size=Nh,s.snakeCase=S_,s.some=zh,s.sortedIndex=Uc,s.sortedIndexBy=Fc,s.sortedIndexOf=Nc,s.sortedLastIndex=zc,s.sortedLastIndexBy=Hc,s.sortedLastIndexOf=Gc,s.startCase=R_,s.startsWith=T_,s.subtract=wp,s.sum=mp,s.sumBy=xp,s.template=C_,s.times=rp,s.toFinite=dt,s.toInteger=W,s.toLength=gf,s.toLower=L_,s.toNumber=Xn,s.toSafeInteger=Lg,s.toString=X,s.toUpper=I_,s.trim=M_,s.trimEnd=O_,s.trimStart=b_,s.truncate=D_,s.unescape=P_,s.uniqueId=up,s.upperCase=W_,s.upperFirst=Ni,s.each=ks,s.eachRight=js,s.first=Zs,Gi(s,function(){var n={};return et(s,function(t,e){Z.call(s.prototype,e)||(n[e]=t)}),n}(),{chain:!1}),s.VERSION=w,Hn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){s[n].placeholder=s}),Hn(["drop","take"],function(n,t){H.prototype[n]=function(e){e=e===i?1:hn(W(e),0);var r=this.__filtered__&&!t?new H(this):this.clone();return r.__filtered__?r.__takeCount__=wn(e,r.__takeCount__):r.__views__.push({size:wn(e,tt),type:n+(r.__dir__<0?"Right":"")}),r},H.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),Hn(["filter","map","takeWhile"],function(n,t){var e=t+1,r=e==gn||e==ft;H.prototype[n]=function(u){var f=this.clone();return f.__iteratees__.push({iteratee:C(u,3),type:e}),f.__filtered__=f.__filtered__||r,f}}),Hn(["head","last"],function(n,t){var e="take"+(t?"Right":"");H.prototype[n]=function(){return this[e](1).value()[0]}}),Hn(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");H.prototype[n]=function(){return this.__filtered__?new H(this):this[e](1)}}),H.prototype.compact=function(){return this.filter(In)},H.prototype.find=function(n){return this.filter(n).head()},H.prototype.findLast=function(n){return this.reverse().find(n)},H.prototype.invokeMap=N(function(n,t){return typeof n=="function"?new H(this):this.map(function(e){return Ee(e,n,t)})}),H.prototype.reject=function(n){return this.filter(mr(C(n)))},H.prototype.slice=function(n,t){n=W(n);var e=this;return e.__filtered__&&(n>0||t<0)?new H(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(t=W(t),e=t<0?e.dropRight(-t):e.take(t-n)),e)},H.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},H.prototype.toArray=function(){return this.take(tt)},et(H.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),u=s[r?"take"+(t=="last"?"Right":""):t],f=r||/^find/.test(t);u&&(s.prototype[t]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof H,p=l[0],d=h||O(a),v=function(z){var K=u.apply(s,yt([z],l));return r&&E?K[0]:K};d&&e&&typeof p=="function"&&p.length!=1&&(h=d=!1);var E=this.__chain__,R=!!this.__actions__.length,L=f&&!E,U=h&&!R;if(!f&&d){a=U?a:new H(this);var I=n.apply(a,l);return I.__actions__.push({func:pr,args:[v],thisArg:i}),new qn(I,E)}return L&&U?n.apply(this,l):(I=this.thru(v),L?r?I.value()[0]:I.value():I)})}),Hn(["pop","push","shift","sort","splice","unshift"],function(n){var t=He[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);s.prototype[n]=function(){var u=arguments;if(r&&!this.__chain__){var f=this.value();return t.apply(O(f)?f:[],u)}return this[e](function(a){return t.apply(O(a)?a:[],u)})}}),et(H.prototype,function(n,t){var e=s[t];if(e){var r=e.name+"";Z.call(kt,r)||(kt[r]=[]),kt[r].push({name:t,func:e})}}),kt[or(i,en).name]=[{name:"wrapper",func:i}],H.prototype.clone=Pa,H.prototype.reverse=Wa,H.prototype.value=Ba,s.prototype.at=ch,s.prototype.chain=hh,s.prototype.commit=gh,s.prototype.next=_h,s.prototype.plant=dh,s.prototype.reverse=vh,s.prototype.toJSON=s.prototype.valueOf=s.prototype.value=wh,s.prototype.first=s.prototype.head,_e&&(s.prototype[_e]=ph),s},Vt=ga();Ot?((Ot.exports=Vt)._=Vt,Hr._=Vt):dn._=Vt}).call(Le)})(Ar,Ar.exports);var bp=Ar.exports;const ut=Sp(bp);class sn{constructor(o,i){this.id=`point-id-${new Date().getTime().toString()}`,this.x=o,this.y=i,this.initialX=o,this.initialY=i}translate(o,i){this.x+=o,this.y+=i,this.initialX+=o,this.initialY+=i}clone(){return new sn(this.x,this.y)}serialize(){return`${this.x},${this.y}`}json(){return JSON.stringify(this)}deserialize(o){const[i,w]=o.split(",").map(m=>parseInt(m));return new sn(i,w)}static middlePoint(o,i){return new sn((o.x+i.x)/2,(o.y+i.y)/2)}static distance(o,i){return Math.sqrt((o.x-i.x)**2+(o.y-i.y)**2)}static isSame(o,i){return o.x===i.x&&o.y===i.y}static isNear(o,i,w=10){return sn.distance(o,i)<w}}class Dp extends Ie{constructor(i,w){super(i,w);Rn(this,"_point",null);Rn(this,"_mouseDown",!1);Rn(this,"_moveAll",!1)}onEnter(){}onExit(){}handleMouseWheel(i,w){}handleMouseDown(i,w){this._mouseDown=!0;const m=this.stateMachine.coordinateSystem;if(!this.stateMachine.ctx||!m||!w)return;const S=this.stateMachine.element;if(!S)return;const b=i.clientX,B=i.clientY,F=m.clientPointToViewPoint({clientX:b,clientY:B});S.contains(F.x,F.y)&&(this._moveAll=!0)}handleMouseMove(i,w){const m=this.stateMachine.coordinateSystem,A=this.stateMachine.ctx;if(!A||!m||!w)return;const S=this.stateMachine.element;if(!S)return;const b=i.clientX,B=i.clientY,F=m.clientPointToViewPoint({clientX:b,clientY:B}),G=S.rectangle.points;if(this._mouseDown){const D={x:i.movementX/m.scale,y:i.movementY/m.scale};this._point?(this._point.translate(D.x,D.y),A.clearRect(0,0,w.width,w.height),ut.each(this.stateMachine.elements,tn=>{tn.draw(A)}),S.drawBoundingBoxWithHandles(A)):this._moveAll&&(S.translate(D.x,D.y),A.clearRect(0,0,w.width,w.height),ut.each(this.stateMachine.elements,tn=>{tn.draw(A)}),S.drawBoundingBoxWithHandles(A))}else this._point=G.find(D=>sn.isNear(D,new sn(F.x,F.y)))||null,this._point?w.style.cursor="move":w.style.cursor="default"}handleMouseUp(i,w){this._mouseDown=!1,this._point=null,this._moveAll=!1,this.stateMachine.element&&this.stateMachine.element.rectangle.processDisplacement()}}class Pp extends Ie{constructor(o,i){super(o,i)}onEnter(){}onExit(){}handleMouseWheel(o,i){}handleMouseDown(o,i){}handleMouseMove(o,i){}handleMouseUp(o,i){}}class Wp extends Ie{constructor(i,w){super(i,w);Rn(this,"isMouseDown",!1);Rn(this,"start",null)}onEnter(){console.log("SelectState: onEnter")}onExit(){console.log("SelectState: onExit")}handleMouseDown(i,w){this.isMouseDown=!0}handleMouseWheel(i,w){if(this.isMouseDown)return;this.stateMachine.coordinateSystem.scaleAtClientPoint(-.001*i.deltaY,{clientX:i.clientX,clientY:i.clientY})}handleMouseMove(i,w){}handleMouseUp(i,w){this.isMouseDown=!1;const m=this.stateMachine.coordinateSystem,A=this.stateMachine.ctx;if(!A||!m||!w)return;const S=this.stateMachine.elements,b=i.clientX,B=i.clientY,F=m.clientPointToViewPoint({clientX:b,clientY:B}),G=S.find(D=>D.contains(F.x,F.y));G?(this.stateMachine.element=G,A.clearRect(0,0,w.width,w.height),ut.each(S,D=>{D.draw(A)}),G.drawBoundingBoxWithHandles(A)):(this.stateMachine.element=null,A.clearRect(0,0,w.width,w.height),ut.each(S,D=>{D.draw(A)}))}}class Bp extends Ie{constructor(o,i){super(o,i)}onEnter(){}onExit(){}handleMouseWheel(o,i){}handleMouseDown(o,i){}handleMouseMove(o,i){}handleMouseUp(o,i){}}const xn=class xn{constructor(o){this._inputs=new Set,this._states={IDLE:new Op(this,xn.STATE_IDLE),SELECT:new Wp(this,xn.STATE_SELECT),MOVE:new Dp(this,xn.STATE_MOVE),RESIZE:new Pp(this,xn.STATE_RESIZE),ZOOM:new Bp(this,xn.STATE_ZOOM)},this._state=this._states[xn.STATE_SELECT],this._mouseDown=!1,this._elements=o.canvasElements,this._element=null,this._coordinateSystem=o.coordinateSystem,this._canvas=o.canvas,this._ctx=o.ctx}get mouseDown(){return this._mouseDown}get state(){return this._state}set state(o){this._state=o}addState(o){this._states[o.name]=o}setState(o){if(o!==this._state.name){if(!this._states[o])throw new Error(`State ${o} not found`);this._state&&this._state.onExit(),this._state=this._states[o],this._state.onEnter(),console.log(`State changed to ${o}`)}}handleMouseWheel(o,i){this._state.handleMouseWheel(o,i)}handleMouseDown(o,i){this._state.handleMouseDown(o,i)}handleMouseMove(o,i){this._state.handleMouseMove(o,i)}handleMouseUp(o,i){this._state.handleMouseUp(o,i)}handleKeyDown(o,i){switch(o.code){case"Digit1":this.setState(xn.STATE_SELECT);break;case"Digit2":this.setState(xn.STATE_MOVE);break;default:this.setState(xn.STATE_IDLE);break}}handleKeyUp(o,i){}get inputs(){return this._inputs}set inputs(o){this._inputs=o}get element(){return this._element}set element(o){this._element=o}get elements(){return this._elements}set elements(o){this._elements=o}get coordinateSystem(){return this._coordinateSystem}set coordinateSystem(o){this._coordinateSystem=o}get canvas(){return this._canvas}set canvas(o){this._canvas=o}get ctx(){return this._ctx}set ctx(o){this._ctx=o}setCanvas(o){this.canvas=o}setCtx(o){this.ctx=o}setCoordinateSystem(o){this.coordinateSystem=o}};Rn(xn,"STATE_IDLE","IDLE"),Rn(xn,"STATE_SELECT","SELECT"),Rn(xn,"STATE_RESIZE","RESIZE"),Rn(xn,"STATE_MOVE","MOVE"),Rn(xn,"STATE_ZOOM","ZOOM");let $i=xn,zt=function(T){return T.AUTO="auto",T.COVER="cover",T.CONTAIN="contain",T}({});var Mn=function(T){return T.BACKGROUND="background",T.INTERFACE="interface",T}(Mn||{});const Mf=zt.CONTAIN,Lf=[Mn.BACKGROUND,Mn.INTERFACE],Up={display:"block",width:"100%",height:"100vh",position:"relative",backgroundColor:"lightblue"},Fp={display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent"},Np={size:Mf,imageSrc:"./test.png",width:800,height:800},zp={min:1,max:5};function Kp({containerElementStyle:T=Up,canvasElementStyle:o=Fp,background:i=Np,zoomExtents:w=zp,elements:m=[],onViewChange:A}){const{containerRef:S,screenSize:b}=Mp(),B=pn.useRef(null),F=pn.useRef({}),G=pn.useRef({}),D=pn.useRef(P()),tn=pn.useRef(m),ln=pn.useCallback(()=>new $i({canvasElements:tn.current,coordinateSystem:D.current,canvas:F.current[Mn.INTERFACE],ctx:G.current[Mn.INTERFACE]}),[]),V=pn.useRef(ln());pn.useEffect(()=>{const x=F.current[Mn.INTERFACE];if(!x)return;const J=j=>{V.current.handleMouseMove(j,x)},Y=j=>{V.current.handleMouseUp(j,x)},En=j=>{V.current.handleMouseDown(j,x)},gn=j=>{console.log("handleKeyDown",j),V.current.handleKeyDown(j,x)},Nn=j=>{V.current.handleKeyUp(j,x)},ft=j=>{V.current.handleMouseWheel(j,x)};return x.addEventListener("mousedown",En),x.addEventListener("mousemove",J),x.addEventListener("mouseup",Y),x.addEventListener("wheel",ft),x.addEventListener("keydown",gn),x.addEventListener("keyup",Nn),()=>{x.removeEventListener("mousedown",En),x.removeEventListener("mousemove",J),x.removeEventListener("mouseup2",Y),x.removeEventListener("wheel",ft),x.removeEventListener("keydown",gn),x.removeEventListener("keyup",Nn)}},[]);function q(x){if(!i)return x;switch(i.size||(i.size=Mf),i.size){case zt.COVER:const J=B.current;if(J){const{width:Y,height:En}=J;if(!i.useImageOriginSize){let gn=x.width,Nn=x.height;const ft=Y/En;return Nn=gn/ft,Nn>x.height&&(Nn=x.height,gn=Nn*ft),{width:gn,height:Nn}}return{width:Y,height:En}}break;case zt.CONTAIN:return{width:i.width||0,height:i.height||0}}return x}function P(){const x=new Ap(w,{width:1920,height:1080});return x.attachViewChangeListener(en),x}function en({view:x,transform:J}){console.log("applyView",x,J);const Y=D.current;Y&&(Lf.map(En=>G.current[En]).forEach(En=>{wt(En);const gn=Y.transformMatrix;En.setTransform(gn.a,gn.b,gn.c,gn.d,gn.e,gn.f)}),Gt())}function wt(x){Un([x],()=>x.clearRect(0,0,x.canvas.width,x.canvas.height))}function Un(x,J){x.forEach(Y=>{Y.save(),Y.setTransform(ue.a,ue.b,ue.c,ue.d,ue.e,ue.f)});try{J()}finally{x.forEach(Y=>Y.restore())}}function mt(x){D.current.documentSize={...x}}function Fn({canvas:x,ctx:J,image:Y}){if(Y&&Y.complete&&x&&J&&i)switch(i.size){case zt.AUTO:Ip({canvas:x,ctx:J,image:Y});break;case zt.COVER:Cp({ctx:J,image:Y});break;case zt.CONTAIN:default:Lp({canvas:x,ctx:J,image:Y});break}}function st(x,J=!1){let Y=!1;const{canvas:En}=D.current;if((En.width!==x.width||En.height!==x.height)&&(Tp(F.current,x),mt(x),Y=!0),J||Y){const gn=x.width/D.current.initialViewSize.width,Nn=x.height/D.current.initialViewSize.height;ut.each(tn.current,ft=>{ft.rectangle.points.forEach(j=>{j.x=j.initialX*gn,j.y=j.initialY*Nn})}),Gt()}}function Zn(){const x=F.current[Mn.BACKGROUND],J=G.current[Mn.BACKGROUND],Y=B.current;!x||!J||(J.clearRect(0,0,x.width,x.height),Y&&Fn({canvas:x,ctx:J,image:Y}))}function Mt(){wt(G.current[Mn.INTERFACE]),tn.current.forEach(x=>{x.draw(G.current[Mn.INTERFACE])})}function Gt(){Zn(),Mt()}return pn.useEffect(()=>{const x=q(b);st(x),typeof A=="function"&&A(x)},[b]),pn.useEffect(()=>{V.current.setCanvas(F.current[Mn.INTERFACE]),V.current.setCtx(G.current[Mn.INTERFACE])},[F.current]),pn.useEffect(()=>{if(!(!i||!i.imageSrc||i.imageSrc==="")&&(!B.current||B.current.getAttribute("src")!==i.imageSrc)){const x=new Image;x.src=i.imageSrc,x.onload=()=>{const J=q(b);st(J,!0),D.current.initialViewSize=J},x.onabort=()=>{B.current=null},B.current=x}},[i,B]),pn.useEffect(()=>{tn.current=m,V.current.elements=m,ut.each(tn.current,x=>{x.draw(G.current[Mn.INTERFACE])})},[m]),Tf.jsx("div",{style:{...T},ref:S,children:Lf.map(x=>{const J=x===Mn.INTERFACE;return Tf.jsx("canvas",{tabIndex:J?1:0,ref:Y=>{Y&&(F.current[x]=Y,G.current[x]=Y.getContext("2d"),J&&(D.current.canvas=Y))},style:{...o}},x)})})}class Xi{constructor(o){this._points=o}get points(){return this._points}set points(o){this._points=o}get boundingBox(){let o=this._points[0].x,i=this._points[0].y,w=this._points[0].x,m=this._points[0].y;return ut.each(this._points,A=>{o=Math.min(o,A.x),i=Math.min(i,A.y),w=Math.max(w,A.x),m=Math.max(m,A.y)}),new Ht(o,i,w-o,m-i)}translate(o,i){ut.each(this._points,w=>w.translate(o,i))}clone(){return new Xi(this._points.map(o=>o.clone()))}serialize(){return ut.map(this.points,o=>[o.x,o.y])}deserialize(o){this.points=ut.map(o,i=>new sn(i[0],i[1]))}isNear(o,i=10){return this._points.some(w=>sn.isNear(w,o,i))}isPartOfPolygon(o){return this._points.some(i=>i.id===o.id)}contains(o,i){let w=!1;for(let m=0,A=this._points.length-1;m<this._points.length;A=m++){const S=this._points[m].x,b=this._points[m].y,B=this._points[A].x,F=this._points[A].y;b>i!=F>i&&o<(B-S)*(i-b)/(F-b)+S&&(w=!w)}return w}}class Ht extends Xi{constructor(o=0,i=0,w=0,m=0){if(o instanceof sn&&i instanceof sn&&w instanceof sn&&m instanceof sn)super([o,i,w,m]);else if(typeof o=="number"&&typeof i=="number"&&typeof w=="number"&&typeof m=="number")super(Ht.pointsFromBounds(o,i,w,m));else throw new Error("Invalid arguments")}static pointsFromBounds(o,i,w,m){return[new sn(o,i),new sn(o+w,i),new sn(o+w,i+m),new sn(o,i+m)]}get width(){return this._points[1].x-this._points[0].x}get height(){return this._points[2].y-this._points[1].y}get topLeft(){return this._points[0]}get topRight(){return this._points[1]}get bottomRight(){return this._points[2]}get bottomLeft(){return this._points[3]}get topMid(){return sn.middlePoint(this.topLeft,this.topRight)}get rightMid(){return sn.middlePoint(this.topRight,this.bottomRight)}get bottomMid(){return sn.middlePoint(this.bottomLeft,this.bottomRight)}get leftMid(){return sn.middlePoint(this.topLeft,this.bottomLeft)}updateDimensions(o,i,w,m){this.points=Ht.pointsFromBounds(o,i,w,m)}processDisplacement(){this.width<0&&([this._points[0],this._points[1]]=[this._points[1],this._points[0]],[this._points[2],this._points[3]]=[this._points[3],this._points[2]]),this.height<0&&([this._points[0],this._points[3]]=[this._points[3],this._points[0]],[this._points[1],this._points[2]]=[this._points[2],this._points[1]])}clone(){return new Ht(this._points[0].x,this._points[0].y,this.width,this.height)}json(){return JSON.stringify(this)}}class If{constructor(o,i,w,m,A,S){this._id=o,this._color=i,this._isCurrent=w,this._numberOfEquipments=m,this._rectangle=A,this._isEdit=typeof S=="boolean"?S:!0}get id(){return this._id}get color(){return this._color}get isCurrent(){return this._isCurrent}get numberOfEquipments(){return this._numberOfEquipments}get rectangle(){return this._rectangle}get isEdit(){return this._isEdit}translate(o,i){this._rectangle.translate(o,i)}updateDimensions(o,i){this._rectangle.updateDimensions(this._rectangle.topLeft.x,this._rectangle.topLeft.y,o,i)}draw(o){this.drawPolygon(o),this.drawNumberOfEquipments(o),this.drawIsCurrent(o)}contains(o,i){return this.isEdit&&this.rectangle.contains(o,i)}drawDebug(o){o.fillStyle="black",o.fillText("TL",this.rectangle.topLeft.x,this.rectangle.topLeft.y,this.rectangle.width),o.fillText("TR",this.rectangle.topRight.x,this.rectangle.topRight.y,this.rectangle.width),o.fillText("BR",this.rectangle.bottomRight.x,this.rectangle.bottomRight.y,this.rectangle.width),o.fillText("BL",this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y,this.rectangle.width)}drawPolygon(o){const i=this.rectangle.points;o.fillStyle=this.color,o.beginPath(),o.moveTo(i[0].x,i[0].y);for(let w=1;w<i.length;w++)o.lineTo(i[w].x,i[w].y);o.closePath(),o.fill()}drawHighlight(o){const i=this.rectangle.points;o.fillStyle=this.color,o.beginPath(),o.moveTo(i[0].x,i[0].y);for(let w=1;w<i.length;w++)o.lineTo(i[w].x,i[w].y);o.closePath(),o.stroke()}drawIsCurrent(o){this.isCurrent&&(o.fillStyle="red",o.font="40px Arial",o.fillText("*",this.rectangle.topLeft.x,this.rectangle.topLeft.y+35,this.rectangle.width))}drawNumberOfEquipments(o){this.numberOfEquipments>0&&(o.fillStyle="black",o.font="14px Arial",o.fillText(`(${this.numberOfEquipments.toString()})`,this.rectangle.bottomLeft.x,this.rectangle.bottomLeft.y+14,this.rectangle.width))}drawBoundingBox(o){const i=this.rectangle.boundingBox;o.lineWidth=1,o.beginPath(),o.moveTo(i.topLeft.x,i.topLeft.y),o.lineTo(i.topRight.x,i.topRight.y),o.lineTo(i.bottomRight.x,i.bottomRight.y),o.lineTo(i.bottomLeft.x,i.bottomLeft.y),o.lineTo(i.topLeft.x,i.topLeft.y),o.closePath(),o.stroke()}drawBoundingBoxWithHandles(o){this.drawPolygon(o),this.drawBoundingBox(o),this.drawHandles(o)}drawHandles(o){o.fillStyle="black",o.fillRect(this.rectangle.topLeft.x-3,this.rectangle.topLeft.y-3,6,6),o.fillRect(this.rectangle.topRight.x-3,this.rectangle.topRight.y-3,6,6),o.fillRect(this.rectangle.bottomRight.x-3,this.rectangle.bottomRight.y-3,6,6),o.fillRect(this.rectangle.bottomLeft.x-3,this.rectangle.bottomLeft.y-3,6,6)}getNearestAnchor(o,i){const w=[this.rectangle.topLeft,this.rectangle.topRight,this.rectangle.bottomRight,this.rectangle.bottomLeft],m=w.map(b=>sn.distance(b,new sn(o,i))),A=Math.min(...m),S=m.findIndex(b=>b===A&&b<10);return w[S]}anchorToString(o){return o===this.rectangle.topLeft?"topLeft":o===this.rectangle.topRight?"topRight":o===this.rectangle.bottomRight?"bottomRight":o===this.rectangle.bottomLeft?"bottomLeft":""}}const Hp="#ffff66";function Yp(){const T={size:zt.COVER},o=pn.useRef(null),[i,w]=pn.useState([]),[m,A]=pn.useState(T),S=q=>{o.current={...q}},b=q=>{A(P=>({...P,...q}))},B=q=>{const P=q.map(en=>{const wt=new Ht(0,0,0,0);return wt.deserialize(JSON.parse(en.JsonRectangle)),new If(en.id.toString(),en.Color,en.IsCurrent,en.NumberEquipment,wt,en.isEdit)});w([...P])},F=q=>{S(q)},G=()=>{const q=new Ht(0,0,100,100),P=new If(`${i.length+1}`,Hp,!1,4,q);w([...i,P])},D=()=>{o.current&&F(o.current)},tn=q=>{S({background:m,elements:i}),typeof q=="function"&&q(V())},ln=()=>{const q=i.map(P=>({id:P.id,IsTemplate:!1,NumberEquipment:P.numberOfEquipments,Color:P.color,IsCurrent:P.isCurrent,JsonRectangle:P.rectangle.serialize(),isEdit:P.isEdit}));return console.log("exportRectangles: ",q),q},V=()=>{const q=i.map(P=>({id:parseInt(P.id),IsTemplate:!1,NumberEquipment:P.numberOfEquipments,Color:P.color,IsCurrent:P.isCurrent,JsonRectangle:JSON.stringify(P.rectangle.serialize()),isEdit:P.isEdit}));return JSON.stringify({background:m,data:q})};return{background:m,elements:i,loadBackground:b,loadDataSource:B,loadAll:F,addRectangle:G,exportRectangles:ln,toString:V,saveData:tn,resetData:D}}export{Kp as C,Yp as u};
