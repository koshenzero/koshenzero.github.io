import{r as f,j as a,n as E,o as p}from"./index-CBwSRH0u.js";import{T as _,B as $,Z as O,u as S,M as U,G as W,I as H}from"./index.esm-DRJBykmK.js";import{B as Y,j as G,c as Q,f as V,h as Z,e as J}from"./api-BlvfAFOo.js";import{F as X}from"./DefaultLayout-CtLS6zGp.js";import{g as w,a as ee,b as N,c as ae,s as se,d as R,_ as A,u as te,e as re,f as oe,h as ne,j as ie,k as le,A as D,T as h}from"./TextField-BAf3-FwL.js";import{C as u}from"./CCol-BaLHlZSt.js";import{b as ce,a as de}from"./index.es-E7Xj3oYN.js";import{C as I}from"./CRow-CHqr9wlR.js";import"./cil-user-Ddrdy7PS.js";function ue(r){return ee("MuiLink",r)}const me=w("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),pe=me,B={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},he=r=>B[r]||r,fe=({theme:r,ownerState:s})=>{const o=he(s.color),n=N(r,`palette.${o}`,!1)||s.color,c=N(r,`palette.${o}Channel`);return"vars"in r&&c?`rgba(${c} / 0.4)`:ae(n,.4)},be=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ge=r=>{const{classes:s,component:o,focusVisible:n,underline:c}=r,d={root:["root",`underline${R(c)}`,o==="button"&&"button",n&&"focusVisible"]};return le(d,ue,s)},xe=se(_,{name:"MuiLink",slot:"Root",overridesResolver:(r,s)=>{const{ownerState:o}=r;return[s.root,s[`underline${R(o.underline)}`],o.component==="button"&&s.button]}})(({theme:r,ownerState:s})=>A({},s.underline==="none"&&{textDecoration:"none"},s.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},s.underline==="always"&&A({textDecoration:"underline"},s.color!=="inherit"&&{textDecorationColor:fe({theme:r,ownerState:s})},{"&:hover":{textDecorationColor:"inherit"}}),s.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${pe.focusVisible}`]:{outline:"auto"}})),ye=f.forwardRef(function(s,o){const n=te({props:s,name:"MuiLink"}),{className:c,color:d="primary",component:i="a",onBlur:b,onFocus:g,TypographyClasses:x,underline:j="always",variant:y="inherit",sx:l}=n,e=re(n,be),{isFocusVisibleRef:t,onBlur:L,onFocus:C,ref:k}=oe(),[T,F]=f.useState(!1),z=ne(o,k),P=m=>{L(m),t.current===!1&&F(!1),b&&b(m)},q=m=>{C(m),t.current===!0&&F(!0),g&&g(m)},v=A({},n,{color:d,component:i,focusVisible:T,underline:j,variant:y}),K=ge(v);return a.jsx(xe,A({color:d,className:ie(K.root,c),classes:x,component:i,onBlur:P,onFocus:q,ref:z,ownerState:v,variant:y,sx:[...Object.keys(B).includes(d)?[]:[{color:d}],...Array.isArray(l)?l:[l]]},e))}),M=ye,Ne=({setToast:r})=>{const s=E(),o=p(e=>e.equipmentsBayList);p(e=>e.faLabelList);const n=p(e=>e.modelList),c=p(e=>e.areaList),d=p(e=>e.parkingList),[i,b]=f.useState({equipmentID:0,faLabelID:0,remark:"",areaID:0,parkingID:0});f.useEffect(()=>{Y().then(e=>{if(!e.error){s({type:"set",faLabelList:e.data.data});return}}),G("",0,0,1,1,1e4).then(e=>{s({type:"set",areaList:e.data.data})}),Q("",1,1,1e5).then(e=>{s({type:"set",parkingList:e.data.data})}),V("",1,1,1e4).then(e=>{if(!e.error){s({type:"set",modelList:e.data.data.data});return}})},[]);const g=f.useMemo(()=>[{accessorKey:"equipment_qr",header:"Equipment QR"},{accessorKey:"ModelName",header:"Equipment Model"},{accessorKey:"ChassisNo",header:"Chassis No"},{accessorKey:"AreaCode",header:"Current Bay"},{accessorKey:"BayTypeName",header:"Bay Type"},{accessorKey:"Date_In",header:"Parked date",Cell:({cell:e})=>a.jsx("span",{children:Z(e.getValue()).format("DD/MM/YYYY hh:mm")})},{accessorKey:"UserName_In",header:"Parked By"},{accessorKey:"FALabelName",header:"FA label",Cell:({cell:e})=>a.jsxs($,{display:"flex",alignItems:"center",p:2,sx:{borderRadius:1,width:80,height:30,color:"#fff",fontWeight:"bold",bgcolor:X[e.getValue()]},children:[e.getValue()," "]})},{accessorKey:"FALabelName",header:"Map",Cell:({cell:e})=>a.jsx(M,{href:"#",children:"View"})},{accessorKey:"FALabelName",header:"History",Cell:({cell:e})=>a.jsx(M,{href:"#",children:"View"})},{accessorKey:"Description",header:"Remark"}],[]),x=O({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),j=()=>{const e=W(x)(o);H(x)(e)},y=S({columns:g,data:o,enableColumnActions:!1,enableColumnFilters:!1,enableRowNumbers:!0,renderTopToolbarCustomActions:({table:e})=>a.jsx(de,{onClick:j,children:"Export"})}),l=e=>{const{name:t,value:L}=e.target;let C=L;L==-1&&(C=void 0),b({...i,[t]:C}),J("",i.equipmentID,i.parkingID,i.areaID,i.faLabelID,-100,1,1e4).then(k=>{if(!k.error){s({type:"set",equipmentsBayList:k.data.data});return}})};return a.jsxs(u,{children:[a.jsxs(ce,{style:{background:"#fff",padding:12,borderRadius:4,marginBottom:12},fluid:!0,children:[a.jsx(I,{className:"mb-3",children:a.jsx(u,{xs:12,children:a.jsx(D,{id:"size-small-standard",size:"small",options:d,getOptionLabel:e=>e.ParkingName,onChange:(e,t)=>{l({target:{value:t==null?void 0:t.ParkingID,name:"parkingID"}})},renderInput:e=>a.jsx(h,{...e,label:"Parking",placeholder:"Parking"})})})}),a.jsxs(I,{className:"mb-3",children:[a.jsx(u,{xs:6,children:a.jsx(D,{id:"size-small-standard",size:"small",options:[{AreaName:"All",AreaID:0},...c],getOptionLabel:e=>e.AreaName,onChange:(e,t)=>{l({target:{value:t==null?void 0:t.AreaID,name:"areaID"}})},renderInput:e=>a.jsx(h,{...e,label:"Department",placeholder:"Department"})})}),a.jsx(u,{xs:6,children:a.jsx(D,{id:"size-small-standard",size:"small",options:[{ModelName:"All",ModelID:0},...n],getOptionLabel:e=>e.ModelName,onChange:(e,t)=>{l({target:{value:t==null?void 0:t.ModelID,name:"equipmentID"}})},renderInput:e=>a.jsx(h,{...e,label:"Equipment model",placeholder:"Equipment model"})})})]}),a.jsxs(I,{children:[a.jsx(u,{xs:6,children:a.jsx(D,{xs:6,id:"size-small-standard",size:"small",options:[{FALabelName:"All",FALabelID:0},...n],getOptionLabel:e=>e.FALabelName,onChange:(e,t)=>{l({target:{value:t==null?void 0:t.FALabelID,name:"faLabelID"}})},renderInput:e=>a.jsx(h,{...e,label:"FA Label",placeholder:"Favorites"})})}),a.jsx(u,{xs:6,children:a.jsx(h,{label:"Remark",id:"outlined-size-small",size:"small",value:i.remark,fullWidth:!0,onChange:e=>{l({target:{value:e.target.value,name:"remark"}})}})})]})]}),a.jsx(U,{table:y})]})};export{Ne as default};
